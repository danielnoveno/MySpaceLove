import{u as L,a as s,j as e,H as A,L as C}from"./app-CpTrn_zj.js";import{A as _}from"./AuthenticatedLayout-Du1ilKJG.js";import{u as I}from"./useCurrentSpace-BBxOMrc3.js";import{I as G}from"./image-BS0ZLaAC.js";import{U as R}from"./upload-CA3uxEwT.js";import{A as W}from"./arrow-left-CR78xiT-.js";import"./ApplicationLogo-CIVcEVux.js";import"./transition-D8AHnLll.js";import"./createLucideIcon-C0075d5o.js";function O({item:i}){const c=I();if(!c)return null;const m=c.slug,p=c.title,{data:x,setData:f,post:M,processing:g,errors:l}=L({title:i.title||"",file:null,_method:"PUT"}),b=s.useRef(null),[d,z]=s.useState({x:0,y:0}),[S]=s.useState(()=>Array.from({length:30},()=>({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,size:Math.random()*14+8,opacity:Math.random()*.5+.2}))),[k,y]=s.useState(!1),[v,w]=s.useState(null),E=r=>{w(r),y(!0)},F=()=>{y(!1),w(null)};function H(r){r.preventDefault(),M(route("gallery.update",{space:m,id:i.id}),{forceFormData:!0})}return s.useEffect(()=>{const r=b.current;if(!r)return;const n=r.getContext("2d");if(!n)return;r.width=window.innerWidth,r.height=window.innerHeight;const u=[],P=(t,a)=>{u.push({x:t,y:a,size:Math.random()*8+10,dx:(Math.random()-.5)*2,dy:(Math.random()-.5)*2})},T=(t,a,h,o,$=.6)=>{t.save(),t.translate(a,h),t.scale(o/20,o/20),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(0,-3,-5,-15,-20,-15),t.bezierCurveTo(-55,-15,-55,22.5,-55,22.5),t.bezierCurveTo(-55,40,-35,62,0,80),t.bezierCurveTo(35,62,55,40,55,22.5),t.bezierCurveTo(55,22.5,55,-15,20,-15),t.bezierCurveTo(5,-15,0,-3,0,0),t.fillStyle=`rgba(34,197,94,${$})`,t.fill(),t.restore()},j=()=>{n.clearRect(0,0,r.width,r.height),u.forEach((t,a)=>{t.x+=t.dx,t.y+=t.dy,T(n,t.x,t.y,t.size),(t.x<0||t.y<0||t.x>r.width||t.y>r.height)&&u.splice(a,1)}),requestAnimationFrame(j)};j();const N=t=>{for(let o=0;o<2;o++)P(t.clientX,t.clientY);const a=window.innerWidth/2,h=window.innerHeight/2;z({x:(t.clientX-a)*.02,y:(t.clientY-h)*.02})};return window.addEventListener("mousemove",N),window.addEventListener("resize",()=>{r.width=window.innerWidth,r.height=window.innerHeight}),()=>{window.removeEventListener("mousemove",N)}},[]),e.jsxs(_,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{href:route("gallery.index",{space:m}),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:e.jsx(W,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Galeri"}),e.jsxs("p",{className:"text-gray-600",children:["Perbarui foto atau video untuk ",p]})]})]}),children:[e.jsx(A,{title:`Edit Galeri - ${p}`}),e.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 py-10 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[e.jsx("canvas",{ref:b,className:"absolute inset-0 w-full h-full pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:S.map((r,n)=>e.jsx("div",{className:"absolute text-green-400 select-none",style:{left:r.x,top:r.y,fontSize:r.size,opacity:r.opacity,transform:`translate3d(${d.x*.5}px, ${d.y*.5}px, 0)`,transition:"transform 0.2s ease-out"},children:"â™¥"},n))}),e.jsx("div",{className:"absolute inset-0 flex justify-center items-center pointer-events-none text-6xl opacity-20 select-none",style:{transform:`translate3d(${d.x}px, ${d.y}px, 0)`,transition:"transform 0.1s ease-out"},children:"ðŸ’š ðŸ’š ðŸ’š"}),e.jsx("div",{className:"relative max-w-3xl mx-auto",children:e.jsxs("form",{onSubmit:H,className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg border border-gray-100 p-8 md:p-10 relative z-10 space-y-8",children:[i.file_path&&e.jsxs("div",{className:"text-center relative",children:[e.jsx("img",{src:`/storage/${i.file_path}`,alt:"Current File",className:"w-96 h-60 object-cover rounded-xl shadow mx-auto cursor-pointer",onClick:()=>E(`/storage/${i.file_path}`)}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition rounded-xl flex items-center justify-center pointer-events-none",children:e.jsx(G,{className:"w-8 h-8 text-white opacity-0 hover:opacity-100 transition"})}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"File saat ini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Judul"}),e.jsx("input",{type:"text",value:x.title,onChange:r=>f("title",r.target.value),className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition text-gray-800"}),l.title&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Ganti File (Foto/Video)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-green-400 transition",children:[e.jsx(R,{className:"w-14 h-14 text-gray-400 mx-auto mb-4"}),e.jsx("input",{type:"file",onChange:r=>f("file",r.target.files?.[0]||null),className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer bg-green-500 text-white px-8 py-3 rounded-xl font-medium hover:bg-green-600 transition",children:"Pilih File Baru"}),x.file&&e.jsx("p",{className:"text-sm text-gray-600 mt-3",children:x.file.name})]}),l.file&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.file})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[e.jsx(C,{href:route("gallery.index",{space:m}),className:"flex-1 px-6 py-4 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition text-center font-medium",children:"Batal"}),e.jsx("button",{type:"submit",disabled:g,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:g?"Memperbarui...":"Perbarui"})]})]})}),k&&v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 transition-opacity duration-300",onClick:F,children:e.jsx("div",{className:"relative max-w-3xl max-h-full p-4",children:e.jsx("img",{src:v,alt:"Preview",className:"w-full h-auto rounded-xl shadow-lg transform transition-transform duration-300"})})})]})]})}export{O as default};
