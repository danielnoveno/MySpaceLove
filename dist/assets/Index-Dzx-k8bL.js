import{a as _,R as W,j as f,H as ye,L as B,r as K,b as U}from"./app-CpTrn_zj.js";import{u as F,A as we}from"./AuthenticatedLayout-Du1ilKJG.js";import{u as be,a as xe}from"./react-spring_web.modern-B08NpVkR.js";import{M as Se}from"./Modal-FzsqDD7X.js";import{T as H}from"./TextInput-DN1tdVVL.js";import{I as X}from"./InputLabel-7GwQvEtR.js";import{P as Te}from"./PrimaryButton-DyMDmQxC.js";import{S as Ie}from"./SecondaryButton-3cx58hwL.js";import{u as _e}from"./useCurrentSpace-BBxOMrc3.js";import"./ApplicationLogo-CIVcEVux.js";import"./transition-D8AHnLll.js";import"./createLucideIcon-C0075d5o.js";import"./index-2Py3zg4-.js";function z(t,r){return t.map(function(a,e){return a+r[e]})}function Y(t,r){return t.map(function(a,e){return a-r[e]})}function G(t){return Math.hypot.apply(Math,t)}function De(t,r,a){var e=G(r),n=e===0?0:1/e,i=a===0?0:1/a,o=i*e,s=r.map(function(l){return i*l}),c=r.map(function(l){return n*l}),u=G(t);return{velocities:s,velocity:o,distance:u,direction:c}}function $(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function Ee(t,r,a){return Math.max(r,Math.min(t,a))}function je(t,r){return Math.pow(t,r*5)}function q(t,r,a){return r===0||Math.abs(r)===1/0?je(t,a):t*r*a/(r+a*t)}function J(t,r,a,e){return e===void 0&&(e=.15),e===0?Ee(t,r,a):t<r?-q(r-t,a-r,e)+r:t>a?+q(t-a,a-r,e)+a:t}function Oe(t,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function Me(t,r,a){return r&&Oe(t.prototype,r),t}function m(){return m=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t},m.apply(this,arguments)}function ie(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}function Ce(t,r){if(t==null)return{};var a={},e=Object.keys(t),n,i;for(i=0;i<e.length;i++)n=e[i],!(r.indexOf(n)>=0)&&(a[n]=t[n]);return a}function I(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pe(t,r){if(t){if(typeof t=="string")return Q(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Q(t,r)}}function Q(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,e=new Array(r);a<r;a++)e[a]=t[a];return e}function N(t,r){var a;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(a=Pe(t))||r){a&&(t=a);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return a=t[Symbol.iterator](),a.next.bind(a)}function oe(){}function se(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.length===0?oe:r.length===1?r[0]:function(){for(var e,n=N(r),i;!(i=n()).done;){var o=i.value;e=o.apply(this,arguments)||e}return e}}function j(t,r){if(t===void 0){if(r===void 0)throw new Error("Must define fallback value if undefined is expected");t=r}return Array.isArray(t)?t:[t,t]}function Z(t){if(typeof t=="function"){for(var r=arguments.length,a=new Array(r>1?r-1:0),e=1;e<r;e++)a[e-1]=arguments[e];return t.apply(void 0,a)}else return t}function V(t,r){t===void 0&&(t={});for(var a={},e=0,n=Object.entries(r);e<n.length;e++){var i=n[e],o=i[0],s=i[1];switch(typeof s){case"function":a[o]=s.call(a,t[o],o,t);break;case"object":a[o]=V(t[o],s);break;case"boolean":s&&(a[o]=t[o]);break}}return a}function Le(){try{return"constructor"in GestureEvent}catch{return!1}}function ue(){return typeof window<"u"&&"ontouchstart"in window}function ke(){return typeof window<"u"&&"onpointerdown"in window}function ce(t){return"pointerId"in t?null:t.type==="touchend"?t.changedTouches:t.targetTouches}function le(t){return Array.from(ce(t)).map(function(r){return r.identifier})}function ee(t){var r="buttons"in t?t.buttons:0,a=t.shiftKey,e=t.altKey,n=t.metaKey,i=t.ctrlKey;return{buttons:r,shiftKey:a,altKey:e,metaKey:n,ctrlKey:i}}var Ae=function(r){return r};function te(t,r){r===void 0&&(r=Ae);var a=ce(t),e=a?a[0]:t,n=e.clientX,i=e.clientY;return r([n,i])}var Ne=180,Ke=.15,Re=.5,ze=50,Ge=250,$e={threshold:function(r){return r===void 0&&(r=0),j(r)},rubberband:function(r){switch(r===void 0&&(r=0),r){case!0:return j(Ke);case!1:return j(0);default:return j(r)}},enabled:function(r){return r===void 0&&(r=!0),r},triggerAllEvents:function(r){return r===void 0&&(r=!1),r},initial:function(r){return r===void 0&&(r=0),typeof r=="function"?r:j(r)},transform:!0},fe=m({},$e,{axis:!0,lockDirection:function(r){return r===void 0&&(r=!1),r},bounds:function(r){if(r===void 0&&(r={}),typeof r=="function")return function(p){return fe.bounds(r(p))};var a=r,e=a.left,n=e===void 0?-1/0:e,i=a.right,o=i===void 0?1/0:i,s=a.top,c=s===void 0?-1/0:s,u=a.bottom,l=u===void 0?1/0:u;return[[n,o],[c,l]]}}),Ye=typeof window<"u"&&window.document&&window.document.createElement,Ve={enabled:function(r){return r===void 0&&(r=!0),r},domTarget:!0,window:(function(t){function r(a){return t.apply(this,arguments)}return r.toString=function(){return t.toString()},r})(function(t){return t===void 0&&(t=Ye?window:void 0),t}),eventOptions:function(r){var a=r===void 0?{}:r,e=a.passive,n=e===void 0?!0:e,i=a.capture,o=i===void 0?!1:i;return{passive:n,capture:o}},transform:!0},We=m({},fe,{useTouch:function(r){r===void 0&&(r=!1);var a=ue(),e=ke();return!!(r&&a||a&&!e)},experimental_preventWindowScrollY:function(r){return r===void 0&&(r=!1),r},threshold:function(r,a,e){var n=e.filterTaps,i=n===void 0?!1:n,o=e.lockDirection,s=o===void 0?!1:o,c=e.axis,u=c===void 0?void 0:c,l=j(r,i?3:s||u?1:0);return this.filterTaps=i,l},swipeVelocity:function(r){return r===void 0&&(r=Re),j(r)},swipeDistance:function(r){return r===void 0&&(r=ze),j(r)},swipeDuration:function(r){return r===void 0&&(r=Ge),r},delay:function(r){switch(r===void 0&&(r=0),r){case!0:return Ne;case!1:return 0;default:return r}}});function Be(t){return t===void 0&&(t={}),V(t,Ve)}function Ue(t){return t===void 0&&(t={}),V(t,We)}function Fe(t){var r=t.domTarget,a=t.eventOptions,e=t.window,n=t.enabled,i=Ce(t,["domTarget","eventOptions","window","enabled"]),o=Be({domTarget:r,eventOptions:a,window:e,enabled:n});return o.drag=Ue(i),o}function L(t){return m({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_threshold:[0,0],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:oe,canceled:!1,memo:void 0,args:void 0},t)}function de(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},r=L({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),a=L({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),e=L({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),n=L({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=L({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:r,pinch:a,wheel:e,move:n,scroll:i}}var M=new Map,He=function(r){return r},Xe=(function(){function t(a,e){var n=this;e===void 0&&(e=[]),this.controller=a,this.args=e,this.debounced=!0,this.setTimeout=function(i,o){var s;o===void 0&&(o=140),clearTimeout(n.controller.timeouts[n.stateKey]);for(var c=arguments.length,u=new Array(c>2?c-2:0),l=2;l<c;l++)u[l-2]=arguments[l];n.controller.timeouts[n.stateKey]=(s=window).setTimeout.apply(s,[i,o].concat(u))},this.clearTimeout=function(){clearTimeout(n.controller.timeouts[n.stateKey])},this.fireGestureHandler=function(i){if(i===void 0&&(i=!1),n.state._blocked)return n.debounced||(n.state._active=!1,n.clean()),null;if(!i&&!n.state.intentional&&!n.config.triggerAllEvents)return null;if(n.state.intentional){var o=n.state.active,s=n.state._active;n.state.active=s,n.state.first=s&&!o,n.state.last=o&&!s,n.controller.state.shared[n.ingKey]=s}var c=n.controller.pointerIds.size||n.controller.touchIds.size,u=n.controller.state.shared.buttons>0||c>0,l=m({},n.controller.state.shared,n.state,n.mapStateValues(n.state),{locked:!!document.pointerLockElement,touches:c,down:u}),p=n.handler(l);return n.state.memo=p!==void 0?p:n.state.memo,l},this.controller=a,this.args=e}var r=t.prototype;return r.updateSharedState=function(e){Object.assign(this.controller.state.shared,e)},r.updateGestureState=function(e){Object.assign(this.state,e)},r.checkIntentionality=function(e,n){return{_intentional:e,_blocked:!1}},r.getMovement=function(e){var n=this.config.rubberband,i=this.state,o=i._bounds,s=i._initial,c=i._active,u=i._intentional,l=i.lastOffset,p=i.movement,h=i._threshold,g=this.getInternalMovement(e,this.state),S=u[0]===!1?re(g[0],h[0]):u[0],b=u[1]===!1?re(g[1],h[1]):u[1],D=this.checkIntentionality([S,b],g);if(D._blocked)return m({},D,{_movement:g,delta:[0,0]});var y=D._intentional,O=g,T=[y[0]!==!1?g[0]-y[0]:0,y[1]!==!1?g[1]-y[1]:0],C=z(T,l),v=c?n:[0,0];return T=ne(o,z(T,s),v),m({},D,{intentional:y[0]!==!1||y[1]!==!1,_initial:s,_movement:O,movement:T,values:e,offset:ne(o,C,v),delta:Y(T,p)})},r.clean=function(){this.clearTimeout()},Me(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}},{key:"transform",get:function(){return this.config.transform||this.controller.config.transform||He}}]),t})();function re(t,r){return Math.abs(t)>=r?$(t)*r:!1}function ne(t,r,a){var e=r[0],n=r[1],i=a[0],o=a[1],s=t[0],c=s[0],u=s[1],l=t[1],p=l[0],h=l[1];return[J(e,c,u,i),J(n,p,h,o)]}function R(t,r,a){var e=t.state,n=r.timeStamp,i=r.type,o=e.values,s=a?0:n-e.startTime;return{_lastEventType:i,event:r,timeStamp:n,elapsedTime:s,previous:o}}function qe(t,r,a,e){var n=t.state,i=t.config,o=t.stateKey,s=t.args,c=t.transform,u=n.offset,l=a.timeStamp,p=i.initial,h=i.bounds,g=i.threshold,S=Y(c(g),c([0,0])).map(Math.abs),b=m({},de()[o],{_active:!0,args:s,values:r,initial:r,_threshold:S,offset:u,lastOffset:u,startTime:l});return m({},b,{_initial:Z(p,b),_bounds:Z(h,b)})}var Je=function(r){var a=this;this.classes=r,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=ue(),this.supportsGestureEvents=Le(),this.bind=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var o={},s=N(a.classes),c;!(c=s()).done;){var u=c.value;new u(a,n).addBindings(o)}var l=function(g){x(o,g,function(S){return a.nativeRefs[g](m({},a.state.shared,{event:S,args:n}))})};for(var p in a.nativeRefs)l(p);return a.config.domTarget?nt(a,o):at(a,o)},this.effect=function(){return a.config.domTarget&&a.bind(),a.clean},this.clean=function(){var e=ve(a.config),n=a.config.eventOptions;e&&k(e,pe(a.domListeners),n),Object.values(a.timeouts).forEach(clearTimeout),et(a)},this.classes=r,this.state=de(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function Qe(t,r){"pointerId"in r?t.pointerIds.add(r.pointerId):t.touchIds=new Set(le(r))}function Ze(t,r){"pointerId"in r?t.pointerIds.delete(r.pointerId):le(r).forEach(function(a){return t.touchIds.delete(a)})}function et(t){var r=t.config,a=r.window,e=r.eventOptions,n=t.windowListeners;if(a){for(var i in n){var o=n[i];k(a,o,e)}t.windowListeners={}}}function tt(t,r,a){var e=t.config,n=t.windowListeners;a===void 0&&(a=e.eventOptions),e.window&&(k(e.window,n[r],a),delete n[r])}function rt(t,r,a,e){var n=t.config,i=t.windowListeners;a===void 0&&(a=[]),e===void 0&&(e=n.eventOptions),n.window&&(k(n.window,i[r],e),he(n.window,i[r]=a,e))}function nt(t,r){var a=t.config,e=t.domListeners,n=ve(a);if(!n)throw new Error("domTarget must be defined");var i=a.eventOptions;k(n,pe(e),i);for(var o=0,s=Object.entries(r);o<s.length;o++){var c=s[o],u=c[0],l=c[1],p=u.slice(2).toLowerCase();e.push([p,se.apply(void 0,l)])}he(n,e,i)}function at(t,r){for(var a=t.config,e={},n=a.eventOptions.capture?"Capture":"",i=0,o=Object.entries(r);i<o.length;i++){var s=o[i],c=s[0],u=s[1],l=Array.isArray(u)?u:[u],p=c+n;e[p]=se.apply(void 0,l)}return e}function pe(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function ve(t){var r=t.domTarget;return r&&"current"in r?r.current:r}function x(t,r,a){t[r]||(t[r]=[]),t[r].push(a)}function he(t,r,a){r===void 0&&(r=[]),a===void 0&&(a={});for(var e=N(r),n;!(n=e()).done;){var i=n.value,o=i[0],s=i[1];t.addEventListener(o,s,a)}}function k(t,r,a){r===void 0&&(r=[]),a===void 0&&(a={});for(var e=N(r),n;!(n=e()).done;){var i=n.value,o=i[0],s=i[1];t.removeEventListener(o,s,a)}}function it(t,r,a){a===void 0&&(a={});var e=st(t),n=W.useMemo(function(){return new Je(e)},[]);return n.config=r,n.handlers=t,n.nativeRefs=a,W.useEffect(n.effect,[]),n.config.domTarget?ot:n.bind}function ot(){}function st(t){var r=new Set;return t.drag&&r.add(M.get("drag")),t.wheel&&r.add(M.get("wheel")),t.scroll&&r.add(M.get("scroll")),t.move&&r.add(M.get("move")),t.pinch&&r.add(M.get("pinch")),t.hover&&r.add(M.get("hover")),r}var ut=(function(t){ie(r,t);function r(){return t.apply(this,arguments)||this}var a=r.prototype;return a.getInternalMovement=function(n,i){return Y(n,i.initial)},a.checkIntentionality=function(n,i){if(n[0]===!1&&n[1]===!1)return{_intentional:n,axis:this.state.axis};var o=i.map(Math.abs),s=o[0],c=o[1],u=this.state.axis||(s>c?"x":s<c?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:n,_blocked:!1,axis:u}:u?this.config.axis&&u!==this.config.axis?{_intentional:n,_blocked:!0,axis:u}:(n[u==="x"?1:0]=!1,{_intentional:n,_blocked:!1,axis:u}):{_intentional:[!1,!1],_blocked:!1,axis:u}},a.getKinematics=function(n,i){var o=this.getMovement(n);if(!o._blocked){var s=i.timeStamp-this.state.timeStamp;Object.assign(o,De(o.movement,o.delta,s))}return o},a.mapStateValues=function(n){return{xy:n.values,vxvy:n.velocities}},r})(Xe),ct=3;function ae(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}var lt=(function(t){ie(r,t);function r(){var e;return e=t.apply(this,arguments)||this,e.ingKey="dragging",e.stateKey="drag",e.setPointerCapture=function(n){if(!(e.config.useTouch||document.pointerLockElement)){var i=n.target,o=n.pointerId;i&&"setPointerCapture"in i&&i.setPointerCapture(o),e.updateGestureState({_dragTarget:i,_dragPointerId:o})}},e.releasePointerCapture=function(){if(!(e.config.useTouch||document.pointerLockElement)){var n=e.state,i=n._dragTarget,o=n._dragPointerId;if(o&&i&&"releasePointerCapture"in i&&(!("hasPointerCapture"in i)||i.hasPointerCapture(o)))try{i.releasePointerCapture(o)}catch{}}},e.preventScroll=function(n){e.state._dragPreventScroll&&n.cancelable&&n.preventDefault()},e.getEventId=function(n){return e.config.useTouch?n.changedTouches[0].identifier:n.pointerId},e.isValidEvent=function(n){return e.state._pointerId===e.getEventId(n)},e.shouldPreventWindowScrollY=e.config.experimental_preventWindowScrollY&&e.controller.supportsTouchEvents,e.setUpWindowScrollDetection=function(n){ae(n),rt(e.controller,e.stateKey,[["touchmove",e.preventScroll],["touchend",e.clean.bind(I(e))],["touchcancel",e.clean.bind(I(e))]],{passive:!1}),e.setTimeout(e.startDrag.bind(I(e)),250,n)},e.setUpDelayedDragTrigger=function(n){e.state._dragDelayed=!0,ae(n),e.setTimeout(e.startDrag.bind(I(e)),e.config.delay,n)},e.setStartState=function(n){var i=te(n,e.transform);e.updateSharedState(ee(n)),e.updateGestureState(m({},qe(I(e),i,n),R(I(e),n,!0),{_pointerId:e.getEventId(n)})),e.updateGestureState(e.getMovement(i))},e.onDragStart=function(n){Qe(e.controller,n),!(!e.enabled||e.state._active)&&(e.setStartState(n),e.setPointerCapture(n),e.shouldPreventWindowScrollY?e.setUpWindowScrollDetection(n):e.config.delay>0?e.setUpDelayedDragTrigger(n):e.startDrag(n,!0))},e.onDragChange=function(n){if(!(e.state.canceled||!e.state._active||!e.isValidEvent(n)||e.state._lastEventType===n.type&&n.timeStamp===e.state.timeStamp)){var i;if(document.pointerLockElement){var o=n.movementX,s=n.movementY;i=z(e.transform([o,s]),e.state.values)}else i=te(n,e.transform);var c=e.getKinematics(i,n);if(!e.state._dragStarted){if(e.state._dragDelayed){e.startDrag(n);return}if(e.shouldPreventWindowScrollY)if(!e.state._dragPreventScroll&&c.axis)if(c.axis==="x")e.startDrag(n);else{e.state._active=!1;return}else return;else return}var u=ee(n);e.updateSharedState(u);var l=R(I(e),n),p=G(c._movement),h=e.state._dragIsTap;h&&p>=ct&&(h=!1),e.updateGestureState(m({},l,c,{_dragIsTap:h})),e.fireGestureHandler()}},e.onDragEnd=function(n){if(Ze(e.controller,n),!!e.isValidEvent(n)&&(e.clean(),!!e.state._active)){e.state._active=!1;var i=e.state._dragIsTap,o=e.state.velocities,s=o[0],c=o[1],u=e.state.movement,l=u[0],p=u[1],h=e.state._intentional,g=h[0],S=h[1],b=e.config.swipeVelocity,D=b[0],y=b[1],O=e.config.swipeDistance,T=O[0],C=O[1],v=e.config.swipeDuration,w=m({},R(I(e),n),e.getMovement(e.state.values)),d=[0,0];w.elapsedTime<v&&(g!==!1&&Math.abs(s)>D&&Math.abs(l)>T&&(d[0]=$(s)),S!==!1&&Math.abs(c)>y&&Math.abs(p)>C&&(d[1]=$(c))),e.updateSharedState({buttons:0}),e.updateGestureState(m({},w,{tap:i,swipe:d})),e.fireGestureHandler(e.config.filterTaps&&i===!0)}},e.clean=function(){t.prototype.clean.call(I(e)),e.state._dragStarted=!1,e.releasePointerCapture(),tt(e.controller,e.stateKey)},e.onCancel=function(){e.state.canceled||(e.updateGestureState({canceled:!0,_active:!1}),e.updateSharedState({buttons:0}),setTimeout(function(){return e.fireGestureHandler()},0))},e.onClick=function(n){e.state._dragIsTap||n.stopPropagation()},e}var a=r.prototype;return a.startDrag=function(n,i){i===void 0&&(i=!1),!(!this.state._active||this.state._dragStarted)&&(i||this.setStartState(n),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())},a.addBindings=function(n){if(this.config.useTouch?(x(n,"onTouchStart",this.onDragStart),x(n,"onTouchMove",this.onDragChange),x(n,"onTouchEnd",this.onDragEnd),x(n,"onTouchCancel",this.onDragEnd)):(x(n,"onPointerDown",this.onDragStart),x(n,"onPointerMove",this.onDragChange),x(n,"onPointerUp",this.onDragEnd),x(n,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){var i=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";x(n,i,this.onClick)}},r})(ut);function ft(t,r){var a,e=[],n,i=!1;function o(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return i&&a===this&&r(c,e)||(n=t.apply(this,c),i=!0,a=this,e=c),n}return o}function A(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,e,n;if(Array.isArray(t)){if(a=t.length,a!==r.length)return!1;for(e=a;e--!==0;)if(!A(t[e],r[e]))return!1;return!0}var i;if(typeof Map=="function"&&t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(i=t.entries();!(e=i.next()).done;)if(!r.has(e.value[0]))return!1;for(i=t.entries();!(e=i.next()).done;)if(!A(e.value[1],r.get(e.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(i=t.entries();!(e=i.next()).done;)if(!r.has(e.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(n=Object.keys(t),a=n.length,a!==Object.keys(r).length)return!1;for(e=a;e--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[e]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(e=a;e--!==0;)if(!(n[e]==="_owner"&&t.$$typeof)&&!A(t[n[e]],r[n[e]]))return!1;return!0}return t!==t&&r!==r}function dt(t,r){try{return A(t,r)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}}function pt(t,r){r===void 0&&(r={}),M.set("drag",lt);var a=_.useRef();return a.current||(a.current=ft(Fe,dt)),it({drag:t},a.current(r))}const vt=({text:t,wordLimit:r,expandMoreLabel:a,expandLessLabel:e})=>{const[n,i]=_.useState(!1),o=t.split(" "),s=o.length>r,c=n?t:o.slice(0,r).join(" ")+(s?"...":"");return f.jsxs("div",{children:[f.jsx("p",{className:`mt-2 text-gray-700 text-justify ${n?"":"max-h-24 overflow-hidden"}`,dangerouslySetInnerHTML:{__html:c}}),s&&f.jsx("button",{onClick:()=>i(!n),className:"text-pink-600 hover:text-pink-800 text-sm mt-2",children:n?e:a})]})};function Ot({messages:t,filters:r}){const a=_e(),{translations:e}=F("daily_messages"),{t:n}=F("common");if(!a)return null;const i=a.slug,[o,s]=_.useState(!1),[c,u]=_.useState(r.search||""),[l,p]=_.useState(r.date||""),[h,g]=_.useState(null),S=async v=>{if(h!==null)return;const w=String(v.id);g(w);try{const E=(await U.post(route("daily.email",{space:i,id:v.id}))).data?.message??e.feedback?.email_sent??"Daily message sent to your partner's email!";window.alert(E)}catch(d){let E=e.feedback?.email_failed??"Could not send email. Please try again later.";if(U.isAxiosError(d)){const P=e.feedback?.email_partner_missing??"Connect your partner and make sure their email is available before sending.";d.response?.status===422?E=d.response.data?.error??P:typeof d.response?.data?.error=="string"&&(E=d.response.data.error)}window.alert(E)}finally{g(null)}},b=v=>v.replace(/<[^>]*>/g,"").replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"').replace(/\*(.*?)\*/g,"<strong>$1</strong>"),D=_.useRef(null),y=_.useRef(t.map(()=>({x:0,y:0}))).current,[O,T]=be(t.length,v=>({x:y[v].x,y:y[v].y,zIndex:1,config:{mass:1,tension:280,friction:60}})),C=pt(({args:[v],down:w,movement:[d,E]})=>{y[v]={x:d,y:E},T.start(P=>{if(v!==P)return;const ge=w?d:y[P].x,me=w?E:y[P].y;return{x:ge,y:me,zIndex:w?1e3:1,immediate:w}})});return f.jsxs(we,{header:f.jsx("h2",{className:"font-semibold text-xl text-gray-800",children:e.header??"Daily Message"}),children:[f.jsx(ye,{title:e.meta?.title??"Daily Messages"}),f.jsxs("div",{className:"p-6 space-y-6 max-w-8xl mx-auto",children:[f.jsxs("div",{className:"p-4 flex justify-between items-center",children:[f.jsx("h3",{className:"text-lg font-bold text-pink-700",children:e.title??"Pesan Harian Kita 💌"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>s(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow-md transition duration-200",children:e.actions?.search??"Cari Pesan"}),f.jsx(B,{href:route("daily.create",{space:i}),className:"bg-pink-600 hover:bg-pink-700 text-white px-4 py-2 rounded-lg shadow-md transition duration-200",children:e.actions?.add_manual??"+ Tambah Manual"})]})]}),t.length===0?f.jsx("p",{className:"text-gray-500 text-center py-8",children:e.empty??"Belum ada pesan harian. AI akan generate otomatis! ✨"}):f.jsx("div",{ref:D,className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:O.map(({x:v,y:w},d)=>_.createElement(xe.div,{...C(d),key:t[d].id,style:{x:v,y:w,zIndex:O[d].zIndex,touchAction:"none"},className:"p-4 bg-white shadow-md rounded-xl border border-gray-100 hover:shadow-xl transition duration-200 cursor-grab active:cursor-grabbing"},f.jsx("h4",{className:"font-semibold text-gray-800",children:t[d].date}),f.jsx(vt,{text:b(`"${t[d].message}"`),wordLimit:50,expandMoreLabel:e.expand?.more??"Baca selengkapnya",expandLessLabel:e.expand?.less??"Baca lebih sedikit"}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsx(B,{href:route("daily.edit",{space:i,id:t[d].id}),className:"px-3 py-1 text-sm rounded-lg bg-yellow-500 hover:bg-yellow-600 text-white transition",children:n("actions.edit","Edit")}),f.jsx("button",{onClick:()=>K.post(route("daily.regenerate",{space:i}),{date:t[d].date}),className:"px-3 py-1 text-sm rounded-lg bg-green-500 hover:bg-green-600 text-white transition",children:e.actions?.regenerate_ai??n("actions.regenerate","Regenerate AI")}),f.jsx("button",{type:"button",onClick:()=>void S(t[d]),className:`px-3 py-1 text-sm rounded-lg bg-blue-500 text-white transition hover:bg-blue-600 ${h===String(t[d].id)?"opacity-70 cursor-not-allowed":""}`,disabled:h===String(t[d].id),children:e.actions?.send_email??n("actions.send_email","Send to Email")})]})))}),f.jsx(Se,{show:o,onClose:()=>s(!1),children:f.jsxs("form",{onSubmit:v=>{v.preventDefault(),K.get(route("daily.index",{space:i}),{search:c,date:l},{preserveState:!0,replace:!0,onSuccess:()=>s(!1)})},className:"p-6",children:[f.jsx("h2",{className:"text-lg font-medium text-gray-900",children:e.modal?.title??"Cari Pesan Harian"}),f.jsxs("div",{className:"mt-6",children:[f.jsx(X,{htmlFor:"searchKeyword",value:e.modal?.keyword??"Kata Kunci"}),f.jsx(H,{id:"searchKeyword",type:"text",className:"mt-1 block w-full",value:c,onChange:v=>u(v.target.value)})]}),f.jsxs("div",{className:"mt-4",children:[f.jsx(X,{htmlFor:"searchDate",value:e.modal?.date??"Tanggal (YYYY-MM-DD)"}),f.jsx(H,{id:"searchDate",type:"date",className:"mt-1 block w-full",value:l,onChange:v=>p(v.target.value)})]}),f.jsxs("div",{className:"mt-6 flex justify-end",children:[f.jsx(Ie,{onClick:()=>{u(""),p(""),K.get(route("daily.index",{space:i}),{},{preserveState:!0,replace:!0,onSuccess:()=>s(!1)})},children:n("actions.clear","Clear")}),f.jsx(Te,{className:"ms-3",type:"submit",children:e.actions?.search??"Cari"})]})]})})]})]})}export{Ot as default};
