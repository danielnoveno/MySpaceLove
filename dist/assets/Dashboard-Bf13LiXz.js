import{c as U,a as o,j as e,H as J,L as h,b as w}from"./app-CpTrn_zj.js";import{u as P,A as K,L as S}from"./AuthenticatedLayout-Du1ilKJG.js";import{C as v}from"./calendar-DXMR76L4.js";import{I as q}from"./image-BS0ZLaAC.js";import{c as A}from"./createLucideIcon-C0075d5o.js";import{H as L}from"./heart-Bwdc_jE9.js";import{M as X}from"./music-WaR_5EFZ.js";import{B as Y}from"./book-open-DhUg3D_W.js";import{V as $}from"./video-fqhApsk7.js";import{X as T}from"./x-B-eKawcc.js";import{G as Q}from"./gift-BiEUzxEw.js";import{C as W}from"./clock-TF7sowUU.js";import"./ApplicationLogo-CIVcEVux.js";import"./transition-D8AHnLll.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],E=A("message-square",Z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],se=A("user-plus",ee),H=(c,x)=>Object.entries(x).reduce((j,[d,n])=>j.replace(new RegExp(`:${d}`,"g"),String(n)),c);function he({dashboardData:c,spaceContext:x}){const{props:j}=U(),d=j.currentSpace??x,n=d.slug,_=d.title,M=d.has_partner??x.has_partner??!1,B=d.is_owner??x.is_owner??!1,i=!M,{translations:t}=P("dashboard"),{t:m}=P("common"),p=t.locks?.requires_partner??"Hubungkan pasanganmu terlebih dahulu untuk membuka fitur ini.",[f,F]=o.useState(null),[I,y]=o.useState(!1),[C,V]=o.useState({}),[z,u]=o.useState(!1),b=o.useCallback(s=>{i&&(s.preventDefault(),u(!0))},[i,u]),D=o.useMemo(()=>f?f.split(/(\*[^*]+\*)/g).map((a,r)=>{const g=a.match(/^\*([^*]+)\*$/);return g?e.jsx("strong",{className:"font-semibold text-pink-500",children:g[1]},`bold-${r}`):e.jsx(o.Fragment,{children:a},`text-${r}`)}):null,[f]),N=o.useCallback(s=>{typeof s!="string"||s.trim()===""||(F(s),y(!0))},[]),k=o.useCallback(s=>typeof s=="string"?s:s&&typeof s=="object"&&"message"in s&&typeof s.message=="string"?s.message:null,[]);o.useEffect(()=>{(async()=>{try{const a=await w.get(route("api.spaces.daily-message",{space:n})),r=k(a.data?.message);if(a.status===200&&r){N(r);return}}catch(a){if(w.isAxiosError(a)&&a.response?.status===404)try{const r=await w.post(route("api.spaces.daily-message.regenerate",{space:n})),g=k(r.data?.message);r.status===200&&g&&N(g)}catch(r){console.error("Error regenerating daily message:",r)}else console.error("Error fetching daily message:",a)}})()},[k,N,n]);const l=t.cards?.quick_actions,O=o.useMemo(()=>[{icon:v,label:l?.add_moment?.label??"Tambah Momen",description:l?.add_moment?.description??"Catat momen spesial",href:route("timeline.index",{space:n}),color:"from-pink-500 to-rose-500",requiresPartner:!0},{icon:q,label:l?.upload_photo?.label??"Upload Foto",description:l?.upload_photo?.description??"Simpan kenangan",href:route("gallery.index",{space:n}),color:"from-blue-500 to-cyan-500",requiresPartner:!0},{icon:E,label:l?.daily_message?.label??"Pesan Harian",description:l?.daily_message?.description??"Lihat pesan cinta",href:route("daily.index",{space:n}),color:"from-purple-500 to-indigo-500",requiresPartner:!0},{icon:L,label:l?.memory_lane?.label??"Memory Lane Kit",description:l?.memory_lane?.description??"Panduan surprise 3 tahap + storybook",href:route("surprise.memory.space",{space:n}),color:"from-fuchsia-500 to-violet-500",requiresPartner:!0},{icon:X,label:l?.spotify?.label??"Spotify Companion",description:l?.spotify?.description??"Sinkronisasi musik & mood jarak jauh",href:route("spotify.companion",{space:n}),color:"from-emerald-500 to-teal-500",requiresPartner:!0},{icon:Y,label:l?.journal?.label??"Tulis Journal",description:l?.journal?.description??"Ekspresikan perasaan",href:route("journal.index",{space:n}),color:"from-green-500 to-emerald-500",requiresPartner:!0},{icon:$,label:l?.nobar?.label??"Masuk Nobar",description:l?.nobar?.description??"Mulai nonton bareng",href:route("space.nobar",{space:n}),color:"from-red-500 to-orange-500",requiresPartner:!0}],[l,n]),R=o.useMemo(()=>c.recentMessages.slice(0,3),[c.recentMessages]),G=o.useCallback(s=>{V(a=>({...a,[s]:!a[s]}))},[]);return e.jsxs(K,{header:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:t.header?.subtitle??"Space kamu bersama pasangan"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_})]}),children:[e.jsx(J,{title:H(t.meta?.title??"Dashboard - :space",{space:_})}),I&&f&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/30 px-4",onClick:()=>y(!1),children:e.jsxs("div",{className:"relative w-full max-w-lg rounded-3xl bg-white p-8 shadow-2xl",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"absolute right-4 top-4 text-gray-400 transition hover:text-gray-600","aria-label":m("actions.close","Tutup"),children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-pink-100",children:e.jsx(L,{className:"h-8 w-8 text-pink-500"})}),e.jsx("h3",{className:"mt-4 text-center text-xl font-semibold text-gray-900",children:t.modals?.daily_message?.title??"Pesan Cinta Hari Ini"}),e.jsx("p",{className:"mt-3 text-center text-sm leading-relaxed text-gray-600",children:D})]})}),z&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/30 px-4",onClick:()=>u(!1),children:e.jsxs("div",{className:"relative w-full max-w-sm rounded-3xl bg-white p-8 text-center shadow-2xl",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"absolute right-4 top-4 text-gray-400 transition hover:text-gray-600","aria-label":m("actions.close","Tutup"),children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-pink-100",children:e.jsx(S,{className:"h-8 w-8 text-pink-500"})}),e.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:t.modals?.locked?.title??"Fitur Terkunci"}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-gray-600",children:p}),e.jsx("button",{type:"button",onClick:()=>u(!1),className:"mt-6 inline-flex items-center justify-center rounded-full bg-pink-500 px-6 py-2 text-sm font-semibold text-white transition hover:bg-pink-600",children:t.modals?.locked?.action??m("actions.understand","Mengerti")})]})}),e.jsxs("div",{className:"mx-auto flex max-w-7xl flex-col gap-8 px-4 py-4",children:[!M&&B&&e.jsx("div",{className:"rounded-3xl border border-dashed border-indigo-200 bg-indigo-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-indigo-100",children:e.jsx(se,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-indigo-900",children:t.cards?.partner_pending?.title??"Pasangan belum terhubung"}),e.jsx("p",{className:"mt-1 text-sm text-indigo-700",children:t.cards?.partner_pending?.description??"Ajak pasanganmu bergabung agar kalian bisa menikmati semua fitur berdua."})]})]}),e.jsx(h,{href:route("spaces.index"),className:"inline-flex items-center justify-center rounded-full bg-indigo-600 px-5 py-2 text-sm font-semibold text-white transition hover:bg-indigo-700",children:t.cards?.partner_pending?.cta??"Hubungkan Pasangan"})]})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsx("div",{className:"rounded-3xl bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-pink-100",children:e.jsx(v,{className:"h-5 w-5 text-pink-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:t.cards?.timeline_total??"Total Timeline"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c.timelineCount})]})]})}),e.jsx("div",{className:"rounded-3xl bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100",children:e.jsx(q,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:t.cards?.gallery_total??"Foto & Video"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c.galleryCount})]})]})}),e.jsx("div",{className:"rounded-3xl bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/20",children:e.jsx(Q,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-100",children:t.cards?.location_share?.title??"Berbagi Lokasi"}),e.jsxs(h,{href:route("location.map",{space:n}),onClick:i?b:void 0,title:i?p:void 0,"aria-disabled":i,className:`mt-1 inline-flex items-center gap-2 rounded-full px-4 py-1 text-sm font-medium text-white transition ${i?"cursor-not-allowed bg-white/10 opacity-60":"bg-white/20 hover:bg-white/30"}`,children:[t.cards?.location_share?.cta??"Buka Peta",e.jsx($,{className:"h-4 w-4"})]})]})]})})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.cards?.quick_actions?.title??"Aksi Cepat"}),e.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5",children:O.map((s,a)=>{const r=i&&s.requiresPartner;return e.jsxs(h,{href:s.href,onClick:r?b:void 0,title:r?p:void 0,"aria-disabled":r,className:`group relative rounded-2xl border border-gray-100 bg-white p-6 shadow-sm transition ${r?"cursor-not-allowed opacity-60":"hover:border-transparent hover:shadow-lg"}`,children:[e.jsx("div",{className:`mb-3 w-fit rounded-xl bg-gradient-to-r ${s.color} p-3 transition-transform ${r?"":"group-hover:scale-110"}`,children:e.jsx(s.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.label,r&&e.jsxs("span",{className:"inline-flex items-center justify-center rounded-full bg-pink-100 px-2 py-0.5 text-xs font-semibold text-pink-500",children:[e.jsx(S,{className:"h-3 w-3"}),m("states.locked","Terkunci")]})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s.description})]},a)})})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-orange-100 bg-white p-6 shadow-sm",children:[e.jsxs("h2",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-gray-900",children:[e.jsx(v,{className:"h-5 w-5 text-orange-500"}),t.cards?.upcoming_events?.title??"Event Mendatang"]}),e.jsxs("div",{className:"space-y-3",children:[c.upcomingEvents.length===0&&e.jsx("p",{className:"rounded-2xl border border-dashed border-orange-200 bg-orange-50 p-4 text-sm text-orange-600",children:t.cards?.upcoming_events?.empty??"Belum ada event yang dijadwalkan. Yuk buat countdown pertama kalian!"}),c.upcomingEvents.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-orange-100 bg-orange-50 p-3",children:[e.jsx("div",{className:"rounded-xl bg-white p-2",children:e.jsx(W,{className:"h-5 w-5 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.event_name}),e.jsx("p",{className:"text-xs text-orange-600",children:H(t.cards?.upcoming_events?.days_left??":count hari lagi",{count:s.days_left})})]})]},a))]}),e.jsx(h,{href:route("countdown.index",{space:n}),onClick:i?b:void 0,title:i?p:void 0,"aria-disabled":i,className:`mt-4 block text-center text-sm font-medium transition ${i?"cursor-not-allowed text-orange-300":"text-orange-600 hover:text-orange-700"}`,children:t.cards?.upcoming_events?.view_all??m("actions.view_all","Lihat Semua")})]}),e.jsxs("div",{className:"rounded-3xl border border-purple-100 bg-white p-6 shadow-sm",children:[e.jsxs("h2",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-gray-900",children:[e.jsx(E,{className:"h-5 w-5 text-purple-500"}),t.cards?.recent_messages?.title??"Pesan Terbaru"]}),e.jsxs("div",{className:"space-y-3",children:[c.recentMessages.length===0&&e.jsx("p",{className:"rounded-2xl border border-dashed border-purple-200 bg-purple-50 p-4 text-sm text-purple-600",children:t.cards?.recent_messages?.empty??"Belum ada pesan terbaru. Coba tulis pesan spesial untuk pasanganmu!"}),R.map((s,a)=>e.jsxs("div",{className:"rounded-2xl border border-purple-100 bg-purple-50 p-4",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[C[a]||s.message.length<=120?`"${s.message}"`:`"${s.message.slice(0,120)}…"`," "]}),s.message.length>120&&e.jsx("button",{type:"button",onClick:()=>G(a),className:"mt-3 text-xs font-medium text-purple-600 transition hover:text-purple-700",children:C[a]?t.cards?.recent_messages?.show_less??"Sembunyikan":t.cards?.recent_messages?.show_more??"Baca selengkapnya"}),e.jsx("p",{className:"mt-3 text-xs text-purple-500",children:s.date})]},`${s.date}-${a}`))]}),e.jsx(h,{href:route("daily.index",{space:n}),onClick:i?b:void 0,title:i?p:void 0,"aria-disabled":i,className:`mt-4 block text-center text-sm font-medium transition ${i?"cursor-not-allowed text-purple-300":"text-purple-600 hover:text-purple-700"}`,children:t.cards?.recent_messages?.view_all??m("actions.view_all","Lihat Semua")})]})]})]})]})}export{he as default};
