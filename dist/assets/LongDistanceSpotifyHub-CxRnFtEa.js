import{a as t,b as f,j as e,H as xe}from"./app-CpTrn_zj.js";import{M as ae}from"./Modal-FzsqDD7X.js";import{A as be}from"./AuthenticatedLayout-Du1ilKJG.js";import{M as te}from"./music-WaR_5EFZ.js";import{c as F}from"./createLucideIcon-C0075d5o.js";import{H as he}from"./heart-Bwdc_jE9.js";import{C as fe}from"./clock-TF7sowUU.js";import{S as A}from"./sparkles-BbA2MjWt.js";import{C as ge}from"./calendar-DXMR76L4.js";import"./transition-D8AHnLll.js";import"./index-2Py3zg4-.js";import"./ApplicationLogo-CIVcEVux.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],ye=F("headphones",je);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ne=F("loader-circle",ke);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],we=F("play",ve);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Se=F("users",_e);function re(r){const i=r.trim();if(!i)return null;if(i.startsWith("spotify:track:"))return i.split(":").pop()??null;try{const d=new URL(i);if(d.hostname.includes("spotify.com")){const u=d.pathname.split("/").filter(Boolean),N=u.findIndex(v=>v==="track");if(N!==-1&&u[N+1])return u[N+1]}}catch{}return/^[a-zA-Z0-9]{10,}$/.test(i)?i:null}function le(r){return typeof r!="number"||Number.isNaN(r)?"0%":`${Math.round(r*100)}%`}function J(r){return r?new Date(r).toLocaleString("id-ID",{weekday:"long",hour:"2-digit",minute:"2-digit"}):"-"}function ne(r){return r?new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-"}function Ge({space:r}){const[i,d]=t.useState(null),[u,N]=t.useState(!0),[v,D]=t.useState(null),[L,U]=t.useState(null),[H,p]=t.useState(null),[ie,T]=t.useState(!1),[oe,I]=t.useState(!1),[w,E]=t.useState({trackInput:"",scheduledFor:"",note:""}),[x,S]=t.useState({trackInput:"",moment:"",description:"",savedAt:""}),[P,K]=t.useState(!1),[B,O]=t.useState(!1),[q,b]=t.useState(null),[W,h]=t.useState(null),[X,Z]=t.useState(!1),Q=route("spotify.authorize",{space:r.slug,redirect:route("spotify.companion",{space:r.slug})}),g=t.useCallback(()=>{window.location.href=Q},[Q]),_=t.useCallback(async()=>{N(!0),D(null);try{const s=await f.get(route("spotify.dashboard",{space:r.slug}));d(s.data);const a=s.data.moods?.[0];U(a?.id??null)}catch(s){if(f.isAxiosError(s)){const a=s.response?.data;d(a||null);const o=typeof s.response?.data=="object"&&s.response?.data!==null&&"message"in s.response.data?(s.response?.data).message:void 0;D(o??s.message??"Gagal memuat data Spotify.")}else s instanceof Error?(D(s.message),d(null)):(D("Gagal memuat data Spotify."),d(null))}finally{N(!1)}},[r.slug]),de=async s=>{if(s.preventDefault(),P)return;b(null);const a=re(w.trackInput);if(!a){b("Masukkan tautan atau ID lagu Spotify yang valid.");return}K(!0);try{const k=(await f.post(route("spotify.surprises.store",{space:r.slug}),{spotify_track_id:a,scheduled_for:w.scheduledFor,note:w.note||null})).data;d(m=>{if(!m)return m;const R=[...m.surpriseDrops??[],k].sort((C,M)=>{const z=C.scheduled_for?new Date(C.scheduled_for).getTime():Number.MAX_SAFE_INTEGER,se=M.scheduled_for?new Date(M.scheduled_for).getTime():Number.MAX_SAFE_INTEGER;return z-se});return{...m,surpriseDrops:R}}),E({trackInput:"",scheduledFor:"",note:""}),T(!1),p({type:"success",message:"Lagu kejutan berhasil dijadwalkan!"})}catch(o){if(f.isAxiosError(o)){const k=o.response?.data?.message;b(k??"Gagal menjadwalkan lagu kejutan. Coba lagi.")}else o instanceof Error?b(o.message):b("Gagal menjadwalkan lagu kejutan. Coba lagi.")}finally{K(!1)}},ce=async s=>{if(s.preventDefault(),B)return;h(null);const a=re(x.trackInput);if(!a){h("Masukkan tautan atau ID lagu Spotify yang valid.");return}O(!0);try{const k=(await f.post(route("spotify.capsules.store",{space:r.slug}),{spotify_track_id:a,moment:x.moment||null,description:x.description||null,saved_at:x.savedAt||null})).data;d(m=>{if(!m)return m;const R=[...m.memoryCapsules??[],k].sort((C,M)=>{const z=C.saved_at?new Date(C.saved_at).getTime():0;return(M.saved_at?new Date(M.saved_at).getTime():0)-z});return{...m,memoryCapsules:R}}),S({trackInput:"",moment:"",description:"",savedAt:""}),I(!1),p({type:"success",message:"Kapsul memori berhasil disimpan!"})}catch(o){if(f.isAxiosError(o)){const k=o.response?.data?.message;h(k??"Gagal menyimpan kapsul memori. Coba lagi.")}else o instanceof Error?h(o.message):h("Gagal menyimpan kapsul memori. Coba lagi.")}finally{O(!1)}};t.useEffect(()=>{_()},[_]);const l=i?.playlist??null,n=i?.listening??null,G=t.useMemo(()=>{if(!l?.playlist_id)return null;const s=new URLSearchParams({utm_source:"myspacelove",theme:"0"});return`https://open.spotify.com/embed/playlist/${encodeURIComponent(l.playlist_id)}?${s.toString()}`},[l?.playlist_id]),$=t.useMemo(()=>{if(!n?.track_id)return null;const s=new URLSearchParams({utm_source:"myspacelove"});return`https://open.spotify.com/embed/track/${encodeURIComponent(n.track_id)}?${s.toString()}`},[n?.track_id]),V=t.useMemo(()=>l?.sample_tracks?.length?l.sample_tracks.slice(0,3):[],[l?.sample_tracks]),j=i?.moods??[],y=t.useMemo(()=>j.length?L?j.find(s=>s.id===L)??j[0]:j[0]:null,[j,L]),Y=i?.surpriseDrops??[],ee=i?.memoryCapsules??[],c=i?.connected??!1,me=t.useCallback(async()=>{if(!c){g();return}if(!n?.joinable||!n.track_id){p({type:"error",message:"Tidak ada sesi playback yang bisa diikuti saat ini."});return}Z(!0),p(null);try{await f.post(route("spotify.playback.join",{space:r.slug}),{track_id:n.track_id,position_ms:n.progress_ms??0}),p({type:"success",message:"Playback kamu sudah sinkron dengan sesi live."})}catch(s){if(f.isAxiosError(s)){const a=s.response?.data?.message;p({type:"error",message:a??"Gagal gabung playback. Pastikan Spotify-mu sedang aktif."})}else s instanceof Error?p({type:"error",message:s.message}):p({type:"error",message:"Gagal gabung playback. Coba ulang sebentar lagi."})}finally{Z(!1)}},[g,c,n,r.slug]),ue=t.useCallback(()=>{if(!c){g();return}b(null),T(!0)},[g,c]),pe=t.useCallback(()=>{if(!c){g();return}h(null),I(!0)},[g,c]);return e.jsxs(be,{header:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Spotify Companion Kit"}),e.jsxs("p",{className:"text-sm text-purple-600",children:["Ruang ",r.title,": sinkronkan musik, mood, dan momen kalian biar tetap dekat walau terpisah jarak."]})]}),children:[e.jsx(xe,{title:"Spotify Companion Kit"}),e.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10 px-4 sm:px-6",children:[H&&e.jsx("div",{className:`rounded-3xl border p-4 text-sm ${H.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-rose-200 bg-rose-50 text-rose-700"}`,children:H.message}),!c&&!u&&e.jsx("section",{className:"rounded-3xl border border-purple-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Hubungkan Spotify"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Sambungkan akun Spotify kalian untuk menyalakan playlist sinkron, mood check-in, dan kejutan lagu."}),v&&e.jsx("p",{className:"text-sm text-rose-500",children:v})]}),e.jsxs("button",{type:"button",onClick:g,className:"inline-flex items-center justify-center gap-2 rounded-full bg-purple-600 px-5 py-2 text-sm font-semibold text-white shadow transition hover:bg-purple-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-300 focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:[e.jsx(te,{className:"h-4 w-4"}),"Hubungkan Spotify"]})]})}),u&&e.jsx("section",{className:"flex items-center justify-center rounded-3xl border border-purple-200 bg-white p-8 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3 text-purple-600",children:[e.jsx(Ne,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{className:"text-sm font-medium",children:"Memuat data Spotify..."})]})}),v&&c&&!u&&e.jsxs("section",{className:"rounded-3xl border border-rose-200 bg-rose-50 p-6 text-sm text-rose-700 shadow-sm",children:[v,e.jsx("button",{type:"button",onClick:()=>void _(),className:"mt-4 inline-flex items-center justify-center rounded-full bg-rose-500 px-4 py-2 text-xs font-semibold text-white hover:bg-rose-600",children:"Coba Muat Ulang"})]}),c&&!u&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"grid gap-5 rounded-3xl border border-purple-200 bg-purple-50 p-6 shadow-sm md:grid-cols-[1.2fr_1fr]",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-white p-2 text-purple-500 shadow-sm",children:e.jsx(te,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-800",children:"Playlist Sinkron"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Playlist otomatis update tiap kalian tambah lagu favorit minggu ini."})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-400",children:"Total lagu"}),e.jsx("p",{className:"text-2xl font-semibold text-purple-800",children:l?.total_tracks??0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-400",children:"Tambahan minggu ini"}),e.jsxs("p",{className:"text-xl font-semibold text-purple-700",children:["+",l?.new_this_week??0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-400",children:"Energi rata-rata"}),e.jsx("p",{className:"text-xl font-semibold text-purple-700",children:le(l?.average_energy)})]})]}),l?.last_added&&e.jsxs("div",{className:"mt-5 rounded-2xl border border-purple-100 bg-purple-50 p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-purple-400",children:"Lagu terbaru"}),e.jsxs("div",{className:"mt-2 flex flex-col gap-1 text-sm text-purple-800",children:[e.jsx("span",{className:"font-semibold",children:l.last_added.title}),e.jsx("span",{className:"text-purple-500",children:l.last_added.artists.join(", ")}),l.last_added.added_at&&e.jsxs("span",{className:"text-xs text-purple-400",children:["Ditambah ",J(l.last_added.added_at)]})]})]}),l?.external_url&&e.jsx("a",{href:l.external_url,target:"_blank",rel:"noopener",className:"mt-5 inline-flex items-center justify-center rounded-full bg-purple-600 px-4 py-2 text-xs font-semibold text-white hover:bg-purple-700",children:"Buka di Spotify"})]}),V.length>0&&e.jsxs("div",{className:"rounded-2xl bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.28em] text-purple-400",children:"Dengarkan cuplikan favorit"}),e.jsx("div",{className:"mt-4 space-y-3",children:V.map(s=>e.jsxs("div",{className:"rounded-2xl border border-purple-100 bg-purple-50/70 p-4 shadow-inner",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-purple-800",children:s.name}),e.jsx("p",{className:"text-xs text-purple-500",children:s.artists.join(", ")})]}),s.added_at&&e.jsxs("span",{className:"rounded-full bg-white px-3 py-1 text-xs font-semibold text-purple-500 shadow-sm",children:["Ditambahkan ",ne(s.added_at)]})]}),e.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[s.preview_url?e.jsx("audio",{className:"w-full",controls:!0,preload:"none",src:s.preview_url,children:"Browser kamu tidak mendukung audio HTML5."}):e.jsx("p",{className:"text-xs text-purple-500",children:"Preview tidak tersedia, buka di Spotify untuk memutar penuh."}),s.external_url&&e.jsx("a",{href:s.external_url,target:"_blank",rel:"noopener",className:"inline-flex items-center justify-center rounded-full border border-purple-200 px-3 py-1 text-xs font-semibold text-purple-600 transition hover:border-purple-300 hover:text-purple-700",children:"Buka di Spotify"})]})]},s.id))})]})]}),e.jsxs("div",{className:"space-y-4 rounded-2xl bg-white p-5 shadow-sm",children:[G?e.jsx("div",{className:"overflow-hidden rounded-xl border border-purple-100 shadow-inner",children:e.jsx("iframe",{src:G,width:"100%",height:"352",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify playlist embed"},G)}):e.jsx("p",{className:"rounded-xl border border-dashed border-purple-200 bg-purple-50/80 p-4 text-sm text-purple-500",children:"Hubungkan Spotify untuk memutar playlist langsung tanpa meninggalkan halaman ini."}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-400",children:"Progress Weekly Mix"}),e.jsxs("span",{className:"rounded-full bg-purple-100 px-3 py-1 text-xs font-semibold text-purple-600",children:["Target ",l?.target_weekly??6," lagu/minggu"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-3 rounded-full bg-purple-100",children:e.jsx("div",{className:"h-3 rounded-full bg-purple-500 transition-all",style:{width:`${Math.min((l?.new_this_week??0)/(l?.target_weekly??6)*100,100)}%`}})}),e.jsxs("p",{className:"mt-2 text-xs text-purple-500",children:["Tambah ",Math.max((l?.target_weekly??6)-(l?.new_this_week??0),0)," lagu lagi biar challenge minggu ini penuh."]})]}),e.jsx("button",{type:"button",onClick:()=>void _(),className:"inline-flex items-center justify-center gap-2 rounded-full border border-purple-200 px-4 py-2 text-xs font-semibold text-purple-600 hover:border-purple-300",children:"Segarkan Data"})]})]}),e.jsxs("section",{className:"grid gap-5 rounded-3xl border border-blue-200 bg-blue-50 p-6 shadow-sm md:grid-cols-[1fr_1.25fr]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-white p-2 text-blue-500 shadow-sm",children:e.jsx(he,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Mood Check-In"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Tebak mood pasangan dari lagu terakhir yang mereka putar."})]})]}),e.jsxs("div",{className:"grid gap-3",children:[j.length===0&&e.jsx("p",{className:"rounded-2xl border border-blue-100 bg-white p-4 text-sm text-blue-500",children:"Belum ada riwayat pemutaran terbaru."}),j.map(s=>e.jsxs("button",{type:"button",onClick:()=>U(s.id),className:`flex w-full items-center justify-between rounded-2xl border p-4 text-left transition ${y?.id===s.id?"border-blue-400 bg-white shadow-sm":"border-blue-100 bg-white/70 hover:border-blue-200"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-blue-400",children:s.user_label}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-blue-800",children:s.track}),e.jsx("p",{className:"text-xs text-blue-500",children:s.artists})]}),e.jsxs("span",{className:"text-xs font-semibold text-blue-600",children:[le(s.energy)," energi"]})]},s.id))]})]}),e.jsx("div",{className:"space-y-4 rounded-2xl bg-white p-5 shadow-sm",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-blue-400",children:y.user_label}),e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:y.mood_tone}),e.jsx("p",{className:"text-sm text-blue-600",children:y.affection})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 text-blue-600",children:[e.jsx(fe,{className:"h-5 w-5"}),e.jsxs("span",{className:"text-xs",children:["Diputar ",y.played_at?J(y.played_at):"baru saja"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-blue-400",children:"Rekomendasi aksi manis"}),e.jsx("div",{className:"mt-2 rounded-2xl border border-blue-200 bg-blue-50 p-4 text-sm text-blue-700",children:"Kirim voice note 30 detik sambil putar lagu yang sama, lalu ajak tebak lirik via call."})]}),e.jsx("button",{type:"button",onClick:()=>void _(),className:"inline-flex items-center justify-center rounded-full border border-blue-200 px-4 py-2 text-xs font-semibold text-blue-600 hover:border-blue-300",children:"Segarkan Mood"})]}):e.jsx("p",{className:"text-sm text-blue-500",children:"Pilih salah satu snapshot mood untuk lihat rekomendasi aksi."})})]}),e.jsxs("section",{className:"grid gap-5 rounded-3xl border border-rose-200 bg-rose-50 p-6 shadow-sm md:grid-cols-[1.1fr_0.9fr]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-white p-2 text-rose-500 shadow-sm",children:e.jsx(A,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-rose-900",children:"Surprise Song Drops"}),e.jsx("p",{className:"text-sm text-rose-600",children:"Jadwalkan lagu kejutan yang otomatis muncul sesuai momen."})]})]}),e.jsxs("div",{className:"space-y-3",children:[Y.length===0&&e.jsx("p",{className:"rounded-2xl border border-rose-100 bg-white p-4 text-sm text-rose-500",children:"Belum ada lagu kejutan terjadwal. Tambahkan satu untuk moment spesial berikutnya!"}),Y.map(s=>e.jsxs("div",{className:"rounded-2xl border border-rose-100 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-rose-900",children:s.track}),e.jsx("p",{className:"text-xs text-rose-500",children:s.artists})]}),e.jsxs("span",{className:"rounded-full bg-rose-100 px-3 py-1 text-xs font-semibold text-rose-600",children:["Oleh ",s.curator??"Kamu"]})]}),e.jsxs("p",{className:"mt-2 text-xs text-rose-400",children:["Tayang ",J(s.scheduled_for)]}),s.note&&e.jsx("p",{className:"mt-2 text-sm text-rose-700",children:s.note})]},s.id))]})]}),e.jsxs("div",{className:"space-y-4 rounded-2xl bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-rose-600",children:[e.jsx(ge,{className:"h-5 w-5"}),e.jsx("p",{className:"text-xs uppercase tracking-[0.28em]",children:"Jadwalkan lagu"})]}),e.jsx("p",{className:"text-sm text-rose-600",children:"Gunakan tombol berikut untuk menambahkan kejutan baru setelah kamu pilih lagu di Spotify."}),e.jsxs("button",{type:"button",onClick:ue,className:"inline-flex items-center justify-center gap-2 rounded-full bg-rose-500 px-5 py-2 text-sm font-semibold text-white shadow transition hover:bg-rose-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300 focus-visible:ring-offset-2 focus-visible:ring-offset-rose-50",children:[e.jsx(A,{className:"h-4 w-4"}),"Jadwalkan lagu kejutan"]}),!c&&e.jsx("p",{className:"text-xs text-rose-400",children:"Sambungkan Spotify dulu supaya bisa menjadwalkan lagu otomatis."})]})]}),e.jsxs("section",{className:"grid gap-5 rounded-3xl border border-emerald-200 bg-emerald-50 p-6 shadow-sm md:grid-cols-[0.95fr_1.05fr]",children:[e.jsxs("div",{className:"space-y-4 rounded-2xl bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-emerald-100 p-2 text-emerald-600",children:e.jsx(ye,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-emerald-900",children:"Listening Party Mini"}),e.jsx("p",{className:"text-sm text-emerald-600",children:"Lihat kapan kalian lagi denger lagu yang sama dan gabung sesi bareng."})]})]}),e.jsx("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50 p-4",children:n?.is_live?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-xl bg-white p-3 text-emerald-600 shadow-sm",children:e.jsx(Se,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:n.track}),e.jsx("p",{className:"text-xs text-emerald-600",children:n.artists})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-emerald-600",children:[e.jsxs("span",{children:["Host: ",n.host??"Pasangan"]}),e.jsx("span",{children:n.started_at??"Baru mulai"}),e.jsxs("span",{children:[n.listeners??1," pendengar"]})]}),$?e.jsx("div",{className:"mt-4 overflow-hidden rounded-xl border border-emerald-100 shadow-inner",children:e.jsx("iframe",{src:$,width:"100%",height:"152",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify track embed"},$)}):n?.external_url&&e.jsx("a",{href:n.external_url,target:"_blank",rel:"noopener",className:"mt-4 inline-flex items-center justify-center rounded-full border border-emerald-200 px-4 py-2 text-xs font-semibold text-emerald-600 transition hover:border-emerald-300",children:"Buka sesi di Spotify"}),e.jsxs("button",{type:"button",onClick:()=>void me(),disabled:X,className:"mt-4 inline-flex w-full items-center justify-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-emerald-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 focus-visible:ring-offset-2 focus-visible:ring-offset-emerald-50 disabled:cursor-not-allowed disabled:bg-emerald-400/70",children:[e.jsx(we,{className:"h-4 w-4"}),X?"Menyambungkan...":"Gabung playback"]})]}):e.jsx("p",{className:"text-sm text-emerald-600",children:"Tidak ada sesi live sekarang, tapi kamu bisa jadwalkan lewat Surprise Song Drops."})}),e.jsx("button",{type:"button",onClick:()=>void _(),className:"inline-flex items-center justify-center rounded-full border border-emerald-200 px-4 py-2 text-xs font-semibold text-emerald-600 hover:border-emerald-300",children:"Perbarui status playback"})]}),e.jsxs("div",{className:"space-y-4 rounded-2xl bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.28em] text-emerald-400",children:"Rencana listening bareng"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50 p-4 text-sm text-emerald-700",children:[e.jsx("p",{className:"font-semibold text-emerald-900",children:"Challenge akhir pekan"}),e.jsx("p",{className:"mt-1",children:"Jumat malam pukul 20.00, pilih 5 lagu mellow versi kamu, pasangan tebak siapa penyanyinya."})]}),e.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50 p-4 text-sm text-emerald-700",children:[e.jsx("p",{className:"font-semibold text-emerald-900",children:"Mode fokus duo"}),e.jsx("p",{className:"mt-1",children:"Sinkronkan playback untuk sesi belajar 45 menit, lanjut break call 15 menit."})]})]})]})]}),e.jsxs("section",{className:"grid gap-5 rounded-3xl border border-amber-200 bg-amber-50 p-6 shadow-sm md:grid-cols-[1.05fr_0.95fr]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-white p-2 text-amber-500 shadow-sm",children:e.jsx(A,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-900",children:"Memory Capsule"}),e.jsx("p",{className:"text-sm text-amber-600",children:"Simpan highlight lagu penting dan putar preview 30 detik kapan pun."})]})]}),e.jsxs("div",{className:"space-y-4",children:[ee.length===0&&e.jsx("p",{className:"rounded-2xl border border-amber-100 bg-white p-4 text-sm text-amber-600",children:"Belum ada kapsul memori. Simpan satu untuk mengenang momen penting kalian."}),ee.map(s=>e.jsxs("div",{className:"rounded-2xl border border-amber-100 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-amber-900",children:s.track}),e.jsx("p",{className:"text-xs text-amber-600",children:s.artists})]}),s.moment&&e.jsx("span",{className:"rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold text-amber-600",children:s.moment})]}),s.description&&e.jsx("p",{className:"mt-2 text-sm text-amber-700",children:s.description}),e.jsxs("p",{className:"mt-2 text-xs text-amber-500",children:["Disimpan ",ne(s.saved_at)]}),s.preview_url&&e.jsx("audio",{className:"mt-3 w-full",controls:!0,src:s.preview_url,children:"Browser kamu tidak mendukung audio HTML5."})]},s.id))]})]}),e.jsxs("div",{className:"grid gap-4 rounded-2xl bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"rounded-2xl border border-amber-100 bg-amber-50 p-4 text-sm text-amber-700",children:[e.jsx("p",{className:"text-base font-semibold text-amber-900",children:"Simpan momen baru"}),e.jsx("p",{className:"mt-1",children:"Tandai highlight lagu dan tuliskan kenangannya supaya mudah diputar lagi kapan pun."}),e.jsxs("button",{type:"button",onClick:pe,className:"mt-4 inline-flex items-center justify-center gap-2 rounded-full bg-amber-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-amber-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 focus-visible:ring-offset-2 focus-visible:ring-offset-amber-50",children:[e.jsx(A,{className:"h-4 w-4"}),"Simpan kapsul memori"]}),!c&&e.jsx("p",{className:"mt-2 text-xs text-amber-500",children:"Hubungkan Spotify terlebih dahulu untuk menyimpan kapsul langsung dari lagu pilihanmu."})]}),e.jsx("div",{className:"rounded-2xl border border-dashed border-amber-200 bg-amber-50 p-4 text-xs text-amber-600",children:"Token OAuth sudah tersimpan otomatis setelah kamu menghubungkan Spotify. Gunakan endpoint di atas atau job terjadwal untuk memicu pengalaman tambahan."})]})]})]})]}),e.jsx(ae,{show:ie,onClose:()=>{T(!1),b(null)},maxWidth:"lg",children:e.jsxs("form",{onSubmit:de,className:"space-y-5 p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-rose-900",children:"Tambah Surprise Song Drop"}),e.jsx("p",{className:"mt-1 text-sm text-rose-600",children:"Tempel tautan lagu Spotify, pilih jadwal pemutaran, dan tambahkan pesan manis untuk pasanganmu."})]}),q&&e.jsx("p",{className:"rounded-md bg-rose-50 p-3 text-sm text-rose-600",children:q}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"surprise-track",className:"text-sm font-medium text-rose-900",children:"Lagu Spotify"}),e.jsx("input",{id:"surprise-track",type:"text",required:!0,value:w.trackInput,onChange:s=>E(a=>({...a,trackInput:s.target.value})),placeholder:"https://open.spotify.com/track/...",className:"w-full rounded-lg border border-rose-200 px-3 py-2 text-sm text-rose-900 focus:border-rose-400 focus:outline-none focus:ring-2 focus:ring-rose-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"surprise-schedule",className:"text-sm font-medium text-rose-900",children:"Jadwalkan untuk"}),e.jsx("input",{id:"surprise-schedule",type:"datetime-local",required:!0,value:w.scheduledFor,onChange:s=>E(a=>({...a,scheduledFor:s.target.value})),className:"w-full rounded-lg border border-rose-200 px-3 py-2 text-sm text-rose-900 focus:border-rose-400 focus:outline-none focus:ring-2 focus:ring-rose-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"surprise-note",className:"text-sm font-medium text-rose-900",children:"Catatan kejutan (opsional)"}),e.jsx("textarea",{id:"surprise-note",rows:3,value:w.note,onChange:s=>E(a=>({...a,note:s.target.value})),className:"w-full rounded-lg border border-rose-200 px-3 py-2 text-sm text-rose-900 focus:border-rose-400 focus:outline-none focus:ring-2 focus:ring-rose-200"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{T(!1),b(null)},className:"rounded-full border border-rose-200 px-4 py-2 text-sm font-semibold text-rose-600 hover:border-rose-300",children:"Batal"}),e.jsx("button",{type:"submit",disabled:P,className:"inline-flex items-center justify-center gap-2 rounded-full bg-rose-500 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-rose-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-rose-400/70",children:P?"Menyimpan...":"Jadwalkan"})]})]})}),e.jsx(ae,{show:oe,onClose:()=>{I(!1),h(null)},maxWidth:"lg",children:e.jsxs("form",{onSubmit:ce,className:"space-y-5 p-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-900",children:"Buat Memory Capsule"}),e.jsx("p",{className:"mt-1 text-sm text-amber-600",children:"Simpan cerita singkat tentang lagu yang berarti untuk kalian. Kami ambil preview 30 detik otomatis jika tersedia."})]}),W&&e.jsx("p",{className:"rounded-md bg-amber-50 p-3 text-sm text-amber-700",children:W}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"capsule-track",className:"text-sm font-medium text-amber-900",children:"Lagu Spotify"}),e.jsx("input",{id:"capsule-track",type:"text",required:!0,value:x.trackInput,onChange:s=>S(a=>({...a,trackInput:s.target.value})),placeholder:"https://open.spotify.com/track/...",className:"w-full rounded-lg border border-amber-200 px-3 py-2 text-sm text-amber-900 focus:border-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"capsule-moment",className:"text-sm font-medium text-amber-900",children:"Judul momen (opsional)"}),e.jsx("input",{id:"capsule-moment",type:"text",value:x.moment,onChange:s=>S(a=>({...a,moment:s.target.value})),placeholder:"Contoh: Anniversary pertama",className:"w-full rounded-lg border border-amber-200 px-3 py-2 text-sm text-amber-900 focus:border-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"capsule-description",className:"text-sm font-medium text-amber-900",children:"Cerita singkat (opsional)"}),e.jsx("textarea",{id:"capsule-description",rows:4,value:x.description,onChange:s=>S(a=>({...a,description:s.target.value})),placeholder:"Tulis kenapa lagu ini spesial...",className:"w-full rounded-lg border border-amber-200 px-3 py-2 text-sm text-amber-900 focus:border-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"capsule-date",className:"text-sm font-medium text-amber-900",children:"Tanggal momen (opsional)"}),e.jsx("input",{id:"capsule-date",type:"date",value:x.savedAt,onChange:s=>S(a=>({...a,savedAt:s.target.value})),className:"w-full rounded-lg border border-amber-200 px-3 py-2 text-sm text-amber-900 focus:border-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-200"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{I(!1),h(null)},className:"rounded-full border border-amber-200 px-4 py-2 text-sm font-semibold text-amber-600 hover:border-amber-300",children:"Batal"}),e.jsx("button",{type:"submit",disabled:B,className:"inline-flex items-center justify-center gap-2 rounded-full bg-amber-500 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-amber-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-amber-400/70",children:B?"Menyimpan...":"Simpan"})]})]})})]})}export{Ge as default};
