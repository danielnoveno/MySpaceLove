import{u as P,a as c,j as e,H as A,L as k,r as H}from"./app-CpTrn_zj.js";import{A as R}from"./AuthenticatedLayout-Du1ilKJG.js";import{u as D}from"./useCurrentSpace-BBxOMrc3.js";import{C as U}from"./calendar-DXMR76L4.js";import{U as X}from"./upload-CA3uxEwT.js";import{X as W}from"./x-B-eKawcc.js";import{A as Y}from"./arrow-left-CR78xiT-.js";import"./ApplicationLogo-CIVcEVux.js";import"./transition-D8AHnLll.js";import"./createLucideIcon-C0075d5o.js";function Z(){const x=D();if(!x)return null;const m=x.slug,C=x.title,{data:o,setData:l,post:S,processing:f,errors:s,clearErrors:F}=P({title:"",description:"",date:new Date().toISOString().split("T")[0],media:[]}),v=c.useRef(null),[O,T]=c.useState({x:0,y:0}),[p,w]=c.useState([]),[y,j]=c.useState(null);c.useEffect(()=>{const r=v.current;if(!r)return;const a=r.getContext("2d");if(!a)return;r.width=window.innerWidth,r.height=window.innerHeight;const i=[],h=(t,n)=>{i.push({x:t,y:n,size:Math.random()*8+10,dx:(Math.random()-.5)*2,dy:(Math.random()-.5)*2})},g=(t,n,b,d,L=.6)=>{t.save(),t.translate(n,b),t.scale(d/20,d/20),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(0,-3,-5,-15,-20,-15),t.bezierCurveTo(-55,-15,-55,22.5,-55,22.5),t.bezierCurveTo(-55,40,-35,62,0,80),t.bezierCurveTo(35,62,55,40,55,22.5),t.bezierCurveTo(55,22.5,55,-15,20,-15),t.bezierCurveTo(5,-15,0,-3,0,0),t.fillStyle=`rgba(244,63,94,${L})`,t.fill(),t.restore()},u=()=>{a.clearRect(0,0,r.width,r.height),i.forEach((t,n)=>{t.x+=t.dx,t.y+=t.dy,g(a,t.x,t.y,t.size),(t.x<0||t.y<0||t.x>r.width||t.y>r.height)&&i.splice(n,1)}),requestAnimationFrame(u)};u();const N=t=>{for(let d=0;d<3;d++)h(t.clientX,t.clientY);const n=window.innerWidth/2,b=window.innerHeight/2;T({x:(t.clientX-n)*.02,y:(t.clientY-b)*.02})};return window.addEventListener("mousemove",N),window.addEventListener("resize",()=>{r.width=window.innerWidth,r.height=window.innerHeight}),()=>{window.removeEventListener("mousemove",N)}},[]);const M=r=>{r.preventDefault(),F(),S(route("timeline.store",{space:m}),{forceFormData:!0,onSuccess:()=>H.visit(route("timeline.index",{space:m}))})},E=r=>{const a=Array.from(r.target.files||[]);if(o.media.length+a.length>5){j("Maksimal 5 foto yang dapat diunggah.");return}j(null);const h=[...o.media,...a];l("media",h);const g=[...p,...a.map(u=>URL.createObjectURL(u))];w(g)},z=r=>{const a=[...o.media],i=[...p];a.splice(r,1),i.splice(r,1),l("media",a),w(i)};return e.jsxs(R,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{href:route("timeline.index",{space:m}),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tambah Momen Spesial"}),e.jsxs("p",{className:"text-gray-600",children:["Catat kenangan indah untuk space ",C]})]})]}),children:[e.jsx(A,{title:"Tambah Momen"}),e.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-pink-50 via-white to-rose-50 py-10 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[e.jsx("canvas",{ref:v,className:"absolute inset-0 w-full h-full pointer-events-none"}),e.jsx("div",{className:"relative max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:M,className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg border border-gray-100 p-8 md:p-10 relative z-10",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Judul Momen"}),e.jsx("input",{type:"text",value:o.title,onChange:r=>l("title",r.target.value),className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition text-gray-800",placeholder:"Contoh: Anniversary Pertama"}),s.title&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Tanggal"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"date",value:o.date,onChange:r=>l("date",r.target.value),className:"w-full pl-12 pr-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition text-gray-800"})]}),s.date&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Deskripsi"}),e.jsx("textarea",{value:o.description,onChange:r=>l("description",r.target.value),rows:6,className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition text-gray-800",placeholder:"Ceritakan momen spesial ini..."}),s.description&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Foto Kenangan"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-pink-400 transition",children:[e.jsx(X,{className:"w-14 h-14 text-gray-400 mx-auto mb-4"}),e.jsx("input",{type:"file",multiple:!0,onChange:E,accept:"image/*",className:"hidden",id:"media-upload"}),e.jsx("label",{htmlFor:"media-upload",className:"cursor-pointer bg-pink-500 text-white px-8 py-3 rounded-xl font-medium hover:bg-pink-600 transition",children:"Pilih Foto (maks. 5)"}),y&&e.jsx("p",{className:"text-red-500 text-sm mt-3",children:y})]}),p.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:p.map((r,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,className:"w-full h-32 object-cover rounded-xl shadow",alt:`preview-${a}`}),e.jsx("button",{type:"button",onClick:()=>z(a),className:"absolute top-2 right-2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition",children:e.jsx(W,{className:"w-4 h-4"})})]},a))}),s.media&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.media})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[e.jsx(k,{href:route("timeline.index",{space:m}),className:"flex-1 px-6 py-4 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition text-center font-medium",children:"Batal"}),e.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-gradient-to-r from-pink-500 to-rose-500 text-white px-6 py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:f?"Menyimpan...":"Simpan Momen"})]})]})})})]})]})}export{Z as default};
