import{u as E,a as i,j as e,H as P,L as j,r as S}from"./app-CpTrn_zj.js";import{A as H}from"./AuthenticatedLayout-Du1ilKJG.js";import{u as $}from"./useCurrentSpace-BBxOMrc3.js";import{U as R}from"./upload-CA3uxEwT.js";import{A}from"./arrow-left-CR78xiT-.js";import"./ApplicationLogo-CIVcEVux.js";import"./transition-D8AHnLll.js";import"./createLucideIcon-C0075d5o.js";function q(){const m=$();if(!m)return null;const d=m.slug,u=m.title,{data:l,setData:p,post:N,processing:f,errors:n}=E({title:"",files:[]}),[g,k]=i.useState([]),b=Object.entries(n).find(([r])=>r.startsWith("files."))?.[1],v=i.useRef(null),[c,M]=i.useState({x:0,y:0}),[C]=i.useState(()=>Array.from({length:40},()=>({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,size:Math.random()*14+8,opacity:Math.random()*.5+.2})));i.useEffect(()=>{const r=v.current;if(!r)return;const s=r.getContext("2d");if(!s)return;r.width=window.innerWidth,r.height=window.innerHeight;const x=[],L=(t,a)=>{x.push({x:t,y:a,size:Math.random()*8+10,dx:(Math.random()-.5)*2,dy:(Math.random()-.5)*2})},T=(t,a,h,o,U=.6)=>{t.save(),t.translate(a,h),t.scale(o/20,o/20),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(0,-3,-5,-15,-20,-15),t.bezierCurveTo(-55,-15,-55,22.5,-55,22.5),t.bezierCurveTo(-55,40,-35,62,0,80),t.bezierCurveTo(35,62,55,40,55,22.5),t.bezierCurveTo(55,22.5,55,-15,20,-15),t.bezierCurveTo(5,-15,0,-3,0,0),t.fillStyle=`rgba(16,185,129,${U})`,t.fill(),t.restore()},w=()=>{s.clearRect(0,0,r.width,r.height),x.forEach((t,a)=>{t.x+=t.dx,t.y+=t.dy,T(s,t.x,t.y,t.size),(t.x<0||t.y<0||t.x>r.width||t.y>r.height)&&x.splice(a,1)}),requestAnimationFrame(w)};w();const y=t=>{for(let o=0;o<3;o++)L(t.clientX,t.clientY);const a=window.innerWidth/2,h=window.innerHeight/2;M({x:(t.clientX-a)*.02,y:(t.clientY-h)*.02})};return window.addEventListener("mousemove",y),window.addEventListener("resize",()=>{r.width=window.innerWidth,r.height=window.innerHeight}),()=>{window.removeEventListener("mousemove",y)}},[]);const F=r=>{r.preventDefault(),N(route("gallery.store",{space:d}),{forceFormData:!0,onSuccess:()=>S.visit(route("gallery.index",{space:d}))})},z=r=>{const s=Array.from(r.target.files??[]);p("files",s)};return i.useEffect(()=>{const r=l.files.map(s=>URL.createObjectURL(s));return k(r),()=>{r.forEach(s=>URL.revokeObjectURL(s))}},[l.files]),e.jsxs(H,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{href:route("gallery.index",{space:d}),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:e.jsx(A,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Galeri"}),e.jsxs("p",{className:"text-gray-600",children:["Tambahkan foto atau video ke galeri ",u]})]})]}),children:[e.jsx(P,{title:`Upload Galeri - ${u}`}),e.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-emerald-50 via-white to-green-50 py-10 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[e.jsx("canvas",{ref:v,className:"absolute inset-0 w-full h-full pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:C.map((r,s)=>e.jsx("div",{className:"absolute text-green-400 select-none",style:{left:r.x,top:r.y,fontSize:r.size,opacity:r.opacity,transform:`translate3d(${c.x*.5}px, ${c.y*.5}px, 0)`,transition:"transform 0.2s ease-out"},children:"â™¥"},s))}),e.jsx("div",{className:"absolute inset-0 flex justify-center items-center pointer-events-none text-6xl opacity-20 select-none",style:{transform:`translate3d(${c.x}px, ${c.y}px, 0)`,transition:"transform 0.1s ease-out"},children:"ðŸ’š ðŸ’– ðŸ’š ðŸ’š"}),e.jsx("div",{className:"relative max-w-3xl mx-auto",children:e.jsxs("form",{onSubmit:F,className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg border border-gray-100 p-8 md:p-10 relative z-10 space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Judul"}),e.jsx("input",{type:"text",value:l.title,onChange:r=>p("title",r.target.value),className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition text-gray-800",placeholder:"Contoh: Foto Liburan"}),n.title&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:n.title})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"File (Foto/Video)"}),e.jsxs("div",{className:"border-2 border-dashed border-emerald-200 rounded-2xl p-8 text-center hover:border-emerald-400 transition bg-white/70",children:[e.jsx(R,{className:"w-14 h-14 text-emerald-500 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Tarik dan letakkan file di sini atau pilih secara manual (maks. 12 file)"}),e.jsx("input",{type:"file",id:"file-upload",className:"hidden",name:"files",multiple:!0,onChange:z}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer inline-flex items-center justify-center gap-2 bg-emerald-500 text-white px-8 py-3 rounded-xl font-semibold hover:bg-emerald-600 transition",children:"Pilih File"}),l.files.length>0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:[l.files.length," file dipilih"]})]}),n.files&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:n.files}),b&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:b})]}),e.jsxs("div",{className:"bg-white/70 rounded-2xl p-6 border border-emerald-100 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold text-emerald-600 mb-3 uppercase tracking-wide",children:"Preview"}),g.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:g.map((r,s)=>e.jsxs("div",{className:"relative aspect-square overflow-hidden rounded-xl border border-emerald-100 shadow-sm",children:[e.jsx("img",{src:r,alt:`preview-${s}`,className:"h-full w-full object-cover"}),e.jsxs("span",{className:"absolute bottom-1 right-1 rounded-full bg-emerald-500/90 px-2 text-xs font-semibold text-white",children:["#",s+1]})]},`${r}-${s}`))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Belum ada file dipilih"})]})]}),e.jsxs("div",{className:"bg-white/60 rounded-2xl p-6 border border-emerald-100 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold text-emerald-600 mb-3 uppercase tracking-wide",children:"Tips Upload"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:"Format foto: JPG, JPEG, PNG, GIF (maks 30MB per file)."}),e.jsx("li",{children:"Format video: MP4 atau MOV (maks 30MB per file)."}),e.jsx("li",{children:"Tambahkan catatan agar mudah mengingat momennya."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[e.jsx(j,{href:route("gallery.index",{space:d}),className:"flex-1 px-6 py-4 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition text-center font-medium",children:"Batal"}),e.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:f?"Mengunggah...":"Upload"})]})]})})]})]})}export{q as default};
