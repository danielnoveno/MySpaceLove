import{r as e,j as t}from"./vendor-DtplsvIg.js";import{a as r}from"./games-C9PD58Ia.js";import{G as a,S as i,x as s}from"./inertia-BRtPwdNN.js";import{u as n}from"./useCurrentSpace--m3qXMVy.js";import{U as l,A as o}from"./ui-libs-CxG7ASKr.js";import"./animation-BDJwZp_N.js";function d({item:d}){const c=n();if(!c)return null;const x=c.slug,m=c.title,{data:u,setData:h,post:f,processing:p,errors:g}=a({title:d.title||"",file:null,_method:"PUT"}),b=e.useRef(null),v=e.useRef(null),[y,j]=e.useState(d.file_path?`/storage/${d.file_path}`:""),[w,N]=e.useState({x:0,y:0}),[z]=e.useState(()=>Array.from({length:30},()=>({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,size:14*Math.random()+8,opacity:.5*Math.random()+.2}))),[k,C]=e.useState(!1),[M,S]=e.useState(null);return e.useEffect(()=>()=>{v.current&&(URL.revokeObjectURL(v.current),v.current=null)},[]),e.useEffect(()=>{const e=b.current;if(!e)return;const t=e.getContext("2d");if(!t)return;e.width=window.innerWidth,e.height=window.innerHeight;const r=[],a=(e,t)=>{r.push({x:e,y:t,size:8*Math.random()+10,dx:2*(Math.random()-.5),dy:2*(Math.random()-.5)})},i=()=>{t.clearRect(0,0,e.width,e.height),r.forEach((a,i)=>{a.x+=a.dx,a.y+=a.dy,((e,t,r,a,i=.6)=>{e.save(),e.translate(t,r),e.scale(a/20,a/20),e.beginPath(),e.moveTo(0,0),e.bezierCurveTo(0,-3,-5,-15,-20,-15),e.bezierCurveTo(-55,-15,-55,22.5,-55,22.5),e.bezierCurveTo(-55,40,-35,62,0,80),e.bezierCurveTo(35,62,55,40,55,22.5),e.bezierCurveTo(55,22.5,55,-15,20,-15),e.bezierCurveTo(5,-15,0,-3,0,0),e.fillStyle=`rgba(34,197,94,${i})`,e.fill(),e.restore()})(t,a.x,a.y,a.size),(a.x<0||a.y<0||a.x>e.width||a.y>e.height)&&r.splice(i,1)}),requestAnimationFrame(i)};i();const s=e=>{for(let i=0;i<2;i++)a(e.clientX,e.clientY);const t=window.innerWidth/2,r=window.innerHeight/2;N({x:.02*(e.clientX-t),y:.02*(e.clientY-r)})};return window.addEventListener("mousemove",s),window.addEventListener("resize",()=>{e.width=window.innerWidth,e.height=window.innerHeight}),()=>{window.removeEventListener("mousemove",s)}},[]),t.jsxs(r,{header:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(s,{href:route("gallery.index",{space:x}),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:t.jsx(o,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Galeri"}),t.jsxs("p",{className:"text-gray-600",children:["Perbarui foto atau video untuk ",m]})]})]}),children:[t.jsx(i,{title:`Edit Galeri - ${m}`}),t.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 py-10 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[t.jsx("canvas",{ref:b,className:"absolute inset-0 w-full h-full pointer-events-none"}),t.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:z.map((e,r)=>t.jsx("div",{className:"absolute text-green-400 select-none",style:{left:e.x,top:e.y,fontSize:e.size,opacity:e.opacity,transform:`translate3d(${.5*w.x}px, ${.5*w.y}px, 0)`,transition:"transform 0.2s ease-out"},children:"â™¥"},r))}),t.jsx("div",{className:"absolute inset-0 flex justify-center items-center pointer-events-none text-6xl opacity-20 select-none",style:{transform:`translate3d(${w.x}px, ${w.y}px, 0)`,transition:"transform 0.1s ease-out"},children:"ðŸ’š ðŸ’š ðŸ’š"}),t.jsx("div",{className:"relative max-w-3xl mx-auto",children:t.jsxs("form",{onSubmit:function(e){e.preventDefault(),f(route("gallery.update",{space:x,id:d.id}),{forceFormData:!0})},className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg border border-gray-100 p-8 md:p-10 relative z-10 space-y-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Pratinjau Foto"}),t.jsx("div",{className:"relative overflow-hidden rounded-3xl border border-gray-200 bg-white shadow-lg",children:y?t.jsx("img",{src:y,alt:"Preview media",className:"h-72 w-full cursor-pointer object-cover",onClick:()=>(S(y),void C(!0))}):t.jsx("div",{className:"flex h-72 items-center justify-center text-sm text-gray-400",children:"No preview available yet."})}),t.jsx("p",{className:"mt-3 text-center text-sm text-gray-500",children:u.file?"Menampilkan file baru yang akan disimpan.":"Menampilkan file saat ini."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Judul"}),t.jsx("input",{type:"text",value:u.title,onChange:e=>h("title",e.target.value),className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition text-gray-800"}),g.title&&t.jsx("p",{className:"text-red-500 text-sm mt-2",children:g.title})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Ganti File (Foto/Video)"}),t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-green-400 transition",children:[t.jsx(l,{className:"w-14 h-14 text-gray-400 mx-auto mb-4"}),t.jsx("input",{type:"file",onChange:e=>{const t=e.target.files?.[0]??null;if(h("file",t),v.current&&(URL.revokeObjectURL(v.current),v.current=null),t){const e=URL.createObjectURL(t);v.current=e,j(e)}else j(d.file_path?`/storage/${d.file_path}`:"")},className:"hidden",id:"file-upload"}),t.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer bg-green-500 text-white px-8 py-3 rounded-xl font-medium hover:bg-green-600 transition",children:"Pilih File Baru"}),u.file&&t.jsx("p",{className:"text-sm text-gray-600 mt-3",children:u.file.name})]}),g.file&&t.jsx("p",{className:"text-red-500 text-sm mt-2",children:g.file})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[t.jsx(s,{href:route("gallery.index",{space:x}),className:"flex-1 px-6 py-4 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition text-center font-medium",children:"Batal"}),t.jsx("button",{type:"submit",disabled:p,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:p?"Memperbarui...":"Perbarui"})]})]})}),k&&M&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 transition-opacity duration-300",onClick:()=>{C(!1),S(null)},children:t.jsx("div",{className:"relative max-w-3xl max-h-full p-4",children:t.jsx("img",{src:M,alt:"Preview",className:"w-full h-auto rounded-xl shadow-lg transform transition-transform duration-300"})})})]})]})}export{d as default};
