import{X as e,G as a,j as t,x as s,q as r}from"./react-core-Qj66Ha7M.js";import{I as i}from"./InputError-Lp3uI797.js";import{I as o}from"./InputLabel-DVlSpCAK.js";import{P as l}from"./PrimaryButton-BjPbO6eI.js";import{T as n}from"./TextInput-WQALsewz.js";import"./inertia-COacoA5b.js";import"./vendor-CMS1sWg9.js";import"./maps-CDMlDeKs.js";function m({mustVerifyEmail:m,status:c,className:d=""}){const f=e().props.auth.user,{data:p,setData:u,post:h,patch:x,errors:g,processing:j,recentlySuccessful:v}=a({name:f.name,email:f.email,profile_image:null});return t.jsxs("section",{className:d,children:[t.jsxs("header",{children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your account's profile information and email address."})]}),t.jsxs("form",{onSubmit:e=>{e.preventDefault(),p.profile_image?h(route("profile.update"),{forceFormData:!0,_method:"patch"}):x(route("profile.update"))},className:"mt-6 space-y-6",encType:"multipart/form-data",children:[t.jsxs("div",{children:[t.jsx(o,{htmlFor:"profile_image",value:"Profile Image",className:"mb-4 text-lg font-semibold text-gray-800 text-center"}),t.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[t.jsx("div",{className:"relative w-40 h-40 rounded-full overflow-hidden border-4 border-pink-400 shadow-lg",children:t.jsx("img",{src:p.profile_image instanceof File?URL.createObjectURL(p.profile_image):f.profile_image?`/storage/${f.profile_image}`:"/images/default-profile.png",alt:"Profile",className:"w-full h-full object-cover"})}),t.jsx("label",{htmlFor:"profile_image",className:"cursor-pointer bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-6 rounded-full transition duration-300 ease-in-out shadow-lg transform hover:scale-105",children:"Choose Image"}),t.jsx("input",{id:"profile_image",type:"file",className:"hidden",accept:"image/*",onChange:async e=>{const a=e.target.files[0];if(a)try{const e=await(async e=>new Promise((a,t)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=s=>{const r=new Image;r.src=s.target.result,r.onload=()=>{const s=document.createElement("canvas");let i=r.width,o=r.height;const l=1200;i>o&&i>l?(o=o*l/i,i=l):o>l&&(i=i*l/o,o=l),s.width=i,s.height=o,s.getContext("2d").drawImage(r,0,0,i,o),s.toBlob(s=>{if(s){const t=new File([s],e.name.replace(/\.[^/.]+$/,".webp"),{type:"image/webp",lastModified:Date.now()});a(t)}else t(new Error("Image compression failed"))},"image/webp",.85)},r.onerror=()=>t(new Error("Failed to load image"))},s.onerror=()=>t(new Error("Failed to read file"))}))(a);u("profile_image",e)}catch(t){u("profile_image",a)}}})]}),t.jsx(i,{className:"mt-3 text-center",message:g.profile_image})]}),t.jsxs("div",{children:[t.jsx(o,{htmlFor:"name",value:"Name"}),t.jsx(n,{id:"name",className:"mt-1 block w-full",value:p.name,onChange:e=>u("name",e.target.value),required:!0,isFocused:!0,autoComplete:"name"}),t.jsx(i,{className:"mt-2",message:g.name})]}),t.jsxs("div",{children:[t.jsx(o,{htmlFor:"email",value:"Email"}),t.jsx(n,{id:"email",type:"email",className:"mt-1 block w-full",value:p.email,onChange:e=>u("email",e.target.value),required:!0,autoComplete:"username"}),t.jsx(i,{className:"mt-2",message:g.email})]}),m&&null===f.email_verified_at&&t.jsxs("div",{children:[t.jsxs("p",{className:"mt-2 text-sm text-gray-800",children:["Your email address is unverified.",t.jsx(s,{href:route("verification.send"),method:"post",as:"button",className:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Click here to re-send the verification email."})]}),"verification-link-sent"===c&&t.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"A new verification link has been sent to your email address."})]}),t.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[t.jsx(l,{type:"submit",disabled:j,className:"!rounded-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-3 px-8 shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:j?t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save"}),t.jsx(r,{show:v,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:t.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"âœ“ Saved successfully!"})})]})]})]})}export{m as default};
