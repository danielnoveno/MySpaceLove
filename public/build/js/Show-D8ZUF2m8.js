import{X as e,r as a,j as t,S as s,A as r}from"./react-core-DkDn4djD.js";import{J as i}from"./video-Cx5dszLi.js";import{ag as l}from"./vendor-D-GzWRLi.js";import"./inertia-BBHw8PYu.js";import"./maps-CVSyMViq.js";function c({spaceId:c,space:n,user:o}){const{props:d}=e(),u=d.currentSpace,f=n?.slug??u?.slug??`space-${c}`,[m,p]=a.useState(null),[j,h]=a.useState(null),[x,g]=a.useState(!0),[v,S]=a.useState(null);if(a.useEffect(()=>{(async()=>{try{const e=await l.get(`/api/spaces/${f}/jaas/token`);p(e.data.token),h(e.data.appId),g(!1)}catch(e){S("Failed to load video call service."),g(!1)}})()},[f]),x)return t.jsx("div",{className:"h-screen w-full bg-gray-900 flex items-center justify-center text-white",children:"Memuat Video Call..."});if(v)return t.jsx("div",{className:"h-screen w-full bg-gray-900 flex items-center justify-center text-red-500",children:v});const I=`LoveSpace-${f}`;return t.jsxs("div",{className:"h-screen w-full bg-gray-900 flex flex-col",children:[t.jsx(s,{title:"Video Call"}),t.jsx("div",{className:"flex-1 w-full relative",children:j&&m?t.jsx(i,{appId:j,roomName:I,jwt:m,configOverwrite:{startWithAudioMuted:!0,disableModeratorIndicator:!0,startScreenSharing:!0,enableEmailInStats:!1},interfaceConfigOverwrite:{DISABLE_JOIN_LEAVE_NOTIFICATIONS:!0},userInfo:{displayName:o,email:""},getIFrameRef:e=>{e.style.height="100%"},onReadyToClose:()=>{r.visit(`/spaces/${f}/dashboard`)}}):t.jsx("div",{className:"flex items-center justify-center h-full text-white",children:"Konfigurasi JaaS tidak valid."})})]})}export{c as default};
