import{r as e,j as t,x as r,S as s}from"./react-core-DkDn4djD.js";import{S as a,l as o,H as i,a5 as l,a6 as n,a7 as c,w as d,x as h}from"./ui-libs-OX6CH3yX.js";import"./inertia-BBHw8PYu.js";import"./vendor-D-GzWRLi.js";import"./maps-CVSyMViq.js";function m({code:r,children:s,title:a="Enter Secret Code",description:o="You need a sweet code to unlock this page.",placeholder:i="Example: 160825",buttonLabel:l="Unlock Page",errorMessage:n="Incorrect code. Try remembering our special date again.",hint:c,hintLabel:d="Hint",accessLabel:h="Restricted Access",inputLabel:m="Secret Code"}){const x=e.useMemo(()=>r.replace(/\s+/g,"").toLowerCase(),[r]),[p,u]=e.useState(""),[b,f]=e.useState(!1),[g,w]=e.useState(!1),j=e.useCallback(e=>{if(e.preventDefault(),p.replace(/\s+/g,"").toLowerCase()===x)return f(!0),void w(!1);w(!0)},[p,x]);return b?"function"==typeof s?t.jsx(t.Fragment,{children:s({unlockCode:x})}):t.jsx(t.Fragment,{children:s}):t.jsx("div",{className:"flex min-h-screen w-full items-center justify-center px-4 py-24",children:t.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-white/30 bg-white/15 p-8 text-white backdrop-blur-xl shadow-2xl",children:[t.jsxs("div",{className:"space-y-3 text-center",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-white/60",children:h}),t.jsx("h2",{className:"text-2xl font-bold",children:a}),t.jsx("p",{className:"text-sm text-white/70",children:o}),c&&t.jsxs("p",{className:"text-xs font-medium uppercase tracking-[0.24em] text-white/50",children:[d,": ",c]})]}),t.jsxs("form",{className:"mt-8 space-y-4",onSubmit:j,children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"secret-code",className:"text-xs font-semibold uppercase tracking-[0.28em] text-white/60",children:m}),t.jsx("input",{id:"secret-code",type:"password",value:p,onChange:e=>u(e.target.value),className:"mt-2 w-full rounded-2xl border border-white/30 bg-black/20 px-4 py-3 text-center text-lg tracking-[0.5em] text-white placeholder:text-white/40 focus:border-white focus:outline-none focus:ring-2 focus:ring-white/30",placeholder:i,autoFocus:!0,autoComplete:"off"})]}),t.jsx("button",{type:"submit",className:"w-full rounded-2xl bg-white/90 px-4 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-slate-900 transition hover:bg-white",children:l})]}),t.jsx("div",{className:"mt-4 h-4 text-center text-xs text-red-200",children:g?n:"Â "})]})})}const x=({color:r="#f43f5e",trailColor:s,heartCount:a=30,className:o=""})=>{const i=e.useRef(null);return e.useEffect(()=>{const e=i.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let o;const l=[],n=Math.max(a,20),c=()=>{e.width=window.innerWidth,e.height=window.innerHeight},d=(e,t)=>{l.push({x:e,y:t,size:12*Math.random()+10,dx:1.8*(Math.random()-.5),dy:1.8*(Math.random()-.5)-.3,life:1})},h=()=>{t.clearRect(0,0,e.width,e.height),s&&(t.fillStyle=s,t.fillRect(0,0,e.width,e.height),t.globalAlpha=1),l.forEach((s,a)=>{s.x+=s.dx,s.y+=s.dy,s.life-=.005,((e,s,a,o=.6)=>{t.save(),t.translate(e,s),t.scale(a/20,a/20),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(0,-3,-5,-15,-20,-15),t.bezierCurveTo(-55,-15,-55,22.5,-55,22.5),t.bezierCurveTo(-55,40,-35,62,0,80),t.bezierCurveTo(35,62,55,40,55,22.5),t.bezierCurveTo(55,22.5,55,-15,20,-15),t.bezierCurveTo(5,-15,0,-3,0,0),t.closePath(),t.fillStyle=`rgba(${(e=>{let t=e.replace("#","");3===t.length&&(t=t.split("").map(e=>e+e).join(""));const r=parseInt(t,16);return`${r>>16&255},${r>>8&255},${255&r}`})(r)},${o})`,t.fill(),t.restore()})(s.x,s.y,s.size,Math.max(s.life,0)),(s.life<=0||s.x<-50||s.y<-50||s.x>e.width+50||s.y>e.height+50)&&l.splice(a,1)}),o=requestAnimationFrame(h)},m=e=>{for(let t=0;t<3;t++)d(e.clientX,e.clientY);for(;l.length>2*n;)l.shift()},x=()=>{c()};return c(),(()=>{for(let t=0;t<n;t++)d(Math.random()*e.width,Math.random()*e.height)})(),h(),window.addEventListener("mousemove",m),window.addEventListener("resize",x),()=>{cancelAnimationFrame(o),window.removeEventListener("mousemove",m),window.removeEventListener("resize",x)}},[r,a,s]),t.jsx("canvas",{ref:i,className:`pointer-events-none fixed inset-0 z-10 h-full w-full mix-blend-screen ${o??""}`})},p=()=>Math.random()>.5?1:-1,u=(e,t,r,s)=>r+((e,t)=>{const r=(e=>{let t=0;for(let r=0;r<e.length;r+=1)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t})(`${e}:${t}`),s=1e4*Math.sin(r);return s-Math.floor(s)})(e,t)*(s-r),b=(e,t,r)=>Math.min(r,Math.max(t,e)),f=(e,t,r,s)=>{const a=s,o=s,i=s+t,l=s+t,n=t/3,c=.6*r;return[`M ${a} ${o}`,(e=>{if(0===e)return`L ${i} ${o}`;const t=a+n,s=a+2*n;return[`L ${t} ${o}`,`C ${t+c} ${o-e*r} ${s-c} ${o-e*r} ${s} ${o}`,`L ${i} ${o}`].join(" ")})(e.top),(e=>{if(0===e)return`L ${i} ${l}`;const t=o+n,s=o+2*n;return[`L ${i} ${t}`,`C ${i+e*r} ${t+c} ${i+e*r} ${s-c} ${i} ${s}`,`L ${i} ${l}`].join(" ")})(e.right),(e=>{if(0===e)return`L ${a} ${l}`;const t=a+2*n,s=a+n;return[`L ${t} ${l}`,`C ${t-c} ${l+e*r} ${s+c} ${l+e*r} ${s} ${l}`,`L ${a} ${l}`].join(" ")})(e.bottom),(e=>{if(0===e)return`L ${a} ${o}`;const t=o+2*n,s=o+n;return[`L ${a} ${t}`,`C ${a-e*r} ${t-c} ${a-e*r} ${s+c} ${a} ${s}`,`L ${a} ${o}`].join(" ")})(e.left),"Z"].join(" ")},g=(e,t)=>`cell-${e}-${t}`,w=(e,t)=>{const r={};for(let s=0;s<e;s+=1)for(let e=0;e<t;e+=1)r[g(s,e)]=null;return r};function j({children:r,imageUrl:s,rows:a=3,cols:o=3,missingCount:i=5,title:l="Assemble our secret puzzle",description:n="Slide the missing pieces onto the board until the picture is whole.",solvedTitle:c="Puzzle complete!",solvedDescription:d="Ready for the next surprise.",onSolved:h,resetLabel:m="Shuffle puzzle pieces",controls:x,pretitle:j="Mini game",dragLabel:v="Drag each piece to the correct slot.",movesLabel:y="Moves"}){const N=e.useMemo(()=>((e,t)=>{const r=Math.floor(720/(1.5*t)),s=Math.min(160,Math.max(60,r)),a=s/4,o=a,i=s+2*o,l=s*t,n=s*e,c=[],d=Array.from({length:e},()=>Array.from({length:t},()=>({top:0,right:0,bottom:0,left:0})));for(let h=0;h<e;h+=1)for(let r=0;r<t;r+=1){const i=0===h?0:-1*d[h-1][r].bottom,l=0===r?0:-1*d[h][r-1].right,n={top:i,right:r===t-1?0:p(),bottom:h===e-1?0:p(),left:l};d[h][r]=n,c.push({id:`${h}-${r}`,row:h,col:r,connectors:n,path:f(n,s,a,o)})}return{pieces:c,base:s,knob:a,offset:o,dimension:i,rows:e,cols:t,boardWidth:l,boardHeight:n}})(a,o),[a,o]),[k,$]=e.useState(()=>w(a,o)),[C,z]=e.useState([]),[M,L]=e.useState(null),[S,T]=e.useState(0),[D,E]=e.useState(null),[H,B]=e.useState(!1),P=s??"/images/example-image-tajen.jpg",A=`${e.useId().replace(/:/g,"")}-outline`,[F,W]=e.useState(()=>`${Date.now()}`),G=e.useCallback(()=>{const{placements:e,missingPieces:t}=((e,t)=>{const r=e.pieces.length,s=Math.min(Math.max(t,1),r),a=(e=>{const t=[...e];for(let r=t.length-1;r>0;r-=1){const e=Math.floor(Math.random()*(r+1));[t[r],t[e]]=[t[e],t[r]]}return t})(e.pieces.map(e=>e.id)).slice(0,s),o=w(e.rows,e.cols);return e.pieces.forEach(e=>{const t=g(e.row,e.col);o[t]=a.includes(e.id)?null:e.id}),{placements:o,missingPieces:a}})(N,i);$(e),z(t),L(null),T(0),E(null),B(!1),se.current.clear(),W(`${Date.now()}-${Math.random()}`)},[N,i]);e.useEffect(()=>{G()},[G,s]);const I=e.useMemo(()=>{const e=new Map;return N.pieces.forEach(t=>e.set(t.id,t)),e},[N.pieces]),R=e.useMemo(()=>C.map(e=>I.get(e)).filter(e=>Boolean(e)).filter(e=>!Object.values(k).some(t=>t===e.id)),[C,I,k]),Y=Math.min(N.boardWidth+96,960),X=e.useMemo(()=>Math.max(Math.round(.1*N.base),8),[N.base]),_=e.useMemo(()=>N.dimension+2*X,[N.dimension,X]),O=2.4*_+48,U=Math.max(4,Math.ceil(N.pieces.length/4)),K=_*Math.min(U,12),q=e.useRef(1),Z=e.useCallback(e=>({topFactor:u(`${F}-${e.id}`,"top",.05,.95),leftFactor:u(`${F}-${e.id}`,"left",.05,.95),zIndex:q.current++}),[F]),J=e.useMemo(()=>{const e=new Map;return N.pieces.forEach(t=>{e.set(t.id,Z(t))}),e},[N.pieces,Z]),[Q,V]=e.useState(J);e.useEffect(()=>{V(new Map(J))},[J]),e.useEffect(()=>{let e=0;J.forEach(t=>{t.zIndex>e&&(e=t.zIndex)}),e>=q.current&&(q.current=e+1)},[J]);const ee=e.useMemo(()=>{const e=new Set;return Object.values(k).forEach(t=>{t&&e.add(t)}),e},[k]),te=e.useRef(null),re=e.useRef({}),se=e.useRef(new Set),ae=e.useCallback(e=>{V(t=>{const r=t.get(e);if(!r)return t;if(r.zIndex===q.current-1)return t;const s=new Map(t);return s.set(e,{...r,zIndex:q.current++}),s})},[]),oe=e.useCallback((e,t)=>{const r=I.get(e);if(!r||!C.includes(e))return;const s=t.match(/cell-(\d+)-(\d+)/);if(!s)return;const[,a,o]=s;if(r.row!==Number(a)||r.col!==Number(o))return E(t),void setTimeout(()=>{E(e=>e===t?null:e)},500);se.current.add(e),delete re.current[e],$(r=>({...r,[t]:e})),L(null),T(e=>e+1)},[C,I]),ie=e.useCallback((e,t)=>{e.preventDefault();const r=e.dataTransfer.getData("text/plain");r&&oe(r,t)},[oe]),le=e.useCallback(e=>{M&&oe(M,e)},[oe,M]),ne=e.useCallback((e,t)=>{e.dataTransfer.setData("text/plain",t),e.dataTransfer.effectAllowed="move",re.current[t]={x:e.clientX||e.pageX||0,y:e.clientY||e.pageY||0},L(t)},[]),ce=e.useCallback((e,t)=>{const r=e.clientX||e.pageX||0,s=e.clientY||e.pageY||0;0===r&&0===s&&re.current[t]||(re.current[t]={x:r,y:s})},[]),de=e.useCallback((e,t)=>{const r=re.current[t];if(delete re.current[t],se.current.has(t)||ee.has(t))return void se.current.delete(t);const s=te.current;if(!s)return;const a=s.getBoundingClientRect();let o=e.clientX||e.pageX||r?.x||0,i=e.clientY||e.pageY||r?.y||0;0===o&&0===i&&(o=a.left+a.width*u(`${F}-${t}`,"fallback-x",.1,.9),i=a.top+a.height*u(`${F}-${t}`,"fallback-y",.1,.9));const l=Math.max(a.width,O),n=Math.max(a.height,K),c=Math.max(l-_,0),d=Math.max(n-_,0),h=b(o-a.left-_/2,0,c),m=b(i-a.top-_/2,0,d),x=c>0?h/c:.5,p=d>0?m/d:.5;V(e=>{const r=new Map(e);return r.set(t,{topFactor:p,leftFactor:x,zIndex:Math.round(u(`${F}-${t}`,"z-adjust",60,140))}),r}),L(e=>e===t?null:e)},[ee,_,F,O,K,L]);return e.useEffect(()=>{Object.values(k).every(e=>null!==e)&&C.length>0&&(B(!0),h?.())},[C.length,h,k]),H?t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"rounded-3xl border border-white/25 bg-white/10 p-6 text-center text-white backdrop-blur",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-white/60",children:"Stage unlocked"}),t.jsx("h2",{className:"mt-3 text-2xl font-bold",children:c}),t.jsx("p",{className:"mt-4 text-sm text-white/70",children:d}),t.jsxs("p",{className:"mt-4 text-xs uppercase tracking-[0.28em] text-white/50",children:["Total langkah: ",S]})]}),x?t.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:x}):null,r]}):t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"space-y-3 text-center",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-white/60",children:j}),t.jsx("h2",{className:"text-2xl font-bold text-white",children:l}),t.jsx("p",{className:"text-sm text-white/70",children:n})]}),x?t.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:x}):null,t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.28em] text-white/60 text-center lg:text-left",children:v}),t.jsxs("div",{className:"flex flex-col items-center gap-8 lg:flex-row lg:items-start lg:justify-start lg:gap-16 lg:pl-6",children:[t.jsxs("div",{className:"flex flex-col items-center gap-6 lg:-ml-8 lg:-mr-6",children:[t.jsxs("div",{className:"relative w-full rounded-[2.5rem] border border-white/15 bg-white/10 p-6 shadow-[0_24px_45px_rgba(15,23,42,0.25)] backdrop-blur",style:{maxWidth:`min(90vw, ${Y}px)`},children:[t.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[2.5rem] border border-white/20"}),t.jsxs("div",{className:"relative mx-auto overflow-visible rounded-[2rem] bg-slate-900 shadow-inner shadow-black/35",style:{padding:24,width:N.boardWidth+48,height:N.boardHeight+48},children:[t.jsxs("svg",{width:N.boardWidth,height:N.boardHeight,viewBox:`0 0 ${N.boardWidth} ${N.boardHeight}`,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:A,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"rgba(99,102,241,0.6)"}),t.jsx("stop",{offset:"100%",stopColor:"rgba(244,114,182,0.6)"})]}),N.pieces.map(e=>t.jsx("clipPath",{id:`clip-${e.id}`,children:t.jsx("path",{d:e.path,transform:`translate(${e.col*N.base-N.offset} ${e.row*N.base-N.offset})`})},e.id))]}),t.jsx("image",{href:P,x:0,y:0,width:N.boardWidth,height:N.boardHeight,preserveAspectRatio:"xMidYMid slice"}),N.pieces.map(e=>t.jsx("path",{d:e.path,transform:`translate(${e.col*N.base-N.offset} ${e.row*N.base-N.offset})`,fill:"none",stroke:`url(#${A})`,strokeWidth:2.4,opacity:.85},`outline-${e.id}`)),N.pieces.map(e=>{const r=g(e.row,e.col);return k[r]?null:t.jsx("path",{d:e.path,transform:`translate(${e.col*N.base-N.offset} ${e.row*N.base-N.offset})`,fill:"rgba(15,23,42,0.72)"},`mask-${e.id}`)})]}),t.jsx("div",{className:"absolute left-1/2 top-1/2 grid -translate-x-1/2 -translate-y-1/2",style:{width:N.boardWidth,height:N.boardHeight,gridTemplateColumns:`repeat(${o}, ${N.base}px)`,gridTemplateRows:`repeat(${a}, ${N.base}px)`},children:N.pieces.map(e=>{const r=g(e.row,e.col),s=k[r]===e.id;return t.jsx("div",{onDragOver:e=>e.preventDefault(),onDrop:e=>ie(e,r),onClick:()=>le(r),className:"relative flex h-full w-full items-center justify-center rounded-[1.85rem] transition "+(s?"":D===r?"ring-2 ring-rose-400/80":M?"ring-1 ring-white/40":"")},r)})})]})]}),t.jsxs("div",{className:"flex w-full max-w-sm flex-col items-center gap-3 rounded-[1.8rem] border border-white/15 bg-white/6 px-4 py-5 text-xs uppercase tracking-[0.28em] text-white/75",children:[t.jsxs("span",{children:[y,": ",S]}),t.jsx("button",{type:"button",onClick:G,className:"rounded-full border border-white/30 px-5 py-2 text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-white transition hover:border-white/55 hover:bg-white/15",children:m})]})]}),t.jsxs("div",{ref:te,className:"relative w-full overflow-visible rounded-[2.5rem] border border-white/15 bg-white/12 text-white shadow-[0_18px_30px_rgba(15,23,42,0.2)] backdrop-blur lg:w-auto lg:flex-shrink-0",style:{maxWidth:`${O}px`,height:K},children:[t.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[2.5rem] border border-white/15"}),R.map(e=>(e=>{const r=Q.get(e.id),s=Math.max(K-_,0),i=Math.max(O-_,0),l=(r?b(r.topFactor,0,1):.5)*s,n=(r?b(r.leftFactor,0,1):.5)*i,c=M===e.id?250:r?.zIndex??30,d={width:_,height:_,padding:X,position:"absolute",top:l,left:n,transform:M===e.id?"scale(1.05)":"scale(1)",transformOrigin:"50% 50%",zIndex:c,boxShadow:M===e.id?"0 16px 32px rgba(15,23,42,0.45)":"0 10px 24px rgba(15,23,42,0.35)",transition:"transform 220ms ease, box-shadow 220ms ease"};return t.jsx("button",{type:"button",draggable:!0,onDragStart:t=>ne(t,e.id),onDrag:t=>ce(t,e.id),onDragEnd:t=>de(t,e.id),onPointerDown:()=>ae(e.id),onFocus:()=>ae(e.id),onClick:()=>L(e.id),className:"group absolute cursor-grab overflow-hidden rounded-[1.6rem] border border-white/25 bg-white/10 transition-shadow duration-200 ease-out active:cursor-grabbing",style:d,children:t.jsxs("svg",{width:N.dimension,height:N.dimension,viewBox:`0 0 ${N.dimension} ${N.dimension}`,style:{width:N.dimension,height:N.dimension},children:[t.jsx("defs",{children:t.jsx("clipPath",{id:`pool-${e.id}`,children:t.jsx("path",{d:e.path})})}),t.jsx("image",{clipPath:`url(#pool-${e.id})`,href:P,x:N.offset-e.col*N.base,y:N.offset-e.row*N.base,width:N.base*o+2*N.offset,height:N.base*a+2*N.offset}),t.jsx("path",{d:e.path,fill:"none",stroke:"rgba(255,255,255,0.85)",strokeWidth:1.5})]})},e.id)})(e))]})]})]})}const v={rose:"from-rose-400 to-rose-600",pink:"from-pink-400 to-pink-600",amber:"from-amber-400 to-amber-600",blue:"from-blue-400 to-blue-600",purple:"from-purple-400 to-purple-600",indigo:"from-indigo-400 to-indigo-600",teal:"from-teal-400 to-teal-600"};function y({rewards:r,maxSelections:s=2,onComplete:i,title:l="ðŸŽ Lucky Box",description:n="Pilih kotak hadiah dan dapatkan kejutan spesial!",selectLabel:c="Pilih",confirmLabel:d="Lanjutkan"}){const[h,m]=e.useState([]),[x,p]=e.useState(new Map),[u,b]=e.useState(null),f=Array.from({length:5},(e,t)=>t),g=h.length===s;return t.jsxs("div",{className:"flex min-h-[600px] flex-col items-center justify-center space-y-8 px-4 py-12",children:[t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:l}),t.jsx("p",{className:"text-white/80 max-w-md",children:n}),t.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-4 py-2 text-sm font-semibold text-white backdrop-blur",children:[t.jsx(a,{className:"h-4 w-4"}),h.length," / ",s," dipilih"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-3 md:grid-cols-5 md:gap-8",children:f.map(e=>{const i=h.includes(e),l=x.get(e),n=u===e,d=h.length>=s&&!i;return t.jsxs("button",{onClick:()=>(e=>{h.length>=s&&!h.includes(e)||x.has(e)||(b(e),setTimeout(()=>{const t=Array.from(x.values()).map(e=>e.id),s=r.filter(e=>!t.includes(e.id)),a=s[Math.floor(Math.random()*s.length)];p(t=>new Map(t).set(e,a)),m(t=>[...t,e]),b(null)},800))})(e),disabled:d||i,className:`group relative flex h-32 w-32 flex-col items-center justify-center rounded-3xl border-2 transition-all duration-300 ${i?"border-white/60 bg-white/20 scale-105":d?"border-white/10 bg-white/5 opacity-40 cursor-not-allowed":"border-white/30 bg-white/10 hover:border-white/50 hover:bg-white/15 hover:scale-110 cursor-pointer"} ${n?"animate-bounce":""}`,children:[l?t.jsxs("div",{className:"flex flex-col items-center gap-2 text-center p-2",children:[t.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br ${v[l.color]||v.rose} text-2xl shadow-lg`,children:l.icon}),t.jsx("div",{className:"space-y-1",children:t.jsx("p",{className:"text-xs font-bold text-white line-clamp-2",children:l.title})})]}):t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(o,{className:"h-12 w-12 transition-transform "+(d||i?"":"group-hover:rotate-12"),strokeWidth:1.5}),t.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-white/70",children:c})]}),n&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-3xl bg-white/20 backdrop-blur",children:t.jsx(a,{className:"h-8 w-8 animate-spin text-yellow-300"})})]},e)})}),g&&t.jsxs("div",{className:"space-y-4 text-center animate-fade-in",children:[t.jsxs("div",{className:"rounded-3xl border border-white/30 bg-white/10 p-6 backdrop-blur max-w-2xl",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ðŸŽ‰ Hadiah yang kamu dapatkan:"}),t.jsx("div",{className:"space-y-3",children:Array.from(x.values()).map((e,r)=>t.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-white/20 bg-white/5 p-4 text-left",children:[t.jsx("div",{className:`flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-gradient-to-br ${v[e.color]||v.rose} text-xl shadow-lg`,children:e.icon}),t.jsxs("div",{className:"flex-1 space-y-1",children:[t.jsx("h4",{className:"font-semibold text-white",children:e.title}),t.jsx("p",{className:"text-sm text-white/70",children:e.description})]})]},r))})]}),t.jsxs("button",{onClick:()=>{const e=Array.from(x.values());i(e)},className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-rose-500 to-purple-600 px-8 py-3 text-sm font-semibold text-white shadow-lg transition hover:from-rose-600 hover:to-purple-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:[d,t.jsx(a,{className:"h-4 w-4"})]})]})]})}const N=[{background:"linear-gradient(135deg, #ffeef8 0%, #ffe0f0 50%, #ffd4e8 100%)",pattern:"radial-gradient(circle at 20% 30%, rgba(255, 105, 180, 0.15) 0%, transparent 50%), radial-gradient(circle at 80% 70%, rgba(255, 182, 193, 0.15) 0%, transparent 50%)",decorations:[{icon:i,color:"#ff69b4",size:40,top:"10%",left:"5%",rotation:-15,opacity:.3},{icon:i,color:"#ff1493",size:30,top:"15%",right:"8%",rotation:20,opacity:.25},{icon:i,color:"#ffb6c1",size:25,bottom:"12%",left:"10%",rotation:10,opacity:.2},{icon:i,color:"#ff69b4",size:35,bottom:"8%",right:"6%",rotation:-25,opacity:.3}],textColor:"#8b0045",titleColor:"#c71585",borderColor:"rgba(255, 105, 180, 0.3)"},{background:"linear-gradient(135deg, #f3e7ff 0%, #e9d5ff 50%, #dcc3ff 100%)",pattern:"radial-gradient(circle at 30% 20%, rgba(147, 51, 234, 0.12) 0%, transparent 50%), radial-gradient(circle at 70% 80%, rgba(168, 85, 247, 0.12) 0%, transparent 50%)",decorations:[{icon:l,color:"#9333ea",size:35,top:"8%",left:"7%",rotation:0,opacity:.35},{icon:l,color:"#a855f7",size:28,top:"12%",right:"10%",rotation:45,opacity:.3},{icon:a,color:"#c084fc",size:32,bottom:"10%",left:"8%",rotation:-20,opacity:.25},{icon:l,color:"#9333ea",size:30,bottom:"15%",right:"7%",rotation:15,opacity:.3}],textColor:"#581c87",titleColor:"#7c3aed",borderColor:"rgba(147, 51, 234, 0.3)"},{background:"linear-gradient(135deg, #fff5f0 0%, #ffe8dc 50%, #ffdcc8 100%)",pattern:"radial-gradient(circle at 25% 25%, rgba(251, 146, 60, 0.1) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(253, 186, 116, 0.1) 0%, transparent 50%)",decorations:[{icon:n,color:"#fb923c",size:38,top:"12%",left:"6%",rotation:-10,opacity:.3},{icon:n,color:"#fdba74",size:32,top:"10%",right:"9%",rotation:25,opacity:.25},{icon:n,color:"#fb923c",size:28,bottom:"14%",left:"9%",rotation:15,opacity:.28},{icon:a,color:"#fdba74",size:30,bottom:"10%",right:"8%",rotation:-15,opacity:.25}],textColor:"#7c2d12",titleColor:"#ea580c",borderColor:"rgba(251, 146, 60, 0.3)"},{background:"linear-gradient(135deg, #f0fdf9 0%, #d1fae5 50%, #a7f3d0 100%)",pattern:"radial-gradient(circle at 35% 30%, rgba(16, 185, 129, 0.12) 0%, transparent 50%), radial-gradient(circle at 65% 70%, rgba(52, 211, 153, 0.12) 0%, transparent 50%)",decorations:[{icon:a,color:"#10b981",size:36,top:"9%",left:"8%",rotation:10,opacity:.32},{icon:i,color:"#34d399",size:30,top:"14%",right:"7%",rotation:-20,opacity:.28},{icon:a,color:"#10b981",size:32,bottom:"11%",left:"7%",rotation:20,opacity:.3},{icon:i,color:"#34d399",size:28,bottom:"13%",right:"9%",rotation:-10,opacity:.25}],textColor:"#064e3b",titleColor:"#059669",borderColor:"rgba(16, 185, 129, 0.3)"},{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #bae6fd 100%)",pattern:"radial-gradient(circle at 40% 20%, rgba(14, 165, 233, 0.1) 0%, transparent 50%), radial-gradient(circle at 60% 80%, rgba(56, 189, 248, 0.1) 0%, transparent 50%)",decorations:[{icon:l,color:"#0ea5e9",size:34,top:"11%",left:"9%",rotation:-5,opacity:.3},{icon:a,color:"#38bdf8",size:30,top:"13%",right:"8%",rotation:30,opacity:.28},{icon:l,color:"#0ea5e9",size:28,bottom:"12%",left:"10%",rotation:12,opacity:.25},{icon:a,color:"#38bdf8",size:32,bottom:"9%",right:"7%",rotation:-18,opacity:.3}],textColor:"#0c4a6e",titleColor:"#0284c7",borderColor:"rgba(14, 165, 233, 0.3)"},{background:"linear-gradient(135deg, #faf5ff 0%, #f3e8ff 50%, #e9d5ff 100%)",pattern:"radial-gradient(circle at 28% 35%, rgba(192, 132, 252, 0.15) 0%, transparent 50%), radial-gradient(circle at 72% 65%, rgba(216, 180, 254, 0.15) 0%, transparent 50%)",decorations:[{icon:i,color:"#c084fc",size:36,top:"10%",left:"7%",rotation:-12,opacity:.32},{icon:l,color:"#d8b4fe",size:30,top:"12%",right:"9%",rotation:22,opacity:.28},{icon:a,color:"#c084fc",size:32,bottom:"13%",left:"8%",rotation:8,opacity:.3},{icon:i,color:"#d8b4fe",size:28,bottom:"11%",right:"10%",rotation:-20,opacity:.25}],textColor:"#581c87",titleColor:"#9333ea",borderColor:"rgba(192, 132, 252, 0.3)"}],k=e.memo(({deco:e,idx:r})=>{const s=e.icon;return t.jsx("div",{className:"absolute animate-float",style:{top:e.top,bottom:e.bottom,left:e.left,right:e.right,transform:`rotate(${e.rotation}deg)`,opacity:e.opacity,animationDelay:.5*r+"s"},children:t.jsx(s,{size:e.size,color:e.color,fill:e.color,strokeWidth:1.5})})});k.displayName="DecorationIcon";const $=e.memo(function({pages:r,onComplete:s,title:a="ðŸ“– Scrapbook Kenangan",description:o="Balik tiap halaman untuk melihat kenangan manis kita",nextLabel:i="Halaman Berikutnya",prevLabel:l="Halaman Sebelumnya",finishLabel:n="Selesai"}){const[m,x]=e.useState(0),[p,u]=e.useState(!1),b=()=>{s()},f=m===r.length-1,g=0===m,w=r[m],j=e.useMemo(()=>N[m%N.length],[m]);return w?t.jsxs("div",{className:"flex min-h-[600px] flex-col items-center justify-center space-y-8 px-4 py-12",children:[t.jsxs("div",{className:"text-center space-y-3 max-w-2xl",children:[t.jsx("h2",{className:"text-3xl font-bold text-white drop-shadow-lg",children:a}),t.jsx("p",{className:"text-white/90 drop-shadow",children:o}),t.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/25 px-4 py-2 text-sm font-semibold text-white backdrop-blur-md shadow-lg border border-white/30",children:[t.jsx(c,{className:"h-4 w-4"}),"Halaman ",m+1," dari ",r.length]})]}),t.jsx("div",{className:"relative w-full max-w-4xl perspective-1000",children:t.jsxs("div",{className:"transform-style-3d transition-all duration-500 "+(p?"scale-95 opacity-70 rotate-y-12":"scale-100 opacity-100"),children:[t.jsx("div",{className:"absolute -inset-2 rounded-[2rem] bg-black/10 blur-xl"}),t.jsxs("div",{className:"relative rounded-[2rem] border-4 shadow-2xl overflow-hidden",style:{background:j.background,borderColor:j.borderColor},children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:j.pattern}}),t.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:j.decorations.map((e,r)=>t.jsx(k,{deco:e,idx:r},r))}),t.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 border-l-4 border-t-4 rounded-tl-[2rem] opacity-30",style:{borderColor:j.borderColor}}),t.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 border-r-4 border-t-4 rounded-tr-[2rem] opacity-30",style:{borderColor:j.borderColor}}),t.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 border-l-4 border-b-4 rounded-bl-[2rem] opacity-30",style:{borderColor:j.borderColor}}),t.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 border-r-4 border-b-4 rounded-br-[2rem] opacity-30",style:{borderColor:j.borderColor}}),t.jsxs("div",{className:"relative z-10 p-8 md:p-12 space-y-6",children:[w.image&&t.jsx("div",{className:"overflow-hidden rounded-2xl border-4 border-white shadow-xl transform hover:scale-[1.02] transition-transform duration-300",children:t.jsx("img",{src:w.image,alt:w.title,className:"h-64 w-full object-cover md:h-80",loading:"lazy",decoding:"async"})}),t.jsx("h3",{className:"text-2xl md:text-4xl font-bold drop-shadow-sm",style:{color:j.titleColor},children:w.title}),w.body&&t.jsx("div",{className:"prose prose-lg max-w-none",children:t.jsx("p",{className:"text-base md:text-lg leading-relaxed whitespace-pre-wrap font-medium",style:{color:j.textColor},children:w.body})}),t.jsx("div",{className:"pt-6 flex justify-center gap-2",children:r.map((e,r)=>t.jsx("button",{onClick:()=>(e=>{p||e===m||(u(!0),setTimeout(()=>{x(e),u(!1)},300))})(r),className:"h-2.5 rounded-full transition-all duration-300 "+(r===m?"w-10 shadow-md":"w-2.5 hover:w-4"),style:{backgroundColor:r===m?j.titleColor:`${j.titleColor}40`},"aria-label":`Go to page ${r+1}`},r))})]})]})]})}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[t.jsxs("button",{onClick:()=>{m>0&&!p&&(u(!0),setTimeout(()=>{x(e=>e-1),u(!1)},300))},disabled:g||p,className:"inline-flex items-center gap-2 rounded-full border-2 border-white/40 bg-white/20 px-6 py-3 text-sm font-semibold text-white transition hover:border-white/60 hover:bg-white/30 hover:scale-105 disabled:cursor-not-allowed disabled:opacity-40 disabled:hover:border-white/40 disabled:hover:bg-white/20 disabled:hover:scale-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60 backdrop-blur-md shadow-lg",children:[t.jsx(d,{className:"h-4 w-4"}),l]}),f?t.jsxs("button",{onClick:b,className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 px-8 py-3 text-sm font-semibold text-white shadow-xl transition hover:from-emerald-600 hover:to-teal-700 hover:scale-105 hover:shadow-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:[n,t.jsx(h,{className:"h-4 w-4"})]}):t.jsxs("button",{onClick:()=>{m<r.length-1&&!p&&(u(!0),setTimeout(()=>{x(e=>e+1),u(!1)},300))},disabled:p,className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-rose-500 to-purple-600 px-8 py-3 text-sm font-semibold text-white shadow-xl transition hover:from-rose-600 hover:to-purple-700 hover:scale-105 hover:shadow-2xl disabled:cursor-not-allowed disabled:opacity-40 disabled:hover:scale-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:[i,t.jsx(h,{className:"h-4 w-4"})]})]}),t.jsx("style",{children:"\n                @keyframes float {\n                    0%, 100% {\n                        transform: translateY(0px) rotate(var(--rotation));\n                    }\n                    50% {\n                        transform: translateY(-10px) rotate(var(--rotation));\n                    }\n                }\n                .animate-float {\n                    animation: float 3s ease-in-out infinite;\n                }\n            "})]}):t.jsxs("div",{className:"flex min-h-[600px] flex-col items-center justify-center space-y-6 px-4 py-12",children:[t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx(c,{className:"h-16 w-16 mx-auto text-white/60"}),t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Belum ada halaman"}),t.jsx("p",{className:"text-white/70",children:"Scrapbook masih kosong. Tambahkan kenangan di halaman konfigurasi."})]}),t.jsx("button",{onClick:b,className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-6 py-3 text-sm font-semibold text-white transition hover:bg-white/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:n})]})});function C({memoryLane:a,space:i,skipPuzzle:l=!1}){const n=i?.slug?route("surprise.story.space",{space:i.slug}):route("surprise.story"),c=a.puzzle.grid.rows??4,d=a.puzzle.grid.cols??4,h=c*d,p=a.puzzle.levels??[],[u,b]=e.useState(0),[f,g]=e.useState([]),[w,v]=e.useState(new Map),[N,k]=e.useState(l||0===p.length),[C,z]=e.useState(new Map),M=N?null:p[u]??null,L=w.get(u)||"puzzle",S=()=>{u<p.length-1?b(e=>e+1):k(!0)},T=e.useMemo(()=>N?p.map((e,t)=>t):f,[f,N,p]),D=t.jsxs("div",{className:"flex flex-col gap-16",children:[t.jsxs("header",{className:"flex flex-col items-center gap-5 text-center",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.48em] text-white/60",children:a.intro.tagline}),t.jsx("h1",{className:"text-3xl font-bold leading-tight sm:text-4xl",children:a.intro.title}),t.jsx("p",{className:"max-w-2xl text-sm text-white/70 sm:text-base",children:a.intro.description})]}),t.jsxs("section",{className:"space-y-6",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.28em] text-white/60",children:a.intro.stepsHeading}),t.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:a.steps.map((e,r)=>t.jsxs("div",{className:"flex h-full flex-col justify-between rounded-3xl border border-white/20 bg-white/10 p-6 backdrop-blur transition hover:border-white/30 hover:bg-white/15",children:[t.jsxs("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/25 text-sm font-semibold text-white",children:["0",r+1]}),t.jsxs("div",{className:"mt-4 space-y-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:e.title}),t.jsx("p",{className:"text-sm leading-6 text-white/70",children:e.prompt})]}),t.jsxs("div",{className:"mt-5 rounded-2xl border border-dashed border-white/25 bg-black/20 px-4 py-3 text-xs text-white/70",children:[t.jsx("span",{className:"font-semibold text-white",children:a.intro.challengeLabel})," ",e.action]})]},e.id))})]}),t.jsxs("section",{className:"space-y-6",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.28em] text-white/60",children:a.intro.tokensHeading}),t.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:a.tokens.map(e=>t.jsxs("div",{className:"rounded-3xl border border-white/20 bg-white/10 p-5 text-sm text-white/80 backdrop-blur transition hover:border-white/35 hover:bg-white/15",children:[t.jsx("div",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${e.accent}`,children:e.label}),t.jsx("p",{className:"mt-3 leading-6",children:e.detail})]},e.label))})]}),t.jsxs("section",{className:"space-y-6 rounded-3xl border border-white/20 bg-black/20 p-6 text-sm text-white/70 backdrop-blur",children:[t.jsx("p",{children:a.intro.closing.description}),t.jsxs("div",{className:"flex flex-col gap-4 rounded-2xl border border-white/15 bg-white/10 p-5 text-white",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-rose-500/20 text-rose-100",children:t.jsx(o,{className:"h-6 w-6"})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:a.intro.closing.story.title}),t.jsx("p",{className:"text-sm text-white/70",children:a.intro.closing.story.description})]})]}),t.jsx("div",{children:t.jsx(r,{href:n,className:"inline-flex items-center justify-center rounded-full bg-rose-500 px-6 py-3 text-sm font-semibold text-white transition hover:bg-rose-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900",children:a.intro.closing.story.button})})]}),t.jsx("p",{className:"text-center text-xs text-white/60",children:a.intro.closing.footnote})]}),N&&T.length>=3&&i?.slug&&t.jsx("section",{className:"mt-8 flex justify-center",children:t.jsx(r,{href:route("storybook.show",{space:i.slug}),className:"inline-flex items-center justify-center rounded-full bg-blue-500 px-6 py-3 text-sm font-semibold text-white transition hover:bg-blue-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900",children:"Lihat Story Book"})})]});return t.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-900 text-white",children:[t.jsx(s,{title:a.headTitle}),t.jsx("div",{className:"absolute inset-0 -z-20 bg-gradient-to-br from-rose-500/30 via-slate-900 to-amber-500/40"}),t.jsx("div",{className:"absolute left-[-120px] top-[-160px] -z-10 h-[500px] w-[500px] rounded-full bg-rose-400/30 blur-3xl"}),t.jsx("div",{className:"absolute right-[-160px] bottom-[-200px] -z-10 h-[560px] w-[560px] rounded-full bg-purple-500/30 blur-3xl"}),t.jsx(x,{color:"#f97316",heartCount:34,className:"opacity-55"}),t.jsx(m,{code:a.secretGate.code,title:a.secretGate.title,description:a.secretGate.description,placeholder:a.secretGate.placeholder,buttonLabel:a.secretGate.buttonLabel,errorMessage:a.secretGate.errorMessage,hint:a.secretGate.hint,hintLabel:a.secretGate.hintLabel,accessLabel:a.secretGate.accessLabel,inputLabel:a.secretGate.inputLabel,children:t.jsxs("div",{className:"relative mx-auto flex min-h-screen w-full max-w-6xl flex-col px-4 py-16 sm:px-8 md:px-12",children:[p.length>0&&t.jsx("div",{className:"mb-8 flex flex-wrap justify-center gap-3 text-[0.65rem] font-semibold uppercase tracking-[0.32em]",children:p.map((e,r)=>{const s=T.includes(r),a=s?"border-emerald-300 bg-emerald-500/20 text-emerald-100":N||r!==u||s?"border-white/20 text-white/50":"border-white/60 bg-white/15 text-white";return t.jsx("div",{className:`rounded-full border px-4 py-2 transition ${a}`,children:e.label},e.id)})}),!N&&M?t.jsxs(t.Fragment,{children:["puzzle"===L&&t.jsx(j,{rows:c,cols:d,missingCount:h,imageUrl:M.image??p[u]?.image??"/images/puzzle/defaultimage.png",title:M.label??a.puzzle.title,description:a.puzzle.description,solvedTitle:M.summaryTitle,solvedDescription:M.summaryBody,resetLabel:a.puzzle.resetLabel,pretitle:a.puzzle.pretitle,dragLabel:a.puzzle.dragLabel,movesLabel:a.puzzle.movesLabel,onSolved:()=>{f.includes(u)||g(e=>[...e,u]);const e=p[u];e?.rewards&&e.rewards.length>0?v(e=>new Map(e).set(u,"reward")):e?.flipbook&&e.flipbook.length>0?v(e=>new Map(e).set(u,"flipbook")):(v(e=>new Map(e).set(u,"completed")),1===p.length&&k(!0))},children:t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{type:"button",onClick:S,className:"rounded-full bg-white/20 px-6 py-2 text-sm font-semibold uppercase tracking-[0.32em] text-white transition hover:bg-white/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:u<p.length-1?"Lanjut Level":"Buka Memory Lane"})})},M.id),"reward"===L&&M.rewards&&t.jsx(y,{rewards:M.rewards,maxSelections:2,onComplete:e=>{z(t=>new Map(t).set(u,e)),v(e=>new Map(e).set(u,"completed"))},title:"ðŸŽ Lucky Box",description:"Pilih 2 kotak hadiah dan dapatkan kejutan spesial!",selectLabel:"Pilih",confirmLabel:"Lanjutkan"}),"flipbook"===L&&M.flipbook&&t.jsx($,{pages:M.flipbook,onComplete:()=>{v(e=>new Map(e).set(u,"completed"))},title:"ðŸ“– Scrapbook Kenangan",description:"Balik tiap halaman untuk melihat kenangan manis kita",nextLabel:"Halaman Berikutnya",prevLabel:"Halaman Sebelumnya",finishLabel:"Selesai"}),"completed"===L&&t.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:t.jsx("button",{type:"button",onClick:S,className:"rounded-full bg-gradient-to-r from-rose-500 to-purple-600 px-8 py-4 text-lg font-semibold text-white shadow-lg transition hover:from-rose-600 hover:to-purple-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:u<p.length-1?"Lanjut ke Level Berikutnya":"Buka Memory Lane"})})]}):null,N&&t.jsx("div",{className:"mt-12",children:D})]})})]})}export{C as default};
