import{r as e,j as t}from"./vendor-DXr22Lef.js";const r="meet.jit.si";let n;const o=(e=r,t,o)=>n||(n=((e,t,r)=>{return n=void 0,o=void 0,c=function*(){return new Promise((n,o)=>{if(window.JitsiMeetExternalAPI)return n(window.JitsiMeetExternalAPI);const i=document.createElement("script"),c=t?`?release=${t}`:"",a=r?`${r}/`:"";i.async=!0,i.src=`https://${e}/${a}external_api.js${c}`,i.onload=()=>n(window.JitsiMeetExternalAPI),i.onerror=()=>o(new Error(`Script load error: ${i.src}`)),document.head.appendChild(i)})},new((i=void 0)||(i=Promise))(function(e,t){function r(e){try{s(c.next(e))}catch(r){t(r)}}function a(e){try{s(c.throw(e))}catch(r){t(r)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(r,a)}s((c=c.apply(n,o||[])).next())});var n,o,i,c})(e,t,o),n),i=(e,t)=>t?`${t}/${e}`:e,c=e=>e?"stage.8x8.vc":"8x8.vc";let a=0;const s=e=>`${e}-${a++}`,u=({domain:n=r,roomName:i,configOverwrite:c,interfaceConfigOverwrite:a,jwt:u,invitees:l,devices:f,userInfo:d,release:p,lang:m,spinner:v,onApiReady:w,onReadyToClose:g,getIFrameRef:y})=>{const[j,x]=e.useState(!0),[O,h]=e.useState(!1),b=e.useRef(),$=e.useRef(),I=e.useRef(null),E=e.useMemo(()=>s("jitsiMeeting"),[s]);e.useEffect(()=>{o(n,p,(e=>{const t=e.split("/");if(!(t.length<=1))return t[0]})(i)).then(e=>{b.current=e,h(!0)}).catch(e=>{})},[]);const P=e.useCallback(e=>{$.current=new e(n,{roomName:i,configOverwrite:c,interfaceConfigOverwrite:a,jwt:u,invitees:l,devices:f,userInfo:d,release:p,lang:m,parentNode:I.current}),x(!1),$.current&&("function"==typeof w&&w($.current),$.current.on("readyToClose",()=>{"function"==typeof g&&g()}),I.current&&"function"==typeof y&&y(I.current))},[$,I,w,g,y,n,i,c,a,u,l,f,d,p,m]);e.useEffect(()=>{O&&!$.current&&b.current&&P(b.current)},[O,P]);const C=e.useCallback(()=>v?!j||$.current?null:t.jsx(v,{},void 0):null,[v,$.current]);return t.jsxs(t.Fragment,{children:[C(),t.jsx("div",{id:E,ref:I},E)]},void 0)},l=e=>{var{appId:r,roomName:n,useStaging:o,release:a}=e,s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["appId","roomName","useStaging","release"]);return t.jsx(u,Object.assign({domain:c(o),roomName:i(n,r),release:a},s),void 0)};export{l as J};
