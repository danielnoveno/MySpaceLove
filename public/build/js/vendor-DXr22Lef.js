var t,e,n,i,s,r,o,a,l,h,c,u,d,p,f,m,g,y,v,_,b,w,x,S,A,k,P,E,C,M,T,R,I,D,O,N,F,B,z,W,j,U,H,$,V,q,G,Z,K,X,Y,Q,J,tt,et,nt,it,st,rt,ot,at,lt,ht,ct,ut,dt,pt,ft,mt,gt,yt,vt,_t,bt,wt,xt,St,At,kt,Pt,Et,Ct,Mt,Tt,Lt,Rt,It,Dt,Ot,Nt,Ft,Bt,zt,Wt,jt,Ut,Ht,$t,Vt,qt,Gt,Zt,Kt,Xt,Yt,Qt,Jt,te,ee,ne,ie,se,re,oe,ae,le,he,ce,ue,de,pe,fe,me,ge,ye,ve,_e,be,we,xe,Se,Ae,ke,Pe,Ee,Ce,Me,Te,Le,Re,Ie,De,Oe,Ne,Fe,Be,ze,We,je,Ue,He,$e,Ve,qe,Ge,Ze,Ke,Xe,Ye,Qe,Je,tn,en,nn,sn,rn,on,an,ln,hn,cn,un,dn,pn,fn,mn,gn,yn,vn,_n,bn,wn,xn,Sn,An,kn,Pn,En,Cn,Mn,Tn,Ln,Rn,In,Dn,On,Nn,Fn,Bn,zn,Wn,jn,Un,Hn,$n,Vn,qn,Gn,Zn,Kn,Xn,Yn,Qn,Jn,ti,ei,ni,ii,si,ri,oi,ai,li,hi,ci,ui,di,pi,fi,mi,gi,yi,vi,_i,bi,wi,xi,Si,Ai,ki,Pi,Ei,Ci,Mi,Ti,Li,Ri,Ii,Di,Oi,Ni,Fi,Bi,zi,Wi,ji,Ui,Hi,$i,Vi,qi,Gi,Zi,Ki,Xi,Yi,Qi,Ji,ts,es,ns,is,ss,rs,os,as,ls,hs,cs,us,ds,ps,fs,ms,gs,ys,vs,_s,bs,ws,xs,Ss,As,ks,Ps,Es,Cs,Ms,Ts,Ls,Rs,Is,Ds,Os,Ns,Fs,Bs,zs,Ws,js,Us,Hs,$s,Vs,qs,Gs,Zs,Ks,Xs,Ys,Qs,Js,tr,er,nr,ir,sr,rr,or,ar,lr,hr,cr,ur,dr,pr,fr,mr,gr,yr,vr,_r,br,wr,xr,Sr,Ar,kr,Pr,Er,Cr,Mr,Tr,Lr,Rr,Ir,Dr,Or,Nr,Fr,Br,zr,Wr,jr,Ur,Hr,$r,Vr,qr,Gr,Zr,Kr,Xr,Yr,Qr,Jr,to,eo,no,io,so,ro,oo,ao,lo,ho,co,uo,po,fo,mo,go,yo,vo,_o,bo,wo,xo,So,Ao,ko,Po,Eo,Co,Mo,To,Lo,Ro,Io,Do,Oo,No,Fo,Bo,zo,Wo,jo,Uo,Ho,$o,Vo,qo,Go,Zo,Ko,Xo,Yo,Qo,Jo,ta,ea,na,ia,sa,ra,oa,aa,la,ha,ca,ua,da,pa,fa,ma,ga,ya,va,_a,ba,wa,xa,Sa,Aa,ka,Pa,Ea,Ca,Ma,Ta,La,Ra,Ia,Da,Oa,Na,Fa,Ba,za,Wa,ja,Ua,Ha,$a,Va,qa,Ga,Za,Ka,Xa,Ya,Qa,Ja,tl,el,nl,il,sl,rl,ol,al,ll,hl,cl,ul,dl,pl,fl,ml,gl,yl,vl,_l,bl,wl,xl,Sl,Al,kl,Pl,El,Cl,Ml,Tl,Ll,Rl,Il,Dl,Ol,Nl,Fl,Bl,zl,Wl,jl,Ul,Hl,$l,Vl,ql,Gl,Zl,Kl,Xl,Yl,Ql,Jl,th,eh,nh,ih,sh,rh,oh,ah,lh,hh,ch,uh,dh,ph,fh,mh,gh,yh,vh,_h,bh,wh,xh,Sh,Ah,kh,Ph,Eh,Ch,Mh,Th,Lh,Rh,Ih,Dh,Oh,Nh,Fh,Bh,zh,Wh,jh,Uh,Hh,$h,Vh,qh,Gh,Zh,Kh,Xh,Yh,Qh,Jh,tc,ec,nc,ic,sc,rc,oc,ac,lc,hc,cc,uc,dc,pc,fc,mc,gc,yc,vc,_c,bc,wc,xc,Sc,Ac,kc,Pc,Ec,Cc,Mc,Tc,Lc,Rc,Ic,Dc,Oc,Nc,Fc,Bc,zc,Wc,jc,Uc,Hc,$c,Vc,qc,Gc,Zc,Kc,Xc,Yc,Qc,Jc,tu,eu,nu,iu,su,ru,ou,au,lu,hu,cu,uu,du,pu,fu,mu,gu,yu,vu,_u,bu,wu,xu,Su,Au,ku,Pu,Eu,Cu,Mu,Tu,Lu,Ru,Iu,Du,Ou,Nu,Fu,Bu=Object.defineProperty,zu=t=>{throw TypeError(t)},Wu=(t,e,n)=>((t,e,n)=>e in t?Bu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!=typeof e?e+"":e,n),ju=(t,e,n)=>e.has(t)||zu("Cannot "+n),Uu=(t,e,n)=>(ju(t,e,"read from private field"),n?n.call(t):e.get(t)),Hu=(t,e,n)=>e.has(t)?zu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),$u=(t,e,n,i)=>(ju(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Vu=(t,e,n)=>(ju(t,e,"access private method"),n),qu=(t,e,n,i)=>({set _(i){$u(t,e,i,n)},get _(){return Uu(t,e,i)}});function Gu(t,e){for(var n=0;n<e.length;n++){const i=e[n];if("string"!=typeof i&&!Array.isArray(i))for(const e in i)if("default"!==e&&!(e in t)){const n=Object.getOwnPropertyDescriptor(i,e);n&&Object.defineProperty(t,e,n.get?n:{enumerable:!0,get:()=>i[e]})}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Zu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ku(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xu(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(e){var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,i.get?i:{enumerable:!0,get:function(){return t[e]}})}),n}var Yu={exports:{}},Qu={},Ju={exports:{}},td={},ed=Symbol.for("react.element"),nd=Symbol.for("react.portal"),id=Symbol.for("react.fragment"),sd=Symbol.for("react.strict_mode"),rd=Symbol.for("react.profiler"),od=Symbol.for("react.provider"),ad=Symbol.for("react.context"),ld=Symbol.for("react.forward_ref"),hd=Symbol.for("react.suspense"),cd=Symbol.for("react.memo"),ud=Symbol.for("react.lazy"),dd=Symbol.iterator,pd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fd=Object.assign,md={};function gd(t,e,n){this.props=t,this.context=e,this.refs=md,this.updater=n||pd}function yd(){}function vd(t,e,n){this.props=t,this.context=e,this.refs=md,this.updater=n||pd}gd.prototype.isReactComponent={},gd.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},gd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},yd.prototype=gd.prototype;var _d=vd.prototype=new yd;_d.constructor=vd,fd(_d,gd.prototype),_d.isPureReactComponent=!0;var bd=Array.isArray,wd=Object.prototype.hasOwnProperty,xd={current:null},Sd={key:!0,ref:!0,__self:!0,__source:!0};function Ad(t,e,n){var i,s={},r=null,o=null;if(null!=e)for(i in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(r=""+e.key),e)wd.call(e,i)&&!Sd.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var l=Array(a),h=0;h<a;h++)l[h]=arguments[h+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps)void 0===s[i]&&(s[i]=a[i]);return{$$typeof:ed,type:t,key:r,ref:o,props:s,_owner:xd.current}}function kd(t){return"object"==typeof t&&null!==t&&t.$$typeof===ed}var Pd=/\/+/g;function Ed(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function Cd(t,e,n,i,s){var r=typeof t;"undefined"!==r&&"boolean"!==r||(t=null);var o=!1;if(null===t)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ed:case nd:o=!0}}if(o)return s=s(o=t),t=""===i?"."+Ed(o,0):i,bd(s)?(n="",null!=t&&(n=t.replace(Pd,"$&/")+"/"),Cd(s,e,n,"",function(t){return t})):null!=s&&(kd(s)&&(s=function(t,e){return{$$typeof:ed,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Pd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=""===i?".":i+":",bd(t))for(var a=0;a<t.length;a++){var l=i+Ed(r=t[a],a);o+=Cd(r,e,n,l,s)}else if(l=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=dd&&t[dd]||t["@@iterator"])?t:null}(t),"function"==typeof l)for(t=l.call(t),a=0;!(r=t.next()).done;)o+=Cd(r=r.value,e,n,l=i+Ed(r,a++),s);else if("object"===r)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Md(t,e,n){if(null==t)return t;var i=[],s=0;return Cd(t,i,"","",function(t){return e.call(n,t,s++)}),i}function Td(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var Ld={current:null},Rd={transition:null},Id={ReactCurrentDispatcher:Ld,ReactCurrentBatchConfig:Rd,ReactCurrentOwner:xd};function Dd(){throw Error("act(...) is not supported in production builds of React.")}td.Children={map:Md,forEach:function(t,e,n){Md(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Md(t,function(){e++}),e},toArray:function(t){return Md(t,function(t){return t})||[]},only:function(t){if(!kd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},td.Component=gd,td.Fragment=id,td.Profiler=rd,td.PureComponent=vd,td.StrictMode=sd,td.Suspense=hd,td.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Id,td.act=Dd,td.cloneElement=function(t,e,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=fd({},t.props),s=t.key,r=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(r=e.ref,o=xd.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wd.call(e,l)&&!Sd.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==a?a[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){a=Array(l);for(var h=0;h<l;h++)a[h]=arguments[h+2];i.children=a}return{$$typeof:ed,type:t.type,key:s,ref:r,props:i,_owner:o}},td.createContext=function(t){return(t={$$typeof:ad,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:od,_context:t},t.Consumer=t},td.createElement=Ad,td.createFactory=function(t){var e=Ad.bind(null,t);return e.type=t,e},td.createRef=function(){return{current:null}},td.forwardRef=function(t){return{$$typeof:ld,render:t}},td.isValidElement=kd,td.lazy=function(t){return{$$typeof:ud,_payload:{_status:-1,_result:t},_init:Td}},td.memo=function(t,e){return{$$typeof:cd,type:t,compare:void 0===e?null:e}},td.startTransition=function(t){var e=Rd.transition;Rd.transition={};try{t()}finally{Rd.transition=e}},td.unstable_act=Dd,td.useCallback=function(t,e){return Ld.current.useCallback(t,e)},td.useContext=function(t){return Ld.current.useContext(t)},td.useDebugValue=function(){},td.useDeferredValue=function(t){return Ld.current.useDeferredValue(t)},td.useEffect=function(t,e){return Ld.current.useEffect(t,e)},td.useId=function(){return Ld.current.useId()},td.useImperativeHandle=function(t,e,n){return Ld.current.useImperativeHandle(t,e,n)},td.useInsertionEffect=function(t,e){return Ld.current.useInsertionEffect(t,e)},td.useLayoutEffect=function(t,e){return Ld.current.useLayoutEffect(t,e)},td.useMemo=function(t,e){return Ld.current.useMemo(t,e)},td.useReducer=function(t,e,n){return Ld.current.useReducer(t,e,n)},td.useRef=function(t){return Ld.current.useRef(t)},td.useState=function(t){return Ld.current.useState(t)},td.useSyncExternalStore=function(t,e,n){return Ld.current.useSyncExternalStore(t,e,n)},td.useTransition=function(){return Ld.current.useTransition()},td.version="18.3.1",Ju.exports=td;var Od=Ju.exports;const Nd=Ku(Od),Fd=Gu({__proto__:null,default:Nd},[Od]);var Bd=Od,zd=Symbol.for("react.element"),Wd=Symbol.for("react.fragment"),jd=Object.prototype.hasOwnProperty,Ud=Bd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hd={key:!0,ref:!0,__self:!0,__source:!0};function $d(t,e,n){var i,s={},r=null,o=null;for(i in void 0!==n&&(r=""+n),void 0!==e.key&&(r=""+e.key),void 0!==e.ref&&(o=e.ref),e)jd.call(e,i)&&!Hd.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:zd,type:t,key:r,ref:o,props:s,_owner:Ud.current}}Qu.Fragment=Wd,Qu.jsx=$d,Qu.jsxs=$d,Yu.exports=Qu;var Vd=Yu.exports;function qd(t,e){return function(){return t.apply(e,arguments)}}const{toString:Gd}=Object.prototype,{getPrototypeOf:Zd}=Object,{iterator:Kd,toStringTag:Xd}=Symbol,Yd=(t=>e=>{const n=Gd.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qd=t=>(t=t.toLowerCase(),e=>Yd(e)===t),Jd=t=>e=>typeof e===t,{isArray:tp}=Array,ep=Jd("undefined");function np(t){return null!==t&&!ep(t)&&null!==t.constructor&&!ep(t.constructor)&&rp(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ip=Qd("ArrayBuffer"),sp=Jd("string"),rp=Jd("function"),op=Jd("number"),ap=t=>null!==t&&"object"==typeof t,lp=t=>{if("object"!==Yd(t))return!1;const e=Zd(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Xd in t||Kd in t)},hp=Qd("Date"),cp=Qd("File"),up=Qd("Blob"),dp=Qd("FileList"),pp=Qd("URLSearchParams"),[fp,mp,gp,yp]=["ReadableStream","Request","Response","Headers"].map(Qd);function vp(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let i,s;if("object"!=typeof t&&(t=[t]),tp(t))for(i=0,s=t.length;i<s;i++)e.call(null,t[i],i,t);else{if(np(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),r=s.length;let o;for(i=0;i<r;i++)o=s[i],e.call(null,t[o],o,t)}}function _p(t,e){if(np(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i,s=n.length;for(;s-- >0;)if(i=n[s],e===i.toLowerCase())return i;return null}const bp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,wp=t=>!ep(t)&&t!==bp,xp=(t=>e=>t&&e instanceof t)("undefined"!=typeof Uint8Array&&Zd(Uint8Array)),Sp=Qd("HTMLFormElement"),Ap=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),kp=Qd("RegExp"),Pp=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};vp(n,(n,s)=>{let r;!1!==(r=e(n,s,t))&&(i[s]=r||n)}),Object.defineProperties(t,i)},Ep=Qd("AsyncFunction"),Cp=(Mp="function"==typeof setImmediate,Tp=rp(bp.postMessage),Mp?setImmediate:Tp?(Lp=`axios@${Math.random()}`,Rp=[],bp.addEventListener("message",({source:t,data:e})=>{t===bp&&e===Lp&&Rp.length&&Rp.shift()()},!1),t=>{Rp.push(t),bp.postMessage(Lp,"*")}):t=>setTimeout(t));var Mp,Tp,Lp,Rp;const Ip="undefined"!=typeof queueMicrotask?queueMicrotask.bind(bp):"undefined"!=typeof process&&process.nextTick||Cp,Dp={isArray:tp,isArrayBuffer:ip,isBuffer:np,isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||rp(t.append)&&("formdata"===(e=Yd(t))||"object"===e&&rp(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&ip(t.buffer),e},isString:sp,isNumber:op,isBoolean:t=>!0===t||!1===t,isObject:ap,isPlainObject:lp,isEmptyObject:t=>{if(!ap(t)||np(t))return!1;try{return 0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype}catch(e){return!1}},isReadableStream:fp,isRequest:mp,isResponse:gp,isHeaders:yp,isUndefined:ep,isDate:hp,isFile:cp,isBlob:up,isRegExp:kp,isFunction:rp,isStream:t=>ap(t)&&rp(t.pipe),isURLSearchParams:pp,isTypedArray:xp,isFileList:dp,forEach:vp,merge:function t(){const{caseless:e,skipUndefined:n}=wp(this)&&this||{},i={},s=(s,r)=>{const o=e&&_p(i,r)||r;lp(i[o])&&lp(s)?i[o]=t(i[o],s):lp(s)?i[o]=t({},s):tp(s)?i[o]=s.slice():n&&ep(s)||(i[o]=s)};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&vp(arguments[r],s);return i},extend:(t,e,n,{allOwnKeys:i}={})=>(vp(e,(e,i)=>{n&&rp(e)?t[i]=qd(e,n):t[i]=e},{allOwnKeys:i}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,i)=>{let s,r,o;const a={};if(e=e||{},null==t)return e;do{for(s=Object.getOwnPropertyNames(t),r=s.length;r-- >0;)o=s[r],i&&!i(o,t,e)||a[o]||(e[o]=t[o],a[o]=!0);t=!1!==n&&Zd(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:Yd,kindOfTest:Qd,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return-1!==i&&i===n},toArray:t=>{if(!t)return null;if(tp(t))return t;let e=t.length;if(!op(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Kd]).call(t);let i;for(;(i=n.next())&&!i.done;){const n=i.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const i=[];for(;null!==(n=t.exec(e));)i.push(n);return i},isHTMLForm:Sp,hasOwnProperty:Ap,hasOwnProp:Ap,reduceDescriptors:Pp,freezeMethods:t=>{Pp(t,(e,n)=>{if(rp(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=t[n];rp(i)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(t,e)=>{const n={},i=t=>{t.forEach(t=>{n[t]=!0})};return tp(t)?i(t):i(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,e,n){return e.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:_p,global:bp,isContextDefined:wp,isSpecCompliantForm:function(t){return!!(t&&rp(t.append)&&"FormData"===t[Xd]&&t[Kd])},toJSONObject:t=>{const e=new Array(10),n=(t,i)=>{if(ap(t)){if(e.indexOf(t)>=0)return;if(np(t))return t;if(!("toJSON"in t)){e[i]=t;const s=tp(t)?[]:{};return vp(t,(t,e)=>{const r=n(t,i+1);!ep(r)&&(s[e]=r)}),e[i]=void 0,s}}return t};return n(t,0)},isAsyncFn:Ep,isThenable:t=>t&&(ap(t)||rp(t))&&rp(t.then)&&rp(t.catch),setImmediate:Cp,asap:Ip,isIterable:t=>null!=t&&rp(t[Kd])};function Op(t,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}Dp.inherits(Op,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Dp.toJSONObject(this.config),code:this.code,status:this.status}}});const Np=Op.prototype,Fp={};function Bp(t){return Dp.isPlainObject(t)||Dp.isArray(t)}function zp(t){return Dp.endsWith(t,"[]")?t.slice(0,-2):t}function Wp(t,e,n){return t?t.concat(e).map(function(t,e){return t=zp(t),!n&&e?"["+t+"]":t}).join(n?".":""):e}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Fp[t]={value:t}}),Object.defineProperties(Op,Fp),Object.defineProperty(Np,"isAxiosError",{value:!0}),Op.from=(t,e,n,i,s,r)=>{const o=Object.create(Np);Dp.toFlatObject(t,o,function(t){return t!==Error.prototype},t=>"isAxiosError"!==t);const a=t&&t.message?t.message:"Error",l=null==e&&t?t.code:e;return Op.call(o,a,l,n,i,s),t&&null==o.cause&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",r&&Object.assign(o,r),o};const jp=Dp.toFlatObject(Dp,{},null,function(t){return/^is[A-Z]/.test(t)});function Up(t,e,n){if(!Dp.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const i=(n=Dp.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,e){return!Dp.isUndefined(e[t])})).metaTokens,s=n.visitor||h,r=n.dots,o=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Dp.isSpecCompliantForm(e);if(!Dp.isFunction(s))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(Dp.isDate(t))return t.toISOString();if(Dp.isBoolean(t))return t.toString();if(!a&&Dp.isBlob(t))throw new Op("Blob is not supported. Use a Buffer instead.");return Dp.isArrayBuffer(t)||Dp.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function h(t,n,s){let a=t;if(t&&!s&&"object"==typeof t)if(Dp.endsWith(n,"{}"))n=i?n:n.slice(0,-2),t=JSON.stringify(t);else if(Dp.isArray(t)&&function(t){return Dp.isArray(t)&&!t.some(Bp)}(t)||(Dp.isFileList(t)||Dp.endsWith(n,"[]"))&&(a=Dp.toArray(t)))return n=zp(n),a.forEach(function(t,i){!Dp.isUndefined(t)&&null!==t&&e.append(!0===o?Wp([n],i,r):null===o?n:n+"[]",l(t))}),!1;return!!Bp(t)||(e.append(Wp(s,n,r),l(t)),!1)}const c=[],u=Object.assign(jp,{defaultVisitor:h,convertValue:l,isVisitable:Bp});if(!Dp.isObject(t))throw new TypeError("data must be an object");return function t(n,i){if(!Dp.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+i.join("."));c.push(n),Dp.forEach(n,function(n,r){!0===(!(Dp.isUndefined(n)||null===n)&&s.call(e,n,Dp.isString(r)?r.trim():r,i,u))&&t(n,i?i.concat(r):[r])}),c.pop()}}(t),e}function Hp(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function $p(t,e){this._pairs=[],t&&Up(t,this,e)}const Vp=$p.prototype;function qp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gp(t,e,n){if(!e)return t;const i=n&&n.encode||qp;Dp.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let r;if(r=s?s(e,n):Dp.isURLSearchParams(e)?e.toString():new $p(e,n).toString(i),r){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}Vp.append=function(t,e){this._pairs.push([t,e])},Vp.toString=function(t){const e=t?function(e){return t.call(this,e,Hp)}:Hp;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")};class Zp{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Dp.forEach(this.handlers,function(e){null!==e&&t(e)})}}const Kp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xp={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:$p,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Yp="undefined"!=typeof window&&"undefined"!=typeof document,Qp="object"==typeof navigator&&navigator||void 0,Jp=Yp&&(!Qp||["ReactNative","NativeScript","NS"].indexOf(Qp.product)<0),tf="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ef=Yp&&window.location.href||"http://localhost",nf={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Yp,hasStandardBrowserEnv:Jp,hasStandardBrowserWebWorkerEnv:tf,navigator:Qp,origin:ef},Symbol.toStringTag,{value:"Module"})),...Xp};function sf(t){function e(t,n,i,s){let r=t[s++];if("__proto__"===r)return!0;const o=Number.isFinite(+r),a=s>=t.length;return r=!r&&Dp.isArray(i)?i.length:r,a?(Dp.hasOwnProp(i,r)?i[r]=[i[r],n]:i[r]=n,!o):(i[r]&&Dp.isObject(i[r])||(i[r]=[]),e(t,n,i[r],s)&&Dp.isArray(i[r])&&(i[r]=function(t){const e={},n=Object.keys(t);let i;const s=n.length;let r;for(i=0;i<s;i++)r=n[i],e[r]=t[r];return e}(i[r])),!o)}if(Dp.isFormData(t)&&Dp.isFunction(t.entries)){const n={};return Dp.forEachEntry(t,(t,i)=>{e(function(t){return Dp.matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0])}(t),i,n,0)}),n}return null}const rf={transitional:Kp,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,s=Dp.isObject(t);if(s&&Dp.isHTMLForm(t)&&(t=new FormData(t)),Dp.isFormData(t))return i?JSON.stringify(sf(t)):t;if(Dp.isArrayBuffer(t)||Dp.isBuffer(t)||Dp.isStream(t)||Dp.isFile(t)||Dp.isBlob(t)||Dp.isReadableStream(t))return t;if(Dp.isArrayBufferView(t))return t.buffer;if(Dp.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Up(t,new nf.classes.URLSearchParams,{visitor:function(t,e,n,i){return nf.isNode&&Dp.isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}(t,this.formSerializer).toString();if((r=Dp.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Up(r?{"files[]":t}:t,e&&new e,this.formSerializer)}}return s||i?(e.setContentType("application/json",!1),function(t){if(Dp.isString(t))try{return(0,JSON.parse)(t),Dp.trim(t)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||rf.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(Dp.isResponse(t)||Dp.isReadableStream(t))return t;if(t&&Dp.isString(t)&&(n&&!this.responseType||i)){const n=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(s){if(n){if("SyntaxError"===s.name)throw Op.from(s,Op.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nf.classes.FormData,Blob:nf.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Dp.forEach(["delete","get","head","post","put","patch"],t=>{rf.headers[t]={}});const of=Dp.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),af=Symbol("internals");function lf(t){return t&&String(t).trim().toLowerCase()}function hf(t){return!1===t||null==t?t:Dp.isArray(t)?t.map(hf):String(t)}function cf(t,e,n,i,s){return Dp.isFunction(i)?i.call(this,e,n):(s&&(e=n),Dp.isString(e)?Dp.isString(i)?-1!==e.indexOf(i):Dp.isRegExp(i)?i.test(e):void 0:void 0)}let uf=class{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function s(t,e,n){const s=lf(e);if(!s)throw new Error("header name must be a non-empty string");const r=Dp.findKey(i,s);(!r||void 0===i[r]||!0===n||void 0===n&&!1!==i[r])&&(i[r||e]=hf(t))}const r=(t,e)=>Dp.forEach(t,(t,n)=>s(t,n,e));if(Dp.isPlainObject(t)||t instanceof this.constructor)r(t,e);else if(Dp.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))r((t=>{const e={};let n,i,s;return t&&t.split("\n").forEach(function(t){s=t.indexOf(":"),n=t.substring(0,s).trim().toLowerCase(),i=t.substring(s+1).trim(),!n||e[n]&&of[n]||("set-cookie"===n?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e})(t),e);else if(Dp.isObject(t)&&Dp.isIterable(t)){let n,i,s={};for(const e of t){if(!Dp.isArray(e))throw TypeError("Object iterator must return a key-value pair");s[i=e[0]]=(n=s[i])?Dp.isArray(n)?[...n,e[1]]:[n,e[1]]:e[1]}r(s,e)}else null!=t&&s(e,t,n);return this}get(t,e){if(t=lf(t)){const n=Dp.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}(t);if(Dp.isFunction(e))return e.call(this,t,n);if(Dp.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=lf(t)){const n=Dp.findKey(this,t);return!(!n||void 0===this[n]||e&&!cf(0,this[n],n,e))}return!1}delete(t,e){const n=this;let i=!1;function s(t){if(t=lf(t)){const s=Dp.findKey(n,t);!s||e&&!cf(0,n[s],s,e)||(delete n[s],i=!0)}}return Dp.isArray(t)?t.forEach(s):s(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const s=e[n];t&&!cf(0,this[s],s,t,!0)||(delete this[s],i=!0)}return i}normalize(t){const e=this,n={};return Dp.forEach(this,(i,s)=>{const r=Dp.findKey(n,s);if(r)return e[r]=hf(i),void delete e[s];const o=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}(s):String(s).trim();o!==s&&delete e[s],e[o]=hf(i),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Dp.forEach(this,(n,i)=>{null!=n&&!1!==n&&(e[i]=t&&Dp.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(t=>n.set(t)),n}static accessor(t){const e=(this[af]=this[af]={accessors:{}}).accessors,n=this.prototype;function i(t){const i=lf(t);e[i]||(function(t,e){const n=Dp.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(t,n,s){return this[i].call(this,e,t,n,s)},configurable:!0})})}(n,t),e[i]=!0)}return Dp.isArray(t)?t.forEach(i):i(t),this}};function df(t,e){const n=this||rf,i=e||n,s=uf.from(i.headers);let r=i.data;return Dp.forEach(t,function(t){r=t.call(n,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function pf(t){return!(!t||!t.__CANCEL__)}function ff(t,e,n){Op.call(this,null==t?"canceled":t,Op.ERR_CANCELED,e,n),this.name="CanceledError"}function mf(t,e,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new Op("Request failed with status code "+n.status,[Op.ERR_BAD_REQUEST,Op.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}uf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Dp.reduceDescriptors(uf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}}),Dp.freezeMethods(uf),Dp.inherits(ff,Op,{__CANCEL__:!0});const gf=(t,e,n=3)=>{let i=0;const s=function(t,e){t=t||10;const n=new Array(t),i=new Array(t);let s,r=0,o=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),h=i[o];s||(s=l),n[r]=a,i[r]=l;let c=o,u=0;for(;c!==r;)u+=n[c++],c%=t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),l-s<e)return;const d=h&&l-h;return d?Math.round(1e3*u/d):void 0}}(50,250);return function(n,r){let o,a,l=0,h=1e3/r;const c=(n,r=Date.now())=>{l=r,o=null,a&&(clearTimeout(a),a=null),(n=>{const r=n.loaded,o=n.lengthComputable?n.total:void 0,a=r-i,l=s(a);i=r,t({loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&r<=o?(o-r)/l:void 0,event:n,lengthComputable:null!=o,[e?"download":"upload"]:!0})})(...n)};return[(...t)=>{const e=Date.now(),n=e-l;n>=h?c(t,e):(o=t,a||(a=setTimeout(()=>{a=null,c(o)},h-n)))},()=>o&&c(o)]}(0,n)},yf=(t,e)=>{const n=null!=t;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},vf=t=>(...e)=>Dp.asap(()=>t(...e)),_f=nf.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,nf.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(nf.origin),nf.navigator&&/(msie|trident)/i.test(nf.navigator.userAgent)):()=>!0,bf=nf.hasStandardBrowserEnv?{write(t,e,n,i,s,r,o){if("undefined"==typeof document)return;const a=[`${t}=${encodeURIComponent(e)}`];Dp.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),Dp.isString(i)&&a.push(`path=${i}`),Dp.isString(s)&&a.push(`domain=${s}`),!0===r&&a.push("secure"),Dp.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if("undefined"==typeof document)return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function wf(t,e,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);return t&&(i||0==n)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const xf=t=>t instanceof uf?{...t}:t;function Sf(t,e){e=e||{};const n={};function i(t,e,n,i){return Dp.isPlainObject(t)&&Dp.isPlainObject(e)?Dp.merge.call({caseless:i},t,e):Dp.isPlainObject(e)?Dp.merge({},e):Dp.isArray(e)?e.slice():e}function s(t,e,n,s){return Dp.isUndefined(e)?Dp.isUndefined(t)?void 0:i(void 0,t,0,s):i(t,e,0,s)}function r(t,e){if(!Dp.isUndefined(e))return i(void 0,e)}function o(t,e){return Dp.isUndefined(e)?Dp.isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function a(n,s,r){return r in e?i(n,s):r in t?i(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(t,e,n)=>s(xf(t),xf(e),0,!0)};return Dp.forEach(Object.keys({...t,...e}),function(i){const r=l[i]||s,o=r(t[i],e[i],i);Dp.isUndefined(o)&&r!==a||(n[i]=o)}),n}const Af=t=>{const e=Sf({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=e;if(e.headers=o=uf.from(o),e.url=Gp(wf(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Dp.isFormData(n))if(nf.hasStandardBrowserEnv||nf.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Dp.isFunction(n.getHeaders)){const t=n.getHeaders(),e=["content-type","content-length"];Object.entries(t).forEach(([t,n])=>{e.includes(t.toLowerCase())&&o.set(t,n)})}if(nf.hasStandardBrowserEnv&&(i&&Dp.isFunction(i)&&(i=i(e)),i||!1!==i&&_f(e.url))){const t=s&&r&&bf.read(r);t&&o.set(s,t)}return e},kf="undefined"!=typeof XMLHttpRequest&&function(t){return new Promise(function(e,n){const i=Af(t);let s=i.data;const r=uf.from(i.headers).normalize();let o,a,l,h,c,{responseType:u,onUploadProgress:d,onDownloadProgress:p}=i;function f(){h&&h(),c&&c(),i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=uf.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());mf(function(t){e(t),f()},function(t){n(t),f()},{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:t,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Op("Request aborted",Op.ECONNABORTED,t,m)),m=null)},m.onerror=function(e){const i=new Op(e&&e.message?e.message:"Network Error",Op.ERR_NETWORK,t,m);i.event=e||null,n(i),m=null},m.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const s=i.transitional||Kp;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new Op(e,s.clarifyTimeoutError?Op.ETIMEDOUT:Op.ECONNABORTED,t,m)),m=null},void 0===s&&r.setContentType(null),"setRequestHeader"in m&&Dp.forEach(r.toJSON(),function(t,e){m.setRequestHeader(e,t)}),Dp.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),u&&"json"!==u&&(m.responseType=i.responseType),p&&([l,c]=gf(p,!0),m.addEventListener("progress",l)),d&&m.upload&&([a,h]=gf(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(o=e=>{m&&(n(!e||e.type?new ff(null,t,m):e),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const y=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(i.url);y&&-1===nf.protocols.indexOf(y)?n(new Op("Unsupported protocol "+y+":",Op.ERR_BAD_REQUEST,t)):m.send(s||null)})},Pf=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let n,i=new AbortController;const s=function(t){if(!n){n=!0,o();const e=t instanceof Error?t:this.reason;i.abort(e instanceof Op?e:new ff(e instanceof Error?e.message:e))}};let r=e&&setTimeout(()=>{r=null,s(new Op(`timeout ${e} of ms exceeded`,Op.ETIMEDOUT))},e);const o=()=>{t&&(r&&clearTimeout(r),r=null,t.forEach(t=>{t.unsubscribe?t.unsubscribe(s):t.removeEventListener("abort",s)}),t=null)};t.forEach(t=>t.addEventListener("abort",s));const{signal:a}=i;return a.unsubscribe=()=>Dp.asap(o),a}},Ef=function*(t,e){let n=t.byteLength;if(n<e)return void(yield t);let i,s=0;for(;s<n;)i=s+e,yield t.slice(s,i),s=i},Cf=(t,e,n,i)=>{const s=async function*(t,e){for await(const n of async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);const e=t.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}}(t))yield*Ef(n,e)}(t,e);let r,o=0,a=t=>{r||(r=!0,i&&i(t))};return new ReadableStream({async pull(t){try{const{done:e,value:i}=await s.next();if(e)return a(),void t.close();let r=i.byteLength;if(n){let t=o+=r;n(t)}t.enqueue(new Uint8Array(i))}catch(e){throw a(e),e}},cancel:t=>(a(t),s.return())},{highWaterMark:2})},{isFunction:Mf}=Dp,Tf=(({Request:t,Response:e})=>({Request:t,Response:e}))(Dp.global),{ReadableStream:Lf,TextEncoder:Rf}=Dp.global,If=(t,...e)=>{try{return!!t(...e)}catch(n){return!1}},Df=t=>{t=Dp.merge.call({skipUndefined:!0},Tf,t);const{fetch:e,Request:n,Response:i}=t,s=e?Mf(e):"function"==typeof fetch,r=Mf(n),o=Mf(i);if(!s)return!1;const a=s&&Mf(Lf),l=s&&("function"==typeof Rf?(t=>e=>t.encode(e))(new Rf):async t=>new Uint8Array(await new n(t).arrayBuffer())),h=r&&a&&If(()=>{let t=!1;const e=new n(nf.origin,{body:new Lf,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),c=o&&a&&If(()=>Dp.isReadableStream(new i("").body)),u={stream:c&&(t=>t.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!u[t]&&(u[t]=(e,n)=>{let i=e&&e[t];if(i)return i.call(e);throw new Op(`Response type '${t}' is not supported`,Op.ERR_NOT_SUPPORT,n)})});return async t=>{let{url:s,method:o,data:a,signal:d,cancelToken:p,timeout:f,onDownloadProgress:m,onUploadProgress:g,responseType:y,headers:v,withCredentials:_="same-origin",fetchOptions:b}=Af(t),w=e||fetch;y=y?(y+"").toLowerCase():"text";let x=Pf([d,p&&p.toAbortSignal()],f),S=null;const A=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let k;try{if(g&&h&&"get"!==o&&"head"!==o&&0!==(k=await(async(t,e)=>{const i=Dp.toFiniteNumber(t.getContentLength());return null==i?(async t=>{if(null==t)return 0;if(Dp.isBlob(t))return t.size;if(Dp.isSpecCompliantForm(t)){const e=new n(nf.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return Dp.isArrayBufferView(t)||Dp.isArrayBuffer(t)?t.byteLength:(Dp.isURLSearchParams(t)&&(t+=""),Dp.isString(t)?(await l(t)).byteLength:void 0)})(e):i})(v,a))){let t,e=new n(s,{method:"POST",body:a,duplex:"half"});if(Dp.isFormData(a)&&(t=e.headers.get("content-type"))&&v.setContentType(t),e.body){const[t,n]=yf(k,gf(vf(g)));a=Cf(e.body,65536,t,n)}}Dp.isString(_)||(_=_?"include":"omit");const e=r&&"credentials"in n.prototype,d={...b,signal:x,method:o.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:e?_:void 0};S=r&&new n(s,d);let p=await(r?w(S,b):w(s,d));const f=c&&("stream"===y||"response"===y);if(c&&(m||f&&A)){const t={};["status","statusText","headers"].forEach(e=>{t[e]=p[e]});const e=Dp.toFiniteNumber(p.headers.get("content-length")),[n,s]=m&&yf(e,gf(vf(m),!0))||[];p=new i(Cf(p.body,65536,n,()=>{s&&s(),A&&A()}),t)}y=y||"text";let P=await u[Dp.findKey(u,y)||"text"](p,t);return!f&&A&&A(),await new Promise((e,n)=>{mf(e,n,{data:P,headers:uf.from(p.headers),status:p.status,statusText:p.statusText,config:t,request:S})})}catch(P){if(A&&A(),P&&"TypeError"===P.name&&/Load failed|fetch/i.test(P.message))throw Object.assign(new Op("Network Error",Op.ERR_NETWORK,t,S),{cause:P.cause||P});throw Op.from(P,P&&P.code,t,S)}}},Of=new Map,Nf=t=>{let e=t&&t.env||{};const{fetch:n,Request:i,Response:s}=e,r=[i,s,n];let o,a,l=r.length,h=Of;for(;l--;)o=r[l],a=h.get(o),void 0===a&&h.set(o,a=l?new Map:Df(e)),h=a;return a};Nf();const Ff={http:null,xhr:kf,fetch:{get:Nf}};Dp.forEach(Ff,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}});const Bf=t=>`- ${t}`,zf=t=>Dp.isFunction(t)||null===t||!1===t,Wf=function(t,e){t=Dp.isArray(t)?t:[t];const{length:n}=t;let i,s;const r={};for(let o=0;o<n;o++){let n;if(i=t[o],s=i,!zf(i)&&(s=Ff[(n=String(i)).toLowerCase()],void 0===s))throw new Op(`Unknown adapter '${n}'`);if(s&&(Dp.isFunction(s)||(s=s.get(e))))break;r[n||"#"+o]=s}if(!s){const t=Object.entries(r).map(([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build"));throw new Op("There is no suitable adapter to dispatch the request "+(n?t.length>1?"since :\n"+t.map(Bf).join("\n"):" "+Bf(t[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function jf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ff(null,t)}function Uf(t){return jf(t),t.headers=uf.from(t.headers),t.data=df.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Wf(t.adapter||rf.adapter,t)(t).then(function(e){return jf(t),e.data=df.call(t,t.transformResponse,e),e.headers=uf.from(e.headers),e},function(e){return pf(e)||(jf(t),e&&e.response&&(e.response.data=df.call(t,t.transformResponse,e.response),e.response.headers=uf.from(e.response.headers))),Promise.reject(e)})}const Hf="1.13.2",$f={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{$f[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Vf={};$f.transitional=function(t,e,n){return(i,s,r)=>{if(!1===t)throw new Op(function(t,e){return"[Axios v"+Hf+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}(s," has been removed"+(e?" in "+e:"")),Op.ERR_DEPRECATED);return e&&!Vf[s]&&(Vf[s]=!0),!t||t(i,s,r)}},$f.spelling=function(t){return(t,e)=>!0};const qf={assertOptions:function(t,e,n){if("object"!=typeof t)throw new Op("options must be an object",Op.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const r=i[s],o=e[r];if(o){const e=t[r],n=void 0===e||o(e,r,t);if(!0!==n)throw new Op("option "+r+" must be "+n,Op.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Op("Unknown option "+r,Op.ERR_BAD_OPTION)}},validators:$f},Gf=qf.validators;let Zf=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Zp,response:new Zp}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";try{n.stack?e&&!String(n.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+e):n.stack=e}catch(i){}}throw n}}_request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=Sf(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:s}=e;void 0!==n&&qf.assertOptions(n,{silentJSONParsing:Gf.transitional(Gf.boolean),forcedJSONParsing:Gf.transitional(Gf.boolean),clarifyTimeoutError:Gf.transitional(Gf.boolean)},!1),null!=i&&(Dp.isFunction(i)?e.paramsSerializer={serialize:i}:qf.assertOptions(i,{encode:Gf.function,serialize:Gf.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),qf.assertOptions(e,{baseUrl:Gf.spelling("baseURL"),withXsrfToken:Gf.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=s&&Dp.merge(s.common,s[e.method]);s&&Dp.forEach(["delete","get","head","post","put","patch","common"],t=>{delete s[t]}),e.headers=uf.concat(r,s);const o=[];let a=!0;this.interceptors.request.forEach(function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,o.unshift(t.fulfilled,t.rejected))});const l=[];let h;this.interceptors.response.forEach(function(t){l.push(t.fulfilled,t.rejected)});let c,u=0;if(!a){const t=[Uf.bind(this),void 0];for(t.unshift(...o),t.push(...l),c=t.length,h=Promise.resolve(e);u<c;)h=h.then(t[u++],t[u++]);return h}c=o.length;let d=e;for(;u<c;){const t=o[u++],e=o[u++];try{d=t(d)}catch(p){e.call(this,p);break}}try{h=Uf.call(this,d)}catch(p){return Promise.reject(p)}for(u=0,c=l.length;u<c;)h=h.then(l[u++],l[u++]);return h}getUri(t){return Gp(wf((t=Sf(this.defaults,t)).baseURL,t.url,t.allowAbsoluteUrls),t.params,t.paramsSerializer)}};Dp.forEach(["delete","get","head","options"],function(t){Zf.prototype[t]=function(e,n){return this.request(Sf(n||{},{method:t,url:e,data:(n||{}).data}))}}),Dp.forEach(["post","put","patch"],function(t){function e(e){return function(n,i,s){return this.request(Sf(s||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Zf.prototype[t]=e(),Zf.prototype[t+"Form"]=e(!0)});const Kf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Kf).forEach(([t,e])=>{Kf[e]=t});const Xf=function t(e){const n=new Zf(e),i=qd(Zf.prototype.request,n);return Dp.extend(i,Zf.prototype,n,{allOwnKeys:!0}),Dp.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return t(Sf(e,n))},i}(rf);Xf.Axios=Zf,Xf.CanceledError=ff,Xf.CancelToken=class t{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(t){e=t});const n=this;this.promise.then(t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null}),this.promise.then=t=>{let e;const i=new Promise(t=>{n.subscribe(t),e=t}).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t(function(t,i,s){n.reason||(n.reason=new ff(t,i,s),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let e;return{token:new t(function(t){e=t}),cancel:e}}},Xf.isCancel=pf,Xf.VERSION=Hf,Xf.toFormData=Up,Xf.AxiosError=Op,Xf.Cancel=Xf.CanceledError,Xf.all=function(t){return Promise.all(t)},Xf.spread=function(t){return function(e){return t.apply(null,e)}},Xf.isAxiosError=function(t){return Dp.isObject(t)&&!0===t.isAxiosError},Xf.mergeConfig=Sf,Xf.AxiosHeaders=uf,Xf.formToJSON=t=>sf(Dp.isHTMLForm(t)?new FormData(t):t),Xf.getAdapter=Wf,Xf.HttpStatusCode=Kf,Xf.default=Xf;const{Axios:Yf,AxiosError:Qf,CanceledError:Jf,isCancel:tm,CancelToken:em,VERSION:nm,all:im,Cancel:sm,isAxiosError:rm,spread:om,toFormData:am,AxiosHeaders:lm,HttpStatusCode:hm,formToJSON:cm,getAdapter:um,mergeConfig:dm}=Xf;var pm=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===fm}(t)}(t)},fm="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function mm(t,e){return!1!==e.clone&&e.isMergeableObject(t)?_m((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function gm(t,e,n){return t.concat(e).map(function(t){return mm(t,n)})}function ym(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}(t))}function vm(t,e){try{return e in t}catch(n){return!1}}function _m(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||gm,n.isMergeableObject=n.isMergeableObject||pm,n.cloneUnlessOtherwiseSpecified=mm;var i=Array.isArray(e);return i===Array.isArray(t)?i?n.arrayMerge(t,e,n):function(t,e,n){var i={};return n.isMergeableObject(t)&&ym(t).forEach(function(e){i[e]=mm(t[e],n)}),ym(e).forEach(function(s){(function(t,e){return vm(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,s)||(vm(t,s)&&n.isMergeableObject(e[s])?i[s]=function(t,e){if(!e.customMerge)return _m;var n=e.customMerge(t);return"function"==typeof n?n:_m}(s,n)(t[s],e[s],n):i[s]=mm(e[s],n))}),i}(t,e,n):mm(e,n)}_m.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(t,n){return _m(t,n,e)},{})};const bm=Ku(_m);var wm=TypeError;const xm=Xu(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Sm="function"==typeof Map&&Map.prototype,Am=Object.getOwnPropertyDescriptor&&Sm?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,km=Sm&&Am&&"function"==typeof Am.get?Am.get:null,Pm=Sm&&Map.prototype.forEach,Em="function"==typeof Set&&Set.prototype,Cm=Object.getOwnPropertyDescriptor&&Em?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Mm=Em&&Cm&&"function"==typeof Cm.get?Cm.get:null,Tm=Em&&Set.prototype.forEach,Lm="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Rm="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,Im="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Dm=Boolean.prototype.valueOf,Om=Object.prototype.toString,Nm=Function.prototype.toString,Fm=String.prototype.match,Bm=String.prototype.slice,zm=String.prototype.replace,Wm=String.prototype.toUpperCase,jm=String.prototype.toLowerCase,Um=RegExp.prototype.test,Hm=Array.prototype.concat,$m=Array.prototype.join,Vm=Array.prototype.slice,qm=Math.floor,Gm="function"==typeof BigInt?BigInt.prototype.valueOf:null,Zm=Object.getOwnPropertySymbols,Km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Xm="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Ym="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,Qm=Object.prototype.propertyIsEnumerable,Jm=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function tg(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||Um.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var i=t<0?-qm(-t):qm(t);if(i!==t){var s=String(i),r=Bm.call(e,s.length+1);return zm.call(s,n,"$&_")+"."+zm.call(zm.call(r,/([0-9]{3})/g,"$&_"),/_$/,"")}}return zm.call(e,n,"$&_")}var eg=xm,ng=eg.custom,ig=dg(ng)?ng:null,sg={__proto__:null,double:'"',single:"'"},rg={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},og=function t(e,n,i,s){var r=n||{};if(fg(r,"quoteStyle")&&!fg(sg,r.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(fg(r,"maxStringLength")&&("number"==typeof r.maxStringLength?r.maxStringLength<0&&r.maxStringLength!==1/0:null!==r.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=!fg(r,"customInspect")||r.customInspect;if("boolean"!=typeof o&&"symbol"!==o)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(fg(r,"indent")&&null!==r.indent&&"\t"!==r.indent&&!(parseInt(r.indent,10)===r.indent&&r.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(fg(r,"numericSeparator")&&"boolean"!=typeof r.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=r.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return yg(e,r);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var l=String(e);return a?tg(e,l):l}if("bigint"==typeof e){var h=String(e)+"n";return a?tg(e,h):h}var c=void 0===r.depth?5:r.depth;if(void 0===i&&(i=0),i>=c&&c>0&&"object"==typeof e)return cg(e)?"[Array]":"[Object]";var u=function(t,e){var n;if("\t"===t.indent)n="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;n=$m.call(Array(t.indent+1)," ")}return{base:n,prev:$m.call(Array(e+1),n)}}(r,i);if(void 0===s)s=[];else if(gg(s,e)>=0)return"[Circular]";function d(e,n,o){if(n&&(s=Vm.call(s)).push(n),o){var a={depth:r.depth};return fg(r,"quoteStyle")&&(a.quoteStyle=r.quoteStyle),t(e,a,i+1,s)}return t(e,r,i+1,s)}if("function"==typeof e&&!ug(e)){var p=function(t){if(t.name)return t.name;var e=Fm.call(Nm.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}(e),f=Sg(e,d);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(f.length>0?" { "+$m.call(f,", ")+" }":"")}if(dg(e)){var m=Xm?zm.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Km.call(e);return"object"!=typeof e||Xm?m:_g(m)}if(function(t){return!(!t||"object"!=typeof t)&&("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||"string"==typeof t.nodeName&&"function"==typeof t.getAttribute)}(e)){for(var g="<"+jm.call(String(e.nodeName)),y=e.attributes||[],v=0;v<y.length;v++)g+=" "+y[v].name+"="+ag(lg(y[v].value),"double",r);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+"</"+jm.call(String(e.nodeName))+">"}if(cg(e)){if(0===e.length)return"[]";var _=Sg(e,d);return u&&!function(t){for(var e=0;e<t.length;e++)if(gg(t[e],"\n")>=0)return!1;return!0}(_)?"["+xg(_,u)+"]":"[ "+$m.call(_,", ")+" ]"}if(function(t){return"[object Error]"===mg(t)&&hg(t)}(e)){var b=Sg(e,d);return"cause"in Error.prototype||!("cause"in e)||Qm.call(e,"cause")?0===b.length?"["+String(e)+"]":"{ ["+String(e)+"] "+$m.call(b,", ")+" }":"{ ["+String(e)+"] "+$m.call(Hm.call("[cause]: "+d(e.cause),b),", ")+" }"}if("object"==typeof e&&o){if(ig&&"function"==typeof e[ig]&&eg)return eg(e,{depth:c-i});if("symbol"!==o&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!km||!t||"object"!=typeof t)return!1;try{km.call(t);try{Mm.call(t)}catch(g){return!0}return t instanceof Map}catch(e){}return!1}(e)){var w=[];return Pm&&Pm.call(e,function(t,n){w.push(d(n,e,!0)+" => "+d(t,e))}),wg("Map",km.call(e),w,u)}if(function(t){if(!Mm||!t||"object"!=typeof t)return!1;try{Mm.call(t);try{km.call(t)}catch(e){return!0}return t instanceof Set}catch(n){}return!1}(e)){var x=[];return Tm&&Tm.call(e,function(t){x.push(d(t,e))}),wg("Set",Mm.call(e),x,u)}if(function(t){if(!Lm||!t||"object"!=typeof t)return!1;try{Lm.call(t,Lm);try{Rm.call(t,Rm)}catch(g){return!0}return t instanceof WeakMap}catch(e){}return!1}(e))return bg("WeakMap");if(function(t){if(!Rm||!t||"object"!=typeof t)return!1;try{Rm.call(t,Rm);try{Lm.call(t,Lm)}catch(g){return!0}return t instanceof WeakSet}catch(e){}return!1}(e))return bg("WeakSet");if(function(t){if(!Im||!t||"object"!=typeof t)return!1;try{return Im.call(t),!0}catch(e){}return!1}(e))return bg("WeakRef");if(function(t){return"[object Number]"===mg(t)&&hg(t)}(e))return _g(d(Number(e)));if(function(t){if(!t||"object"!=typeof t||!Gm)return!1;try{return Gm.call(t),!0}catch(e){}return!1}(e))return _g(d(Gm.call(e)));if(function(t){return"[object Boolean]"===mg(t)&&hg(t)}(e))return _g(Dm.call(e));if(function(t){return"[object String]"===mg(t)&&hg(t)}(e))return _g(d(String(e)));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&e===globalThis||void 0!==Zu&&e===Zu)return"{ [object globalThis] }";if(!function(t){return"[object Date]"===mg(t)&&hg(t)}(e)&&!ug(e)){var S=Sg(e,d),A=Jm?Jm(e)===Object.prototype:e instanceof Object||e.constructor===Object,k=e instanceof Object?"":"null prototype",P=!A&&Ym&&Object(e)===e&&Ym in e?Bm.call(mg(e),8,-1):k?"Object":"",E=(A||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(P||k?"["+$m.call(Hm.call([],P||[],k||[]),": ")+"] ":"");return 0===S.length?E+"{}":u?E+"{"+xg(S,u)+"}":E+"{ "+$m.call(S,", ")+" }"}return String(e)};function ag(t,e,n){var i=n.quoteStyle||e,s=sg[i];return s+t+s}function lg(t){return zm.call(String(t),/"/g,"&quot;")}function hg(t){return!Ym||!("object"==typeof t&&(Ym in t||void 0!==t[Ym]))}function cg(t){return"[object Array]"===mg(t)&&hg(t)}function ug(t){return"[object RegExp]"===mg(t)&&hg(t)}function dg(t){if(Xm)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!Km)return!1;try{return Km.call(t),!0}catch(e){}return!1}var pg=Object.prototype.hasOwnProperty||function(t){return t in this};function fg(t,e){return pg.call(t,e)}function mg(t){return Om.call(t)}function gg(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function yg(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return yg(Bm.call(t,0,e.maxStringLength),e)+i}var s=rg[e.quoteStyle||"single"];return s.lastIndex=0,ag(zm.call(zm.call(t,s,"\\$1"),/[\x00-\x1f]/g,vg),"single",e)}function vg(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+Wm.call(e.toString(16))}function _g(t){return"Object("+t+")"}function bg(t){return t+" { ? }"}function wg(t,e,n,i){return t+" ("+e+") {"+(i?xg(n,i):$m.call(n,", "))+"}"}function xg(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+$m.call(t,","+n)+"\n"+e.prev}function Sg(t,e){var n=cg(t),i=[];if(n){i.length=t.length;for(var s=0;s<t.length;s++)i[s]=fg(t,s)?e(t[s],t):""}var r,o="function"==typeof Zm?Zm(t):[];if(Xm){r={};for(var a=0;a<o.length;a++)r["$"+o[a]]=o[a]}for(var l in t)fg(t,l)&&(n&&String(Number(l))===l&&l<t.length||Xm&&r["$"+l]instanceof Symbol||(Um.call(/[^\w$]/,l)?i.push(e(l,t)+": "+e(t[l],t)):i.push(l+": "+e(t[l],t))));if("function"==typeof Zm)for(var h=0;h<o.length;h++)Qm.call(t,o[h])&&i.push("["+e(o[h])+"]: "+e(t[o[h]],t));return i}var Ag=og,kg=wm,Pg=function(t,e,n){for(var i,s=t;null!=(i=s.next);s=i)if(i.key===e)return s.next=i.next,n||(i.next=t.next,t.next=i),i},Eg=Object,Cg=Error,Mg=EvalError,Tg=RangeError,Lg=ReferenceError,Rg=SyntaxError,Ig=URIError,Dg=Math.abs,Og=Math.floor,Ng=Math.max,Fg=Math.min,Bg=Math.pow,zg=Math.round,Wg=Number.isNaN||function(t){return t!=t},jg=Wg,Ug=Object.getOwnPropertyDescriptor;if(Ug)try{Ug([],"length")}catch(iG){Ug=null}var Hg=Ug,$g=Object.defineProperty||!1;if($g)try{$g({},"a",{value:1})}catch(iG){$g=!1}var Vg,qg,Gg,Zg,Kg,Xg,Yg,Qg,Jg=$g;function ty(){return Xg?Kg:(Xg=1,Kg="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null)}function ey(){return Qg?Yg:(Qg=1,Yg=Eg.getPrototypeOf||null)}var ny,iy,sy=Object.prototype.toString,ry=Math.max,oy=function(t,e){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var s=0;s<e.length;s+=1)n[s+t.length]=e[s];return n},ay=Function.prototype.bind||function(t){var e=this;if("function"!=typeof e||"[object Function]"!==sy.apply(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,i=function(t){for(var e=[],n=1,i=0;n<t.length;n+=1,i+=1)e[i]=t[n];return e}(arguments),s=ry(0,e.length-i.length),r=[],o=0;o<s;o++)r[o]="$"+o;if(n=Function("binder","return function ("+function(t){for(var e="",n=0;n<t.length;n+=1)e+=t[n],n+1<t.length&&(e+=",");return e}(r)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var s=e.apply(this,oy(i,arguments));return Object(s)===s?s:this}return e.apply(t,oy(i,arguments))}),e.prototype){var a=function(){};a.prototype=e.prototype,n.prototype=new a,a.prototype=null}return n},ly=Function.prototype.call;function hy(){return iy?ny:(iy=1,ny=Function.prototype.apply)}var cy,uy,dy,py,fy,my,gy,yy="undefined"!=typeof Reflect&&Reflect&&Reflect.apply,vy=ay,_y=hy(),by=ly,wy=yy||vy.call(by,_y),xy=ay,Sy=wm,Ay=ly,ky=wy,Py=function(t){if(t.length<1||"function"!=typeof t[0])throw new Sy("a function is required");return ky(xy,Ay,t)},Ey=Eg,Cy=Cg,My=Mg,Ty=Tg,Ly=Lg,Ry=Rg,Iy=wm,Dy=Ig,Oy=Dg,Ny=Og,Fy=Ng,By=Fg,zy=Bg,Wy=zg,jy=Function,Uy=function(t){try{return jy('"use strict"; return ('+t+").constructor;")()}catch(iG){}},Hy=Hg,$y=Jg,Vy=function(){throw new Iy},qy=Hy?function(){try{return Vy}catch(t){try{return Hy(arguments,"callee").get}catch(e){return Vy}}}():Vy,Gy=function(){if(Zg)return Gg;Zg=1;var t="undefined"!=typeof Symbol&&Symbol,e=qg?Vg:(qg=1,Vg=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(var i in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var s=Object.getOwnPropertySymbols(t);if(1!==s.length||s[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0});return Gg=function(){return"function"==typeof t&&"function"==typeof Symbol&&"symbol"==typeof t("foo")&&"symbol"==typeof Symbol("bar")&&e()}}()(),Zy=function(){if(py)return dy;py=1;var t=ty(),e=ey(),n=function(){if(uy)return cy;uy=1;var t,e=Py,n=Hg;try{t=[].__proto__===Array.prototype}catch(iG){if(!iG||"object"!=typeof iG||!("code"in iG)||"ERR_PROTO_ACCESS"!==iG.code)throw iG}var i=!!t&&n&&n(Object.prototype,"__proto__"),s=Object,r=s.getPrototypeOf;return cy=i&&"function"==typeof i.get?e([i.get]):"function"==typeof r&&function(t){return r(null==t?t:s(t))}}();return dy=t?function(e){return t(e)}:e?function(t){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("getProto: not an object");return e(t)}:n?function(t){return n(t)}:null}(),Ky=ey(),Xy=ty(),Yy=hy(),Qy=ly,Jy={},tv="undefined"!=typeof Uint8Array&&Zy?Zy(Uint8Array):gy,ev={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?gy:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?gy:ArrayBuffer,"%ArrayIteratorPrototype%":Gy&&Zy?Zy([][Symbol.iterator]()):gy,"%AsyncFromSyncIteratorPrototype%":gy,"%AsyncFunction%":Jy,"%AsyncGenerator%":Jy,"%AsyncGeneratorFunction%":Jy,"%AsyncIteratorPrototype%":Jy,"%Atomics%":"undefined"==typeof Atomics?gy:Atomics,"%BigInt%":"undefined"==typeof BigInt?gy:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?gy:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?gy:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?gy:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Cy,"%eval%":eval,"%EvalError%":My,"%Float16Array%":"undefined"==typeof Float16Array?gy:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?gy:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?gy:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?gy:FinalizationRegistry,"%Function%":jy,"%GeneratorFunction%":Jy,"%Int8Array%":"undefined"==typeof Int8Array?gy:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?gy:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?gy:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Gy&&Zy?Zy(Zy([][Symbol.iterator]())):gy,"%JSON%":"object"==typeof JSON?JSON:gy,"%Map%":"undefined"==typeof Map?gy:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Gy&&Zy?Zy((new Map)[Symbol.iterator]()):gy,"%Math%":Math,"%Number%":Number,"%Object%":Ey,"%Object.getOwnPropertyDescriptor%":Hy,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?gy:Promise,"%Proxy%":"undefined"==typeof Proxy?gy:Proxy,"%RangeError%":Ty,"%ReferenceError%":Ly,"%Reflect%":"undefined"==typeof Reflect?gy:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?gy:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Gy&&Zy?Zy((new Set)[Symbol.iterator]()):gy,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?gy:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Gy&&Zy?Zy(""[Symbol.iterator]()):gy,"%Symbol%":Gy?Symbol:gy,"%SyntaxError%":Ry,"%ThrowTypeError%":qy,"%TypedArray%":tv,"%TypeError%":Iy,"%Uint8Array%":"undefined"==typeof Uint8Array?gy:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?gy:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?gy:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?gy:Uint32Array,"%URIError%":Dy,"%WeakMap%":"undefined"==typeof WeakMap?gy:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?gy:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?gy:WeakSet,"%Function.prototype.call%":Qy,"%Function.prototype.apply%":Yy,"%Object.defineProperty%":$y,"%Object.getPrototypeOf%":Ky,"%Math.abs%":Oy,"%Math.floor%":Ny,"%Math.max%":Fy,"%Math.min%":By,"%Math.pow%":zy,"%Math.round%":Wy,"%Math.sign%":function(t){return jg(t)||0===t?t:t<0?-1:1},"%Reflect.getPrototypeOf%":Xy};if(Zy)try{null.error}catch(iG){var nv=Zy(Zy(iG));ev["%Error.prototype%"]=nv}var iv=function t(e){var n;if("%AsyncFunction%"===e)n=Uy("async function () {}");else if("%GeneratorFunction%"===e)n=Uy("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=Uy("async function* () {}");else if("%AsyncGenerator%"===e){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if("%AsyncIteratorPrototype%"===e){var s=t("%AsyncGenerator%");s&&Zy&&(n=Zy(s.prototype))}return ev[e]=n,n},sv={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},rv=ay,ov=function(){if(my)return fy;my=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty;return fy=ay.call(t,e)}(),av=rv.call(Qy,Array.prototype.concat),lv=rv.call(Yy,Array.prototype.splice),hv=rv.call(Qy,String.prototype.replace),cv=rv.call(Qy,String.prototype.slice),uv=rv.call(Qy,RegExp.prototype.exec),dv=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pv=/\\(\\)?/g,fv=function(t,e){var n,i=t;if(ov(sv,i)&&(i="%"+(n=sv[i])[0]+"%"),ov(ev,i)){var s=ev[i];if(s===Jy&&(s=iv(i)),void 0===s&&!e)throw new Iy("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new Ry("intrinsic "+t+" does not exist!")},mv=function(t,e){if("string"!=typeof t||0===t.length)throw new Iy("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new Iy('"allowMissing" argument must be a boolean');if(null===uv(/^%?[^%]*%?$/,t))throw new Ry("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=cv(t,0,1),n=cv(t,-1);if("%"===e&&"%"!==n)throw new Ry("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new Ry("invalid intrinsic syntax, expected opening `%`");var i=[];return hv(t,dv,function(t,e,n,s){i[i.length]=n?hv(s,pv,"$1"):e||t}),i}(t),i=n.length>0?n[0]:"",s=fv("%"+i+"%",e),r=s.name,o=s.value,a=!1,l=s.alias;l&&(i=l[0],lv(n,av([0,1],l)));for(var h=1,c=!0;h<n.length;h+=1){var u=n[h],d=cv(u,0,1),p=cv(u,-1);if(('"'===d||"'"===d||"`"===d||'"'===p||"'"===p||"`"===p)&&d!==p)throw new Ry("property names with quotes must have matching quotes");if("constructor"!==u&&c||(a=!0),ov(ev,r="%"+(i+="."+u)+"%"))o=ev[r];else if(null!=o){if(!(u in o)){if(!e)throw new Iy("base intrinsic for "+t+" exists, but the property is not available.");return}if(Hy&&h+1>=n.length){var f=Hy(o,u);o=(c=!!f)&&"get"in f&&!("originalValue"in f.get)?f.get:o[u]}else c=ov(o,u),o=o[u];c&&!a&&(ev[r]=o)}}return o},gv=mv,yv=Py,vv=yv([gv("%String.prototype.indexOf%")]),_v=function(t,e){var n=gv(t,!!e);return"function"==typeof n&&vv(t,".prototype.")>-1?yv([n]):n},bv=_v,wv=og,xv=wm,Sv=mv("%Map%",!0),Av=bv("Map.prototype.get",!0),kv=bv("Map.prototype.set",!0),Pv=bv("Map.prototype.has",!0),Ev=bv("Map.prototype.delete",!0),Cv=bv("Map.prototype.size",!0),Mv=!!Sv&&function(){var t,e={assert:function(t){if(!e.has(t))throw new xv("Side channel does not contain "+wv(t))},delete:function(e){if(t){var n=Ev(t,e);return 0===Cv(t)&&(t=void 0),n}return!1},get:function(e){if(t)return Av(t,e)},has:function(e){return!!t&&Pv(t,e)},set:function(e,n){t||(t=new Sv),kv(t,e,n)}};return e},Tv=_v,Lv=og,Rv=Mv,Iv=wm,Dv=mv("%WeakMap%",!0),Ov=Tv("WeakMap.prototype.get",!0),Nv=Tv("WeakMap.prototype.set",!0),Fv=Tv("WeakMap.prototype.has",!0),Bv=Tv("WeakMap.prototype.delete",!0),zv=wm,Wv=og,jv=(Dv?function(){var t,e,n={assert:function(t){if(!n.has(t))throw new Iv("Side channel does not contain "+Lv(t))},delete:function(n){if(Dv&&n&&("object"==typeof n||"function"==typeof n)){if(t)return Bv(t,n)}else if(Rv&&e)return e.delete(n);return!1},get:function(n){return Dv&&n&&("object"==typeof n||"function"==typeof n)&&t?Ov(t,n):e&&e.get(n)},has:function(n){return Dv&&n&&("object"==typeof n||"function"==typeof n)&&t?Fv(t,n):!!e&&e.has(n)},set:function(n,i){Dv&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new Dv),Nv(t,n,i)):Rv&&(e||(e=Rv()),e.set(n,i))}};return n}:Rv)||Mv||function(){var t,e={assert:function(t){if(!e.has(t))throw new kg("Side channel does not contain "+Ag(t))},delete:function(e){var n=t&&t.next,i=function(t,e){if(t)return Pg(t,e,!0)}(t,e);return i&&n&&n===i&&(t=void 0),!!i},get:function(e){return function(t,e){if(t){var n=Pg(t,e);return n&&n.value}}(t,e)},has:function(e){return function(t,e){return!!t&&!!Pg(t,e)}(t,e)},set:function(e,n){t||(t={next:void 0}),function(t,e,n){var i=Pg(t,e);i?i.value=n:t.next={key:e,next:t.next,value:n}}(t,e,n)}};return e},Uv=String.prototype.replace,Hv=/%20/g,$v="RFC3986",Vv={default:$v,formatters:{RFC1738:function(t){return Uv.call(t,Hv,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:$v},qv=Vv,Gv=Object.prototype.hasOwnProperty,Zv=Array.isArray,Kv=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Xv=function(t,e){for(var n=e&&e.plainObjects?{__proto__:null}:{},i=0;i<t.length;++i)void 0!==t[i]&&(n[i]=t[i]);return n},Yv=1024,Qv={arrayToObject:Xv,assign:function(t,e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],i=0;i<e.length;++i)for(var s=e[i],r=s.obj[s.prop],o=Object.keys(r),a=0;a<o.length;++a){var l=o[a],h=r[l];"object"==typeof h&&null!==h&&-1===n.indexOf(h)&&(e.push({obj:r,prop:l}),n.push(h))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(Zv(n)){for(var i=[],s=0;s<n.length;++s)void 0!==n[s]&&i.push(n[s]);e.obj[e.prop]=i}}}(e),t},decode:function(t,e,n){var i=t.replace(/\+/g," ");if("iso-8859-1"===n)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(iG){return i}},encode:function(t,e,n,i,s){if(0===t.length)return t;var r=t;if("symbol"==typeof t?r=Symbol.prototype.toString.call(t):"string"!=typeof t&&(r=String(t)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"});for(var o="",a=0;a<r.length;a+=Yv){for(var l=r.length>=Yv?r.slice(a,a+Yv):r,h=[],c=0;c<l.length;++c){var u=l.charCodeAt(c);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===qv.RFC1738&&(40===u||41===u)?h[h.length]=l.charAt(c):u<128?h[h.length]=Kv[u]:u<2048?h[h.length]=Kv[192|u>>6]+Kv[128|63&u]:u<55296||u>=57344?h[h.length]=Kv[224|u>>12]+Kv[128|u>>6&63]+Kv[128|63&u]:(c+=1,u=65536+((1023&u)<<10|1023&l.charCodeAt(c)),h[h.length]=Kv[240|u>>18]+Kv[128|u>>12&63]+Kv[128|u>>6&63]+Kv[128|63&u])}o+=h.join("")}return o},isBuffer:function(t){return!(!t||"object"!=typeof t||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(Zv(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(e(t[i]));return n}return e(t)},merge:function t(e,n,i){if(!n)return e;if("object"!=typeof n&&"function"!=typeof n){if(Zv(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(i&&(i.plainObjects||i.allowPrototypes)||!Gv.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var s=e;return Zv(e)&&!Zv(n)&&(s=Xv(e,i)),Zv(e)&&Zv(n)?(n.forEach(function(n,s){if(Gv.call(e,s)){var r=e[s];r&&"object"==typeof r&&n&&"object"==typeof n?e[s]=t(r,n,i):e.push(n)}else e[s]=n}),e):Object.keys(n).reduce(function(e,s){var r=n[s];return Gv.call(e,s)?e[s]=t(e[s],r,i):e[s]=r,e},s)}},Jv=function(){var t,e={assert:function(t){if(!e.has(t))throw new zv("Side channel does not contain "+Wv(t))},delete:function(e){return!!t&&t.delete(e)},get:function(e){return t&&t.get(e)},has:function(e){return!!t&&t.has(e)},set:function(e,n){t||(t=jv()),t.set(e,n)}};return e},t_=Qv,e_=Vv,n_=Object.prototype.hasOwnProperty,i_={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s_=Array.isArray,r_=Array.prototype.push,o_=function(t,e){r_.apply(t,s_(e)?e:[e])},a_=Date.prototype.toISOString,l_=e_.default,h_={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t_.encode,encodeValuesOnly:!1,filter:void 0,format:l_,formatter:e_.formatters[l_],indices:!1,serializeDate:function(t){return a_.call(t)},skipNulls:!1,strictNullHandling:!1},c_={},u_=function t(e,n,i,s,r,o,a,l,h,c,u,d,p,f,m,g,y,v){for(var _,b=e,w=v,x=0,S=!1;void 0!==(w=w.get(c_))&&!S;){var A=w.get(e);if(x+=1,void 0!==A){if(A===x)throw new RangeError("Cyclic object value");S=!0}void 0===w.get(c_)&&(x=0)}if("function"==typeof c?b=c(n,b):b instanceof Date?b=p(b):"comma"===i&&s_(b)&&(b=t_.maybeMap(b,function(t){return t instanceof Date?p(t):t})),null===b){if(o)return h&&!g?h(n,h_.encoder,y,"key",f):n;b=""}if("string"==typeof(_=b)||"number"==typeof _||"boolean"==typeof _||"symbol"==typeof _||"bigint"==typeof _||t_.isBuffer(b))return h?[m(g?n:h(n,h_.encoder,y,"key",f))+"="+m(h(b,h_.encoder,y,"value",f))]:[m(n)+"="+m(String(b))];var k,P=[];if(void 0===b)return P;if("comma"===i&&s_(b))g&&h&&(b=t_.maybeMap(b,h)),k=[{value:b.length>0?b.join(",")||null:void 0}];else if(s_(c))k=c;else{var E=Object.keys(b);k=u?E.sort(u):E}var C=l?String(n).replace(/\./g,"%2E"):String(n),M=s&&s_(b)&&1===b.length?C+"[]":C;if(r&&s_(b)&&0===b.length)return M+"[]";for(var T=0;T<k.length;++T){var L=k[T],R="object"==typeof L&&L&&void 0!==L.value?L.value:b[L];if(!a||null!==R){var I=d&&l?String(L).replace(/\./g,"%2E"):String(L),D=s_(b)?"function"==typeof i?i(M,I):M:M+(d?"."+I:"["+I+"]");v.set(e,x);var O=Jv();O.set(c_,v),o_(P,t(R,D,i,s,r,o,a,l,"comma"===i&&g&&s_(b)?null:h,c,u,d,p,f,m,g,y,O))}}return P},d_=Qv,p_=Object.prototype.hasOwnProperty,f_=Array.isArray,m_={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:d_.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},g_=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},y_=function(t,e,n){if(t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&n>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(1===e.arrayLimit?"":"s")+" allowed in an array.");return t},v_=function(t,e,n,i){if(t){var s=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,r=/(\[[^[\]]*])/g,o=n.depth>0&&/(\[[^[\]]*])/.exec(s),a=o?s.slice(0,o.index):s,l=[];if(a){if(!n.plainObjects&&p_.call(Object.prototype,a)&&!n.allowPrototypes)return;l.push(a)}for(var h=0;n.depth>0&&null!==(o=r.exec(s))&&h<n.depth;){if(h+=1,!n.plainObjects&&p_.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(o[1])}if(o){if(!0===n.strictDepth)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");l.push("["+s.slice(o.index)+"]")}return function(t,e,n,i){var s=0;if(t.length>0&&"[]"===t[t.length-1]){var r=t.slice(0,-1).join("");s=Array.isArray(e)&&e[r]?e[r].length:0}for(var o=i?e:y_(e,n,s),a=t.length-1;a>=0;--a){var l,h=t[a];if("[]"===h&&n.parseArrays)l=n.allowEmptyArrays&&(""===o||n.strictNullHandling&&null===o)?[]:d_.combine([],o);else{l=n.plainObjects?{__proto__:null}:{};var c="["===h.charAt(0)&&"]"===h.charAt(h.length-1)?h.slice(1,-1):h,u=n.decodeDotInKeys?c.replace(/%2E/g,"."):c,d=parseInt(u,10);n.parseArrays||""!==u?!isNaN(d)&&h!==u&&String(d)===u&&d>=0&&n.parseArrays&&d<=n.arrayLimit?(l=[])[d]=o:"__proto__"!==u&&(l[u]=o):l={0:o}}o=l}return o}(l,e,n,i)}},__={formats:Vv,parse:function(t,e){var n=function(t){if(!t)return m_;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.decodeDotInKeys&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==t.throwOnLimitExceeded&&"boolean"!=typeof t.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var e=void 0===t.charset?m_.charset:t.charset,n=void 0===t.duplicates?m_.duplicates:t.duplicates;if("combine"!==n&&"first"!==n&&"last"!==n)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===t.allowDots?!0===t.decodeDotInKeys||m_.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:m_.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:m_.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:m_.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:m_.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:m_.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:m_.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:m_.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:m_.decoder,delimiter:"string"==typeof t.delimiter||d_.isRegExp(t.delimiter)?t.delimiter:m_.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:m_.depth,duplicates:n,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:m_.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:m_.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:m_.plainObjects,strictDepth:"boolean"==typeof t.strictDepth?!!t.strictDepth:m_.strictDepth,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:m_.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof t.throwOnLimitExceeded&&t.throwOnLimitExceeded}}(e);if(""===t||null==t)return n.plainObjects?{__proto__:null}:{};for(var i="string"==typeof t?function(t,e){var n={__proto__:null},i=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=e.parameterLimit===1/0?void 0:e.parameterLimit,r=i.split(e.delimiter,e.throwOnLimitExceeded?s+1:s);if(e.throwOnLimitExceeded&&r.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(1===s?"":"s")+" allowed.");var o,a=-1,l=e.charset;if(e.charsetSentinel)for(o=0;o<r.length;++o)0===r[o].indexOf("utf8=")&&("utf8=%E2%9C%93"===r[o]?l="utf-8":"utf8=%26%2310003%3B"===r[o]&&(l="iso-8859-1"),a=o,o=r.length);for(o=0;o<r.length;++o)if(o!==a){var h,c,u=r[o],d=u.indexOf("]="),p=-1===d?u.indexOf("="):d+1;-1===p?(h=e.decoder(u,m_.decoder,l,"key"),c=e.strictNullHandling?null:""):(h=e.decoder(u.slice(0,p),m_.decoder,l,"key"),c=d_.maybeMap(y_(u.slice(p+1),e,f_(n[h])?n[h].length:0),function(t){return e.decoder(t,m_.decoder,l,"value")})),c&&e.interpretNumericEntities&&"iso-8859-1"===l&&(c=g_(String(c))),u.indexOf("[]=")>-1&&(c=f_(c)?[c]:c);var f=p_.call(n,h);f&&"combine"===e.duplicates?n[h]=d_.combine(n[h],c):f&&"last"!==e.duplicates||(n[h]=c)}return n}(t,n):t,s=n.plainObjects?{__proto__:null}:{},r=Object.keys(i),o=0;o<r.length;++o){var a=r[o],l=v_(a,i[a],n,"string"==typeof t);s=d_.merge(s,l,n)}return!0===n.allowSparse?s:d_.compact(s)},stringify:function(t,e){var n,i=t,s=function(t){if(!t)return h_;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.encodeDotInKeys&&"boolean"!=typeof t.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||h_.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=e_.default;if(void 0!==t.format){if(!n_.call(e_.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i,s=e_.formatters[n],r=h_.filter;if(("function"==typeof t.filter||s_(t.filter))&&(r=t.filter),i=t.arrayFormat in i_?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":h_.arrayFormat,"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var o=void 0===t.allowDots?!0===t.encodeDotInKeys||h_.allowDots:!!t.allowDots;return{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:h_.addQueryPrefix,allowDots:o,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:h_.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:h_.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:void 0===t.delimiter?h_.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:h_.encode,encodeDotInKeys:"boolean"==typeof t.encodeDotInKeys?t.encodeDotInKeys:h_.encodeDotInKeys,encoder:"function"==typeof t.encoder?t.encoder:h_.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:h_.encodeValuesOnly,filter:r,format:n,formatter:s,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:h_.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:h_.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:h_.strictNullHandling}}(e);"function"==typeof s.filter?i=(0,s.filter)("",i):s_(s.filter)&&(n=s.filter);var r=[];if("object"!=typeof i||null===i)return"";var o=i_[s.arrayFormat],a="comma"===o&&s.commaRoundTrip;n||(n=Object.keys(i)),s.sort&&n.sort(s.sort);for(var l=Jv(),h=0;h<n.length;++h){var c=n[h],u=i[c];s.skipNulls&&null===u||o_(r,u_(u,c,o,a,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,l))}var d=r.join(s.delimiter),p=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""}};const b_=Ku({exports:{}}.exports=function(){var t,e,n={version:"0.2.0"},i=n.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function s(t,e,n){return t<e?e:t>n?n:t}function r(t){return 100*(-1+t)}n.configure=function(t){var e,n;for(e in t)void 0!==(n=t[e])&&t.hasOwnProperty(e)&&(i[e]=n);return this},n.status=null,n.set=function(t){var e=n.isStarted();t=s(t,i.minimum,1),n.status=1===t?null:t;var l=n.render(!e),h=l.querySelector(i.barSelector),c=i.speed,u=i.easing;return l.offsetWidth,o(function(e){""===i.positionUsing&&(i.positionUsing=n.getPositioningCSS()),a(h,function(t,e,n){var s;return(s="translate3d"===i.positionUsing?{transform:"translate3d("+r(t)+"%,0,0)"}:"translate"===i.positionUsing?{transform:"translate("+r(t)+"%,0)"}:{"margin-left":r(t)+"%"}).transition="all "+e+"ms "+n,s}(t,c,u)),1===t?(a(l,{transition:"none",opacity:1}),l.offsetWidth,setTimeout(function(){a(l,{transition:"all "+c+"ms linear",opacity:0}),setTimeout(function(){n.remove(),e()},c)},c)):setTimeout(e,c)}),this},n.isStarted=function(){return"number"==typeof n.status},n.start=function(){n.status||n.set(0);var t=function(){setTimeout(function(){n.status&&(n.trickle(),t())},i.trickleSpeed)};return i.trickle&&t(),this},n.done=function(t){return t||n.status?n.inc(.3+.5*Math.random()).set(1):this},n.inc=function(t){var e=n.status;return e?("number"!=typeof t&&(t=(1-e)*s(Math.random()*e,.1,.95)),e=s(e+t,0,.994),n.set(e)):n.start()},n.trickle=function(){return n.inc(Math.random()*i.trickleRate)},t=0,e=0,n.promise=function(i){return i&&"resolved"!==i.state()?(0===e&&n.start(),t++,e++,i.always(function(){0===--e?(t=0,n.done()):n.set((t-e)/t)}),this):this},n.render=function(t){if(n.isRendered())return document.getElementById("nprogress");h(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=i.template;var s,o=e.querySelector(i.barSelector),l=t?"-100":r(n.status||0),c=document.querySelector(i.parent);return a(o,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),i.showSpinner||(s=e.querySelector(i.spinnerSelector))&&d(s),c!=document.body&&h(c,"nprogress-custom-parent"),c.appendChild(e),e},n.remove=function(){c(document.documentElement,"nprogress-busy"),c(document.querySelector(i.parent),"nprogress-custom-parent");var t=document.getElementById("nprogress");t&&d(t)},n.isRendered=function(){return!!document.getElementById("nprogress")},n.getPositioningCSS=function(){var t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};var o=function(){var t=[];function e(){var n=t.shift();n&&n(e)}return function(n){t.push(n),1==t.length&&e()}}(),a=function(){var t=["Webkit","O","Moz","ms"],e={};function n(n){return n=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()}),e[n]||(e[n]=function(e){var n=document.body.style;if(e in n)return e;for(var i,s=t.length,r=e.charAt(0).toUpperCase()+e.slice(1);s--;)if((i=t[s]+r)in n)return i;return e}(n))}function i(t,e,i){e=n(e),t.style[e]=i}return function(t,e){var n,s,r=arguments;if(2==r.length)for(n in e)void 0!==(s=e[n])&&e.hasOwnProperty(n)&&i(t,n,s);else i(t,r[1],r[2])}}();function l(t,e){return("string"==typeof t?t:u(t)).indexOf(" "+e+" ")>=0}function h(t,e){var n=u(t),i=n+e;l(n,e)||(t.className=i.substring(1))}function c(t,e){var n,i=u(t);l(t,e)&&(n=i.replace(" "+e+" "," "),t.className=n.substring(1,n.length-1))}function u(t){return(" "+(t.className||"")+" ").replace(/\s+/gi," ")}function d(t){t&&t.parentNode&&t.parentNode.removeChild(t)}return n}());var w_={exports:{}};!function(t,e){var n="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",r="[object Array]",o="[object Boolean]",a="[object Date]",l="[object Error]",h="[object Function]",c="[object Map]",u="[object Number]",d="[object Object]",p="[object Promise]",f="[object RegExp]",m="[object Set]",g="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",_="[object DataView]",b=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[s]=x[r]=x[v]=x[o]=x[_]=x[a]=x[l]=x[h]=x[c]=x[u]=x[d]=x[f]=x[m]=x[g]=x[y]=!1;var S="object"==typeof Zu&&Zu&&Zu.Object===Object&&Zu,A="object"==typeof self&&self&&self.Object===Object&&self,k=S||A||Function("return this")(),P=e&&!e.nodeType&&e,E=P&&t&&!t.nodeType&&t,C=E&&E.exports===P,M=C&&S.process,T=function(){try{return M&&M.binding&&M.binding("util")}catch(iG){}}(),L=T&&T.isTypedArray;function R(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function I(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function D(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var O,N,F,B=Array.prototype,z=Function.prototype,W=Object.prototype,j=k["__core-js_shared__"],U=z.toString,H=W.hasOwnProperty,$=(O=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",V=W.toString,q=RegExp("^"+U.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=C?k.Buffer:void 0,Z=k.Symbol,K=k.Uint8Array,X=W.propertyIsEnumerable,Y=B.splice,Q=Z?Z.toStringTag:void 0,J=Object.getOwnPropertySymbols,tt=G?G.isBuffer:void 0,et=(N=Object.keys,F=Object,function(t){return N(F(t))}),nt=Et(k,"DataView"),it=Et(k,"Map"),st=Et(k,"Promise"),rt=Et(k,"Set"),ot=Et(k,"WeakMap"),at=Et(Object,"create"),lt=Lt(nt),ht=Lt(it),ct=Lt(st),ut=Lt(rt),dt=Lt(ot),pt=Z?Z.prototype:void 0,ft=pt?pt.valueOf:void 0;function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function gt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function yt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function vt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new yt;++e<n;)this.add(t[e])}function _t(t){var e=this.__data__=new gt(t);this.size=e.size}function bt(t,e){for(var n=t.length;n--;)if(Rt(t[n][0],e))return n;return-1}function wt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Q&&Q in Object(t)?function(t){var e=H.call(t,Q),n=t[Q];try{t[Q]=void 0;var i=!0}catch(iG){}var s=V.call(t);return i&&(e?t[Q]=n:delete t[Q]),s}(t):function(t){return V.call(t)}(t)}function xt(t){return zt(t)&&wt(t)==s}function St(t,e,n,i,h){return t===e||(null==t||null==e||!zt(t)&&!zt(e)?t!=t&&e!=e:function(t,e,n,i,h,p){var y=Dt(t),b=Dt(e),w=y?r:Mt(t),x=b?r:Mt(e),S=(w=w==s?d:w)==d,A=(x=x==s?d:x)==d,k=w==x;if(k&&Ot(t)){if(!Ot(e))return!1;y=!0,S=!1}if(k&&!S)return p||(p=new _t),y||Wt(t)?At(t,e,n,i,h,p):function(t,e,n,i,s,r,h){switch(n){case _:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case v:return!(t.byteLength!=e.byteLength||!r(new K(t),new K(e)));case o:case a:case u:return Rt(+t,+e);case l:return t.name==e.name&&t.message==e.message;case f:case g:return t==e+"";case c:var d=I;case m:var p=1&i;if(d||(d=D),t.size!=e.size&&!p)return!1;var y=h.get(t);if(y)return y==e;i|=2,h.set(t,e);var b=At(d(t),d(e),i,s,r,h);return h.delete(t),b;case"[object Symbol]":if(ft)return ft.call(t)==ft.call(e)}return!1}(t,e,w,n,i,h,p);if(!(1&n)){var P=S&&H.call(t,"__wrapped__"),E=A&&H.call(e,"__wrapped__");if(P||E){var C=P?t.value():t,M=E?e.value():e;return p||(p=new _t),h(C,M,n,i,p)}}return!!k&&(p||(p=new _t),function(t,e,n,i,s,r){var o=1&n,a=kt(t),l=a.length;if(l!=kt(e).length&&!o)return!1;for(var h=l;h--;){var c=a[h];if(!(o?c in e:H.call(e,c)))return!1}var u=r.get(t);if(u&&r.get(e))return u==e;var d=!0;r.set(t,e),r.set(e,t);for(var p=o;++h<l;){var f=t[c=a[h]],m=e[c];if(i)var g=o?i(m,f,c,e,t,r):i(f,m,c,t,e,r);if(!(void 0===g?f===m||s(f,m,n,i,r):g)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var y=t.constructor,v=e.constructor;y==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(d=!1)}return r.delete(t),r.delete(e),d}(t,e,n,i,h,p))}(t,e,n,i,St,h))}function At(t,e,n,i,s,r){var o=1&n,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var h=r.get(t);if(h&&r.get(e))return h==e;var c=-1,u=!0,d=2&n?new vt:void 0;for(r.set(t,e),r.set(e,t);++c<a;){var p=t[c],f=e[c];if(i)var m=o?i(f,p,c,e,t,r):i(p,f,c,t,e,r);if(void 0!==m){if(m)continue;u=!1;break}if(d){if(!R(e,function(t,e){if(o=e,!d.has(o)&&(p===t||s(p,t,n,i,r)))return d.push(e);var o})){u=!1;break}}else if(p!==f&&!s(p,f,n,i,r)){u=!1;break}}return r.delete(t),r.delete(e),u}function kt(t){return function(t,e,n){var i=e(t);return Dt(t)?i:function(t,e){for(var n=-1,i=e.length,s=t.length;++n<i;)t[s+n]=e[n];return t}(i,n(t))}(t,jt,Ct)}function Pt(t,e){var n,i,s=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?s["string"==typeof e?"string":"hash"]:s.map}function Et(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Bt(t)||function(t){return!!$&&$ in t}(t))&&(Nt(t)?q:b).test(Lt(t))}(n)?n:void 0}mt.prototype.clear=function(){this.__data__=at?at(null):{},this.size=0},mt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mt.prototype.get=function(t){var e=this.__data__;if(at){var i=e[t];return i===n?void 0:i}return H.call(e,t)?e[t]:void 0},mt.prototype.has=function(t){var e=this.__data__;return at?void 0!==e[t]:H.call(e,t)},mt.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=at&&void 0===e?n:e,this},gt.prototype.clear=function(){this.__data__=[],this.size=0},gt.prototype.delete=function(t){var e=this.__data__,n=bt(e,t);return!(n<0||(n==e.length-1?e.pop():Y.call(e,n,1),--this.size,0))},gt.prototype.get=function(t){var e=this.__data__,n=bt(e,t);return n<0?void 0:e[n][1]},gt.prototype.has=function(t){return bt(this.__data__,t)>-1},gt.prototype.set=function(t,e){var n=this.__data__,i=bt(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},yt.prototype.clear=function(){this.size=0,this.__data__={hash:new mt,map:new(it||gt),string:new mt}},yt.prototype.delete=function(t){var e=Pt(this,t).delete(t);return this.size-=e?1:0,e},yt.prototype.get=function(t){return Pt(this,t).get(t)},yt.prototype.has=function(t){return Pt(this,t).has(t)},yt.prototype.set=function(t,e){var n=Pt(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},vt.prototype.add=vt.prototype.push=function(t){return this.__data__.set(t,n),this},vt.prototype.has=function(t){return this.__data__.has(t)},_t.prototype.clear=function(){this.__data__=new gt,this.size=0},_t.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},_t.prototype.get=function(t){return this.__data__.get(t)},_t.prototype.has=function(t){return this.__data__.has(t)},_t.prototype.set=function(t,e){var n=this.__data__;if(n instanceof gt){var i=n.__data__;if(!it||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new yt(i)}return n.set(t,e),this.size=n.size,this};var Ct=J?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,i=null==t?0:t.length,s=0,r=[];++n<i;){var o=t[n];e(o)&&(r[s++]=o)}return r}(J(t),function(e){return X.call(t,e)}))}:function(){return[]},Mt=wt;function Tt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||w.test(t))&&t>-1&&t%1==0&&t<e}function Lt(t){if(null!=t){try{return U.call(t)}catch(iG){}try{return t+""}catch(iG){}}return""}function Rt(t,e){return t===e||t!=t&&e!=e}(nt&&Mt(new nt(new ArrayBuffer(1)))!=_||it&&Mt(new it)!=c||st&&Mt(st.resolve())!=p||rt&&Mt(new rt)!=m||ot&&Mt(new ot)!=y)&&(Mt=function(t){var e=wt(t),n=e==d?t.constructor:void 0,i=n?Lt(n):"";if(i)switch(i){case lt:return _;case ht:return c;case ct:return p;case ut:return m;case dt:return y}return e});var It=xt(function(){return arguments}())?xt:function(t){return zt(t)&&H.call(t,"callee")&&!X.call(t,"callee")},Dt=Array.isArray,Ot=tt||function(){return!1};function Nt(t){if(!Bt(t))return!1;var e=wt(t);return e==h||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ft(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Bt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function zt(t){return null!=t&&"object"==typeof t}var Wt=L?function(t){return function(e){return t(e)}}(L):function(t){return zt(t)&&Ft(t.length)&&!!x[wt(t)]};function jt(t){return null!=(e=t)&&Ft(e.length)&&!Nt(e)?function(t){var e=Dt(t),n=!e&&It(t),i=!e&&!n&&Ot(t),s=!e&&!n&&!i&&Wt(t),r=e||n||i||s,o=r?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],a=o.length;for(var l in t)!H.call(t,l)||r&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Tt(l,a))||o.push(l);return o}(t):function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||W))return et(t);var e,n,i=[];for(var s in Object(t))H.call(t,s)&&"constructor"!=s&&i.push(s);return i}(t);var e}t.exports=function(t,e){return St(t,e)}}(w_,w_.exports);const x_=Ku(w_.exports);async function S_(t,e){for(const n of Array.isArray(t)?t:[t]){const t=e[n];if(void 0!==t)return"function"==typeof t?t():t}throw new Error(`Page not found: ${t}`)}var A_={exports:{}},k_={},P_={exports:{}},E_={};!function(t){function e(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function n(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=t[a],h=a+1,c=t[h];if(0>s(l,n))h<r&&0>s(c,l)?(t[i]=c,t[h]=n,i=h):(t[i]=l,t[a]=n,i=a);else{if(!(h<r&&0>s(c,n)))break t;t[i]=c,t[h]=n,i=h}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],h=[],c=1,u=null,d=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function _(t){for(var s=n(h);null!==s;){if(null===s.callback)i(h);else{if(!(s.startTime<=t))break;i(h),s.sortIndex=s.expirationTime,e(l,s)}s=n(h)}}function b(t){if(m=!1,_(t),!f)if(null!==n(l))f=!0,R(w);else{var e=n(h);null!==e&&I(b,e.startTime-t)}}function w(e,s){f=!1,m&&(m=!1,y(k),k=-1),p=!0;var r=d;try{for(_(s),u=n(l);null!==u&&(!(u.expirationTime>s)||e&&!C());){var o=u.callback;if("function"==typeof o){u.callback=null,d=u.priorityLevel;var a=o(u.expirationTime<=s);s=t.unstable_now(),"function"==typeof a?u.callback=a:u===n(l)&&i(l),_(s)}else i(l);u=n(l)}if(null!==u)var c=!0;else{var g=n(h);null!==g&&I(b,g.startTime-s),c=!1}return c}finally{u=null,d=r,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,A=null,k=-1,P=5,E=-1;function C(){return!(t.unstable_now()-E<P)}function M(){if(null!==A){var e=t.unstable_now();E=e;var n=!0;try{n=A(!0,e)}finally{n?x():(S=!1,A=null)}}else S=!1}if("function"==typeof v)x=function(){v(M)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,L=T.port2;T.port1.onmessage=M,x=function(){L.postMessage(null)}}else x=function(){g(M,0)};function R(t){A=t,S||(S=!0,x())}function I(e,n){k=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(t){t.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(w))},t.unstable_forceFrameRate=function(t){0>t||125<t||(P=0<t?Math.floor(1e3/t):5)},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_scheduleCallback=function(i,s,r){var o=t.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?o+r:o,i){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return i={id:c++,callback:s,priorityLevel:i,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(i.sortIndex=r,e(h,i),null===n(l)&&i===n(h)&&(m?(y(k),k=-1):m=!0,I(b,r-o))):(i.sortIndex=a,e(l,i),f||p||(f=!0,R(w))),i},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}}(E_),P_.exports=E_;var C_=P_.exports,M_=Od,T_=C_;function L_(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R_=new Set,I_={};function D_(t,e){O_(t,e),O_(t+"Capture",e)}function O_(t,e){for(I_[t]=e,t=0;t<e.length;t++)R_.add(e[t])}var N_=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),F_=Object.prototype.hasOwnProperty,B_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z_={},W_={};function j_(t,e,n,i,s,r,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var U_={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){U_[t]=new j_(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];U_[e]=new j_(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){U_[t]=new j_(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){U_[t]=new j_(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){U_[t]=new j_(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){U_[t]=new j_(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){U_[t]=new j_(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){U_[t]=new j_(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){U_[t]=new j_(t,5,!1,t.toLowerCase(),null,!1,!1)});var H_=/[\-:]([a-z])/g;function $_(t){return t[1].toUpperCase()}function V_(t,e,n,i){var s=U_.hasOwnProperty(e)?U_[e]:null;(null!==s?0!==s.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null==e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,s,i)&&(n=null),i||null===s?function(t){return!!F_.call(W_,t)||!F_.call(z_,t)&&(B_.test(t)?W_[t]=!0:(z_[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=null===n?3!==s.type&&"":n:(e=s.attributeName,i=s.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(H_,$_);U_[e]=new j_(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(H_,$_);U_[e]=new j_(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(H_,$_);U_[e]=new j_(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){U_[t]=new j_(t,1,!1,t.toLowerCase(),null,!1,!1)}),U_.xlinkHref=new j_("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){U_[t]=new j_(t,1,!1,t.toLowerCase(),null,!0,!0)});var q_=M_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G_=Symbol.for("react.element"),Z_=Symbol.for("react.portal"),K_=Symbol.for("react.fragment"),X_=Symbol.for("react.strict_mode"),Y_=Symbol.for("react.profiler"),Q_=Symbol.for("react.provider"),J_=Symbol.for("react.context"),tb=Symbol.for("react.forward_ref"),eb=Symbol.for("react.suspense"),nb=Symbol.for("react.suspense_list"),ib=Symbol.for("react.memo"),sb=Symbol.for("react.lazy"),rb=Symbol.for("react.offscreen"),ob=Symbol.iterator;function ab(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=ob&&t[ob]||t["@@iterator"])?t:null}var lb,hb=Object.assign;function cb(t){if(void 0===lb)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lb=e&&e[1]||""}return"\n"+lb+t}var ub=!1;function db(t,e){if(!t||ub)return"";ub=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&"string"==typeof h.stack){for(var s=h.stack.split("\n"),r=i.stack.split("\n"),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==r[a]){var l="\n"+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{ub=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cb(t):""}function pb(t){switch(t.tag){case 5:return cb(t.type);case 16:return cb("Lazy");case 13:return cb("Suspense");case 19:return cb("SuspenseList");case 0:case 2:case 15:return db(t.type,!1);case 11:return db(t.type.render,!1);case 1:return db(t.type,!0);default:return""}}function fb(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case K_:return"Fragment";case Z_:return"Portal";case Y_:return"Profiler";case X_:return"StrictMode";case eb:return"Suspense";case nb:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case J_:return(t.displayName||"Context")+".Consumer";case Q_:return(t._context.displayName||"Context")+".Provider";case tb:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case ib:return null!==(e=t.displayName||null)?e:fb(t.type)||"Memo";case sb:e=t._payload,t=t._init;try{return fb(t(e))}catch(n){}}return null}function mb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fb(e);case 8:return e===X_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function gb(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function yb(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function vb(t){t._valueTracker||(t._valueTracker=function(t){var e=yb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(t){i=""+t,r.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function _b(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=yb(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function bb(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function wb(t,e){var n=e.checked;return hb({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function xb(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=gb(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Sb(t,e){null!=(e=e.checked)&&V_(t,"checked",e,!1)}function Ab(t,e){Sb(t,e);var n=gb(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?Pb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pb(t,e.type,gb(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function kb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Pb(t,e,n){"number"===e&&bb(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Eb=Array.isArray;function Cb(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+gb(n),e=null,s=0;s<t.length;s++){if(t[s].value===n)return t[s].selected=!0,void(i&&(t[s].defaultSelected=!0));null!==e||t[s].disabled||(e=t[s])}null!==e&&(e.selected=!0)}}function Mb(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(L_(91));return hb({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tb(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(L_(92));if(Eb(n)){if(1<n.length)throw Error(L_(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:gb(n)}}function Lb(t,e){var n=gb(e.value),i=gb(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function Rb(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function Ib(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Db(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Ib(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Ob,Nb,Fb=(Nb=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((Ob=Ob||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ob.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return Nb(t,e)})}:Nb);function Bb(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var zb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wb=["Webkit","ms","Moz","O"];function jb(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||zb.hasOwnProperty(t)&&zb[t]?(""+e).trim():e+"px"}function Ub(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),s=jb(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}Object.keys(zb).forEach(function(t){Wb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zb[e]=zb[t]})});var Hb=hb({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $b(t,e){if(e){if(Hb[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(L_(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(L_(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(L_(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(L_(62))}}function Vb(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qb=null;function Gb(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Zb=null,Kb=null,Xb=null;function Yb(t){if(t=$A(t)){if("function"!=typeof Zb)throw Error(L_(280));var e=t.stateNode;e&&(e=qA(e),Zb(t.stateNode,t.type,e))}}function Qb(t){Kb?Xb?Xb.push(t):Xb=[t]:Kb=t}function Jb(){if(Kb){var t=Kb,e=Xb;if(Xb=Kb=null,Yb(t),e)for(t=0;t<e.length;t++)Yb(e[t])}}function tw(t,e){return t(e)}function ew(){}var nw=!1;function iw(t,e,n){if(nw)return t(e,n);nw=!0;try{return tw(t,e,n)}finally{nw=!1,(null!==Kb||null!==Xb)&&(ew(),Jb())}}function sw(t,e){var n=t.stateNode;if(null===n)return null;var i=qA(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(L_(231,e,typeof n));return n}var rw=!1;if(N_)try{var ow={};Object.defineProperty(ow,"passive",{get:function(){rw=!0}}),window.addEventListener("test",ow,ow),window.removeEventListener("test",ow,ow)}catch(Nb){rw=!1}function aw(t,e,n,i,s,r,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(c){this.onError(c)}}var lw=!1,hw=null,cw=!1,uw=null,dw={onError:function(t){lw=!0,hw=t}};function pw(t,e,n,i,s,r,o,a,l){lw=!1,hw=null,aw.apply(dw,arguments)}function fw(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{!!(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function mw(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function gw(t){if(fw(t)!==t)throw Error(L_(188))}function yw(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=fw(t)))throw Error(L_(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(null===s)break;var r=s.alternate;if(null===r){if(null!==(i=s.return)){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return gw(s),t;if(r===i)return gw(s),e;r=r.sibling}throw Error(L_(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(L_(189))}}if(n.alternate!==i)throw Error(L_(190))}if(3!==n.tag)throw Error(L_(188));return n.stateNode.current===n?t:e}(t))?vw(t):null}function vw(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=vw(t);if(null!==e)return e;t=t.sibling}return null}var _w=T_.unstable_scheduleCallback,bw=T_.unstable_cancelCallback,ww=T_.unstable_shouldYield,xw=T_.unstable_requestPaint,Sw=T_.unstable_now,Aw=T_.unstable_getCurrentPriorityLevel,kw=T_.unstable_ImmediatePriority,Pw=T_.unstable_UserBlockingPriority,Ew=T_.unstable_NormalPriority,Cw=T_.unstable_LowPriority,Mw=T_.unstable_IdlePriority,Tw=null,Lw=null,Rw=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(Iw(t)/Dw|0)|0},Iw=Math.log,Dw=Math.LN2,Ow=64,Nw=4194304;function Fw(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bw(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=268435455&n;if(0!==o){var a=o&~s;0!==a?i=Fw(a):0!==(r&=o)&&(i=Fw(r))}else 0!==(o=n&~s)?i=Fw(o):0!==r&&(i=Fw(r));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&s)&&((s=i&-i)>=(r=e&-e)||16===s&&4194240&r))return e;if(4&i&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)s=1<<(n=31-Rw(e)),i|=t[n],e&=~s;return i}function zw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function Ww(t){return 0!=(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function jw(){var t=Ow;return!(4194240&(Ow<<=1))&&(Ow=64),t}function Uw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hw(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-Rw(e)]=n}function $w(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Rw(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Vw=0;function qw(t){return 1<(t&=-t)?4<t?268435455&t?16:536870912:4:1}var Gw,Zw,Kw,Xw,Yw,Qw=!1,Jw=[],tx=null,ex=null,nx=null,ix=new Map,sx=new Map,rx=[],ox="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ax(t,e){switch(t){case"focusin":case"focusout":tx=null;break;case"dragenter":case"dragleave":ex=null;break;case"mouseover":case"mouseout":nx=null;break;case"pointerover":case"pointerout":ix.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sx.delete(e.pointerId)}}function lx(t,e,n,i,s,r){return null===t||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},null!==e&&null!==(e=$A(e))&&Zw(e),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==s&&-1===e.indexOf(s)&&e.push(s),t)}function hx(t){var e=HA(t.target);if(null!==e){var n=fw(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=mw(n)))return t.blockedOn=e,void Yw(t.priority,function(){Kw(n)})}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function cx(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=wx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=$A(n))&&Zw(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);qb=i,n.target.dispatchEvent(i),qb=null,e.shift()}return!0}function ux(t,e,n){cx(t)&&n.delete(e)}function dx(){Qw=!1,null!==tx&&cx(tx)&&(tx=null),null!==ex&&cx(ex)&&(ex=null),null!==nx&&cx(nx)&&(nx=null),ix.forEach(ux),sx.forEach(ux)}function px(t,e){t.blockedOn===e&&(t.blockedOn=null,Qw||(Qw=!0,T_.unstable_scheduleCallback(T_.unstable_NormalPriority,dx)))}function fx(t){function e(e){return px(e,t)}if(0<Jw.length){px(Jw[0],t);for(var n=1;n<Jw.length;n++){var i=Jw[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==tx&&px(tx,t),null!==ex&&px(ex,t),null!==nx&&px(nx,t),ix.forEach(e),sx.forEach(e),n=0;n<rx.length;n++)(i=rx[n]).blockedOn===t&&(i.blockedOn=null);for(;0<rx.length&&null===(n=rx[0]).blockedOn;)hx(n),null===n.blockedOn&&rx.shift()}var mx=q_.ReactCurrentBatchConfig,gx=!0;function yx(t,e,n,i){var s=Vw,r=mx.transition;mx.transition=null;try{Vw=1,_x(t,e,n,i)}finally{Vw=s,mx.transition=r}}function vx(t,e,n,i){var s=Vw,r=mx.transition;mx.transition=null;try{Vw=4,_x(t,e,n,i)}finally{Vw=s,mx.transition=r}}function _x(t,e,n,i){if(gx){var s=wx(t,e,n,i);if(null===s)mA(t,e,i,bx,n),ax(t,i);else if(function(t,e,n,i,s){switch(e){case"focusin":return tx=lx(tx,t,e,n,i,s),!0;case"dragenter":return ex=lx(ex,t,e,n,i,s),!0;case"mouseover":return nx=lx(nx,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return ix.set(r,lx(ix.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,sx.set(r,lx(sx.get(r)||null,t,e,n,i,s)),!0}return!1}(s,t,e,n,i))i.stopPropagation();else if(ax(t,i),4&e&&-1<ox.indexOf(t)){for(;null!==s;){var r=$A(s);if(null!==r&&Gw(r),null===(r=wx(t,e,n,i))&&mA(t,e,i,bx,n),r===s)break;s=r}null!==s&&i.stopPropagation()}else mA(t,e,i,null,n)}}var bx=null;function wx(t,e,n,i){if(bx=null,null!==(t=HA(t=Gb(i))))if(null===(e=fw(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=mw(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bx=t,null}function xx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Aw()){case kw:return 1;case Pw:return 4;case Ew:case Cw:return 16;case Mw:return 536870912;default:return 16}default:return 16}}var Sx=null,Ax=null,kx=null;function Px(){if(kx)return kx;var t,e,n=Ax,i=n.length,s="value"in Sx?Sx.value:Sx.textContent,r=s.length;for(t=0;t<i&&n[t]===s[t];t++);var o=i-t;for(e=1;e<=o&&n[i-e]===s[r-e];e++);return kx=s.slice(t,1<e?1-e:void 0)}function Ex(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Cx(){return!0}function Mx(){return!1}function Tx(t){function e(e,n,i,s,r){for(var o in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Cx:Mx,this.isPropagationStopped=Mx,this}return hb(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Cx)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Cx)},persist:function(){},isPersistent:Cx}),e}var Lx,Rx,Ix,Dx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ox=Tx(Dx),Nx=hb({},Dx,{view:0,detail:0}),Fx=Tx(Nx),Bx=hb({},Nx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xx,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ix&&(Ix&&"mousemove"===t.type?(Lx=t.screenX-Ix.screenX,Rx=t.screenY-Ix.screenY):Rx=Lx=0,Ix=t),Lx)},movementY:function(t){return"movementY"in t?t.movementY:Rx}}),zx=Tx(Bx),Wx=Tx(hb({},Bx,{dataTransfer:0})),jx=Tx(hb({},Nx,{relatedTarget:0})),Ux=Tx(hb({},Dx,{animationName:0,elapsedTime:0,pseudoElement:0})),Hx=hb({},Dx,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$x=Tx(Hx),Vx=Tx(hb({},Dx,{data:0})),qx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Zx[t])&&!!e[t]}function Xx(){return Kx}var Yx=hb({},Nx,{key:function(t){if(t.key){var e=qx[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Ex(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Gx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xx,charCode:function(t){return"keypress"===t.type?Ex(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Ex(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Qx=Tx(Yx),Jx=Tx(hb({},Bx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),tS=Tx(hb({},Nx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xx})),eS=Tx(hb({},Dx,{propertyName:0,elapsedTime:0,pseudoElement:0})),nS=hb({},Bx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iS=Tx(nS),sS=[9,13,27,32],rS=N_&&"CompositionEvent"in window,oS=null;N_&&"documentMode"in document&&(oS=document.documentMode);var aS=N_&&"TextEvent"in window&&!oS,lS=N_&&(!rS||oS&&8<oS&&11>=oS),hS=String.fromCharCode(32),cS=!1;function uS(t,e){switch(t){case"keyup":return-1!==sS.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dS(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var pS=!1,fS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!fS[t.type]:"textarea"===e}function gS(t,e,n,i){Qb(i),0<(e=yA(e,"onChange")).length&&(n=new Ox("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var yS=null,vS=null;function _S(t){hA(t,0)}function bS(t){if(_b(VA(t)))return t}function wS(t,e){if("change"===t)return e}var xS=!1;if(N_){var SS;if(N_){var AS="oninput"in document;if(!AS){var kS=document.createElement("div");kS.setAttribute("oninput","return;"),AS="function"==typeof kS.oninput}SS=AS}else SS=!1;xS=SS&&(!document.documentMode||9<document.documentMode)}function PS(){yS&&(yS.detachEvent("onpropertychange",ES),vS=yS=null)}function ES(t){if("value"===t.propertyName&&bS(vS)){var e=[];gS(e,vS,t,Gb(t)),iw(_S,e)}}function CS(t,e,n){"focusin"===t?(PS(),vS=n,(yS=e).attachEvent("onpropertychange",ES)):"focusout"===t&&PS()}function MS(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return bS(vS)}function TS(t,e){if("click"===t)return bS(e)}function LS(t,e){if("input"===t||"change"===t)return bS(e)}var RS="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function IS(t,e){if(RS(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!F_.call(e,s)||!RS(t[s],e[s]))return!1}return!0}function DS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function OS(t,e){var n,i=DS(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=DS(i)}}function NS(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?NS(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function FS(){for(var t=window,e=bb();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=bb((t=e.contentWindow).document)}return e}function BS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function zS(t){var e=FS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NS(n.ownerDocument.documentElement,n)){if(null!==i&&BS(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=void 0===i.end?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=OS(n,r);var o=OS(n,i);s&&o&&(1!==t.rangeCount||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WS=N_&&"documentMode"in document&&11>=document.documentMode,jS=null,US=null,HS=null,$S=!1;function VS(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;$S||null==jS||jS!==bb(i)||(i="selectionStart"in(i=jS)&&BS(i)?{start:i.selectionStart,end:i.selectionEnd}:{anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},HS&&IS(HS,i)||(HS=i,0<(i=yA(US,"onSelect")).length&&(e=new Ox("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=jS)))}function qS(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var GS={animationend:qS("Animation","AnimationEnd"),animationiteration:qS("Animation","AnimationIteration"),animationstart:qS("Animation","AnimationStart"),transitionend:qS("Transition","TransitionEnd")},ZS={},KS={};function XS(t){if(ZS[t])return ZS[t];if(!GS[t])return t;var e,n=GS[t];for(e in n)if(n.hasOwnProperty(e)&&e in KS)return ZS[t]=n[e];return t}N_&&(KS=document.createElement("div").style,"AnimationEvent"in window||(delete GS.animationend.animation,delete GS.animationiteration.animation,delete GS.animationstart.animation),"TransitionEvent"in window||delete GS.transitionend.transition);var YS=XS("animationend"),QS=XS("animationiteration"),JS=XS("animationstart"),tA=XS("transitionend"),eA=new Map,nA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function iA(t,e){eA.set(t,e),D_(e,[t])}for(var sA=0;sA<nA.length;sA++){var rA=nA[sA];iA(rA.toLowerCase(),"on"+(rA[0].toUpperCase()+rA.slice(1)))}iA(YS,"onAnimationEnd"),iA(QS,"onAnimationIteration"),iA(JS,"onAnimationStart"),iA("dblclick","onDoubleClick"),iA("focusin","onFocus"),iA("focusout","onBlur"),iA(tA,"onTransitionEnd"),O_("onMouseEnter",["mouseout","mouseover"]),O_("onMouseLeave",["mouseout","mouseover"]),O_("onPointerEnter",["pointerout","pointerover"]),O_("onPointerLeave",["pointerout","pointerover"]),D_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),D_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),D_("onBeforeInput",["compositionend","keypress","textInput","paste"]),D_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),D_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),D_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aA=new Set("cancel close invalid load scroll toggle".split(" ").concat(oA));function lA(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,s,r,o,a,l){if(pw.apply(this,arguments),lw){if(!lw)throw Error(L_(198));var h=hw;lw=!1,hw=null,cw||(cw=!0,uw=h)}}(i,e,void 0,t),t.currentTarget=null}function hA(t,e){e=!!(4&e);for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;t:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break t;lA(s,a,h),r=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,h=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break t;lA(s,a,h),r=l}}}if(cw)throw t=uw,cw=!1,uw=null,t}function cA(t,e){var n=e[WA];void 0===n&&(n=e[WA]=new Set);var i=t+"__bubble";n.has(i)||(fA(e,t,2,!1),n.add(i))}function uA(t,e,n){var i=0;e&&(i|=4),fA(n,t,i,e)}var dA="_reactListening"+Math.random().toString(36).slice(2);function pA(t){if(!t[dA]){t[dA]=!0,R_.forEach(function(e){"selectionchange"!==e&&(aA.has(e)||uA(e,!1,t),uA(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[dA]||(e[dA]=!0,uA("selectionchange",!1,e))}}function fA(t,e,n,i){switch(xx(e)){case 1:var s=yx;break;case 4:s=vx;break;default:s=_x}n=s.bind(null,e,n,t),s=void 0,!rw||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(s=!0),i?void 0!==s?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):void 0!==s?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function mA(t,e,n,i,s){var r=i;if(!(1&e||2&e||null===i))t:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=HA(a)))return;if(5===(l=o.tag)||6===l){i=r=o;continue t}a=a.parentNode}}i=i.return}iw(function(){var i=r,s=Gb(n),o=[];t:{var a=eA.get(t);if(void 0!==a){var l=Ox,h=t;switch(t){case"keypress":if(0===Ex(n))break t;case"keydown":case"keyup":l=Qx;break;case"focusin":h="focus",l=jx;break;case"focusout":h="blur",l=jx;break;case"beforeblur":case"afterblur":l=jx;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=zx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Wx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=tS;break;case YS:case QS:case JS:l=Ux;break;case tA:l=eS;break;case"scroll":l=Fx;break;case"wheel":l=iS;break;case"copy":case"cut":case"paste":l=$x;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Jx}var c=!!(4&e),u=!c&&"scroll"===t,d=c?null!==a?a+"Capture":null:a;c=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&null!=(m=sw(f,d))&&c.push(gA(f,m,p))),u)break;f=f.return}0<c.length&&(a=new l(a,h,null,n,s),o.push({event:a,listeners:c}))}}if(!(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===qb||!(h=n.relatedTarget||n.fromElement)||!HA(h)&&!h[zA])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(h=(h=n.relatedTarget||n.toElement)?HA(h):null)&&(h!==(u=fw(h))||5!==h.tag&&6!==h.tag)&&(h=null)):(l=null,h=i),l!==h)){if(c=zx,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=Jx,m="onPointerLeave",d="onPointerEnter",f="pointer"),u=null==l?a:VA(l),p=null==h?a:VA(h),(a=new c(m,f+"leave",l,n,s)).target=u,a.relatedTarget=p,m=null,HA(s)===i&&((c=new c(d,f+"enter",h,n,s)).target=p,c.relatedTarget=u,m=c),u=m,l&&h)t:{for(d=h,f=0,p=c=l;p;p=vA(p))f++;for(p=0,m=d;m;m=vA(m))p++;for(;0<f-p;)c=vA(c),f--;for(;0<p-f;)d=vA(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break t;c=vA(c),d=vA(d)}c=null}else c=null;null!==l&&_A(o,a,l,c,!1),null!==h&&null!==u&&_A(o,u,h,c,!0)}if("select"===(l=(a=i?VA(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=wS;else if(mS(a))if(xS)g=LS;else{g=MS;var y=CS}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=TS);switch(g&&(g=g(t,i))?gS(o,g,n,s):(y&&y(t,a,i),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&Pb(a,"number",a.value)),y=i?VA(i):window,t){case"focusin":(mS(y)||"true"===y.contentEditable)&&(jS=y,US=i,HS=null);break;case"focusout":HS=US=jS=null;break;case"mousedown":$S=!0;break;case"contextmenu":case"mouseup":case"dragend":$S=!1,VS(o,n,s);break;case"selectionchange":if(WS)break;case"keydown":case"keyup":VS(o,n,s)}var v;if(rS)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else pS?uS(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(lS&&"ko"!==n.locale&&(pS||"onCompositionStart"!==_?"onCompositionEnd"===_&&pS&&(v=Px()):(Ax="value"in(Sx=s)?Sx.value:Sx.textContent,pS=!0)),0<(y=yA(i,_)).length&&(_=new Vx(_,t,null,n,s),o.push({event:_,listeners:y}),(v||null!==(v=dS(n)))&&(_.data=v))),(v=aS?function(t,e){switch(t){case"compositionend":return dS(e);case"keypress":return 32!==e.which?null:(cS=!0,hS);case"textInput":return(t=e.data)===hS&&cS?null:t;default:return null}}(t,n):function(t,e){if(pS)return"compositionend"===t||!rS&&uS(t,e)?(t=Px(),kx=Ax=Sx=null,pS=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lS&&"ko"!==e.locale?null:e.data}}(t,n))&&0<(i=yA(i,"onBeforeInput")).length&&(s=new Vx("onBeforeInput","beforeinput",null,n,s),o.push({event:s,listeners:i}),s.data=v)}hA(o,e)})}function gA(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yA(t,e){for(var n=e+"Capture",i=[];null!==t;){var s=t,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=sw(t,n))&&i.unshift(gA(t,r,s)),null!=(r=sw(t,e))&&i.push(gA(t,r,s))),t=t.return}return i}function vA(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function _A(t,e,n,i,s){for(var r=e._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,h=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==h&&(a=h,s?null!=(l=sw(n,r))&&o.unshift(gA(n,l,a)):s||null!=(l=sw(n,r))&&o.push(gA(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var bA=/\r\n?/g,wA=/\u0000|\uFFFD/g;function xA(t){return("string"==typeof t?t:""+t).replace(bA,"\n").replace(wA,"")}function SA(t,e,n){if(e=xA(e),xA(t)!==e&&n)throw Error(L_(425))}function AA(){}var kA=null,PA=null;function EA(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var CA="function"==typeof setTimeout?setTimeout:void 0,MA="function"==typeof clearTimeout?clearTimeout:void 0,TA="function"==typeof Promise?Promise:void 0,LA="function"==typeof queueMicrotask?queueMicrotask:void 0!==TA?function(t){return TA.resolve(null).then(t).catch(RA)}:CA;function RA(t){setTimeout(function(){throw t})}function IA(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===i)return t.removeChild(s),void fx(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=s}while(n);fx(e)}function DA(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function OA(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var NA=Math.random().toString(36).slice(2),FA="__reactFiber$"+NA,BA="__reactProps$"+NA,zA="__reactContainer$"+NA,WA="__reactEvents$"+NA,jA="__reactListeners$"+NA,UA="__reactHandles$"+NA;function HA(t){var e=t[FA];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zA]||n[FA]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=OA(t);null!==t;){if(n=t[FA])return n;t=OA(t)}return e}n=(t=n).parentNode}return null}function $A(t){return!(t=t[FA]||t[zA])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function VA(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(L_(33))}function qA(t){return t[BA]||null}var GA=[],ZA=-1;function KA(t){return{current:t}}function XA(t){0>ZA||(t.current=GA[ZA],GA[ZA]=null,ZA--)}function YA(t,e){ZA++,GA[ZA]=t.current,t.current=e}var QA={},JA=KA(QA),tk=KA(!1),ek=QA;function nk(t,e){var n=t.type.contextTypes;if(!n)return QA;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in n)r[s]=e[s];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ik(t){return null!=t.childContextTypes}function sk(){XA(tk),XA(JA)}function rk(t,e,n){if(JA.current!==QA)throw Error(L_(168));YA(JA,e),YA(tk,n)}function ok(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in e))throw Error(L_(108,mb(t)||"Unknown",s));return hb({},n,i)}function ak(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||QA,ek=JA.current,YA(JA,t),YA(tk,tk.current),!0}function lk(t,e,n){var i=t.stateNode;if(!i)throw Error(L_(169));n?(t=ok(t,e,ek),i.__reactInternalMemoizedMergedChildContext=t,XA(tk),XA(JA),YA(JA,t)):XA(tk),YA(tk,n)}var hk=null,ck=!1,uk=!1;function dk(t){null===hk?hk=[t]:hk.push(t)}function pk(){if(!uk&&null!==hk){uk=!0;var t=0,e=Vw;try{var n=hk;for(Vw=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}hk=null,ck=!1}catch(iG){throw null!==hk&&(hk=hk.slice(t+1)),_w(kw,pk),iG}finally{Vw=e,uk=!1}}return null}var fk=[],mk=0,gk=null,yk=0,vk=[],_k=0,bk=null,wk=1,xk="";function Sk(t,e){fk[mk++]=yk,fk[mk++]=gk,gk=t,yk=e}function Ak(t,e,n){vk[_k++]=wk,vk[_k++]=xk,vk[_k++]=bk,bk=t;var i=wk;t=xk;var s=32-Rw(i)-1;i&=~(1<<s),n+=1;var r=32-Rw(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,wk=1<<32-Rw(e)+s|n<<s|i,xk=r+t}else wk=1<<r|n<<s|i,xk=t}function kk(t){null!==t.return&&(Sk(t,1),Ak(t,1,0))}function Pk(t){for(;t===gk;)gk=fk[--mk],fk[mk]=null,yk=fk[--mk],fk[mk]=null;for(;t===bk;)bk=vk[--_k],vk[_k]=null,xk=vk[--_k],vk[_k]=null,wk=vk[--_k],vk[_k]=null}var Ek=null,Ck=null,Mk=!1,Tk=null;function Lk(t,e){var n=tT(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function Rk(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,Ek=t,Ck=DA(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,Ek=t,Ck=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==bk?{id:wk,overflow:xk}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=tT(18,null,null,0)).stateNode=e,n.return=t,t.child=n,Ek=t,Ck=null,!0);default:return!1}}function Ik(t){return!(!(1&t.mode)||128&t.flags)}function Dk(t){if(Mk){var e=Ck;if(e){var n=e;if(!Rk(t,e)){if(Ik(t))throw Error(L_(418));e=DA(n.nextSibling);var i=Ek;e&&Rk(t,e)?Lk(i,n):(t.flags=-4097&t.flags|2,Mk=!1,Ek=t)}}else{if(Ik(t))throw Error(L_(418));t.flags=-4097&t.flags|2,Mk=!1,Ek=t}}}function Ok(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Ek=t}function Nk(t){if(t!==Ek)return!1;if(!Mk)return Ok(t),Mk=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!EA(t.type,t.memoizedProps)),e&&(e=Ck)){if(Ik(t))throw Fk(),Error(L_(418));for(;e;)Lk(t,e),e=DA(e.nextSibling)}if(Ok(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(L_(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Ck=DA(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Ck=null}}else Ck=Ek?DA(t.stateNode.nextSibling):null;return!0}function Fk(){for(var t=Ck;t;)t=DA(t.nextSibling)}function Bk(){Ck=Ek=null,Mk=!1}function zk(t){null===Tk?Tk=[t]:Tk.push(t)}var Wk=q_.ReactCurrentBatchConfig;function jk(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(L_(309));var i=n.stateNode}if(!i)throw Error(L_(147,t));var s=i,r=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=s.refs;null===t?delete e[r]:e[r]=t})._stringRef=r,e)}if("string"!=typeof t)throw Error(L_(284));if(!n._owner)throw Error(L_(290,t))}return t}function Uk(t,e){throw t=Object.prototype.toString.call(e),Error(L_(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hk(t){return(0,t._init)(t._payload)}function $k(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(t,e){return(t=nT(t,e)).index=0,t.sibling=null,t}function r(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function a(t,e,n,i){return null===e||6!==e.tag?((e=oT(n,t.mode,i)).return=t,e):((e=s(e,n)).return=t,e)}function l(t,e,n,i){var r=n.type;return r===K_?c(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===r||"object"==typeof r&&null!==r&&r.$$typeof===sb&&Hk(r)===e.type)?((i=s(e,n.props)).ref=jk(t,e,n),i.return=t,i):((i=iT(n.type,n.key,n.props,null,t.mode,i)).ref=jk(t,e,n),i.return=t,i)}function h(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=aT(n,t.mode,i)).return=t,e):((e=s(e,n.children||[])).return=t,e)}function c(t,e,n,i,r){return null===e||7!==e.tag?((e=sT(n,t.mode,i,r)).return=t,e):((e=s(e,n)).return=t,e)}function u(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=oT(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case G_:return(n=iT(e.type,e.key,e.props,null,t.mode,n)).ref=jk(t,null,e),n.return=t,n;case Z_:return(e=aT(e,t.mode,n)).return=t,e;case sb:return u(t,(0,e._init)(e._payload),n)}if(Eb(e)||ab(e))return(e=sT(e,t.mode,n,null)).return=t,e;Uk(t,e)}return null}function d(t,e,n,i){var s=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==s?null:a(t,e,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case G_:return n.key===s?l(t,e,n,i):null;case Z_:return n.key===s?h(t,e,n,i):null;case sb:return d(t,e,(s=n._init)(n._payload),i)}if(Eb(n)||ab(n))return null!==s?null:c(t,e,n,i,null);Uk(t,n)}return null}function p(t,e,n,i,s){if("string"==typeof i&&""!==i||"number"==typeof i)return a(e,t=t.get(n)||null,""+i,s);if("object"==typeof i&&null!==i){switch(i.$$typeof){case G_:return l(e,t=t.get(null===i.key?n:i.key)||null,i,s);case Z_:return h(e,t=t.get(null===i.key?n:i.key)||null,i,s);case sb:return p(t,e,n,(0,i._init)(i._payload),s)}if(Eb(i)||ab(i))return c(e,t=t.get(n)||null,i,s,null);Uk(e,i)}return null}return function a(l,h,c,f){if("object"==typeof c&&null!==c&&c.type===K_&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case G_:t:{for(var m=c.key,g=h;null!==g;){if(g.key===m){if((m=c.type)===K_){if(7===g.tag){n(l,g.sibling),(h=s(g,c.props.children)).return=l,l=h;break t}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===sb&&Hk(m)===g.type){n(l,g.sibling),(h=s(g,c.props)).ref=jk(l,g,c),h.return=l,l=h;break t}n(l,g);break}e(l,g),g=g.sibling}c.type===K_?((h=sT(c.props.children,l.mode,f,c.key)).return=l,l=h):((f=iT(c.type,c.key,c.props,null,l.mode,f)).ref=jk(l,h,c),f.return=l,l=f)}return o(l);case Z_:t:{for(g=c.key;null!==h;){if(h.key===g){if(4===h.tag&&h.stateNode.containerInfo===c.containerInfo&&h.stateNode.implementation===c.implementation){n(l,h.sibling),(h=s(h,c.children||[])).return=l,l=h;break t}n(l,h);break}e(l,h),h=h.sibling}(h=aT(c,l.mode,f)).return=l,l=h}return o(l);case sb:return a(l,h,(g=c._init)(c._payload),f)}if(Eb(c))return function(s,o,a,l){for(var h=null,c=null,f=o,m=o=0,g=null;null!==f&&m<a.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var y=d(s,f,a[m],l);if(null===y){null===f&&(f=g);break}t&&f&&null===y.alternate&&e(s,f),o=r(y,o,m),null===c?h=y:c.sibling=y,c=y,f=g}if(m===a.length)return n(s,f),Mk&&Sk(s,m),h;if(null===f){for(;m<a.length;m++)null!==(f=u(s,a[m],l))&&(o=r(f,o,m),null===c?h=f:c.sibling=f,c=f);return Mk&&Sk(s,m),h}for(f=i(s,f);m<a.length;m++)null!==(g=p(f,s,m,a[m],l))&&(t&&null!==g.alternate&&f.delete(null===g.key?m:g.key),o=r(g,o,m),null===c?h=g:c.sibling=g,c=g);return t&&f.forEach(function(t){return e(s,t)}),Mk&&Sk(s,m),h}(l,h,c,f);if(ab(c))return function(s,o,a,l){var h=ab(a);if("function"!=typeof h)throw Error(L_(150));if(null==(a=h.call(a)))throw Error(L_(151));for(var c=h=null,f=o,m=o=0,g=null,y=a.next();null!==f&&!y.done;m++,y=a.next()){f.index>m?(g=f,f=null):g=f.sibling;var v=d(s,f,y.value,l);if(null===v){null===f&&(f=g);break}t&&f&&null===v.alternate&&e(s,f),o=r(v,o,m),null===c?h=v:c.sibling=v,c=v,f=g}if(y.done)return n(s,f),Mk&&Sk(s,m),h;if(null===f){for(;!y.done;m++,y=a.next())null!==(y=u(s,y.value,l))&&(o=r(y,o,m),null===c?h=y:c.sibling=y,c=y);return Mk&&Sk(s,m),h}for(f=i(s,f);!y.done;m++,y=a.next())null!==(y=p(f,s,m,y.value,l))&&(t&&null!==y.alternate&&f.delete(null===y.key?m:y.key),o=r(y,o,m),null===c?h=y:c.sibling=y,c=y);return t&&f.forEach(function(t){return e(s,t)}),Mk&&Sk(s,m),h}(l,h,c,f);Uk(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c?(c=""+c,null!==h&&6===h.tag?(n(l,h.sibling),(h=s(h,c)).return=l,l=h):(n(l,h),(h=oT(c,l.mode,f)).return=l,l=h),o(l)):n(l,h)}}var Vk=$k(!0),qk=$k(!1),Gk=KA(null),Zk=null,Kk=null,Xk=null;function Yk(){Xk=Kk=Zk=null}function Qk(t){var e=Gk.current;XA(Gk),t._currentValue=e}function Jk(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function tP(t,e){Zk=t,Xk=Kk=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(UE=!0),t.firstContext=null)}function eP(t){var e=t._currentValue;if(Xk!==t)if(t={context:t,memoizedValue:e,next:null},null===Kk){if(null===Zk)throw Error(L_(308));Kk=t,Zk.dependencies={lanes:0,firstContext:t}}else Kk=Kk.next=t;return e}var nP=null;function iP(t){null===nP?nP=[t]:nP.push(t)}function sP(t,e,n,i){var s=e.interleaved;return null===s?(n.next=n,iP(e)):(n.next=s.next,s.next=n),e.interleaved=n,rP(t,i)}function rP(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var oP=!1;function aP(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hP(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cP(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,2&YC){var s=i.pending;return null===s?e.next=e:(e.next=s.next,s.next=e),i.pending=e,rP(t,n)}return null===(s=i.interleaved)?(e.next=e,iP(i)):(e.next=s.next,s.next=e),i.interleaved=e,rP(t,n)}function uP(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,$w(t,n)}}function dP(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?s=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?s=r=e:r=r.next=e}else s=r=e;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pP(t,e,n,i){var s=t.updateQueue;oP=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,h=l.next;l.next=null,null===o?r=h:o.next=h,o=l;var c=t.alternate;null!==c&&(a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=h:a.next=h,c.lastBaseUpdate=l)}if(null!==r){var u=s.baseState;for(o=0,c=h=l=null,a=r;;){var d=a.lane,p=a.eventTime;if((i&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var f=t,m=a;switch(d=e,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){u=f.call(p,u,d);break t}u=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(d="function"==typeof(f=m.payload)?f.call(p,u,d):f))break t;u=hb({},u,d);break t;case 2:oP=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=s.effects)?s.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(h=c=p,l=u):c=c.next=p,o|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(d=a).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===c&&(l=u),s.baseState=l,s.firstBaseUpdate=h,s.lastBaseUpdate=c,null!==(e=s.shared.interleaved)){s=e;do{o|=s.lane,s=s.next}while(s!==e)}else null===r&&(s.shared.lanes=0);rM|=o,t.lanes=o,t.memoizedState=u}}function fP(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(null!==s){if(i.callback=null,i=n,"function"!=typeof s)throw Error(L_(191,s));s.call(i)}}}var mP={},gP=KA(mP),yP=KA(mP),vP=KA(mP);function _P(t){if(t===mP)throw Error(L_(174));return t}function bP(t,e){switch(YA(vP,e),YA(yP,t),YA(gP,mP),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Db(null,"");break;default:e=Db(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}XA(gP),YA(gP,e)}function wP(){XA(gP),XA(yP),XA(vP)}function xP(t){_P(vP.current);var e=_P(gP.current),n=Db(e,t.type);e!==n&&(YA(yP,t),YA(gP,n))}function SP(t){yP.current===t&&(XA(gP),XA(yP))}var AP=KA(0);function kP(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(128&e.flags)return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var PP=[];function EP(){for(var t=0;t<PP.length;t++)PP[t]._workInProgressVersionPrimary=null;PP.length=0}var CP=q_.ReactCurrentDispatcher,MP=q_.ReactCurrentBatchConfig,TP=0,LP=null,RP=null,IP=null,DP=!1,OP=!1,NP=0,FP=0;function BP(){throw Error(L_(321))}function zP(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!RS(t[n],e[n]))return!1;return!0}function WP(t,e,n,i,s,r){if(TP=r,LP=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,CP.current=null===t||null===t.memoizedState?SE:AE,t=n(i,s),OP){r=0;do{if(OP=!1,NP=0,25<=r)throw Error(L_(301));r+=1,IP=RP=null,e.updateQueue=null,CP.current=kE,t=n(i,s)}while(OP)}if(CP.current=xE,e=null!==RP&&null!==RP.next,TP=0,IP=RP=LP=null,DP=!1,e)throw Error(L_(300));return t}function jP(){var t=0!==NP;return NP=0,t}function UP(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===IP?LP.memoizedState=IP=t:IP=IP.next=t,IP}function HP(){if(null===RP){var t=LP.alternate;t=null!==t?t.memoizedState:null}else t=RP.next;var e=null===IP?LP.memoizedState:IP.next;if(null!==e)IP=e,RP=t;else{if(null===t)throw Error(L_(310));t={memoizedState:(RP=t).memoizedState,baseState:RP.baseState,baseQueue:RP.baseQueue,queue:RP.queue,next:null},null===IP?LP.memoizedState=IP=t:IP=IP.next=t}return IP}function $P(t,e){return"function"==typeof e?e(t):e}function VP(t){var e=HP(),n=e.queue;if(null===n)throw Error(L_(311));n.lastRenderedReducer=t;var i=RP,s=i.baseQueue,r=n.pending;if(null!==r){if(null!==s){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(null!==s){r=s.next,i=i.baseState;var a=o=null,l=null,h=r;do{var c=h.lane;if((TP&c)===c)null!==l&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var u={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===l?(a=l=u,o=i):l=l.next=u,LP.lanes|=c,rM|=c}h=h.next}while(null!==h&&h!==r);null===l?o=i:l.next=a,RS(i,e.memoizedState)||(UE=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(null!==(t=n.interleaved)){s=t;do{r=s.lane,LP.lanes|=r,rM|=r,s=s.next}while(s!==t)}else null===s&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qP(t){var e=HP(),n=e.queue;if(null===n)throw Error(L_(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{r=t(r,o.action),o=o.next}while(o!==s);RS(r,e.memoizedState)||(UE=!0),e.memoizedState=r,null===e.baseQueue&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function GP(){}function ZP(t,e){var n=LP,i=HP(),s=e(),r=!RS(i.memoizedState,s);if(r&&(i.memoizedState=s,UE=!0),i=i.queue,oE(YP.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||null!==IP&&1&IP.memoizedState.tag){if(n.flags|=2048,eE(9,XP.bind(null,n,i,s,e),void 0,null),null===QC)throw Error(L_(349));30&TP||KP(n,e,s)}return s}function KP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=LP.updateQueue)?(e={lastEffect:null,stores:null},LP.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function XP(t,e,n,i){e.value=n,e.getSnapshot=i,QP(e)&&JP(t)}function YP(t,e,n){return n(function(){QP(e)&&JP(t)})}function QP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!RS(t,n)}catch(i){return!0}}function JP(t){var e=rP(t,1);null!==e&&kM(e,t,1,-1)}function tE(t){var e=UP();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$P,lastRenderedState:t},e.queue=t,t=t.dispatch=vE.bind(null,LP,t),[e.memoizedState,t]}function eE(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=LP.updateQueue)?(e={lastEffect:null,stores:null},LP.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function nE(){return HP().memoizedState}function iE(t,e,n,i){var s=UP();LP.flags|=t,s.memoizedState=eE(1|e,n,void 0,void 0===i?null:i)}function sE(t,e,n,i){var s=HP();i=void 0===i?null:i;var r=void 0;if(null!==RP){var o=RP.memoizedState;if(r=o.destroy,null!==i&&zP(i,o.deps))return void(s.memoizedState=eE(e,n,r,i))}LP.flags|=t,s.memoizedState=eE(1|e,n,r,i)}function rE(t,e){return iE(8390656,8,t,e)}function oE(t,e){return sE(2048,8,t,e)}function aE(t,e){return sE(4,2,t,e)}function lE(t,e){return sE(4,4,t,e)}function hE(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function cE(t,e,n){return n=null!=n?n.concat([t]):null,sE(4,4,hE.bind(null,e,t),n)}function uE(){}function dE(t,e){var n=HP();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&zP(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function pE(t,e){var n=HP();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&zP(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function fE(t,e,n){return 21&TP?(RS(n,e)||(n=jw(),LP.lanes|=n,rM|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,UE=!0),t.memoizedState=n)}function mE(t,e){var n=Vw;Vw=0!==n&&4>n?n:4,t(!0);var i=MP.transition;MP.transition={};try{t(!1),e()}finally{Vw=n,MP.transition=i}}function gE(){return HP().memoizedState}function yE(t,e,n){var i=AM(t);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},_E(t)?bE(e,n):null!==(n=sP(t,e,n,i))&&(kM(n,t,i,SM()),wE(n,e,i))}function vE(t,e,n){var i=AM(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(_E(t))bE(e,s);else{var r=t.alternate;if(0===t.lanes&&(null===r||0===r.lanes)&&null!==(r=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,RS(a,o)){var l=e.interleaved;return null===l?(s.next=s,iP(e)):(s.next=l.next,l.next=s),void(e.interleaved=s)}}catch(h){}null!==(n=sP(t,e,s,i))&&(kM(n,t,i,s=SM()),wE(n,e,i))}}function _E(t){var e=t.alternate;return t===LP||null!==e&&e===LP}function bE(t,e){OP=DP=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wE(t,e,n){if(4194240&n){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,$w(t,n)}}var xE={readContext:eP,useCallback:BP,useContext:BP,useEffect:BP,useImperativeHandle:BP,useInsertionEffect:BP,useLayoutEffect:BP,useMemo:BP,useReducer:BP,useRef:BP,useState:BP,useDebugValue:BP,useDeferredValue:BP,useTransition:BP,useMutableSource:BP,useSyncExternalStore:BP,useId:BP,unstable_isNewReconciler:!1},SE={readContext:eP,useCallback:function(t,e){return UP().memoizedState=[t,void 0===e?null:e],t},useContext:eP,useEffect:rE,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,iE(4194308,4,hE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return iE(4194308,4,t,e)},useInsertionEffect:function(t,e){return iE(4,2,t,e)},useMemo:function(t,e){var n=UP();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=UP();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=yE.bind(null,LP,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},UP().memoizedState=t},useState:tE,useDebugValue:uE,useDeferredValue:function(t){return UP().memoizedState=t},useTransition:function(){var t=tE(!1),e=t[0];return t=mE.bind(null,t[1]),UP().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=LP,s=UP();if(Mk){if(void 0===n)throw Error(L_(407));n=n()}else{if(n=e(),null===QC)throw Error(L_(349));30&TP||KP(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,rE(YP.bind(null,i,r,t),[t]),i.flags|=2048,eE(9,XP.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=UP(),e=QC.identifierPrefix;if(Mk){var n=xk;e=":"+e+"R"+(n=(wk&~(1<<32-Rw(wk)-1)).toString(32)+n),0<(n=NP++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=FP++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AE={readContext:eP,useCallback:dE,useContext:eP,useEffect:oE,useImperativeHandle:cE,useInsertionEffect:aE,useLayoutEffect:lE,useMemo:pE,useReducer:VP,useRef:nE,useState:function(){return VP($P)},useDebugValue:uE,useDeferredValue:function(t){return fE(HP(),RP.memoizedState,t)},useTransition:function(){return[VP($P)[0],HP().memoizedState]},useMutableSource:GP,useSyncExternalStore:ZP,useId:gE,unstable_isNewReconciler:!1},kE={readContext:eP,useCallback:dE,useContext:eP,useEffect:oE,useImperativeHandle:cE,useInsertionEffect:aE,useLayoutEffect:lE,useMemo:pE,useReducer:qP,useRef:nE,useState:function(){return qP($P)},useDebugValue:uE,useDeferredValue:function(t){var e=HP();return null===RP?e.memoizedState=t:fE(e,RP.memoizedState,t)},useTransition:function(){return[qP($P)[0],HP().memoizedState]},useMutableSource:GP,useSyncExternalStore:ZP,useId:gE,unstable_isNewReconciler:!1};function PE(t,e){if(t&&t.defaultProps){for(var n in e=hb({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function EE(t,e,n,i){n=null==(n=n(i,e=t.memoizedState))?e:hb({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var CE={isMounted:function(t){return!!(t=t._reactInternals)&&fw(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=SM(),s=AM(t),r=hP(i,s);r.payload=e,null!=n&&(r.callback=n),null!==(e=cP(t,r,s))&&(kM(e,t,s,i),uP(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=SM(),s=AM(t),r=hP(i,s);r.tag=1,r.payload=e,null!=n&&(r.callback=n),null!==(e=cP(t,r,s))&&(kM(e,t,s,i),uP(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=SM(),i=AM(t),s=hP(n,i);s.tag=2,null!=e&&(s.callback=e),null!==(e=cP(t,s,i))&&(kM(e,t,i,n),uP(e,t,i))}};function ME(t,e,n,i,s,r,o){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,r,o):!(e.prototype&&e.prototype.isPureReactComponent&&IS(n,i)&&IS(s,r))}function TE(t,e,n){var i=!1,s=QA,r=e.contextType;return"object"==typeof r&&null!==r?r=eP(r):(s=ik(e)?ek:JA.current,r=(i=null!=(i=e.contextTypes))?nk(t,s):QA),e=new e(n,r),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=CE,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function LE(t,e,n,i){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&CE.enqueueReplaceState(e,e.state,null)}function RE(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},aP(t);var r=e.contextType;"object"==typeof r&&null!==r?s.context=eP(r):(r=ik(e)?ek:JA.current,s.context=nk(t,r)),s.state=t.memoizedState,"function"==typeof(r=e.getDerivedStateFromProps)&&(EE(t,e,r,n),s.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(e=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),e!==s.state&&CE.enqueueReplaceState(s,s.state,null),pP(t,n,s,i),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308)}function IE(t,e){try{var n="",i=e;do{n+=pb(i),i=i.return}while(i);var s=n}catch(r){s="\nError generating stack: "+r.message+"\n"+r.stack}return{value:t,source:e,stack:s,digest:null}}function DE(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}var OE="function"==typeof WeakMap?WeakMap:Map;function NE(t,e,n){(n=hP(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){pM||(pM=!0,fM=i)},n}function FE(t,e,n){(n=hP(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"==typeof i){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){}}var r=t.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===mM?mM=new Set([this]):mM.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function BE(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new OE;var s=new Set;i.set(e,s)}else void 0===(s=i.get(e))&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=ZM.bind(null,t,e,n),e.then(t,t))}function zE(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function WE(t,e,n,i,s){return 1&t.mode?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=hP(-1,1)).tag=2,cP(n,e,1))),n.lanes|=1),t)}var jE=q_.ReactCurrentOwner,UE=!1;function HE(t,e,n,i){e.child=null===t?qk(e,null,n,i):Vk(e,t.child,n,i)}function $E(t,e,n,i,s){n=n.render;var r=e.ref;return tP(e,s),i=WP(t,e,n,i,r,s),n=jP(),null===t||UE?(Mk&&n&&kk(e),e.flags|=1,HE(t,e,i,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pC(t,e,s))}function VE(t,e,n,i,s){if(null===t){var r=n.type;return"function"!=typeof r||eT(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=iT(n.type,null,i,e,e.mode,s)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=r,qE(t,e,r,i,s))}if(r=t.child,0===(t.lanes&s)){var o=r.memoizedProps;if((n=null!==(n=n.compare)?n:IS)(o,i)&&t.ref===e.ref)return pC(t,e,s)}return e.flags|=1,(t=nT(r,i)).ref=e.ref,t.return=e,e.child=t}function qE(t,e,n,i,s){if(null!==t){var r=t.memoizedProps;if(IS(r,i)&&t.ref===e.ref){if(UE=!1,e.pendingProps=i=r,0===(t.lanes&s))return e.lanes=t.lanes,pC(t,e,s);131072&t.flags&&(UE=!0)}}return KE(t,e,n,i,s)}function GE(t,e,n){var i=e.pendingProps,s=i.children,r=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(1&e.mode){if(!(1073741824&n))return t=null!==r?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,YA(nM,eM),eM|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==r?r.baseLanes:n,YA(nM,eM),eM|=i}else e.memoizedState={baseLanes:0,cachePool:null,transitions:null},YA(nM,eM),eM|=n;else null!==r?(i=r.baseLanes|n,e.memoizedState=null):i=n,YA(nM,eM),eM|=i;return HE(t,e,s,n),e.child}function ZE(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function KE(t,e,n,i,s){var r=ik(n)?ek:JA.current;return r=nk(e,r),tP(e,s),n=WP(t,e,n,i,r,s),i=jP(),null===t||UE?(Mk&&i&&kk(e),e.flags|=1,HE(t,e,n,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pC(t,e,s))}function XE(t,e,n,i,s){if(ik(n)){var r=!0;ak(e)}else r=!1;if(tP(e,s),null===e.stateNode)dC(t,e),TE(e,n,i),RE(e,n,i,s),i=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,h=n.contextType;h="object"==typeof h&&null!==h?eP(h):nk(e,h=ik(n)?ek:JA.current);var c=n.getDerivedStateFromProps,u="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==i||l!==h)&&LE(e,o,i,h),oP=!1;var d=e.memoizedState;o.state=d,pP(e,i,o,s),l=e.memoizedState,a!==i||d!==l||tk.current||oP?("function"==typeof c&&(EE(e,n,c,i),l=e.memoizedState),(a=oP||ME(e,n,a,i,d,l,h))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(e.flags|=4194308)):("function"==typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=h,i=a):("function"==typeof o.componentDidMount&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,lP(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:PE(e.type,a),o.props=h,u=e.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?eP(l):nk(e,l=ik(n)?ek:JA.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==u||d!==l)&&LE(e,o,i,l),oP=!1,d=e.memoizedState,o.state=d,pP(e,i,o,s);var f=e.memoizedState;a!==u||d!==f||tk.current||oP?("function"==typeof p&&(EE(e,n,p,i),f=e.memoizedState),(h=oP||ME(e,n,h,i,d,f,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"==typeof o.componentDidUpdate&&(e.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=f),o.props=i,o.state=f,o.context=l,i=h):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return YE(t,e,n,i,r,s)}function YE(t,e,n,i,s,r){ZE(t,e);var o=!!(128&e.flags);if(!i&&!o)return s&&lk(e,n,!1),pC(t,e,r);i=e.stateNode,jE.current=e;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&o?(e.child=Vk(e,t.child,null,r),e.child=Vk(e,null,a,r)):HE(t,e,a,r),e.memoizedState=i.state,s&&lk(e,n,!0),e.child}function QE(t){var e=t.stateNode;e.pendingContext?rk(0,e.pendingContext,e.pendingContext!==e.context):e.context&&rk(0,e.context,!1),bP(t,e.containerInfo)}function JE(t,e,n,i,s){return Bk(),zk(s),e.flags|=256,HE(t,e,n,i),e.child}var tC,eC,nC,iC,sC={dehydrated:null,treeContext:null,retryLane:0};function rC(t){return{baseLanes:t,cachePool:null,transitions:null}}function oC(t,e,n){var i,s=e.pendingProps,r=AP.current,o=!1,a=!!(128&e.flags);if((i=a)||(i=(null===t||null!==t.memoizedState)&&!!(2&r)),i?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(r|=1),YA(AP,1&r),null===t)return Dk(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(1&e.mode?"$!"===t.data?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,t=s.fallback,o?(s=e.mode,o=e.child,a={mode:"hidden",children:a},1&s||null===o?o=rT(a,s,0,null):(o.childLanes=0,o.pendingProps=a),t=sT(t,s,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=rC(n),e.memoizedState=sC,t):aC(e,a));if(null!==(r=t.memoizedState)&&null!==(i=r.dehydrated))return function(t,e,n,i,s,r,o){if(n)return 256&e.flags?(e.flags&=-257,lC(t,e,o,i=DE(Error(L_(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=rT({mode:"visible",children:i.children},s,0,null),(r=sT(r,s,o,null)).flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,1&e.mode&&Vk(e,t.child,null,o),e.child.memoizedState=rC(o),e.memoizedState=sC,r);if(!(1&e.mode))return lC(t,e,o,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var a=i.dgst;return i=a,lC(t,e,o,i=DE(r=Error(L_(419)),i,void 0))}if(a=0!==(o&t.childLanes),UE||a){if(null!==(i=QC)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|o))?0:s)&&s!==r.retryLane&&(r.retryLane=s,rP(t,s),kM(i,t,s,-1))}return BM(),lC(t,e,o,i=DE(Error(L_(421))))}return"$?"===s.data?(e.flags|=128,e.child=t.child,e=XM.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,Ck=DA(s.nextSibling),Ek=e,Mk=!0,Tk=null,null!==t&&(vk[_k++]=wk,vk[_k++]=xk,vk[_k++]=bk,wk=t.id,xk=t.overflow,bk=e),(e=aC(e,i.children)).flags|=4096,e)}(t,e,a,s,i,r,n);if(o){o=s.fallback,a=e.mode,i=(r=t.child).sibling;var l={mode:"hidden",children:s.children};return 1&a||e.child===r?(s=nT(r,l)).subtreeFlags=14680064&r.subtreeFlags:((s=e.child).childLanes=0,s.pendingProps=l,e.deletions=null),null!==i?o=nT(i,o):(o=sT(o,a,n,null)).flags|=2,o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,a=null===(a=t.child.memoizedState)?rC(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=sC,s}return t=(o=t.child).sibling,s=nT(o,{mode:"visible",children:s.children}),!(1&e.mode)&&(s.lanes=n),s.return=e,s.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function aC(t,e){return(e=rT({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function lC(t,e,n,i){return null!==i&&zk(i),Vk(e,t.child,null,n),(t=aC(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function hC(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Jk(t.return,e,n)}function cC(t,e,n,i,s){var r=t.memoizedState;null===r?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function uC(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(HE(t,e,i.children,n),2&(i=AP.current))i=1&i|2,e.flags|=128;else{if(null!==t&&128&t.flags)t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&hC(t,n,e);else if(19===t.tag)hC(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(YA(AP,i),1&e.mode)switch(s){case"forwards":for(n=e.child,s=null;null!==n;)null!==(t=n.alternate)&&null===kP(t)&&(s=n),n=n.sibling;null===(n=s)?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cC(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;null!==s;){if(null!==(t=s.alternate)&&null===kP(t)){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cC(e,!0,n,null,r);break;case"together":cC(e,!1,null,null,void 0);break;default:e.memoizedState=null}else e.memoizedState=null;return e.child}function dC(t,e){!(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pC(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),rM|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(L_(153));if(null!==e.child){for(n=nT(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=nT(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function fC(t,e){if(!Mk)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function mC(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;null!==s;)n|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=t,s=s.sibling;else for(s=t.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function gC(t,e,n){var i=e.pendingProps;switch(Pk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mC(e),null;case 1:case 17:return ik(e.type)&&sk(),mC(e),null;case 3:return i=e.stateNode,wP(),XA(tk),XA(JA),EP(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(Nk(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&!(256&e.flags)||(e.flags|=1024,null!==Tk&&(MM(Tk),Tk=null))),eC(t,e),mC(e),null;case 5:SP(e);var s=_P(vP.current);if(n=e.type,null!==t&&null!=e.stateNode)nC(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(L_(166));return mC(e),null}if(t=_P(gP.current),Nk(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[FA]=e,i[BA]=r,t=!!(1&e.mode),n){case"dialog":cA("cancel",i),cA("close",i);break;case"iframe":case"object":case"embed":cA("load",i);break;case"video":case"audio":for(s=0;s<oA.length;s++)cA(oA[s],i);break;case"source":cA("error",i);break;case"img":case"image":case"link":cA("error",i),cA("load",i);break;case"details":cA("toggle",i);break;case"input":xb(i,r),cA("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},cA("invalid",i);break;case"textarea":Tb(i,r),cA("invalid",i)}for(var o in $b(n,r),s=null,r)if(r.hasOwnProperty(o)){var a=r[o];"children"===o?"string"==typeof a?i.textContent!==a&&(!0!==r.suppressHydrationWarning&&SA(i.textContent,a,t),s=["children",a]):"number"==typeof a&&i.textContent!==""+a&&(!0!==r.suppressHydrationWarning&&SA(i.textContent,a,t),s=["children",""+a]):I_.hasOwnProperty(o)&&null!=a&&"onScroll"===o&&cA("scroll",i)}switch(n){case"input":vb(i),kb(i,r,!0);break;case"textarea":vb(i),Rb(i);break;case"select":case"option":break;default:"function"==typeof r.onClick&&(i.onclick=AA)}i=s,e.updateQueue=i,null!==i&&(e.flags|=4)}else{o=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=Ib(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=o.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof i.is?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),"select"===n&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[FA]=e,t[BA]=i,tC(t,e,!1,!1),e.stateNode=t;t:{switch(o=Vb(n,i),n){case"dialog":cA("cancel",t),cA("close",t),s=i;break;case"iframe":case"object":case"embed":cA("load",t),s=i;break;case"video":case"audio":for(s=0;s<oA.length;s++)cA(oA[s],t);s=i;break;case"source":cA("error",t),s=i;break;case"img":case"image":case"link":cA("error",t),cA("load",t),s=i;break;case"details":cA("toggle",t),s=i;break;case"input":xb(t,i),s=wb(t,i),cA("invalid",t);break;case"option":default:s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=hb({},i,{value:void 0}),cA("invalid",t);break;case"textarea":Tb(t,i),s=Mb(t,i),cA("invalid",t)}for(r in $b(n,s),a=s)if(a.hasOwnProperty(r)){var l=a[r];"style"===r?Ub(t,l):"dangerouslySetInnerHTML"===r?null!=(l=l?l.__html:void 0)&&Fb(t,l):"children"===r?"string"==typeof l?("textarea"!==n||""!==l)&&Bb(t,l):"number"==typeof l&&Bb(t,""+l):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(I_.hasOwnProperty(r)?null!=l&&"onScroll"===r&&cA("scroll",t):null!=l&&V_(t,r,l,o))}switch(n){case"input":vb(t),kb(t,i,!1);break;case"textarea":vb(t),Rb(t);break;case"option":null!=i.value&&t.setAttribute("value",""+gb(i.value));break;case"select":t.multiple=!!i.multiple,null!=(r=i.value)?Cb(t,!!i.multiple,r,!1):null!=i.defaultValue&&Cb(t,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof s.onClick&&(t.onclick=AA)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return mC(e),null;case 6:if(t&&null!=e.stateNode)iC(t,e,t.memoizedProps,i);else{if("string"!=typeof i&&null===e.stateNode)throw Error(L_(166));if(n=_P(vP.current),_P(gP.current),Nk(e)){if(i=e.stateNode,n=e.memoizedProps,i[FA]=e,(r=i.nodeValue!==n)&&null!==(t=Ek))switch(t.tag){case 3:SA(i.nodeValue,n,!!(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&SA(i.nodeValue,n,!!(1&t.mode))}r&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[FA]=e,e.stateNode=i}return mC(e),null;case 13:if(XA(AP),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(Mk&&null!==Ck&&1&e.mode&&!(128&e.flags))Fk(),Bk(),e.flags|=98560,r=!1;else if(r=Nk(e),null!==i&&null!==i.dehydrated){if(null===t){if(!r)throw Error(L_(318));if(!(r=null!==(r=e.memoizedState)?r.dehydrated:null))throw Error(L_(317));r[FA]=e}else Bk(),!(128&e.flags)&&(e.memoizedState=null),e.flags|=4;mC(e),r=!1}else null!==Tk&&(MM(Tk),Tk=null),r=!0;if(!r)return 65536&e.flags?e:null}return 128&e.flags?(e.lanes=n,e):((i=null!==i)!=(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,1&e.mode&&(null===t||1&AP.current?0===iM&&(iM=3):BM())),null!==e.updateQueue&&(e.flags|=4),mC(e),null);case 4:return wP(),eC(t,e),null===t&&pA(e.stateNode.containerInfo),mC(e),null;case 10:return Qk(e.type._context),mC(e),null;case 19:if(XA(AP),null===(r=e.memoizedState))return mC(e),null;if(i=!!(128&e.flags),null===(o=r.rendering))if(i)fC(r,!1);else{if(0!==iM||null!==t&&128&t.flags)for(t=e.child;null!==t;){if(null!==(o=kP(t))){for(e.flags|=128,fC(r,!1),null!==(i=o.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(r=n).flags&=14680066,null===(o=r.alternate)?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return YA(AP,1&AP.current|2),e.child}t=t.sibling}null!==r.tail&&Sw()>uM&&(e.flags|=128,i=!0,fC(r,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=kP(o))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),fC(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!Mk)return mC(e),null}else 2*Sw()-r.renderingStartTime>uM&&1073741824!==n&&(e.flags|=128,i=!0,fC(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(null!==(n=r.last)?n.sibling=o:e.child=o,r.last=o)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Sw(),e.sibling=null,n=AP.current,YA(AP,i?1&n|2:1&n),e):(mC(e),null);case 22:case 23:return DM(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&1&e.mode?!!(1073741824&eM)&&(mC(e),6&e.subtreeFlags&&(e.flags|=8192)):mC(e),null;case 24:case 25:return null}throw Error(L_(156,e.tag))}function yC(t,e){switch(Pk(e),e.tag){case 1:return ik(e.type)&&sk(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return wP(),XA(tk),XA(JA),EP(),65536&(t=e.flags)&&!(128&t)?(e.flags=-65537&t|128,e):null;case 5:return SP(e),null;case 13:if(XA(AP),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(L_(340));Bk()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return XA(AP),null;case 4:return wP(),null;case 10:return Qk(e.type._context),null;case 22:case 23:return DM(),null;default:return null}}tC=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},eC=function(){},nC=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,_P(gP.current);var r,o=null;switch(n){case"input":s=wb(t,s),i=wb(t,i),o=[];break;case"select":s=hb({},s,{value:void 0}),i=hb({},i,{value:void 0}),o=[];break;case"textarea":s=Mb(t,s),i=Mb(t,i),o=[];break;default:"function"!=typeof s.onClick&&"function"==typeof i.onClick&&(t.onclick=AA)}for(h in $b(n,i),n=null,s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var a=s[h];for(r in a)a.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(I_.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var l=i[h];if(a=null!=s?s[h]:void 0,i.hasOwnProperty(h)&&l!==a&&(null!=l||null!=a))if("style"===h)if(a){for(r in a)!a.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in l)l.hasOwnProperty(r)&&a[r]!==l[r]&&(n||(n={}),n[r]=l[r])}else n||(o||(o=[]),o.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(h,l)):"children"===h?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(I_.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&cA("scroll",t),o||a===l||(o=[])):(o=o||[]).push(h,l))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}},iC=function(t,e,n,i){n!==i&&(e.flags|=4)};var vC=!1,_C=!1,bC="function"==typeof WeakSet?WeakSet:Set,wC=null;function xC(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(i){GM(t,e,i)}else n.current=null}function SC(t,e,n){try{n()}catch(i){GM(t,e,i)}}var AC=!1;function kC(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,void 0!==r&&SC(e,n,r)}s=s.next}while(s!==i)}}function PC(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function EC(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"==typeof e?e(t):e.current=t}}function CC(t){var e=t.alternate;null!==e&&(t.alternate=null,CC(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(e=t.stateNode)&&(delete e[FA],delete e[BA],delete e[WA],delete e[jA],delete e[UA]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function MC(t){return 5===t.tag||3===t.tag||4===t.tag}function TC(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||MC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function LC(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=AA));else if(4!==i&&null!==(t=t.child))for(LC(t,e,n),t=t.sibling;null!==t;)LC(t,e,n),t=t.sibling}function RC(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(RC(t,e,n),t=t.sibling;null!==t;)RC(t,e,n),t=t.sibling}var IC=null,DC=!1;function OC(t,e,n){for(n=n.child;null!==n;)NC(t,e,n),n=n.sibling}function NC(t,e,n){if(Lw&&"function"==typeof Lw.onCommitFiberUnmount)try{Lw.onCommitFiberUnmount(Tw,n)}catch(a){}switch(n.tag){case 5:_C||xC(n,e);case 6:var i=IC,s=DC;IC=null,OC(t,e,n),DC=s,null!==(IC=i)&&(DC?(t=IC,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):IC.removeChild(n.stateNode));break;case 18:null!==IC&&(DC?(t=IC,n=n.stateNode,8===t.nodeType?IA(t.parentNode,n):1===t.nodeType&&IA(t,n),fx(t)):IA(IC,n.stateNode));break;case 4:i=IC,s=DC,IC=n.stateNode.containerInfo,DC=!0,OC(t,e,n),IC=i,DC=s;break;case 0:case 11:case 14:case 15:if(!_C&&null!==(i=n.updateQueue)&&null!==(i=i.lastEffect)){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,void 0!==o&&(2&r||4&r)&&SC(n,e,o),s=s.next}while(s!==i)}OC(t,e,n);break;case 1:if(!_C&&(xC(n,e),"function"==typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){GM(n,e,a)}OC(t,e,n);break;case 21:OC(t,e,n);break;case 22:1&n.mode?(_C=(i=_C)||null!==n.memoizedState,OC(t,e,n),_C=i):OC(t,e,n);break;default:OC(t,e,n)}}function FC(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new bC),e.forEach(function(e){var i=YM.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))})}}function BC(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;t:for(;null!==a;){switch(a.tag){case 5:IC=a.stateNode,DC=!1;break t;case 3:case 4:IC=a.stateNode.containerInfo,DC=!0;break t}a=a.return}if(null===IC)throw Error(L_(160));NC(r,o,s),IC=null,DC=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(h){GM(s,e,h)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)zC(e,t),e=e.sibling}function zC(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(BC(e,t),WC(t),4&i){try{kC(3,t,t.return),PC(3,t)}catch(m){GM(t,t.return,m)}try{kC(5,t,t.return)}catch(m){GM(t,t.return,m)}}break;case 1:BC(e,t),WC(t),512&i&&null!==n&&xC(n,n.return);break;case 5:if(BC(e,t),WC(t),512&i&&null!==n&&xC(n,n.return),32&t.flags){var s=t.stateNode;try{Bb(s,"")}catch(m){GM(t,t.return,m)}}if(4&i&&null!=(s=t.stateNode)){var r=t.memoizedProps,o=null!==n?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,null!==l)try{"input"===a&&"radio"===r.type&&null!=r.name&&Sb(s,r),Vb(a,o);var h=Vb(a,r);for(o=0;o<l.length;o+=2){var c=l[o],u=l[o+1];"style"===c?Ub(s,u):"dangerouslySetInnerHTML"===c?Fb(s,u):"children"===c?Bb(s,u):V_(s,c,u,h)}switch(a){case"input":Ab(s,r);break;case"textarea":Lb(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;null!=p?Cb(s,!!r.multiple,p,!1):d!==!!r.multiple&&(null!=r.defaultValue?Cb(s,!!r.multiple,r.defaultValue,!0):Cb(s,!!r.multiple,r.multiple?[]:"",!1))}s[BA]=r}catch(m){GM(t,t.return,m)}}break;case 6:if(BC(e,t),WC(t),4&i){if(null===t.stateNode)throw Error(L_(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(m){GM(t,t.return,m)}}break;case 3:if(BC(e,t),WC(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{fx(e.containerInfo)}catch(m){GM(t,t.return,m)}break;case 4:default:BC(e,t),WC(t);break;case 13:BC(e,t),WC(t),8192&(s=t.child).flags&&(r=null!==s.memoizedState,s.stateNode.isHidden=r,!r||null!==s.alternate&&null!==s.alternate.memoizedState||(cM=Sw())),4&i&&FC(t);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&t.mode?(_C=(h=_C)||c,BC(e,t),_C=h):BC(e,t),WC(t),8192&i){if(h=null!==t.memoizedState,(t.stateNode.isHidden=h)&&!c&&1&t.mode)for(wC=t,c=t.child;null!==c;){for(u=wC=c;null!==wC;){switch(p=(d=wC).child,d.tag){case 0:case 11:case 14:case 15:kC(4,d,d.return);break;case 1:xC(d,d.return);var f=d.stateNode;if("function"==typeof f.componentWillUnmount){i=d,n=d.return;try{e=i,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(m){GM(i,n,m)}}break;case 5:xC(d,d.return);break;case 22:if(null!==d.memoizedState){$C(u);continue}}null!==p?(p.return=d,wC=p):$C(u)}c=c.sibling}t:for(c=null,u=t;;){if(5===u.tag){if(null===c){c=u;try{s=u.stateNode,h?"function"==typeof(r=s.style).setProperty?r.setProperty("display","none","important"):r.display="none":(a=u.stateNode,o=null!=(l=u.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=jb("display",o))}catch(m){GM(t,t.return,m)}}}else if(6===u.tag){if(null===c)try{u.stateNode.nodeValue=h?"":u.memoizedProps}catch(m){GM(t,t.return,m)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===t)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===t)break t;for(;null===u.sibling;){if(null===u.return||u.return===t)break t;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:BC(e,t),WC(t),4&i&&FC(t);case 21:}}function WC(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(MC(n)){var i=n;break t}n=n.return}throw Error(L_(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(Bb(s,""),i.flags&=-33),RC(t,TC(t),s);break;case 3:case 4:var r=i.stateNode.containerInfo;LC(t,TC(t),r);break;default:throw Error(L_(161))}}catch(o){GM(t,t.return,o)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function jC(t,e,n){wC=t,UC(t)}function UC(t,e,n){for(var i=!!(1&t.mode);null!==wC;){var s=wC,r=s.child;if(22===s.tag&&i){var o=null!==s.memoizedState||vC;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||_C;a=vC;var h=_C;if(vC=o,(_C=l)&&!h)for(wC=s;null!==wC;)l=(o=wC).child,22===o.tag&&null!==o.memoizedState?VC(s):null!==l?(l.return=o,wC=l):VC(s);for(;null!==r;)wC=r,UC(r),r=r.sibling;wC=s,vC=a,_C=h}HC(t)}else 8772&s.subtreeFlags&&null!==r?(r.return=s,wC=r):HC(t)}}function HC(t){for(;null!==wC;){var e=wC;if(8772&e.flags){var n=e.alternate;try{if(8772&e.flags)switch(e.tag){case 0:case 11:case 15:_C||PC(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!_C)if(null===n)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:PE(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;null!==r&&fP(e,r,i);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}fP(e,o,n)}break;case 5:var a=e.stateNode;if(null===n&&4&e.flags){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var h=e.alternate;if(null!==h){var c=h.memoizedState;if(null!==c){var u=c.dehydrated;null!==u&&fx(u)}}}break;default:throw Error(L_(163))}_C||512&e.flags&&EC(e)}catch(d){GM(e,e.return,d)}}if(e===t){wC=null;break}if(null!==(n=e.sibling)){n.return=e.return,wC=n;break}wC=e.return}}function $C(t){for(;null!==wC;){var e=wC;if(e===t){wC=null;break}var n=e.sibling;if(null!==n){n.return=e.return,wC=n;break}wC=e.return}}function VC(t){for(;null!==wC;){var e=wC;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{PC(4,e)}catch(l){GM(e,n,l)}break;case 1:var i=e.stateNode;if("function"==typeof i.componentDidMount){var s=e.return;try{i.componentDidMount()}catch(l){GM(e,s,l)}}var r=e.return;try{EC(e)}catch(l){GM(e,r,l)}break;case 5:var o=e.return;try{EC(e)}catch(l){GM(e,o,l)}}}catch(l){GM(e,e.return,l)}if(e===t){wC=null;break}var a=e.sibling;if(null!==a){a.return=e.return,wC=a;break}wC=e.return}}var qC,GC=Math.ceil,ZC=q_.ReactCurrentDispatcher,KC=q_.ReactCurrentOwner,XC=q_.ReactCurrentBatchConfig,YC=0,QC=null,JC=null,tM=0,eM=0,nM=KA(0),iM=0,sM=null,rM=0,oM=0,aM=0,lM=null,hM=null,cM=0,uM=1/0,dM=null,pM=!1,fM=null,mM=null,gM=!1,yM=null,vM=0,_M=0,bM=null,wM=-1,xM=0;function SM(){return 6&YC?Sw():-1!==wM?wM:wM=Sw()}function AM(t){return 1&t.mode?2&YC&&0!==tM?tM&-tM:null!==Wk.transition?(0===xM&&(xM=jw()),xM):0!==(t=Vw)?t:t=void 0===(t=window.event)?16:xx(t.type):1}function kM(t,e,n,i){if(50<_M)throw _M=0,bM=null,Error(L_(185));Hw(t,n,i),2&YC&&t===QC||(t===QC&&(!(2&YC)&&(oM|=n),4===iM&&TM(t,tM)),PM(t,i),1===n&&0===YC&&!(1&e.mode)&&(uM=Sw()+500,ck&&pk()))}function PM(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-Rw(r),a=1<<o,l=s[o];-1===l?0!==(a&n)&&0===(a&i)||(s[o]=zw(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}(t,e);var i=Bw(t,t===QC?tM:0);if(0===i)null!==n&&bw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&bw(n),1===e)0===t.tag?function(t){ck=!0,dk(t)}(LM.bind(null,t)):dk(LM.bind(null,t)),LA(function(){!(6&YC)&&pk()}),n=null;else{switch(qw(i)){case 1:n=kw;break;case 4:n=Pw;break;case 16:default:n=Ew;break;case 536870912:n=Mw}n=QM(n,EM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function EM(t,e){if(wM=-1,xM=0,6&YC)throw Error(L_(327));var n=t.callbackNode;if(VM()&&t.callbackNode!==n)return null;var i=Bw(t,t===QC?tM:0);if(0===i)return null;if(30&i||0!==(i&t.expiredLanes)||e)e=zM(t,i);else{e=i;var s=YC;YC|=2;var r=FM();for(QC===t&&tM===e||(dM=null,uM=Sw()+500,OM(t,e));;)try{jM();break}catch(a){NM(t,a)}Yk(),ZC.current=r,YC=s,null!==JC?e=0:(QC=null,tM=0,e=iM)}if(0!==e){if(2===e&&0!==(s=Ww(t))&&(i=s,e=CM(t,s)),1===e)throw n=sM,OM(t,0),TM(t,i),PM(t,Sw()),n;if(6===e)TM(t,i);else{if(s=t.current.alternate,!(30&i||function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!RS(r(),s))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(s)||(e=zM(t,i),2===e&&(r=Ww(t),0!==r&&(i=r,e=CM(t,r))),1!==e)))throw n=sM,OM(t,0),TM(t,i),PM(t,Sw()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(L_(345));case 2:case 5:$M(t,hM,dM);break;case 3:if(TM(t,i),(130023424&i)===i&&10<(e=cM+500-Sw())){if(0!==Bw(t,0))break;if(((s=t.suspendedLanes)&i)!==i){SM(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=CA($M.bind(null,t,hM,dM),e);break}$M(t,hM,dM);break;case 4:if(TM(t,i),(4194240&i)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-Rw(i);r=1<<o,(o=e[o])>s&&(s=o),i&=~r}if(i=s,10<(i=(120>(i=Sw()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*GC(i/1960))-i)){t.timeoutHandle=CA($M.bind(null,t,hM,dM),i);break}$M(t,hM,dM);break;default:throw Error(L_(329))}}}return PM(t,Sw()),t.callbackNode===n?EM.bind(null,t):null}function CM(t,e){var n=lM;return t.current.memoizedState.isDehydrated&&(OM(t,e).flags|=256),2!==(t=zM(t,e))&&(e=hM,hM=n,null!==e&&MM(e)),t}function MM(t){null===hM?hM=t:hM.push.apply(hM,t)}function TM(t,e){for(e&=~aM,e&=~oM,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rw(e),i=1<<n;t[n]=-1,e&=~i}}function LM(t){if(6&YC)throw Error(L_(327));VM();var e=Bw(t,0);if(!(1&e))return PM(t,Sw()),null;var n=zM(t,e);if(0!==t.tag&&2===n){var i=Ww(t);0!==i&&(e=i,n=CM(t,i))}if(1===n)throw n=sM,OM(t,0),TM(t,e),PM(t,Sw()),n;if(6===n)throw Error(L_(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$M(t,hM,dM),PM(t,Sw()),null}function RM(t,e){var n=YC;YC|=1;try{return t(e)}finally{0===(YC=n)&&(uM=Sw()+500,ck&&pk())}}function IM(t){null!==yM&&0===yM.tag&&!(6&YC)&&VM();var e=YC;YC|=1;var n=XC.transition,i=Vw;try{if(XC.transition=null,Vw=1,t)return t()}finally{Vw=i,XC.transition=n,!(6&(YC=e))&&pk()}}function DM(){eM=nM.current,XA(nM)}function OM(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,MA(n)),null!==JC)for(n=JC.return;null!==n;){var i=n;switch(Pk(i),i.tag){case 1:null!=(i=i.type.childContextTypes)&&sk();break;case 3:wP(),XA(tk),XA(JA),EP();break;case 5:SP(i);break;case 4:wP();break;case 13:case 19:XA(AP);break;case 10:Qk(i.type._context);break;case 22:case 23:DM()}n=n.return}if(QC=t,JC=t=nT(t.current,null),tM=eM=e,iM=0,sM=null,aM=oM=rM=0,hM=lM=null,null!==nP){for(e=0;e<nP.length;e++)if(null!==(i=(n=nP[e]).interleaved)){n.interleaved=null;var s=i.next,r=n.pending;if(null!==r){var o=r.next;r.next=s,i.next=o}n.pending=i}nP=null}return t}function NM(t,e){for(;;){var n=JC;try{if(Yk(),CP.current=xE,DP){for(var i=LP.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}DP=!1}if(TP=0,IP=RP=LP=null,OP=!1,NP=0,KC.current=null,null===n||null===n.return){iM=1,sM=e,JC=null;break}t:{var r=t,o=n.return,a=n,l=e;if(e=tM,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var h=l,c=a,u=c.tag;if(!(1&c.mode||0!==u&&11!==u&&15!==u)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=zE(o);if(null!==p){p.flags&=-257,WE(p,o,a,0,e),1&p.mode&&BE(r,h,e),l=h;var f=(e=p).updateQueue;if(null===f){var m=new Set;m.add(l),e.updateQueue=m}else f.add(l);break t}if(!(1&e)){BE(r,h,e),BM();break t}l=Error(L_(426))}else if(Mk&&1&a.mode){var g=zE(o);if(null!==g){!(65536&g.flags)&&(g.flags|=256),WE(g,o,a,0,e),zk(IE(l,a));break t}}r=l=IE(l,a),4!==iM&&(iM=2),null===lM?lM=[r]:lM.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e,dP(r,NE(0,l,e));break t;case 1:a=l;var y=r.type,v=r.stateNode;if(!(128&r.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==mM&&mM.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e,dP(r,FE(r,a,e));break t}}r=r.return}while(null!==r)}HM(n)}catch(_){e=_,JC===n&&null!==n&&(JC=n=n.return);continue}break}}function FM(){var t=ZC.current;return ZC.current=xE,null===t?xE:t}function BM(){0!==iM&&3!==iM&&2!==iM||(iM=4),null===QC||!(268435455&rM)&&!(268435455&oM)||TM(QC,tM)}function zM(t,e){var n=YC;YC|=2;var i=FM();for(QC===t&&tM===e||(dM=null,OM(t,e));;)try{WM();break}catch(iG){NM(t,iG)}if(Yk(),YC=n,ZC.current=i,null!==JC)throw Error(L_(261));return QC=null,tM=0,iM}function WM(){for(;null!==JC;)UM(JC)}function jM(){for(;null!==JC&&!ww();)UM(JC)}function UM(t){var e=qC(t.alternate,t,eM);t.memoizedProps=t.pendingProps,null===e?HM(t):JC=e,KC.current=null}function HM(t){var e=t;do{var n=e.alternate;if(t=e.return,32768&e.flags){if(null!==(n=yC(n,e)))return n.flags&=32767,void(JC=n);if(null===t)return iM=6,void(JC=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}else if(null!==(n=gC(n,e,eM)))return void(JC=n);if(null!==(e=e.sibling))return void(JC=e);JC=e=t}while(null!==e);0===iM&&(iM=5)}function $M(t,e,n){var i=Vw,s=XC.transition;try{XC.transition=null,Vw=1,function(t,e,n,i){do{VM()}while(null!==yM);if(6&YC)throw Error(L_(327));n=t.finishedWork;var s=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L_(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Rw(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}(t,r),t===QC&&(JC=QC=null,tM=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||gM||(gM=!0,QM(Ew,function(){return VM(),null})),r=!!(15990&n.flags),15990&n.subtreeFlags||r){r=XC.transition,XC.transition=null;var o=Vw;Vw=1;var a=YC;YC|=4,KC.current=null,function(t,e){if(kA=gx,BS(t=FS())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch(b){n=null;break t}var o=0,a=-1,l=-1,h=0,c=0,u=t,d=null;e:for(;;){for(var p;u!==n||0!==s&&3!==u.nodeType||(a=o+s),u!==r||0!==i&&3!==u.nodeType||(l=o+i),3===u.nodeType&&(o+=u.nodeValue.length),null!==(p=u.firstChild);)d=u,u=p;for(;;){if(u===t)break e;if(d===n&&++h===s&&(a=o),d===r&&++c===i&&(l=o),null!==(p=u.nextSibling))break;d=(u=d).parentNode}u=p}n=-1===a||-1===l?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(PA={focusedElem:t,selectionRange:n},gx=!1,wC=e;null!==wC;)if(t=(e=wC).child,1028&e.subtreeFlags&&null!==t)t.return=e,wC=t;else for(;null!==wC;){e=wC;try{var f=e.alternate;if(1024&e.flags)switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:PE(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(L_(163))}}catch(b){GM(e,e.return,b)}if(null!==(t=e.sibling)){t.return=e.return,wC=t;break}wC=e.return}f=AC,AC=!1}(t,n),zC(n,t),zS(PA),gx=!!kA,PA=kA=null,t.current=n,jC(n),xw(),YC=a,Vw=o,XC.transition=r}else t.current=n;if(gM&&(gM=!1,yM=t,vM=s),0===(r=t.pendingLanes)&&(mM=null),function(t){if(Lw&&"function"==typeof Lw.onCommitFiberRoot)try{Lw.onCommitFiberRoot(Tw,t,void 0,!(128&~t.current.flags))}catch(e){}}(n.stateNode),PM(t,Sw()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)i((s=e[n]).value,{componentStack:s.stack,digest:s.digest});if(pM)throw pM=!1,t=fM,fM=null,t;!!(1&vM)&&0!==t.tag&&VM(),1&(r=t.pendingLanes)?t===bM?_M++:(_M=0,bM=t):_M=0,pk()}(t,e,n,i)}finally{XC.transition=s,Vw=i}return null}function VM(){if(null!==yM){var t=qw(vM),e=XC.transition,n=Vw;try{if(XC.transition=null,Vw=16>t?16:t,null===yM)var i=!1;else{if(t=yM,yM=null,vM=0,6&YC)throw Error(L_(331));var s=YC;for(YC|=4,wC=t.current;null!==wC;){var r=wC,o=r.child;if(16&wC.flags){var a=r.deletions;if(null!==a){for(var l=0;l<a.length;l++){var h=a[l];for(wC=h;null!==wC;){var c=wC;switch(c.tag){case 0:case 11:case 15:kC(8,c,r)}var u=c.child;if(null!==u)u.return=c,wC=u;else for(;null!==wC;){var d=(c=wC).sibling,p=c.return;if(CC(c),c===h){wC=null;break}if(null!==d){d.return=p,wC=d;break}wC=p}}}var f=r.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}wC=r}}if(2064&r.subtreeFlags&&null!==o)o.return=r,wC=o;else t:for(;null!==wC;){if(2048&(r=wC).flags)switch(r.tag){case 0:case 11:case 15:kC(9,r,r.return)}var y=r.sibling;if(null!==y){y.return=r.return,wC=y;break t}wC=r.return}}var v=t.current;for(wC=v;null!==wC;){var _=(o=wC).child;if(2064&o.subtreeFlags&&null!==_)_.return=o,wC=_;else t:for(o=v;null!==wC;){if(2048&(a=wC).flags)try{switch(a.tag){case 0:case 11:case 15:PC(9,a)}}catch(w){GM(a,a.return,w)}if(a===o){wC=null;break t}var b=a.sibling;if(null!==b){b.return=a.return,wC=b;break t}wC=a.return}}if(YC=s,pk(),Lw&&"function"==typeof Lw.onPostCommitFiberRoot)try{Lw.onPostCommitFiberRoot(Tw,t)}catch(w){}i=!0}return i}finally{Vw=n,XC.transition=e}}return!1}function qM(t,e,n){t=cP(t,e=NE(0,e=IE(n,e),1),1),e=SM(),null!==t&&(Hw(t,1,e),PM(t,e))}function GM(t,e,n){if(3===t.tag)qM(t,t,n);else for(;null!==e;){if(3===e.tag){qM(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===mM||!mM.has(i))){e=cP(e,t=FE(e,t=IE(n,t),1),1),t=SM(),null!==e&&(Hw(e,1,t),PM(e,t));break}}e=e.return}}function ZM(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=SM(),t.pingedLanes|=t.suspendedLanes&n,QC===t&&(tM&n)===n&&(4===iM||3===iM&&(130023424&tM)===tM&&500>Sw()-cM?OM(t,0):aM|=n),PM(t,e)}function KM(t,e){0===e&&(1&t.mode?(e=Nw,!(130023424&(Nw<<=1))&&(Nw=4194304)):e=1);var n=SM();null!==(t=rP(t,e))&&(Hw(t,e,n),PM(t,n))}function XM(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),KM(t,n)}function YM(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(L_(314))}null!==i&&i.delete(e),KM(t,n)}function QM(t,e){return _w(t,e)}function JM(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tT(t,e,n,i){return new JM(t,e,n,i)}function eT(t){return!(!(t=t.prototype)||!t.isReactComponent)}function nT(t,e){var n=t.alternate;return null===n?((n=tT(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function iT(t,e,n,i,s,r){var o=2;if(i=t,"function"==typeof t)eT(t)&&(o=1);else if("string"==typeof t)o=5;else t:switch(t){case K_:return sT(n.children,s,r,e);case X_:o=8,s|=8;break;case Y_:return(t=tT(12,n,e,2|s)).elementType=Y_,t.lanes=r,t;case eb:return(t=tT(13,n,e,s)).elementType=eb,t.lanes=r,t;case nb:return(t=tT(19,n,e,s)).elementType=nb,t.lanes=r,t;case rb:return rT(n,s,r,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case Q_:o=10;break t;case J_:o=9;break t;case tb:o=11;break t;case ib:o=14;break t;case sb:o=16,i=null;break t}throw Error(L_(130,null==t?t:typeof t,""))}return(e=tT(o,n,e,s)).elementType=t,e.type=i,e.lanes=r,e}function sT(t,e,n,i){return(t=tT(7,t,i,e)).lanes=n,t}function rT(t,e,n,i){return(t=tT(22,t,i,e)).elementType=rb,t.lanes=n,t.stateNode={isHidden:!1},t}function oT(t,e,n){return(t=tT(6,t,null,e)).lanes=n,t}function aT(t,e,n){return(e=tT(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lT(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uw(0),this.expirationTimes=Uw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uw(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hT(t,e,n,i,s,r,o,a,l){return t=new lT(t,e,n,a,l),1===e?(e=1,!0===r&&(e|=8)):e=0,r=tT(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},aP(r),t}function cT(t){if(!t)return QA;t:{if(fw(t=t._reactInternals)!==t||1!==t.tag)throw Error(L_(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(ik(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(L_(171))}if(1===t.tag){var n=t.type;if(ik(n))return ok(t,n,e)}return e}function uT(t,e,n,i,s,r,o,a,l){return(t=hT(n,i,!0,t,0,r,0,a,l)).context=cT(null),n=t.current,(r=hP(i=SM(),s=AM(n))).callback=null!=e?e:null,cP(n,r,s),t.current.lanes=s,Hw(t,s,i),PM(t,i),t}function dT(t,e,n,i){var s=e.current,r=SM(),o=AM(s);return n=cT(n),null===e.context?e.context=n:e.pendingContext=n,(e=hP(r,o)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=cP(s,e,o))&&(kM(t,s,o,r),uP(t,s,o)),o}function pT(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function fT(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function mT(t,e){fT(t,e),(t=t.alternate)&&fT(t,e)}qC=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||tk.current)UE=!0;else{if(0===(t.lanes&n)&&!(128&e.flags))return UE=!1,function(t,e,n){switch(e.tag){case 3:QE(e),Bk();break;case 5:xP(e);break;case 1:ik(e.type)&&ak(e);break;case 4:bP(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;YA(Gk,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(YA(AP,1&AP.current),e.flags|=128,null):0!==(n&e.child.childLanes)?oC(t,e,n):(YA(AP,1&AP.current),null!==(t=pC(t,e,n))?t.sibling:null);YA(AP,1&AP.current);break;case 19:if(i=0!==(n&e.childLanes),128&t.flags){if(i)return uC(t,e,n);e.flags|=128}if(null!==(s=e.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),YA(AP,AP.current),i)break;return null;case 22:case 23:return e.lanes=0,GE(t,e,n)}return pC(t,e,n)}(t,e,n);UE=!!(131072&t.flags)}else UE=!1,Mk&&1048576&e.flags&&Ak(e,yk,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;dC(t,e),t=e.pendingProps;var s=nk(e,JA.current);tP(e,n),s=WP(null,e,i,t,s,n);var r=jP();return e.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ik(i)?(r=!0,ak(e)):r=!1,e.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,aP(e),s.updater=CE,e.stateNode=s,s._reactInternals=e,RE(e,i,t,n),e=YE(null,e,i,!0,r,n)):(e.tag=0,Mk&&r&&kk(e),HE(null,e,s,n),e=e.child),e;case 16:i=e.elementType;t:{switch(dC(t,e),t=e.pendingProps,i=(s=i._init)(i._payload),e.type=i,s=e.tag=function(t){if("function"==typeof t)return eT(t)?1:0;if(null!=t){if((t=t.$$typeof)===tb)return 11;if(t===ib)return 14}return 2}(i),t=PE(i,t),s){case 0:e=KE(null,e,i,t,n);break t;case 1:e=XE(null,e,i,t,n);break t;case 11:e=$E(null,e,i,t,n);break t;case 14:e=VE(null,e,i,PE(i.type,t),n);break t}throw Error(L_(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,KE(t,e,i,s=e.elementType===i?s:PE(i,s),n);case 1:return i=e.type,s=e.pendingProps,XE(t,e,i,s=e.elementType===i?s:PE(i,s),n);case 3:t:{if(QE(e),null===t)throw Error(L_(387));i=e.pendingProps,s=(r=e.memoizedState).element,lP(t,e),pP(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated){if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,256&e.flags){e=JE(t,e,i,n,s=IE(Error(L_(423)),e));break t}if(i!==s){e=JE(t,e,i,n,s=IE(Error(L_(424)),e));break t}for(Ck=DA(e.stateNode.containerInfo.firstChild),Ek=e,Mk=!0,Tk=null,n=qk(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Bk(),i===s){e=pC(t,e,n);break t}HE(t,e,i,n)}e=e.child}return e;case 5:return xP(e),null===t&&Dk(e),i=e.type,s=e.pendingProps,r=null!==t?t.memoizedProps:null,o=s.children,EA(i,s)?o=null:null!==r&&EA(i,r)&&(e.flags|=32),ZE(t,e),HE(t,e,o,n),e.child;case 6:return null===t&&Dk(e),null;case 13:return oC(t,e,n);case 4:return bP(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=Vk(e,null,i,n):HE(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,$E(t,e,i,s=e.elementType===i?s:PE(i,s),n);case 7:return HE(t,e,e.pendingProps,n),e.child;case 8:case 12:return HE(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,YA(Gk,i._currentValue),i._currentValue=o,null!==r)if(RS(r.value,o)){if(r.children===s.children&&!tk.current){e=pC(t,e,n);break t}}else for(null!==(r=e.child)&&(r.return=e);null!==r;){var a=r.dependencies;if(null!==a){o=r.child;for(var l=a.firstContext;null!==l;){if(l.context===i){if(1===r.tag){(l=hP(-1,n&-n)).tag=2;var h=r.updateQueue;if(null!==h){var c=(h=h.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),h.pending=l}}r.lanes|=n,null!==(l=r.alternate)&&(l.lanes|=n),Jk(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(10===r.tag)o=r.type===e.type?null:r.child;else if(18===r.tag){if(null===(o=r.return))throw Error(L_(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Jk(o,n,e),o=r.sibling}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}HE(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,tP(e,n),i=i(s=eP(s)),e.flags|=1,HE(t,e,i,n),e.child;case 14:return s=PE(i=e.type,e.pendingProps),VE(t,e,i,s=PE(i.type,s),n);case 15:return qE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:PE(i,s),dC(t,e),e.tag=1,ik(i)?(t=!0,ak(e)):t=!1,tP(e,n),TE(e,i,s),RE(e,i,s,n),YE(null,e,i,!0,t,n);case 19:return uC(t,e,n);case 22:return GE(t,e,n)}throw Error(L_(156,e.tag))};var gT="function"==typeof reportError?reportError:function(t){};function yT(t){this._internalRoot=t}function vT(t){this._internalRoot=t}function _T(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function bT(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function wT(){}function xT(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if("function"==typeof s){var a=s;s=function(){var t=pT(o);a.call(t)}}dT(e,o,t,s)}else o=function(t,e,n,i,s){if(s){if("function"==typeof i){var r=i;i=function(){var t=pT(o);r.call(t)}}var o=uT(e,i,t,0,null,!1,0,"",wT);return t._reactRootContainer=o,t[zA]=o.current,pA(8===t.nodeType?t.parentNode:t),IM(),o}for(;s=t.lastChild;)t.removeChild(s);if("function"==typeof i){var a=i;i=function(){var t=pT(l);a.call(t)}}var l=hT(t,0,!1,null,0,!1,0,"",wT);return t._reactRootContainer=l,t[zA]=l.current,pA(8===t.nodeType?t.parentNode:t),IM(function(){dT(e,l,n,i)}),l}(n,e,t,s,i);return pT(o)}vT.prototype.render=yT.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(L_(409));dT(t,e,null,null)},vT.prototype.unmount=yT.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;IM(function(){dT(null,t,null,null)}),e[zA]=null}},vT.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rx.length&&0!==e&&e<rx[n].priority;n++);rx.splice(n,0,t),0===n&&hx(t)}},Gw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fw(e.pendingLanes);0!==n&&($w(e,1|n),PM(e,Sw()),!(6&YC)&&(uM=Sw()+500,pk()))}break;case 13:IM(function(){var e=rP(t,1);if(null!==e){var n=SM();kM(e,t,1,n)}}),mT(t,1)}},Zw=function(t){if(13===t.tag){var e=rP(t,134217728);null!==e&&kM(e,t,134217728,SM()),mT(t,134217728)}},Kw=function(t){if(13===t.tag){var e=AM(t),n=rP(t,e);null!==n&&kM(n,t,e,SM()),mT(t,e)}},Xw=function(){return Vw},Yw=function(t,e){var n=Vw;try{return Vw=t,e()}finally{Vw=n}},Zb=function(t,e,n){switch(e){case"input":if(Ab(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=qA(i);if(!s)throw Error(L_(90));_b(i),Ab(i,s)}}}break;case"textarea":Lb(t,n);break;case"select":null!=(e=n.value)&&Cb(t,!!n.multiple,e,!1)}},tw=RM,ew=IM;var ST={usingClientEntryPoint:!1,Events:[$A,VA,qA,Qb,Jb,RM]},AT={findFiberByHostInstance:HA,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kT={bundleType:AT.bundleType,version:AT.version,rendererPackageName:AT.rendererPackageName,rendererConfig:AT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=yw(t))?null:t.stateNode},findFiberByHostInstance:AT.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var PT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!PT.isDisabled&&PT.supportsFiber)try{Tw=PT.inject(kT),Lw=PT}catch(Nb){}}k_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ST,k_.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!_T(e))throw Error(L_(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Z_,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},k_.createRoot=function(t,e){if(!_T(t))throw Error(L_(299));var n=!1,i="",s=gT;return null!=e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(s=e.onRecoverableError)),e=hT(t,1,!1,null,0,n,0,i,s),t[zA]=e.current,pA(8===t.nodeType?t.parentNode:t),new yT(e)},k_.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(L_(188));throw t=Object.keys(t).join(","),Error(L_(268,t))}return null===(t=yw(e))?null:t.stateNode},k_.flushSync=function(t){return IM(t)},k_.hydrate=function(t,e,n){if(!bT(e))throw Error(L_(200));return xT(null,t,e,!0,n)},k_.hydrateRoot=function(t,e,n){if(!_T(t))throw Error(L_(405));var i=null!=n&&n.hydratedSources||null,s=!1,r="",o=gT;if(null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=uT(e,null,t,1,null!=n?n:null,s,0,r,o),t[zA]=e.current,pA(t),i)for(t=0;t<i.length;t++)s=(s=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new vT(e)},k_.render=function(t,e,n){if(!bT(e))throw Error(L_(200));return xT(null,t,e,!1,n)},k_.unmountComponentAtNode=function(t){if(!bT(t))throw Error(L_(40));return!!t._reactRootContainer&&(IM(function(){xT(null,null,t,!1,function(){t._reactRootContainer=null,t[zA]=null})}),!0)},k_.unstable_batchedUpdates=RM,k_.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!bT(n))throw Error(L_(200));if(null==t||void 0===t._reactInternals)throw Error(L_(38));return xT(t,e,n,!1,i)},k_.version="18.3.1-next-f1338f8080-20240426",function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){}}(),A_.exports=k_;var ET=A_.exports;const CT=Ku(ET);var MT,TT=ET;function LT(t,e){-1===t.indexOf(e)&&t.push(e)}function RT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}MT=TT.createRoot,TT.hydrateRoot;const IT=(t,e,n)=>n>e?e:n<t?t:n,DT={},OT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function NT(t){return"object"==typeof t&&null!==t}const FT=t=>/^0[^.\s]+$/u.test(t);function BT(t){let e;return()=>(void 0===e&&(e=t()),e)}const zT=t=>t,WT=(t,e)=>n=>e(t(n)),jT=(...t)=>t.reduce(WT),UT=(t,e,n)=>{const i=e-t;return 0===i?1:(n-t)/i};class HT{constructor(){this.subscriptions=[]}add(t){return LT(this.subscriptions,t),()=>RT(this.subscriptions,t)}notify(t,e,n){const i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](t,e,n);else for(let s=0;s<i;s++){const i=this.subscriptions[s];i&&i(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $T=t=>1e3*t,VT=t=>t/1e3;function qT(t,e){return e?t*(1e3/e):0}const GT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function ZT(t,e,n,i){if(t===e&&n===i)return zT;return s=>0===s||1===s?s:GT(function(t,e,n,i,s){let r,o,a=0;do{o=e+(n-e)/2,r=GT(o,i,s)-t,r>0?n=o:e=o}while(Math.abs(r)>1e-7&&++a<12);return o}(s,0,1,t,n),e,i)}const KT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,XT=t=>e=>1-t(1-e),YT=ZT(.33,1.53,.69,.99),QT=XT(YT),JT=KT(QT),tL=t=>(t*=2)<1?.5*QT(t):.5*(2-Math.pow(2,-10*(t-1))),eL=t=>1-Math.sin(Math.acos(t)),nL=XT(eL),iL=KT(eL),sL=ZT(.42,0,1,1),rL=ZT(0,0,.58,1),oL=ZT(.42,0,.58,1),aL=t=>Array.isArray(t)&&"number"==typeof t[0],lL={linear:zT,easeIn:sL,easeInOut:oL,easeOut:rL,circIn:eL,circInOut:iL,circOut:nL,backIn:QT,backInOut:JT,backOut:YT,anticipate:tL},hL=t=>{if(aL(t)){t.length;const[e,n,i,s]=t;return ZT(e,n,i,s)}return"string"==typeof t?lL[t]:t},cL=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function uL(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=cL.reduce((t,e)=>(t[e]=function(t){let e=new Set,n=new Set,i=!1,s=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(e){r.has(e)&&(l.schedule(e),t()),e(o)}const l={schedule:(t,s=!1,o=!1)=>{const a=o&&i?e:n;return s&&r.add(t),a.has(t)||a.add(t),t},cancel:t=>{n.delete(t),r.delete(t)},process:t=>{o=t,i?s=!0:(i=!0,[e,n]=[n,e],e.forEach(a),e.clear(),i=!1,s&&(s=!1,l.process(t)))}};return l}(r),t),{}),{setup:a,read:l,resolveKeyframes:h,preUpdate:c,update:u,preRender:d,render:p,postRender:f}=o,m=()=>{const r=DT.useManualTiming?s.timestamp:performance.now();n=!1,DT.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(r-s.timestamp,40),1)),s.timestamp=r,s.isProcessing=!0,a.process(s),l.process(s),h.process(s),c.process(s),u.process(s),d.process(s),p.process(s),f.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(m))};return{schedule:cL.reduce((e,r)=>{const a=o[r];return e[r]=(e,r=!1,o=!1)=>(n||(n=!0,i=!0,s.isProcessing||t(m)),a.schedule(e,r,o)),e},{}),cancel:t=>{for(let e=0;e<cL.length;e++)o[cL[e]].cancel(t)},state:s,steps:o}}const{schedule:dL,cancel:pL,state:fL,steps:mL}=uL("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:zT,!0);let gL;function yL(){gL=void 0}const vL={now:()=>(void 0===gL&&vL.set(fL.isProcessing||DT.useManualTiming?fL.timestamp:performance.now()),gL),set:t=>{gL=t,queueMicrotask(yL)}},_L=t=>e=>"string"==typeof e&&e.startsWith(t),bL=_L("--"),wL=_L("var(--"),xL=t=>!!wL(t)&&SL.test(t.split("/*")[0].trim()),SL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,AL={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},kL={...AL,transform:t=>IT(0,1,t)},PL={...AL,default:1},EL=t=>Math.round(1e5*t)/1e5,CL=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,ML=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,TL=(t,e)=>n=>Boolean("string"==typeof n&&ML.test(n)&&n.startsWith(t)||e&&!function(t){return null==t}(n)&&Object.prototype.hasOwnProperty.call(n,e)),LL=(t,e,n)=>i=>{if("string"!=typeof i)return i;const[s,r,o,a]=i.match(CL);return{[t]:parseFloat(s),[e]:parseFloat(r),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},RL={...AL,transform:t=>Math.round((t=>IT(0,255,t))(t))},IL={test:TL("rgb","red"),parse:LL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+RL.transform(t)+", "+RL.transform(e)+", "+RL.transform(n)+", "+EL(kL.transform(i))+")"},DL={test:TL("#"),parse:function(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}},transform:IL.transform},OL=t=>({test:e=>"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),NL=OL("deg"),FL=OL("%"),BL=OL("px"),zL=OL("vh"),WL=OL("vw"),jL=(()=>({...FL,parse:t=>FL.parse(t)/100,transform:t=>FL.transform(100*t)}))(),UL={test:TL("hsl","hue"),parse:LL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+FL.transform(EL(e))+", "+FL.transform(EL(n))+", "+EL(kL.transform(i))+")"},HL={test:t=>IL.test(t)||DL.test(t)||UL.test(t),parse:t=>IL.test(t)?IL.parse(t):UL.test(t)?UL.parse(t):DL.parse(t),transform:t=>"string"==typeof t?t:t.hasOwnProperty("red")?IL.transform(t):UL.transform(t),getAnimatableNone:t=>{const e=HL.parse(t);return e.alpha=0,HL.transform(e)}},$L=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,VL="number",qL="color",GL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ZL(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const o=e.replace(GL,t=>(HL.test(t)?(i.color.push(r),s.push(qL),n.push(HL.parse(t))):t.startsWith("var(")?(i.var.push(r),s.push("var"),n.push(t)):(i.number.push(r),s.push(VL),n.push(parseFloat(t))),++r,"${}")).split("${}");return{values:n,split:o,indexes:i,types:s}}function KL(t){return ZL(t).values}function XL(t){const{split:e,types:n}=ZL(t),i=e.length;return t=>{let s="";for(let r=0;r<i;r++)if(s+=e[r],void 0!==t[r]){const e=n[r];s+=e===VL?EL(t[r]):e===qL?HL.transform(t[r]):t[r]}return s}}const YL=t=>"number"==typeof t?0:HL.test(t)?HL.getAnimatableNone(t):t,QL={test:function(t){return isNaN(t)&&"string"==typeof t&&(t.match(CL)?.length||0)+(t.match($L)?.length||0)>0},parse:KL,createTransformer:XL,getAnimatableNone:function(t){const e=KL(t);return XL(t)(e.map(YL))}};function JL(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tR(t,e){return n=>n>0?e:t}const eR=(t,e,n)=>t+(e-t)*n,nR=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},iR=[DL,IL,UL];function sR(t){const e=(n=t,iR.find(t=>t.test(n)));var n;if(!Boolean(e))return!1;let i=e.parse(t);return e===UL&&(i=function({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,n/=100;let s=0,r=0,o=0;if(e/=100){const i=n<.5?n*(1+e):n+e-n*e,a=2*n-i;s=JL(a,i,t+1/3),r=JL(a,i,t),o=JL(a,i,t-1/3)}else s=r=o=n;return{red:Math.round(255*s),green:Math.round(255*r),blue:Math.round(255*o),alpha:i}}(i)),i}const rR=(t,e)=>{const n=sR(t),i=sR(e);if(!n||!i)return tR(t,e);const s={...n};return t=>(s.red=nR(n.red,i.red,t),s.green=nR(n.green,i.green,t),s.blue=nR(n.blue,i.blue,t),s.alpha=eR(n.alpha,i.alpha,t),IL.transform(s))},oR=new Set(["none","hidden"]);function aR(t,e){return n=>eR(t,e,n)}function lR(t){return"number"==typeof t?aR:"string"==typeof t?xL(t)?tR:HL.test(t)?rR:uR:Array.isArray(t)?hR:"object"==typeof t?HL.test(t)?rR:cR:tR}function hR(t,e){const n=[...t],i=n.length,s=t.map((t,n)=>lR(t)(t,e[n]));return t=>{for(let e=0;e<i;e++)n[e]=s[e](t);return n}}function cR(t,e){const n={...t,...e},i={};for(const s in n)void 0!==t[s]&&void 0!==e[s]&&(i[s]=lR(t[s])(t[s],e[s]));return t=>{for(const e in i)n[e]=i[e](t);return n}}const uR=(t,e)=>{const n=QL.createTransformer(e),i=ZL(t),s=ZL(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?oR.has(t)&&!s.values.length||oR.has(e)&&!i.values.length?function(t,e){return oR.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}(t,e):jT(hR(function(t,e){const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],o=t.indexes[r][i[r]],a=t.values[o]??0;n[s]=a,i[r]++}return n}(i,s),s.values),n):tR(t,e)};function dR(t,e,n){return"number"==typeof t&&"number"==typeof e&&"number"==typeof n?eR(t,e,n):lR(t)(t,e)}const pR=t=>{const e=({timestamp:e})=>t(e);return{start:(t=!0)=>dL.update(e,t),stop:()=>pL(e),now:()=>fL.isProcessing?fL.timestamp:vL.now()}},fR=(t,e,n=10)=>{let i="";const s=Math.max(Math.round(e/n),2);for(let r=0;r<s;r++)i+=Math.round(1e4*t(r/(s-1)))/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},mR=2e4;function gR(t){let e=0,n=t.next(e);for(;!n.done&&e<mR;)e+=50,n=t.next(e);return e>=mR?1/0:e}function yR(t,e,n){const i=Math.max(e-5,0);return qT(n-t(i),e-i)}const vR=.01,_R=2,bR=.005,wR=.5;const xR=12;function SR(t,e){return t*Math.sqrt(1-e*e)}const AR=["duration","bounce"],kR=["stiffness","damping","mass"];function PR(t,e){return e.some(e=>void 0!==t[e])}function ER(t=.3,e=.3){const n="object"!=typeof t?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:h,mass:c,duration:u,velocity:d,isResolvedFromDuration:p}=function(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!PR(t,kR)&&PR(t,AR))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(1.2*n),s=i*i,r=2*IT(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:1,stiffness:s,damping:r}}else{const n=function({duration:t=800,bounce:e=.3,velocity:n=0,mass:i=1}){let s,r,o=1-e;o=IT(.05,1,o),t=IT(.01,10,VT(t)),o<1?(s=e=>{const i=e*o,s=i*t;return.001-(i-n)/SR(e,o)*Math.exp(-s)},r=e=>{const i=e*o*t,r=i*n+n,a=Math.pow(o,2)*Math.pow(e,2)*t,l=Math.exp(-i),h=SR(Math.pow(e,2),o);return(.001-s(e)>0?-1:1)*((r-a)*l)/h}):(s=e=>Math.exp(-e*t)*((e-n)*t+1)-.001,r=e=>Math.exp(-e*t)*(t*t*(n-e)));const a=function(t,e,n){let i=n;for(let s=1;s<xR;s++)i-=t(i)/e(i);return i}(s,r,5/t);if(t=$T(t),isNaN(a))return{stiffness:100,damping:10,duration:t};{const e=Math.pow(a,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:t}}}(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}({...n,velocity:-VT(n.velocity||0)}),f=d||0,m=h/(2*Math.sqrt(l*c)),g=o-r,y=VT(Math.sqrt(l/c)),v=Math.abs(g)<5;let _;if(i||(i=v?vR:_R),s||(s=v?bR:wR),m<1){const t=SR(y,m);_=e=>{const n=Math.exp(-m*y*e);return o-n*((f+m*y*g)/t*Math.sin(t*e)+g*Math.cos(t*e))}}else if(1===m)_=t=>o-Math.exp(-y*t)*(g+(f+y*g)*t);else{const t=y*Math.sqrt(m*m-1);_=e=>{const n=Math.exp(-m*y*e),i=Math.min(t*e,300);return o-n*((f+m*y*g)*Math.sinh(i)+t*g*Math.cosh(i))/t}}const b={calculatedDuration:p&&u||null,next:t=>{const e=_(t);if(p)a.done=t>=u;else{let n=0===t?f:0;m<1&&(n=0===t?$T(f):yR(_,t,e));const r=Math.abs(n)<=i,l=Math.abs(o-e)<=s;a.done=r&&l}return a.value=a.done?o:e,a},toString:()=>{const t=Math.min(gR(b),mR),e=fR(e=>b.next(t*e).value,t,30);return t+"ms "+e},toTransition:()=>{}};return b}function CR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:h=.5,restSpeed:c}){const u=t[0],d={done:!1,value:u},p=t=>void 0===a?l:void 0===l||Math.abs(a-t)<Math.abs(l-t)?a:l;let f=n*e;const m=u+f,g=void 0===o?m:o(m);g!==m&&(f=g-u);const y=t=>-f*Math.exp(-t/i),v=t=>g+y(t),_=t=>{const e=y(t),n=v(t);d.done=Math.abs(e)<=h,d.value=d.done?g:n};let b,w;const x=t=>{var e;e=d.value,(void 0!==a&&e<a||void 0!==l&&e>l)&&(b=t,w=ER({keyframes:[d.value,p(d.value)],velocity:yR(v,t,d.value),damping:s,stiffness:r,restDelta:h,restSpeed:c}))};return x(0),{calculatedDuration:null,next:t=>{let e=!1;return w||void 0!==b||(e=!0,_(t),x(t)),void 0!==b&&t>=b?w.next(t-b):(!e&&_(t),d)}}}function MR(t,e,{clamp:n=!0,ease:i,mixer:s}={}){const r=t.length;if(e.length,1===r)return()=>e[0];if(2===r&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=function(t,e,n){const i=[],s=n||DT.mix||dR,r=t.length-1;for(let o=0;o<r;o++){let n=s(t[o],t[o+1]);if(e){const t=Array.isArray(e)?e[o]||zT:e;n=jT(t,n)}i.push(n)}return i}(e,i,s),l=a.length,h=n=>{if(o&&n<t[0])return e[0];let i=0;if(l>1)for(;i<t.length-2&&!(n<t[i+1]);i++);const s=UT(t[i],t[i+1],n);return a[i](s)};return n?e=>h(IT(t[0],t[r-1],e)):h}function TR({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=(t=>Array.isArray(t)&&"number"!=typeof t[0])(i)?i.map(hL):hL(i),r={done:!1,value:e[0]},o=function(t,e){return t.map(t=>t*e)}(n&&n.length===e.length?n:function(t){const e=[0];return function(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=UT(0,e,i);t.push(eR(n,1,s))}}(e,t.length-1),e}(e),t),a=MR(o,e,{ease:Array.isArray(s)?s:(l=e,h=s,l.map(()=>h||oL).splice(0,l.length-1))});var l,h;return{calculatedDuration:t,next:e=>(r.value=a(e),r.done=e>=t,r)}}ER.applyToOptions=t=>{const e=function(t,e=100){const n=ER({...t,keyframes:[0,e]}),i=Math.min(gR(n),mR);return{type:"keyframes",ease:t=>n.next(i*t).value/e,duration:VT(i)}}(t,100);return t.ease=e.ease,t.duration=$T(e.duration),t.type="keyframes",t};const LR=t=>null!==t;function RR(t,{repeat:e,repeatType:n="loop"},i,s=1){const r=t.filter(LR),o=s<0||e&&"loop"!==n&&e%2==1?0:r.length-1;return o&&void 0!==i?i:r[o]}const IR={decay:CR,inertia:CR,tween:TR,keyframes:TR,spring:ER};function DR(t){"string"==typeof t.type&&(t.type=IR[t.type])}class OR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const NR=t=>t/100;class FR extends OR{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==vL.now()&&this.tick(vL.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),!1===t.autoplay&&this.pause()}initAnimation(){const{options:t}=this;DR(t);const{type:e=TR,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:r=0}=t;let{keyframes:o}=t;const a=e||TR;a!==TR&&"number"!=typeof o[0]&&(this.mixKeyframes=jT(NR,dR(o[0],o[1])),o=[0,100]);const l=a({...t,keyframes:o});"mirror"===s&&(this.mirroredGenerator=a({...t,keyframes:[...o].reverse(),velocity:-r})),null===l.calculatedDuration&&(l.calculatedDuration=gR(l));const{calculatedDuration:h}=l;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=l}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:r,resolvedDuration:o,calculatedDuration:a}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:h,repeat:c,repeatType:u,repeatDelay:d,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=i);let v=this.currentTime,_=n;if(c){const t=Math.min(this.currentTime,i)/o;let e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,e=Math.min(e,c+1),Boolean(e%2)&&("reverse"===u?(n=1-n,d&&(n-=d/o)):"mirror"===u&&(_=r)),v=IT(0,1,n)*o}const b=y?{done:!1,value:h[0]}:_.next(v);s&&(b.value=s(b.value));let{done:w}=b;y||null===a||(w=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const x=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return x&&p!==CR&&(b.value=RR(h,this.options,m,this.speed)),f&&f(b.value),x&&this.finish(),b}then(t,e){return this.finished.then(t,e)}get duration(){return VT(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+VT(t)}get time(){return VT(this.currentTime)}set time(t){t=$T(t),this.currentTime=t,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(vL.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=VT(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=pR,startTime:e}=this.options;this.driver||(this.driver=t(t=>this.tick(t))),this.options.onPlay?.();const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vL.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}const BR=t=>180*t/Math.PI,zR=t=>{const e=BR(Math.atan2(t[1],t[0]));return jR(e)},WR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:zR,rotateZ:zR,skewX:t=>BR(Math.atan(t[1])),skewY:t=>BR(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},jR=t=>((t%=360)<0&&(t+=360),t),UR=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),HR=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),$R={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:UR,scaleY:HR,scale:t=>(UR(t)+HR(t))/2,rotateX:t=>jR(BR(Math.atan2(t[6],t[5]))),rotateY:t=>jR(BR(Math.atan2(-t[2],t[0]))),rotateZ:zR,rotate:zR,skewX:t=>BR(Math.atan(t[4])),skewY:t=>BR(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function VR(t){return t.includes("scale")?1:0}function qR(t,e){if(!t||"none"===t)return VR(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=$R,s=n;else{const e=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=WR,s=e}if(!s)return VR(e);const r=i[e],o=s[1].split(",").map(ZR);return"function"==typeof r?r(o):o[r]}const GR=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return qR(n,e)};function ZR(t){return parseFloat(t.trim())}const KR=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],XR=(()=>new Set(KR))(),YR=t=>t===AL||t===BL,QR=new Set(["x","y","z"]),JR=KR.filter(t=>!QR.has(t)),tI={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>qR(e,"x"),y:(t,{transform:e})=>qR(e,"y")};tI.translateX=tI.x,tI.translateY=tI.y;const eI=new Set;let nI=!1,iI=!1,sI=!1;function rI(){if(iI){const t=Array.from(eI).filter(t=>t.needsMeasurement),e=new Set(t.map(t=>t.element)),n=new Map;e.forEach(t=>{const e=function(t){const e=[];return JR.forEach(n=>{const i=t.getValue(n);void 0!==i&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}(t);e.length&&(n.set(t,e),t.render())}),t.forEach(t=>t.measureInitialState()),e.forEach(t=>{t.render();const e=n.get(t);e&&e.forEach(([e,n])=>{t.getValue(e)?.set(n)})}),t.forEach(t=>t.measureEndState()),t.forEach(t=>{void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)})}iI=!1,nI=!1,eI.forEach(t=>t.complete(sI)),eI.clear()}function oI(){eI.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(iI=!0)})}class aI{constructor(t,e,n,i,s,r=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=i,this.element=s,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(eI.add(this),nI||(nI=!0,dL.read(oI),dL.resolveKeyframes(rI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:i}=this;if(null===t[0]){const s=i?.get(),r=t[t.length-1];if(void 0!==s)t[0]=s;else if(n&&e){const i=n.readValue(e,r);null!=i&&(t[0]=i)}void 0===t[0]&&(t[0]=r),i&&void 0===s&&i.set(t[0])}!function(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),eI.delete(this)}cancel(){"scheduled"===this.state&&(eI.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const lI=BT(()=>void 0!==window.ScrollTimeline),hI={};function cI(t,e){const n=BT(t);return()=>hI[e]??n()}const uI=cI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(iG){return!1}return!0},"linearEasing"),dI=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,pI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dI([0,.65,.55,1]),circOut:dI([.55,0,1,.45]),backIn:dI([.31,.01,.66,-.59]),backOut:dI([.33,1.53,.69,.99])};function fI(t,e){return t?"function"==typeof t?uI()?fR(t,e):"ease-out":aL(t)?dI(t):Array.isArray(t)?t.map(t=>fI(t,e)||pI.easeOut):pI[t]:void 0}function mI(t,e,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a="easeOut",times:l}={},h=void 0){const c={[e]:n};l&&(c.offset=l);const u=fI(a,s);Array.isArray(u)&&(c.easing=u);const d={delay:i,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:"reverse"===o?"alternate":"normal"};return h&&(d.pseudoElement=h),t.animate(c,d)}function gI(t){return"function"==typeof t&&"applyToOptions"in t}class yI extends OR{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:i,pseudoElement:s,allowFlatten:r=!1,finalKeyframe:o,onComplete:a}=t;this.isPseudoElement=Boolean(s),this.allowFlatten=r,this.options=t,t.type;const l=function({type:t,...e}){return gI(t)&&uI()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}(t);this.animation=mI(e,n,i,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const t=RR(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(t):function(t,e,n){(t=>t.startsWith("--"))(e)?t.style.setProperty(e,n):t.style[e]=n}(e,n,t),this.animation.cancel()}a?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(iG){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;"idle"!==t&&"finished"!==t&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return VT(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+VT(t)}get time(){return VT(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=$T(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&lI()?(this.animation.timeline=t,zT):e(this)}}const vI={anticipate:tL,backInOut:JT,circInOut:iL};class _I extends yI{constructor(t){var e;"string"==typeof(e=t).ease&&e.ease in vI&&(e.ease=vI[e.ease]),DR(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:i,element:s,...r}=this.options;if(!e)return;if(void 0!==t)return void e.set(t);const o=new FR({...r,autoplay:!1}),a=$T(this.finishedTime??this.time);e.setWithVelocity(o.sample(a-10).value,o.sample(a).value,10),o.stop()}}const bI=(t,e)=>!("zIndex"===e||"number"!=typeof t&&!Array.isArray(t)&&("string"!=typeof t||!QL.test(t)&&"0"!==t||t.startsWith("url(")));function wI(t){t.duration=0,t.type="keyframes"}const xI=new Set(["opacity","clipPath","filter","transform"]),SI=BT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class AI extends OR{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r="loop",keyframes:o,name:a,motionValue:l,element:h,...c}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=vL.now();const u={autoplay:t,delay:e,type:n,repeat:i,repeatDelay:s,repeatType:r,name:a,motionValue:l,element:h,...c},d=h?.KeyframeResolver||aI;this.keyframeResolver=new d(o,(t,e,n)=>this.onKeyframesResolved(t,e,u,!n),a,l,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,i){this.keyframeResolver=void 0;const{name:s,type:r,velocity:o,delay:a,isHandoff:l,onUpdate:h}=n;this.resolvedAt=vL.now(),function(t,e,n,i){const s=t[0];if(null===s)return!1;if("display"===e||"visibility"===e)return!0;const r=t[t.length-1],o=bI(s,e),a=bI(r,e);return!(!o||!a)&&(function(t){const e=t[0];if(1===t.length)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}(t)||("spring"===n||gI(n))&&i)}(t,s,r,o)||(!DT.instantAnimations&&a||h?.(RR(t,n,e)),t[0]=t[t.length-1],wI(n),n.repeat=0);const c={startTime:i?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},u=!l&&function(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:s,damping:r,type:o}=t,a=e?.owner?.current;if(!(a instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:h}=e.owner.getProps();return SI()&&n&&xI.has(n)&&("transform"!==n||!h)&&!l&&!i&&"mirror"!==s&&0!==r&&"inertia"!==o}(c)?new _I({...c,element:c.motionValue.owner.current}):new FR(c);u.finished.then(()=>this.notifyFinished()).catch(zT),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),sI=!0,oI(),rI(),sI=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const kI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PI(t,e,n=1){const[i,s]=function(t){const e=kI.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n??i}`,s]}(t);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const t=r.trim();return OT(t)?parseFloat(t):t}return xL(s)?PI(s,e,n+1):s}function EI(t,e){return t?.[e]??t?.default??t}const CI=new Set(["width","height","top","left","right","bottom",...KR]),MI=t=>e=>e.test(t),TI=[AL,BL,FL,NL,WL,zL,{test:t=>"auto"===t,parse:t=>t}],LI=t=>TI.find(MI(t));function RI(t){return"number"==typeof t?0===t:null===t||"none"===t||"0"===t||FT(t)}const II=new Set(["brightness","contrast","saturate","opacity"]);function DI(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[i]=n.match(CL)||[];if(!i)return t;const s=n.replace(i,"");let r=II.has(e)?1:0;return i!==n&&(r*=100),e+"("+r+s+")"}const OI=/\b([a-z-]*)\(.*?\)/gu,NI={...QL,getAnimatableNone:t=>{const e=t.match(OI);return e?e.map(DI).join(" "):t}},FI={...AL,transform:Math.round},BI={borderWidth:BL,borderTopWidth:BL,borderRightWidth:BL,borderBottomWidth:BL,borderLeftWidth:BL,borderRadius:BL,radius:BL,borderTopLeftRadius:BL,borderTopRightRadius:BL,borderBottomRightRadius:BL,borderBottomLeftRadius:BL,width:BL,maxWidth:BL,height:BL,maxHeight:BL,top:BL,right:BL,bottom:BL,left:BL,padding:BL,paddingTop:BL,paddingRight:BL,paddingBottom:BL,paddingLeft:BL,margin:BL,marginTop:BL,marginRight:BL,marginBottom:BL,marginLeft:BL,backgroundPositionX:BL,backgroundPositionY:BL,rotate:NL,rotateX:NL,rotateY:NL,rotateZ:NL,scale:PL,scaleX:PL,scaleY:PL,scaleZ:PL,skew:NL,skewX:NL,skewY:NL,distance:BL,translateX:BL,translateY:BL,translateZ:BL,x:BL,y:BL,z:BL,perspective:BL,transformPerspective:BL,opacity:kL,originX:jL,originY:jL,originZ:BL,zIndex:FI,fillOpacity:kL,strokeOpacity:kL,numOctaves:FI},zI={...BI,color:HL,backgroundColor:HL,outlineColor:HL,fill:HL,stroke:HL,borderColor:HL,borderTopColor:HL,borderRightColor:HL,borderBottomColor:HL,borderLeftColor:HL,filter:NI,WebkitFilter:NI},WI=t=>zI[t];function jI(t,e){let n=WI(t);return n!==NI&&(n=QL),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const UI=new Set(["auto","none","0"]);class HI extends aI{constructor(t,e,n,i,s){super(t,e,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let n=t[a];if("string"==typeof n&&(n=n.trim(),xL(n))){const i=PI(n,e.current);void 0!==i&&(t[a]=i),a===t.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!CI.has(n)||2!==t.length)return;const[i,s]=t,r=LI(i),o=LI(s);if(r!==o)if(YR(r)&&YR(o))for(let a=0;a<t.length;a++){const e=t[a];"string"==typeof e&&(t[a]=parseFloat(e))}else tI[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let i=0;i<t.length;i++)(null===t[i]||RI(t[i]))&&n.push(i);n.length&&function(t,e,n){let i,s=0;for(;s<t.length&&!i;){const e=t[s];"string"==typeof e&&!UI.has(e)&&ZL(e).values.length&&(i=t[s]),s++}if(i&&n)for(const r of e)t[r]=jI(n,i)}(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=tI[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];void 0!==i&&t.getValue(n,i).jump(i,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,r=n[s];n[s]=tI[e](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==r&&void 0===this.finalKeyframe&&(this.finalKeyframe=r),this.removedTransforms?.length&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}const $I=(t,e)=>e&&"number"==typeof t?e.transform(t):t;function VI(t){return NT(t)&&"offsetHeight"in t}const qI={current:void 0};class GI{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=t=>{const e=vL.now();if(this.updatedAt!==e&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(t),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){var e;this.current=t,this.updatedAt=vL.now(),null===this.canTrackVelocity&&void 0!==t&&(this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e))))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new HT);const n=this.events[t].add(e);return"change"===t?()=>{n(),dL.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return qI.current&&qI.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=vL.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,30);return qT(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ZI(t,e){return new GI(t,e)}const{schedule:KI}=uL(queueMicrotask,!1),XI={x:!1,y:!1};function YI(){return XI.x||XI.y}function QI(t){return"x"===t||"y"===t?XI[t]?null:(XI[t]=!0,()=>{XI[t]=!1}):XI.x||XI.y?null:(XI.x=XI.y=!0,()=>{XI.x=XI.y=!1})}function JI(t,e){const n=function(t){if(t instanceof EventTarget)return[t];if("string"==typeof t){const e=document.querySelectorAll(t);return e?Array.from(e):[]}return Array.from(t)}(t),i=new AbortController;return[n,{passive:!0,...e,signal:i.signal},()=>i.abort()]}function tD(t){return!("touch"===t.pointerType||YI())}function eD(t,e,n={}){const[i,s,r]=JI(t,n),o=t=>{if(!tD(t))return;const{target:n}=t,i=e(n,t);if("function"!=typeof i||!n)return;const r=t=>{tD(t)&&(i(t),n.removeEventListener("pointerleave",r))};n.addEventListener("pointerleave",r,s)};return i.forEach(t=>{t.addEventListener("pointerenter",o,s)}),r}const nD=(t,e)=>!!e&&(t===e||nD(t,e.parentElement)),iD=t=>"mouse"===t.pointerType?"number"!=typeof t.button||t.button<=0:!1!==t.isPrimary,sD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),rD=new WeakSet;function oD(t){return e=>{"Enter"===e.key&&t(e)}}function aD(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}function lD(t){return iD(t)&&!YI()}function hD(t,e,n={}){const[i,s,r]=JI(t,n),o=t=>{const i=t.currentTarget;if(!lD(t))return;rD.add(i);const r=e(i,t),o=(t,e)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),rD.has(i)&&rD.delete(i),lD(t)&&"function"==typeof r&&r(t,{success:e})},a=t=>{o(t,i===window||i===document||n.useGlobalTarget||nD(i,t.target))},l=t=>{o(t,!1)};window.addEventListener("pointerup",a,s),window.addEventListener("pointercancel",l,s)};return i.forEach(t=>{var e;(n.useGlobalTarget?window:t).addEventListener("pointerdown",o,s),VI(t)&&(t.addEventListener("focus",t=>((t,e)=>{const n=t.currentTarget;if(!n)return;const i=oD(()=>{if(rD.has(n))return;aD(n,"down");const t=oD(()=>{aD(n,"up")});n.addEventListener("keyup",t,e),n.addEventListener("blur",()=>aD(n,"cancel"),e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)})(t,s)),e=t,sD.has(e.tagName)||-1!==e.tabIndex||t.hasAttribute("tabindex")||(t.tabIndex=0))}),r}function cD(t){return NT(t)&&"ownerSVGElement"in t}function uD(t){return cD(t)&&"svg"===t.tagName}function dD(...t){const e=!Array.isArray(t[0]),n=e?0:-1,i=t[0+n],s=MR(t[1+n],t[2+n],t[3+n]);return e?s(i):s}const pD=t=>Boolean(t&&t.getVelocity),fD=[...TI,HL,QL],mD=t=>fD.find(MI(t));var gD=RD(),yD=t=>CD(t,gD),vD=RD();yD.write=t=>CD(t,vD);var _D=RD();yD.onStart=t=>CD(t,_D);var bD=RD();yD.onFrame=t=>CD(t,bD);var wD=RD();yD.onFinish=t=>CD(t,wD);var xD=[];yD.setTimeout=(t,e)=>{const n=yD.now()+e,i=()=>{const t=xD.findIndex(t=>t.cancel==i);~t&&xD.splice(t,1),PD-=~t?1:0},s={time:n,handler:t,cancel:i};return xD.splice(SD(n),0,s),PD+=1,MD(),s};var SD=t=>~(~xD.findIndex(e=>e.time>t)||~xD.length);yD.cancel=t=>{_D.delete(t),bD.delete(t),wD.delete(t),gD.delete(t),vD.delete(t)},yD.sync=t=>{ED=!0,yD.batchedUpdates(t),ED=!1},yD.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...t){e=t,yD.onStart(n)}return i.handler=t,i.cancel=()=>{_D.delete(n),e=null},i};var AD="undefined"!=typeof window?window.requestAnimationFrame:()=>{};yD.use=t=>AD=t,yD.now="undefined"!=typeof performance?()=>performance.now():Date.now,yD.batchedUpdates=t=>t(),yD.catch=console.error,yD.frameLoop="always",yD.advance=()=>{"demand"!==yD.frameLoop||LD()};var kD=-1,PD=0,ED=!1;function CD(t,e){ED?(e.delete(t),t(0)):(e.add(t),MD())}function MD(){kD<0&&(kD=0,"demand"!==yD.frameLoop&&AD(TD))}function TD(){~kD&&(AD(TD),yD.batchedUpdates(LD))}function LD(){const t=kD;kD=yD.now();const e=SD(kD);e&&(ID(xD.splice(0,e),t=>t.handler()),PD-=e),PD?(_D.flush(),gD.flush(t?Math.min(64,kD-t):16.667),bD.flush(),vD.flush(),wD.flush()):kD=-1}function RD(){let t=new Set,e=t;return{add(n){PD+=e!=t||t.has(n)?0:1,t.add(n)},delete:n=>(PD-=e==t&&t.has(n)?1:0,t.delete(n)),flush(n){e.size&&(t=new Set,PD-=e.size,ID(e,e=>e(n)&&t.add(e)),PD+=t.size,e=t)}}}function ID(t,e){t.forEach(t=>{try{e(t)}catch(iG){yD.catch(iG)}})}var DD=Object.defineProperty,OD={};function ND(){}((t,e)=>{for(var n in e)DD(t,n,{get:e[n],enumerable:!0})})(OD,{assign:()=>XD,colors:()=>GD,createStringInterpolator:()=>HD,skipAnimation:()=>ZD,to:()=>$D,willAdvance:()=>KD});var FD={arr:Array.isArray,obj:t=>!!t&&"Object"===t.constructor.name,fun:t=>"function"==typeof t,str:t=>"string"==typeof t,num:t=>"number"==typeof t,und:t=>void 0===t};function BD(t,e){if(FD.arr(t)){if(!FD.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var zD=(t,e)=>t.forEach(e);function WD(t,e,n){if(FD.arr(t))for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);else for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var jD=t=>FD.und(t)?[]:FD.arr(t)?t:[t];function UD(t,e){if(t.size){const n=Array.from(t);t.clear(),zD(n,e)}}var HD,$D,VD=(t,...e)=>UD(t,t=>t(...e)),qD=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),GD=null,ZD=!1,KD=ND,XD=t=>{t.to&&($D=t.to),t.now&&(yD.now=t.now),void 0!==t.colors&&(GD=t.colors),null!=t.skipAnimation&&(ZD=t.skipAnimation),t.createStringInterpolator&&(HD=t.createStringInterpolator),t.requestAnimationFrame&&yD.use(t.requestAnimationFrame),t.batchedUpdates&&(yD.batchedUpdates=t.batchedUpdates),t.willAdvance&&(KD=t.willAdvance),t.frameLoop&&(yD.frameLoop=t.frameLoop)},YD=new Set,QD=[],JD=[],tO=0,eO={get idle(){return!YD.size&&!QD.length},start(t){tO>t.priority?(YD.add(t),yD.onStart(nO)):(iO(t),yD(rO))},advance:rO,sort(t){if(tO)yD.onFrame(()=>eO.sort(t));else{const e=QD.indexOf(t);~e&&(QD.splice(e,1),sO(t))}},clear(){QD=[],YD.clear()}};function nO(){YD.forEach(iO),YD.clear(),yD(rO)}function iO(t){QD.includes(t)||sO(t)}function sO(t){QD.splice(function(e){const n=e.findIndex(e=>e.priority>t.priority);return n<0?e.length:n}(QD),0,t)}function rO(t){const e=JD;for(let n=0;n<QD.length;n++){const i=QD[n];tO=i.priority,i.idle||(KD(i),i.advance(t),i.idle||e.push(i))}return tO=0,(JD=QD).length=0,(QD=e).length>0}var oO="[-+]?\\d*\\.?\\d+",aO=oO+"%";function lO(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var hO=new RegExp("rgb"+lO(oO,oO,oO)),cO=new RegExp("rgba"+lO(oO,oO,oO,oO)),uO=new RegExp("hsl"+lO(oO,aO,aO)),dO=new RegExp("hsla"+lO(oO,aO,aO,oO)),pO=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,fO=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mO=/^#([0-9a-fA-F]{6})$/,gO=/^#([0-9a-fA-F]{8})$/;function yO(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function vO(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i,r=yO(s,i,t+1/3),o=yO(s,i,t),a=yO(s,i,t-1/3);return Math.round(255*r)<<24|Math.round(255*o)<<16|Math.round(255*a)<<8}function _O(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function bO(t){return(parseFloat(t)%360+360)%360/360}function wO(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(255*e)}function xO(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function SO(t){let e=function(t){let e;return"number"==typeof t?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=mO.exec(t))?parseInt(e[1]+"ff",16)>>>0:GD&&void 0!==GD[t]?GD[t]:(e=hO.exec(t))?(_O(e[1])<<24|_O(e[2])<<16|_O(e[3])<<8|255)>>>0:(e=cO.exec(t))?(_O(e[1])<<24|_O(e[2])<<16|_O(e[3])<<8|wO(e[4]))>>>0:(e=pO.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=gO.exec(t))?parseInt(e[1],16)>>>0:(e=fO.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=uO.exec(t))?(255|vO(bO(e[1]),xO(e[2]),xO(e[3])))>>>0:(e=dO.exec(t))?(vO(bO(e[1]),xO(e[2]),xO(e[3]))|wO(e[4]))>>>0:null}(t);return null===e?t:(e=e||0,`rgba(${(4278190080&e)>>>24}, ${(16711680&e)>>>16}, ${(65280&e)>>>8}, ${(255&e)/255})`)}var AO=(t,e,n)=>{if(FD.fun(t))return t;if(FD.arr(t))return AO({range:t,output:e,extrapolate:n});if(FD.str(t.output[0]))return HD(t);const i=t,s=i.output,r=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(t=>t);return t=>{const e=function(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}(t,r);return function(t,e,n,i,s,r,o,a,l){let h=l?l(t):t;if(h<e){if("identity"===o)return h;"clamp"===o&&(h=e)}if(h>n){if("identity"===a)return h;"clamp"===a&&(h=n)}return i===s?i:e===n?t<=e?i:s:(e===-1/0?h=-h:n===1/0?h-=e:h=(h-e)/(n-e),h=r(h),i===-1/0?h=-h:s===1/0?h+=i:h=h*(s-i)+i,h)}(t,r[e],r[e+1],s[e],s[e+1],l,o,a,i.map)}},kO=Symbol.for("FluidValue.get"),PO=Symbol.for("FluidValue.observers"),EO=t=>Boolean(t&&t[kO]),CO=t=>t&&t[kO]?t[kO]():t,MO=t=>t[PO]||null;function TO(t,e){const n=t[PO];n&&n.forEach(t=>{!function(t,e){t.eventObserved?t.eventObserved(e):t(e)}(t,e)})}var LO=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");RO(this,t)}},RO=(t,e)=>NO(t,kO,e);function IO(t,e){if(t[kO]){let n=t[PO];n||NO(t,PO,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function DO(t,e){const n=t[PO];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[PO]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var OO,NO=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),FO=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,BO=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,zO=new RegExp(`(${FO.source})(%|[a-z]+)`,"i"),WO=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,jO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,UO=t=>{const[e,n]=HO(t);if(!e||qD())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){return window.getComputedStyle(document.documentElement).getPropertyValue(n)||t}return n&&jO.test(n)?UO(n):n||t},HO=t=>{const e=jO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},$O=(t,e,n,i,s)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${s})`,VO=t=>{OO||(OO=GD?new RegExp(`(${Object.keys(GD).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(t=>CO(t).replace(jO,UO).replace(BO,SO).replace(OO,SO)),n=e.map(t=>t.match(FO).map(Number)),i=n[0].map((t,e)=>n.map(t=>{if(!(e in t))throw Error('The arity of each "output" value must be equal');return t[e]})).map(e=>AO({...t,output:e}));return t=>{const n=!zO.test(e[0])&&e.find(t=>zO.test(t))?.replace(FO,"");let s=0;return e[0].replace(FO,()=>`${i[s++](t)}${n||""}`).replace(WO,$O)}},qO="react-spring: ",GO=t=>{const e=t;let n=!1;if("function"!=typeof e)throw new TypeError(`${qO}once requires a function parameter`);return(...t)=>{n||(e(...t),n=!0)}},ZO=GO(console.warn),KO=GO(console.warn);function XO(t){return FD.str(t)&&("#"==t[0]||/\d/.test(t)||!qD()&&jO.test(t)||t in(GD||{}))}var YO=qD()?Od.useEffect:Od.useLayoutEffect;function QO(){const t=Od.useState()[1],e=(()=>{const t=Od.useRef(!1);return YO(()=>(t.current=!0,()=>{t.current=!1}),[]),t})();return()=>{e.current&&t(Math.random())}}var JO=t=>Od.useEffect(t,tN),tN=[];function eN(t){const e=Od.useRef();return Od.useEffect(()=>{e.current=t}),e.current}var nN=Symbol.for("Animated:node"),iN=t=>t&&t[nN],sN=(t,e)=>{return n=t,i=nN,s=e,Object.defineProperty(n,i,{value:s,writable:!0,configurable:!0});var n,i,s},rN=t=>t&&t[nN]&&t[nN].getPayload(),oN=class{constructor(){sN(this,this)}getPayload(){return this.payload||[]}},aN=class extends oN{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,FD.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new aN(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return FD.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value!==t&&(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,FD.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},lN=class extends aN{constructor(t){super(0),this._string=null,this._toString=AO({output:[t,t]})}static create(t){return new lN(t)}getValue(){const t=this._string;return null==t?this._string=this._toString(this._value):t}setValue(t){if(FD.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else{if(!super.setValue(t))return!1;this._string=null}return!0}reset(t){t&&(this._toString=AO({output:[this.getValue(),t]})),this._value=0,super.reset()}},hN={dependencies:null},cN=class extends oN{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return WD(this.source,(n,i)=>{var s;(s=n)&&s[nN]===s?e[i]=n.getValue(t):EO(n)?e[i]=CO(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&zD(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return WD(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){hN.dependencies&&EO(t)&&hN.dependencies.add(t);const e=rN(t);e&&zD(e,t=>this.add(t))}},uN=class extends cN{constructor(t){super(t)}static create(t){return new uN(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((e,n)=>e.setValue(t[n])).some(Boolean):(super.setValue(t.map(dN)),!0)}};function dN(t){return(XO(t)?lN:aN).create(t)}function pN(t){const e=iN(t);return e?e.constructor:FD.arr(t)?uN:XO(t)?lN:aN}var fN=(t,e)=>{const n=!FD.fun(t)||t.prototype&&t.prototype.isReactComponent;return Od.forwardRef((i,s)=>{const r=Od.useRef(null),o=n&&Od.useCallback(t=>{r.current=function(t,e){return t&&(FD.fun(t)?t(e):t.current=e),e}(s,t)},[s]),[a,l]=function(t,e){const n=new Set;return hN.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new cN(t),hN.dependencies=null,[t,n]}(i,e),h=QO(),c=()=>{const t=r.current;n&&!t||!1===(!!t&&e.applyAnimatedValues(t,a.getValue(!0)))&&h()},u=new mN(c,l),d=Od.useRef();YO(()=>(d.current=u,zD(l,t=>IO(t,u)),()=>{d.current&&(zD(d.current.deps,t=>DO(t,d.current)),yD.cancel(d.current.update))})),Od.useEffect(c,[]),JO(()=>()=>{const t=d.current;zD(t.deps,e=>DO(e,t))});const p=e.getComponentProps(a.getValue());return Od.createElement(t,{...p,ref:o})})},mN=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){"change"==t.type&&yD.write(this.update)}},gN=Symbol.for("AnimatedComponent"),yN=t=>FD.str(t)?t:t&&FD.str(t.displayName)?t.displayName:FD.fun(t)&&t.name||null;function vN(t,...e){return FD.fun(t)?t(...e):t}var _N=(t,e)=>!0===t||!!(e&&t&&(FD.fun(t)?t(e):jD(t).includes(e))),bN=(t,e)=>FD.obj(t)?e&&t[e]:t,wN=(t,e)=>!0===t.default?t[e]:t.default?t.default[e]:void 0,xN=t=>t,SN=(t,e=xN)=>{let n=AN;t.default&&!0!==t.default&&(t=t.default,n=Object.keys(t));const i={};for(const s of n){const n=e(t[s],s);FD.und(n)||(i[s]=n)}return i},AN=["config","onProps","onStart","onChange","onPause","onResume","onRest"],kN={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function PN(t){const e=function(t){const e={};let n=0;if(WD(t,(t,i)=>{kN[i]||(e[i]=t,n++)}),n)return e}(t);if(e){const n={to:e};return WD(t,(t,i)=>i in e||(n[i]=t)),n}return{...t}}function EN(t){return t=CO(t),FD.arr(t)?t.map(EN):XO(t)?OD.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function CN(t){return FD.fun(t)||FD.arr(t)&&FD.obj(t[0])}var MN={tension:170,friction:26,mass:1,damping:1,easing:t=>t,clamp:!1},TN=class{constructor(){this.velocity=0,Object.assign(this,MN)}};function LN(t,e){if(FD.und(e.decay)){const n=!FD.und(e.tension)||!FD.und(e.friction);!n&&FD.und(e.frequency)&&FD.und(e.damping)&&FD.und(e.mass)||(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}else t.duration=void 0}var RN=[],IN=class{constructor(){this.changed=!1,this.values=RN,this.toValues=null,this.fromValues=RN,this.config=new TN,this.immediate=!1}};function DN(t,{key:e,props:n,defaultProps:i,state:s,actions:r}){return new Promise((o,a)=>{let l,h,c=_N(n.cancel??i?.cancel,e);if(c)p();else{FD.und(n.pause)||(s.paused=_N(n.pause,e));let t=i?.pause;!0!==t&&(t=s.paused||_N(t,e)),l=vN(n.delay||0,e),t?(s.resumeQueue.add(d),r.pause()):(r.resume(),d())}function u(){s.resumeQueue.add(d),s.timeouts.delete(h),h.cancel(),l=h.time-yD.now()}function d(){l>0&&!OD.skipAnimation?(s.delayed=!0,h=yD.setTimeout(p,l),s.pauseQueue.add(u),s.timeouts.add(h)):p()}function p(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(u),s.timeouts.delete(h),t<=(s.cancelId||0)&&(c=!0);try{r.start({...n,callId:t,cancel:c},o)}catch(e){a(e)}}})}var ON=(t,e)=>1==e.length?e[0]:e.some(t=>t.cancelled)?BN(t.get()):e.every(t=>t.noop)?NN(t.get()):FN(t.get(),e.every(t=>t.finished)),NN=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),FN=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),BN=t=>({value:t,cancelled:!0,finished:!1});function zN(t,e,n,i){const{callId:s,parentId:r,onRest:o}=e,{asyncTo:a,promise:l}=n;return r||t!==a||e.reset?n.promise=(async()=>{n.asyncId=s,n.asyncTo=t;const h=SN(e,(t,e)=>"onRest"===e?void 0:t);let c,u;const d=new Promise((t,e)=>(c=t,u=e)),p=t=>{const e=s<=(n.cancelId||0)&&BN(i)||s!==n.asyncId&&FN(i,!1);if(e)throw t.result=e,u(t),t},f=(t,e)=>{const r=new jN,o=new UN;return(async()=>{if(OD.skipAnimation)throw WN(n),o.result=FN(i,!1),u(o),o;p(r);const a=FD.obj(t)?{...t}:{...e,to:t};a.parentId=s,WD(h,(t,e)=>{FD.und(a[e])&&(a[e]=t)});const l=await i.start(a);return p(r),n.paused&&await new Promise(t=>{n.resumeQueue.add(t)}),l})()};let m;if(OD.skipAnimation)return WN(n),FN(i,!1);try{let e;e=FD.arr(t)?(async t=>{for(const e of t)await f(e)})(t):Promise.resolve(t(f,i.stop.bind(i))),await Promise.all([e.then(c),d]),m=FN(i.get(),!0,!1)}catch(g){if(g instanceof jN)m=g.result;else{if(!(g instanceof UN))throw g;m=g.result}}finally{s==n.asyncId&&(n.asyncId=r,n.asyncTo=r?a:void 0,n.promise=r?l:void 0)}return FD.fun(o)&&yD.batchedUpdates(()=>{o(m,i,i.item)}),m})():l}function WN(t,e){UD(t.timeouts,t=>t.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var jN=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},UN=class extends Error{constructor(){super("SkipAnimationSignal")}},HN=t=>t instanceof VN,$N=1,VN=class extends LO{constructor(){super(...arguments),this.id=$N++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=iN(this);return t&&t.getValue()}to(...t){return OD.to(this,t)}interpolate(...t){return ZO(`${qO}The "interpolate" function is deprecated in v9 (use "to" instead)`),OD.to(this,t)}toJSON(){return this.get()}observerAdded(t){1==t&&this._attach()}observerRemoved(t){0==t&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){TO(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||eO.sort(this),TO(this,{type:"priority",parent:this,priority:t})}},qN=Symbol.for("SpringPhase"),GN=t=>(1&t[qN])>0,ZN=t=>(2&t[qN])>0,KN=t=>(4&t[qN])>0,XN=(t,e)=>e?t[qN]|=3:t[qN]&=-3,YN=(t,e)=>e?t[qN]|=4:t[qN]&=-5,QN=class extends VN{constructor(t,e){if(super(),this.animation=new IN,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!FD.und(t)||!FD.und(e)){const n=FD.obj(t)?{...t}:{...e,from:t};FD.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ZN(this)||this._state.asyncTo)||KN(this)}get goal(){return CO(this.animation.to)}get velocity(){const t=iN(this);return t instanceof aN?t.lastVelocity||0:t.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return GN(this)}get isAnimating(){return ZN(this)}get isPaused(){return KN(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:s}=i;const{config:r}=i,o=rN(i.to);!o&&EO(i.to)&&(s=jD(CO(i.to))),i.values.forEach((a,l)=>{if(a.done)return;const h=a.constructor==lN?1:o?o[l].lastPosition:s[l];let c=i.immediate,u=h;if(!c){if(u=a.lastPosition,r.tension<=0)return void(a.done=!0);let e=a.elapsedTime+=t;const n=i.fromValues[l],s=null!=a.v0?a.v0:a.v0=FD.arr(r.velocity)?r.velocity[l]:r.velocity;let o;const d=r.precision||(n==h?.005:Math.min(1,.001*Math.abs(h-n)));if(FD.und(r.duration))if(r.decay){const t=!0===r.decay?.998:r.decay,i=Math.exp(-(1-t)*e);u=n+s/(1-t)*(1-i),c=Math.abs(a.lastPosition-u)<=d,o=s*i}else{o=null==a.lastVelocity?s:a.lastVelocity;const e=r.restVelocity||d/10,i=r.clamp?0:r.bounce,l=!FD.und(i),p=n==h?a.v0>0:n<h;let f,m=!1;const g=1,y=Math.ceil(t/g);for(let t=0;t<y&&(f=Math.abs(o)>e,f||(c=Math.abs(h-u)<=d,!c));++t)l&&(m=u==h||u>h==p,m&&(o=-o*i,u=h)),o+=(1e-6*-r.tension*(u-h)+.001*-r.friction*o)/r.mass*g,u+=o*g}else{let i=1;r.duration>0&&(this._memoizedDuration!==r.duration&&(this._memoizedDuration=r.duration,a.durationProgress>0&&(a.elapsedTime=r.duration*a.durationProgress,e=a.elapsedTime+=t)),i=(r.progress||0)+e/this._memoizedDuration,i=i>1?1:i<0?0:i,a.durationProgress=i),u=n+r.easing(i)*(h-n),o=(u-a.lastPosition)/t,c=1==i}a.lastVelocity=o,Number.isNaN(u)&&(c=!0)}o&&!o[l].done&&(c=!1),c?a.done=!0:e=!1,a.setValue(u,r.round)&&(n=!0)});const a=iN(this),l=a.getValue();if(e){const t=CO(i.to);l===t&&!n||r.decay?n&&r.decay&&this._onChange(l):(a.setValue(t),this._onChange(t)),this._stop()}else n&&this._onChange(l)}set(t){return yD.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ZN(this)){const{to:t,config:e}=this.animation;yD.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return FD.und(t)?(n=this.queue||[],this.queue=[]):n=[FD.obj(t)?t:{...e,to:t}],Promise.all(n.map(t=>this._update(t))).then(t=>ON(this,t))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),WN(this._state,t&&this._lastCallId),yD.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){"change"==t.type?this._start():"priority"==t.type&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=FD.obj(n)?n[e]:n,(null==n||CN(n))&&(n=void 0),i=FD.obj(i)?i[e]:i,null==i&&(i=void 0);const s={to:n,from:i};return GN(this)||(t.reverse&&([n,i]=[i,n]),i=CO(i),FD.und(i)?iN(this)||this._set(n):this._set(i)),s}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,SN(t,(t,e)=>/^on/.test(e)?bN(t,n):t)),rF(this,t,"onProps"),oF(this,"onProps",t,this);const s=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const r=this._state;return DN(++this._lastCallId,{key:n,props:t,defaultProps:i,state:r,actions:{pause:()=>{KN(this)||(YN(this,!0),VD(r.pauseQueue),oF(this,"onPause",FN(this,JN(this,this.animation.to)),this))},resume:()=>{KN(this)&&(YN(this,!1),ZN(this)&&this._resume(),VD(r.resumeQueue),oF(this,"onResume",FN(this,JN(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(n=>{if(t.loop&&n.finished&&(!e||!n.noop)){const e=tF(t);if(e)return this._update(e,!0)}return n})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(BN(this));const i=!FD.und(t.to),s=!FD.und(t.from);if(i||s){if(!(e.callId>this._lastToId))return n(BN(this));this._lastToId=e.callId}const{key:r,defaultProps:o,animation:a}=this,{to:l,from:h}=a;let{to:c=l,from:u=h}=t;!s||i||e.default&&!FD.und(c)||(c=u),e.reverse&&([c,u]=[u,c]);const d=!BD(u,h);d&&(a.from=u),u=CO(u);const p=!BD(c,l);p&&this._focus(c);const f=CN(e.to),{config:m}=a,{decay:g,velocity:y}=m;(i||s)&&(m.velocity=0),e.config&&!f&&function(t,e,n){n&&(LN(n={...n},e),e={...n,...e}),LN(t,e),Object.assign(t,e);for(const o in MN)null==t[o]&&(t[o]=MN[o]);let{frequency:i,damping:s}=t;const{mass:r}=t;FD.und(i)||(i<.01&&(i=.01),s<0&&(s=0),t.tension=Math.pow(2*Math.PI/i,2)*r,t.friction=4*Math.PI*s*r/i)}(m,vN(e.config,r),e.config!==o.config?vN(o.config,r):void 0);let v=iN(this);if(!v||FD.und(c))return n(FN(this,!0));const _=FD.und(e.reset)?s&&!e.default:!FD.und(u)&&_N(e.reset,r),b=_?u:this.get(),w=EN(c),x=FD.num(w)||FD.arr(w)||XO(w),S=!f&&(!x||_N(o.immediate||e.immediate,r));if(p){const t=pN(c);if(t!==v.constructor){if(!S)throw Error(`Cannot animate between ${v.constructor.name} and ${t.name}, as the "to" prop suggests`);v=this._set(w)}}const A=v.constructor;let k=EO(c),P=!1;if(!k){const t=_||!GN(this)&&d;(p||t)&&(P=BD(EN(b),w),k=!P),(BD(a.immediate,S)||S)&&BD(m.decay,g)&&BD(m.velocity,y)||(k=!0)}if(P&&ZN(this)&&(a.changed&&!_?k=!0:k||this._stop(l)),!f&&((k||EO(l))&&(a.values=v.getPayload(),a.toValues=EO(c)?null:A==lN?[1]:jD(w)),a.immediate!=S&&(a.immediate=S,S||_||this._set(l)),k)){const{onRest:t}=a;zD(sF,t=>rF(this,e,t));const i=FN(this,JN(this,l));VD(this._pendingCalls,i),this._pendingCalls.add(n),a.changed&&yD.batchedUpdates(()=>{a.changed=!_,t?.(i,this),_?vN(o.onRest,i):a.onStart?.(i,this)})}_&&this._set(b),f?n(zN(e.to,e,this._state,this)):k?this._start():ZN(this)&&!p?this._pendingCalls.add(n):n(NN(b))}_focus(t){const e=this.animation;t!==e.to&&(MO(this)&&this._detach(),e.to=t,MO(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;EO(e)&&(IO(e,this),HN(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;EO(t)&&DO(t,this)}_set(t,e=!0){const n=CO(t);if(!FD.und(n)){const t=iN(this);if(!t||!BD(n,t.getValue())){const i=pN(n);t&&t.constructor==i?t.setValue(n):sN(this,i.create(n)),t&&yD.batchedUpdates(()=>{this._onChange(n,e)})}}return iN(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,oF(this,"onStart",FN(this,JN(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),vN(this.animation.onChange,t,this)),vN(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;iN(this).reset(CO(t.to)),t.immediate||(t.fromValues=t.values.map(t=>t.lastPosition)),ZN(this)||(XN(this,!0),KN(this)||this._resume())}_resume(){OD.skipAnimation?this.finish():eO.start(this)}_stop(t,e){if(ZN(this)){XN(this,!1);const n=this.animation;zD(n.values,t=>{t.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),TO(this,{type:"idle",parent:this});const i=e?BN(this.get()):FN(this.get(),JN(this,t??n.to));VD(this._pendingCalls,i),n.changed&&(n.changed=!1,oF(this,"onRest",i,this))}}};function JN(t,e){const n=EN(e);return BD(EN(t.get()),n)}function tF(t,e=t.loop,n=t.to){const i=vN(e);if(i){const s=!0!==i&&PN(i),r=(s||t).reverse,o=!s||s.reset;return eF({...t,loop:e,default:!1,pause:void 0,to:!r||CN(n)?n:void 0,from:o?t.from:void 0,reset:o,...s})}}function eF(t){const{to:e,from:n}=t=PN(t),i=new Set;return FD.obj(e)&&iF(e,i),FD.obj(n)&&iF(n,i),t.keys=i.size?Array.from(i):null,t}function nF(t){const e=eF(t);return FD.und(e.default)&&(e.default=SN(e)),e}function iF(t,e){WD(t,(t,n)=>null!=t&&e.add(n))}var sF=["onStart","onRest","onChange","onPause","onResume"];function rF(t,e,n){t.animation[n]=e[n]!==wN(e,n)?bN(e[n],t.key):void 0}function oF(t,e,...n){t.animation[e]?.(...n),t.defaultProps[e]?.(...n)}var aF=["onStart","onChange","onRest"],lF=1,hF=class{constructor(t,e){this.id=lF++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];FD.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(eF(t)),this}start(t){let{queue:e}=this;return t?e=jD(t).map(eF):this.queue=[],this._flush?this._flush(this,e):(gF(this,e),cF(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;zD(jD(e),e=>n[e].stop(!!t))}else WN(this._state,this._lastAsyncId),this.each(e=>e.stop(!!t));return this}pause(t){if(FD.und(t))this.start({pause:!0});else{const e=this.springs;zD(jD(t),t=>e[t].pause())}return this}resume(t){if(FD.und(t))this.start({pause:!1});else{const e=this.springs;zD(jD(t),t=>e[t].resume())}return this}each(t){WD(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,UD(t,([t,e])=>{e.value=this.get(),t(e,this,this._item)}));const r=!i&&this._started,o=s||r&&n.size?this.get():null;s&&e.size&&UD(e,([t,e])=>{e.value=o,t(e,this,this._item)}),r&&(this._started=!1,UD(n,([t,e])=>{e.value=o,t(e,this,this._item)}))}eventObserved(t){if("change"==t.type)this._changed.add(t.parent),t.idle||this._active.add(t.parent);else{if("idle"!=t.type)return;this._active.delete(t.parent)}yD.onFrame(this._onFrame)}};function cF(t,e){return Promise.all(e.map(e=>uF(t,e))).then(e=>ON(t,e))}async function uF(t,e,n){const{keys:i,to:s,from:r,loop:o,onRest:a,onResolve:l}=e,h=FD.obj(e.default)&&e.default;o&&(e.loop=!1),!1===s&&(e.to=null),!1===r&&(e.from=null);const c=FD.arr(s)||FD.fun(s)?s:void 0;c?(e.to=void 0,e.onRest=void 0,h&&(h.onRest=void 0)):zD(aF,n=>{const i=e[n];if(FD.fun(i)){const s=t._events[n];e[n]=({finished:t,cancelled:e})=>{const n=s.get(i);n?(t||(n.finished=!1),e&&(n.cancelled=!0)):s.set(i,{value:null,finished:t||!1,cancelled:e||!1})},h&&(h[n]=e[n])}});const u=t._state;e.pause===!u.paused?(u.paused=e.pause,VD(e.pause?u.pauseQueue:u.resumeQueue)):u.paused&&(e.pause=!0);const d=(i||Object.keys(t.springs)).map(n=>t.springs[n].start(e)),p=!0===e.cancel||!0===wN(e,"cancel");(c||p&&u.asyncId)&&d.push(DN(++t._lastAsyncId,{props:e,state:u,actions:{pause:ND,resume:ND,start(e,n){p?(WN(u,t._lastAsyncId),n(BN(t))):(e.onRest=a,n(zN(c,e,u,t)))}}})),u.paused&&await new Promise(t=>{u.resumeQueue.add(t)});const f=ON(t,await Promise.all(d));if(o&&f.finished&&(!n||!f.noop)){const n=tF(e,o,s);if(n)return gF(t,[n]),uF(t,n,!0)}return l&&yD.batchedUpdates(()=>l(f,t,t.item)),f}function dF(t,e){const n={...t.springs};return e&&zD(jD(e),t=>{FD.und(t.keys)&&(t=eF(t)),FD.obj(t.to)||(t={...t,to:void 0}),mF(n,t,t=>fF(t))}),pF(t,n),n}function pF(t,e){WD(e,(e,n)=>{t.springs[n]||(t.springs[n]=e,IO(e,t))})}function fF(t,e){const n=new QN;return n.key=t,e&&IO(n,e),n}function mF(t,e,n){e.keys&&zD(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function gF(t,e){zD(e,e=>{mF(t.springs,e,e=>fF(e,t))})}var yF,vF,_F=({children:t,...e})=>{const n=Od.useContext(bF),i=e.pause||!!n.pause,s=e.immediate||!!n.immediate;e=function(t,e){const[n]=Od.useState(()=>({inputs:e,result:t()})),i=Od.useRef(),s=i.current;let r=s;return r?Boolean(e&&r.inputs&&function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(e,r.inputs))||(r={inputs:e,result:t()}):r=n,Od.useEffect(()=>{i.current=r,s==n&&(n.inputs=n.result=void 0)},[r]),r.result}(()=>({pause:i,immediate:s}),[i,s]);const{Provider:r}=bF;return Od.createElement(r,{value:e},t)},bF=(yF=_F,vF={},Object.assign(yF,Od.createContext(vF)),yF.Provider._context=yF,yF.Consumer._context=yF,yF);_F.Provider=bF.Provider,_F.Consumer=bF.Consumer;var wF=()=>{const t=[],e=function(e){KO(`${qO}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const i=[];return zD(t,(t,s)=>{if(FD.und(e))i.push(t.start());else{const r=n(e,t,s);r&&i.push(t.start(r))}}),i};e.current=t,e.add=function(e){t.includes(e)||t.push(e)},e.delete=function(e){const n=t.indexOf(e);~n&&t.splice(n,1)},e.pause=function(){return zD(t,t=>t.pause(...arguments)),this},e.resume=function(){return zD(t,t=>t.resume(...arguments)),this},e.set=function(e){zD(t,(t,n)=>{const i=FD.fun(e)?e(n,t):e;i&&t.set(i)})},e.start=function(e){const n=[];return zD(t,(t,i)=>{if(FD.und(e))n.push(t.start());else{const s=this._getProps(e,t,i);s&&n.push(t.start(s))}}),n},e.stop=function(){return zD(t,t=>t.stop(...arguments)),this},e.update=function(e){return zD(t,(t,n)=>t.update(this._getProps(e,t,n))),this};const n=function(t,e,n){return FD.fun(t)?t(n,e):t};return e._getProps=n,e};function xF(t,e,n){const i=FD.fun(e)&&e;i&&!n&&(n=[]);const s=Od.useMemo(()=>i||3==arguments.length?wF():void 0,[]),r=Od.useRef(0),o=QO(),a=Od.useMemo(()=>({ctrls:[],queue:[],flush(t,e){const n=dF(t,e);return r.current>0&&!a.queue.length&&!Object.keys(n).some(e=>!t.springs[e])?cF(t,e):new Promise(i=>{pF(t,n),a.queue.push(()=>{i(cF(t,e))}),o()})}}),[]),l=Od.useRef([...a.ctrls]),h=[],c=eN(t)||0;function u(t,n){for(let s=t;s<n;s++){const t=l.current[s]||(l.current[s]=new hF(null,a.flush)),n=i?i(s,t):e[s];n&&(h[s]=nF(n))}}Od.useMemo(()=>{zD(l.current.slice(t,c),t=>{!function(t,e){t.ref?.delete(t),e?.delete(t)}(t,s),t.stop(!0)}),l.current.length=t,u(c,t)},[t]),Od.useMemo(()=>{u(0,Math.min(c,t))},n);const d=l.current.map((t,e)=>dF(t,h[e])),p=Od.useContext(_F),f=eN(p),m=p!==f&&function(t){for(const e in t)return!0;return!1}(p);YO(()=>{r.current++,a.ctrls=l.current;const{queue:t}=a;t.length&&(a.queue=[],zD(t,t=>t())),zD(l.current,(t,e)=>{s?.add(t),m&&t.start({default:p});const n=h[e];n&&(function(t,e){e&&t.ref!==e&&(t.ref?.delete(t),e.add(t),t.ref=e)}(t,n.ref),t.ref?t.queue.push(n):t.start(n))})}),JO(()=>()=>{zD(a.ctrls,t=>t.stop(!0))});const g=d.map(t=>({...t}));return s?[g,s]:g}var SF=class extends VN{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=AO(...e);const n=this._get(),i=pN(n);sN(this,i.create(n))}advance(t){const e=this._get();BD(e,this.get())||(iN(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&kF(this._active)&&PF(this)}_get(){const t=FD.arr(this.source)?this.source.map(CO):jD(CO(this.source));return this.calc(...t)}_start(){this.idle&&!kF(this._active)&&(this.idle=!1,zD(rN(this),t=>{t.done=!1}),OD.skipAnimation?(yD.batchedUpdates(()=>this.advance()),PF(this)):eO.start(this))}_attach(){let t=1;zD(jD(this.source),e=>{EO(e)&&IO(e,this),HN(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){zD(jD(this.source),t=>{EO(t)&&DO(t,this)}),this._active.clear(),PF(this)}eventObserved(t){"change"==t.type?t.idle?this.advance():(this._active.add(t.parent),this._start()):"idle"==t.type?this._active.delete(t.parent):"priority"==t.type&&(this.priority=jD(this.source).reduce((t,e)=>Math.max(t,(HN(e)?e.priority:0)+1),0))}};function AF(t){return!1!==t.idle}function kF(t){return!t.size||Array.from(t).every(AF)}function PF(t){t.idle||(t.idle=!0,zD(rN(t),t=>{t.done=!0}),TO(t,{type:"idle",parent:t}))}OD.assign({createStringInterpolator:VO,to:(t,e)=>new SF(t,e)});var EF=/^--/;function CF(t,e){return null==e||"boolean"==typeof e||""===e?"":"number"!=typeof e||0===e||EF.test(t)||TF.hasOwnProperty(t)&&TF[t]?(""+e).trim():e+"px"}var MF={},TF={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LF=["Webkit","Ms","Moz","O"];TF=Object.keys(TF).reduce((t,e)=>(LF.forEach(n=>t[((t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1))(n,e)]=t[e]),t),TF);var RF=/^(matrix|translate|scale|rotate|skew)/,IF=/^(translate)/,DF=/^(rotate|skew)/,OF=(t,e)=>FD.num(t)&&0!==t?t+e:t,NF=(t,e)=>FD.arr(t)?t.every(t=>NF(t,e)):FD.num(t)?t===e:parseFloat(t)===e,FF=class extends cN{constructor({x:t,y:e,z:n,...i}){const s=[],r=[];(t||e||n)&&(s.push([t||0,e||0,n||0]),r.push(t=>[`translate3d(${t.map(t=>OF(t,"px")).join(",")})`,NF(t,0)])),WD(i,(t,e)=>{if("transform"===e)s.push([t||""]),r.push(t=>[t,""===t]);else if(RF.test(e)){if(delete i[e],FD.und(t))return;const n=IF.test(e)?"px":DF.test(e)?"deg":"";s.push(jD(t)),r.push("rotate3d"===e?([t,e,i,s])=>[`rotate3d(${t},${e},${i},${OF(s,n)})`,NF(s,0)]:t=>[`${e}(${t.map(t=>OF(t,n)).join(",")})`,NF(t,e.startsWith("scale")?1:0)])}}),s.length&&(i.transform=new BF(s,r)),super(i)}},BF=class extends LO{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return zD(this.inputs,(n,i)=>{const s=CO(n[0]),[r,o]=this.transforms[i](FD.arr(s)?s:n.map(CO));t+=" "+r,e=e&&o}),e?"none":t}observerAdded(t){1==t&&zD(this.inputs,t=>zD(t,t=>EO(t)&&IO(t,this)))}observerRemoved(t){0==t&&zD(this.inputs,t=>zD(t,t=>EO(t)&&DO(t,this)))}eventObserved(t){"change"==t.type&&(this._value=null),TO(this,t)}};OD.assign({batchedUpdates:ET.unstable_batchedUpdates,createStringInterpolator:VO,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var zF=((t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=t=>new cN(t),getComponentProps:i=t=>t}={})=>{const s={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},r=t=>{const e=yN(t)||"Anonymous";return(t=FD.str(t)?r[t]||(r[t]=fN(t,s)):t[gN]||(t[gN]=fN(t,s))).displayName=`Animated(${e})`,t};return WD(t,(e,n)=>{FD.arr(t)&&(n=yN(e)),r[n]=r(e)}),{animated:r}})(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n="filter"===t.nodeName||t.parentNode&&"filter"===t.parentNode.nodeName,{className:i,style:s,children:r,scrollTop:o,scrollLeft:a,viewBox:l,...h}=e,c=Object.values(h),u=Object.keys(h).map(e=>n||t.hasAttribute(e)?e:MF[e]||(MF[e]=e.replace(/([A-Z])/g,t=>"-"+t.toLowerCase())));void 0!==r&&(t.textContent=r);for(const d in s)if(s.hasOwnProperty(d)){const e=CF(d,s[d]);EF.test(d)?t.style.setProperty(d,e):t.style[d]=e}u.forEach((e,n)=>{t.setAttribute(e,c[n])}),void 0!==i&&(t.className=i),void 0!==o&&(t.scrollTop=o),void 0!==a&&(t.scrollLeft=a),void 0!==l&&t.setAttribute("viewBox",l)},createAnimatedStyle:t=>new FF(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}).animated;let WF,jF={};function UF(t={}){jF={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function HF(t){return t?jF[t]:jF}function $F(){return WF}let VF={};function qF(t,e){VF[t]=e}function GF(t){var e;null==(e=VF[t])||e.call(VF)}function ZF(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function KF(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(t=>{const n=t.matches(e),i=Array.from(t.querySelectorAll(e));return[...n?[t]:[],...i]}).filter(t=>"none"!==getComputedStyle(t).pointerEvents&&function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}(t))}function XF(t){if(!t||function(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}(t))return;const e=HF("smoothScroll"),n=t.offsetHeight>window.innerHeight;t.scrollIntoView({behavior:!e||YF(t)?"auto":"smooth",inline:"center",block:n?"start":"center"})}function YF(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}let QF={};function JF(t,e){QF[t]=e}function tB(t){return t?QF[t]:QF}function eB(){QF={}}function nB(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};JF("__activeStagePosition",n),iB(n)}function iB(t){const e=tB("__overlaySvg");if(!e)return void function(t){const e=function(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",sB(t)),s.style.fill=HF("overlayColor")||"rgb(0,0,0)",s.style.opacity=`${HF("overlayOpacity")}`,s.style.pointerEvents="auto",s.style.cursor="auto",i.appendChild(s),i}(t);document.body.appendChild(e),cB(e,t=>{"path"===t.target.tagName&&GF("overlayClick")}),JF("__overlaySvg",e)}(t);const n=e.firstElementChild;if("path"!==(null==n?void 0:n.tagName))throw new Error("no path element found in stage svg");n.setAttribute("d",sB(t))}function sB(t){const e=window.innerWidth,n=window.innerHeight,i=HF("stagePadding")||0,s=HF("stageRadius")||0,r=t.width+2*i,o=t.height+2*i,a=Math.min(s,r/2,o/2),l=Math.floor(Math.max(a,0)),h=r-2*l,c=o-2*l;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z\n    M${t.x-i+l},${t.y-i} h${h} a${l},${l} 0 0 1 ${l},${l} v${c} a${l},${l} 0 0 1 -${l},${l} h-${h} a${l},${l} 0 0 1 -${l},-${l} v-${c} a${l},${l} 0 0 1 ${l},-${l} z`}function rB(t){const{element:e}=t;let n="function"==typeof e?e():"string"==typeof e?document.querySelector(e):e;n||(n=function(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}()),function(t,e){var n;const i=Date.now(),s=tB("__activeStep"),r=tB("__activeElement")||t,o=!r||r===t,a="driver-dummy-element"===t.id,l="driver-dummy-element"===r.id,h=HF("animate"),c=e.onHighlightStarted||HF("onHighlightStarted"),u=(null==e?void 0:e.onHighlighted)||HF("onHighlighted"),d=(null==s?void 0:s.onDeselected)||HF("onDeselected"),p=HF(),f=tB();!o&&d&&d(l?void 0:r,s,{config:p,state:f,driver:$F()}),c&&c(a?void 0:t,e,{config:p,state:f,driver:$F()});const m=!o&&h;let g=!1;(function(){const t=tB("popover");t&&(t.wrapper.style.display="none")})(),JF("previousStep",s),JF("previousElement",r),JF("activeStep",e),JF("activeElement",t);const y=()=>{if(tB("__transitionCallback")!==y)return;const n=Date.now()-i,o=400-n<=200;e.popover&&o&&!g&&m&&(uB(t,e),g=!0),HF("animate")&&n<400?function(t,e,n,i){let s=tB("__activeStagePosition");const r=s||n.getBoundingClientRect(),o=i.getBoundingClientRect();s={x:ZF(t,r.x,o.x-r.x,e),y:ZF(t,r.y,o.y-r.y,e),width:ZF(t,r.width,o.width-r.width,e),height:ZF(t,r.height,o.height-r.height,e)},iB(s),JF("__activeStagePosition",s)}(n,400,r,t):(nB(t),u&&u(a?void 0:t,e,{config:HF(),state:tB(),driver:$F()}),JF("__transitionCallback",void 0),JF("__previousStep",s),JF("__previousElement",r),JF("__activeStep",e),JF("__activeElement",t)),window.requestAnimationFrame(y)};JF("__transitionCallback",y),window.requestAnimationFrame(y),XF(t),!m&&e.popover&&uB(t,e),r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls"),(null!=(n=e.disableActiveInteraction)?n:HF("disableActiveInteraction"))&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}(n,t)}function oB(){const t=tB("__activeElement"),e=tB("__activeStep");t&&(nB(t),function(){const t=tB("__activeStagePosition"),e=tB("__overlaySvg");if(!t)return;if(!e)return;const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}(),mB(t,e))}function aB(){const t=tB("__resizeTimeout");t&&window.cancelAnimationFrame(t),JF("__resizeTimeout",window.requestAnimationFrame(oB))}function lB(t){var e;if(!tB("isInitialized")||"Tab"!==t.key&&9!==t.keyCode)return;const n=tB("__activeElement"),i=null==(e=tB("popover"))?void 0:e.wrapper,s=KF([...i?[i]:[],...n?[n]:[]]),r=s[0],o=s[s.length-1];if(t.preventDefault(),t.shiftKey){const t=s[s.indexOf(document.activeElement)-1]||o;null==t||t.focus()}else{const t=s[s.indexOf(document.activeElement)+1]||r;null==t||t.focus()}}function hB(t){var e;(null==(e=HF("allowKeyboardControl"))||e)&&("Escape"===t.key?GF("escapePress"):"ArrowRight"===t.key?GF("arrowRightPress"):"ArrowLeft"===t.key&&GF("arrowLeftPress"))}function cB(t,e,n){const i=(e,i)=>{const s=e.target;t.contains(s)&&((!n||n(s))&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),null==i||i(e))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",t=>{i(t,e)},!0)}function uB(t,e){var n,i;let s=tB("popover");s&&document.body.removeChild(s.wrapper),s=function(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const s=document.createElement("button");s.type="button",s.classList.add("driver-popover-close-btn"),s.setAttribute("aria-label","Close"),s.innerHTML="&times;";const r=document.createElement("footer");r.classList.add("driver-popover-footer");const o=document.createElement("span");o.classList.add("driver-popover-progress-text"),o.innerText="";const a=document.createElement("span");a.classList.add("driver-popover-navigation-btns");const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-prev-btn"),l.innerHTML="&larr; Previous";const h=document.createElement("button");return h.type="button",h.classList.add("driver-popover-next-btn"),h.innerHTML="Next &rarr;",a.appendChild(l),a.appendChild(h),r.appendChild(o),r.appendChild(a),t.appendChild(s),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(r),{wrapper:t,arrow:e,title:n,description:i,footer:r,previousButton:l,nextButton:h,closeButton:s,footerButtons:a,progress:o}}(),document.body.appendChild(s.wrapper);const{title:r,description:o,showButtons:a,disableButtons:l,showProgress:h,nextBtnText:c=HF("nextBtnText")||"Next &rarr;",prevBtnText:u=HF("prevBtnText")||"&larr; Previous",progressText:d=HF("progressText")||"{current} of {total}"}=e.popover||{};s.nextButton.innerHTML=c,s.previousButton.innerHTML=u,s.progress.innerHTML=d,r?(s.title.innerHTML=r,s.title.style.display="block"):s.title.style.display="none",o?(s.description.innerHTML=o,s.description.style.display="block"):s.description.style.display="none";const p=a||HF("showButtons"),f=h||HF("showProgress")||!1,m=(null==p?void 0:p.includes("next"))||(null==p?void 0:p.includes("previous"))||f;s.closeButton.style.display=p.includes("close")?"block":"none",m?(s.footer.style.display="flex",s.progress.style.display=f?"block":"none",s.nextButton.style.display=p.includes("next")?"block":"none",s.previousButton.style.display=p.includes("previous")?"block":"none"):s.footer.style.display="none";const g=l||HF("disableButtons")||[];null!=g&&g.includes("next")&&(s.nextButton.disabled=!0,s.nextButton.classList.add("driver-popover-btn-disabled")),null!=g&&g.includes("previous")&&(s.previousButton.disabled=!0,s.previousButton.classList.add("driver-popover-btn-disabled")),null!=g&&g.includes("close")&&(s.closeButton.disabled=!0,s.closeButton.classList.add("driver-popover-btn-disabled"));const y=s.wrapper;y.style.display="block",y.style.left="",y.style.top="",y.style.bottom="",y.style.right="",y.id="driver-popover-content",y.setAttribute("role","dialog"),y.setAttribute("aria-labelledby","driver-popover-title"),y.setAttribute("aria-describedby","driver-popover-description"),s.arrow.className="driver-popover-arrow";const v=(null==(n=e.popover)?void 0:n.popoverClass)||HF("popoverClass")||"";y.className=`driver-popover ${v}`.trim(),cB(s.wrapper,n=>{var i,s,r;const o=n.target,a=(null==(i=e.popover)?void 0:i.onNextClick)||HF("onNextClick"),l=(null==(s=e.popover)?void 0:s.onPrevClick)||HF("onPrevClick"),h=(null==(r=e.popover)?void 0:r.onCloseClick)||HF("onCloseClick");return o.closest(".driver-popover-next-btn")?a?a(t,e,{config:HF(),state:tB(),driver:$F()}):GF("nextClick"):o.closest(".driver-popover-prev-btn")?l?l(t,e,{config:HF(),state:tB(),driver:$F()}):GF("prevClick"):o.closest(".driver-popover-close-btn")?h?h(t,e,{config:HF(),state:tB(),driver:$F()}):GF("closeClick"):void 0},t=>!(null!=s&&s.description.contains(t))&&!(null!=s&&s.title.contains(t))&&"string"==typeof t.className&&t.className.includes("driver-popover")),JF("popover",s);const _=(null==(i=e.popover)?void 0:i.onPopoverRender)||HF("onPopoverRender");_&&_(s,{config:HF(),state:tB(),driver:$F()}),mB(t,e),XF(y);const b=KF([y,...t.classList.contains("driver-dummy-element")?[]:[t]]);b.length>0&&b[0].focus()}function dB(){const t=tB("popover");if(null==t||!t.wrapper)return;const e=t.wrapper.getBoundingClientRect(),n=HF("stagePadding")||0,i=HF("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function pB(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:s,popoverArrowDimensions:r}=e;return"start"===t?Math.max(Math.min(n.top-s,window.innerHeight-i.realHeight-r.width),r.width):"end"===t?Math.max(Math.min(n.top-(null==i?void 0:i.realHeight)+n.height+s,window.innerHeight-(null==i?void 0:i.realHeight)-r.width),r.width):"center"===t?Math.max(Math.min(n.top+n.height/2-(null==i?void 0:i.realHeight)/2,window.innerHeight-(null==i?void 0:i.realHeight)-r.width),r.width):0}function fB(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:s,popoverArrowDimensions:r}=e;return"start"===t?Math.max(Math.min(n.left-s,window.innerWidth-i.realWidth-r.width),r.width):"end"===t?Math.max(Math.min(n.left-(null==i?void 0:i.realWidth)+n.width+s,window.innerWidth-(null==i?void 0:i.realWidth)-r.width),r.width):"center"===t?Math.max(Math.min(n.left+n.width/2-(null==i?void 0:i.realWidth)/2,window.innerWidth-(null==i?void 0:i.realWidth)-r.width),r.width):0}function mB(t,e){const n=tB("popover");if(!n)return;const{align:i="start",side:s="left"}=(null==e?void 0:e.popover)||{},r=i,o="driver-dummy-element"===t.id?"over":s,a=HF("stagePadding")||0,l=dB(),h=n.arrow.getBoundingClientRect(),c=t.getBoundingClientRect(),u=c.top-l.height;let d=u>=0;const p=window.innerHeight-(c.bottom+l.height);let f=p>=0;const m=c.left-l.width;let g=m>=0;const y=window.innerWidth-(c.right+l.width);let v=y>=0;const _=!(d||f||g||v);let b=o;if("top"===o&&d?v=g=f=!1:"bottom"===o&&f?v=g=d=!1:"left"===o&&g?v=d=f=!1:"right"===o&&v&&(g=d=f=!1),"over"===o){const t=window.innerWidth/2-l.realWidth/2,e=window.innerHeight/2-l.realHeight/2;n.wrapper.style.left=`${t}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${e}px`,n.wrapper.style.bottom="auto"}else if(_){const t=window.innerWidth/2-(null==l?void 0:l.realWidth)/2,e=10;n.wrapper.style.left=`${t}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${e}px`,n.wrapper.style.top="auto"}else if(g){const t=Math.min(m,window.innerWidth-(null==l?void 0:l.realWidth)-h.width),e=pB(r,{elementDimensions:c,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:h});n.wrapper.style.left=`${t}px`,n.wrapper.style.top=`${e}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",b="left"}else if(v){const t=Math.min(y,window.innerWidth-(null==l?void 0:l.realWidth)-h.width),e=pB(r,{elementDimensions:c,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:h});n.wrapper.style.right=`${t}px`,n.wrapper.style.top=`${e}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",b="right"}else if(d){const t=Math.min(u,window.innerHeight-l.realHeight-h.width);let e=fB(r,{elementDimensions:c,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:h});n.wrapper.style.top=`${t}px`,n.wrapper.style.left=`${e}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",b="top"}else if(f){const t=Math.min(p,window.innerHeight-(null==l?void 0:l.realHeight)-h.width);let e=fB(r,{elementDimensions:c,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:h});n.wrapper.style.left=`${e}px`,n.wrapper.style.bottom=`${t}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",b="bottom"}_?n.arrow.classList.add("driver-popover-arrow-none"):function(t,e,n){const i=tB("popover");if(!i)return;const s=n.getBoundingClientRect(),r=dB(),o=i.arrow,a=r.width,l=window.innerWidth,h=s.width,c=s.left,u=r.height,d=window.innerHeight,p=s.top,f=s.height;o.className="driver-popover-arrow";let m=e,g=t;if("top"===e?(c+h<=0?(m="right",g="end"):c+h-a<=0&&(m="top",g="start"),c>=l?(m="left",g="end"):c+a>=l&&(m="top",g="end")):"bottom"===e?(c+h<=0?(m="right",g="start"):c+h-a<=0&&(m="bottom",g="start"),c>=l?(m="left",g="start"):c+a>=l&&(m="bottom",g="end")):"left"===e?(p+f<=0?(m="bottom",g="end"):p+f-u<=0&&(m="left",g="start"),p>=d?(m="top",g="end"):p+u>=d&&(m="left",g="end")):"right"===e&&(p+f<=0?(m="bottom",g="start"):p+f-u<=0&&(m="right",g="start"),p>=d?(m="top",g="start"):p+u>=d&&(m="right",g="end")),m){o.classList.add(`driver-popover-arrow-side-${m}`),o.classList.add(`driver-popover-arrow-align-${g}`);const t=n.getBoundingClientRect(),s=o.getBoundingClientRect(),r=HF("stagePadding")||0,a=t.left-r<window.innerWidth&&t.right+r>0&&t.top-r<window.innerHeight&&t.bottom+r>0;"bottom"===e&&a&&(s.x>t.x&&s.x+s.width<t.x+t.width?i.wrapper.style.transform="translateY(0)":(o.classList.remove(`driver-popover-arrow-align-${g}`),o.classList.add("driver-popover-arrow-none"),i.wrapper.style.transform=`translateY(-${r/2}px)`))}else o.classList.add("driver-popover-arrow-none")}(r,b,t)}function gB(t={}){function e(){HF("allowClose")&&h()}function n(){const t=HF("overlayClickBehavior");if(HF("allowClose")&&"close"===t)h();else{if("function"==typeof t){const e=tB("__activeStep");return void t(tB("__activeElement"),e,{config:HF(),state:tB(),driver:$F()})}"nextStep"===t&&i()}}function i(){const t=tB("activeIndex"),e=HF("steps")||[];if(void 0===t)return;const n=t+1;e[n]?l(n):h()}function s(){const t=tB("activeIndex"),e=HF("steps")||[];if(void 0===t)return;const n=t-1;e[n]?l(n):h()}function r(){var t;if(tB("__transitionCallback"))return;const e=tB("activeIndex"),n=tB("__activeStep"),i=tB("__activeElement");if(void 0===e||void 0===n||void 0===tB("activeIndex"))return;const r=(null==(t=n.popover)?void 0:t.onPrevClick)||HF("onPrevClick");if(r)return r(i,n,{config:HF(),state:tB(),driver:$F()});s()}function o(){var t;if(tB("__transitionCallback"))return;const e=tB("activeIndex"),n=tB("__activeStep"),s=tB("__activeElement");if(void 0===e||void 0===n)return;const r=(null==(t=n.popover)?void 0:t.onNextClick)||HF("onNextClick");if(r)return r(s,n,{config:HF(),state:tB(),driver:$F()});i()}function a(){tB("isInitialized")||(JF("isInitialized",!0),document.body.classList.add("driver-active",HF("animate")?"driver-fade":"driver-simple"),window.addEventListener("keyup",hB,!1),window.addEventListener("keydown",lB,!1),window.addEventListener("resize",aB),window.addEventListener("scroll",aB),qF("overlayClick",n),qF("escapePress",e),qF("arrowLeftPress",r),qF("arrowRightPress",o))}function l(t=0){var e,n,i,s,r,o,a,c;const u=HF("steps");if(!u)return void h();if(!u[t])return void h();JF("__activeOnDestroyed",document.activeElement),JF("activeIndex",t);const d=u[t],p=u[t+1],f=u[t-1],m=(null==(e=d.popover)?void 0:e.doneBtnText)||HF("doneBtnText")||"Done",g=HF("allowClose"),y=void 0!==(null==(n=d.popover)?void 0:n.showProgress)?null==(i=d.popover)?void 0:i.showProgress:HF("showProgress"),v=((null==(s=d.popover)?void 0:s.progressText)||HF("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${t+1}`).replace("{{total}}",`${u.length}`),_=(null==(r=d.popover)?void 0:r.showButtons)||HF("showButtons"),b=["next","previous",...g?["close"]:[]].filter(t=>!(null!=_&&_.length)||_.includes(t)),w=(null==(o=d.popover)?void 0:o.onNextClick)||HF("onNextClick"),x=(null==(a=d.popover)?void 0:a.onPrevClick)||HF("onPrevClick"),S=(null==(c=d.popover)?void 0:c.onCloseClick)||HF("onCloseClick");rB({...d,popover:{showButtons:b,nextBtnText:p?void 0:m,disableButtons:[...f?[]:["previous"]],showProgress:y,progressText:v,onNextClick:w||(()=>{p?l(t+1):h()}),onPrevClick:x||(()=>{l(t-1)}),onCloseClick:S||(()=>{h()}),...(null==d?void 0:d.popover)||{}}})}function h(t=!0){const e=tB("__activeElement"),n=tB("__activeStep"),i=tB("__activeOnDestroyed"),s=HF("onDestroyStarted");if(t&&s)return void s(e&&"driver-dummy-element"!==(null==e?void 0:e.id)?e:void 0,n,{config:HF(),state:tB(),driver:$F()});const r=(null==n?void 0:n.onDeselected)||HF("onDeselected"),o=HF("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),window.removeEventListener("keyup",hB),window.removeEventListener("resize",aB),window.removeEventListener("scroll",aB),function(){var t;const e=tB("popover");e&&(null==(t=e.wrapper.parentElement)||t.removeChild(e.wrapper))}(),function(){var t;null==(t=document.getElementById("driver-dummy-element"))||t.remove(),document.querySelectorAll(".driver-active-element").forEach(t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")})}(),function(){const t=tB("__overlaySvg");t&&t.remove()}(),VF={},eB(),e&&n){const t="driver-dummy-element"===e.id;r&&r(t?void 0:e,n,{config:HF(),state:tB(),driver:$F()}),o&&o(t?void 0:e,n,{config:HF(),state:tB(),driver:$F()})}i&&i.focus()}UF(t);const c={isActive:()=>tB("isInitialized")||!1,refresh:aB,drive:(t=0)=>{a(),l(t)},setConfig:UF,setSteps:t=>{eB(),UF({...HF(),steps:t})},getConfig:HF,getState:tB,getActiveIndex:()=>tB("activeIndex"),isFirstStep:()=>0===tB("activeIndex"),isLastStep:()=>{const t=HF("steps")||[],e=tB("activeIndex");return void 0!==e&&e===t.length-1},getActiveStep:()=>tB("activeStep"),getActiveElement:()=>tB("activeElement"),getPreviousElement:()=>tB("previousElement"),getPreviousStep:()=>tB("previousStep"),moveNext:i,movePrevious:s,moveTo:function(t){(HF("steps")||[])[t]?l(t):h()},hasNextStep:()=>{const t=HF("steps")||[],e=tB("activeIndex");return void 0!==e&&!!t[e+1]},hasPreviousStep:()=>{const t=HF("steps")||[],e=tB("activeIndex");return void 0!==e&&!!t[e-1]},highlight:t=>{a(),rB({...t,popover:t.popover?{showButtons:[],showProgress:!1,progressText:"",...t.popover}:void 0})},destroy:()=>{h(!1)}};return function(t){WF=t}(c),c}const yB=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),vB=[.001,0,0,.001,0,0],_B=1.35,bB={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},wB="pdfjs_internal_editor_",xB={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},SB={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},AB={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},kB={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},PB={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},EB={ERRORS:0,WARNINGS:1,INFOS:5},CB={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},MB={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let TB=EB.WARNINGS;function LB(){return TB}function RB(t){}function IB(t){throw new Error(t)}function DB(t,e){t||IB(e)}function OB(t,e=null,n=null){if(!t)return null;if(n&&"string"==typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e?.length>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch{}}const i=e?URL.parse(t,e):URL.parse(t);return function(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function NB(t,e,n=!1){const i=URL.parse(t);return i?(i.hash=e,i.href):n&&OB(t,"http://example.com")?t.split("#",1)[0]+""+(e?`#${e}`:""):""}function FB(t,e,n,i=!1){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const BB=function(){function t(t,e){this.message=t,this.name=e}return t.prototype=new Error,t.constructor=t,t}();class zB extends BB{constructor(t,e){super(t,"PasswordException"),this.code=e}}class WB extends BB{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class jB extends BB{constructor(t){super(t,"InvalidPDFException")}}class UB extends BB{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class HB extends BB{constructor(t){super(t,"FormatError")}}class $B extends BB{constructor(t){super(t,"AbortException")}}function VB(t){"object"==typeof t&&void 0!==t?.length||IB("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let s=0;s<e;s+=n){const r=Math.min(s+n,e),o=t.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function qB(t){"string"!=typeof t&&IB("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}class GB{static get isLittleEndian(){return FB(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return FB(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return FB(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return FB(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){const{platform:t,userAgent:e}=navigator;return FB(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return FB(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ZB=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class KB{static makeHexColor(t,e,n){return`#${ZB[t]}${ZB[e]}${ZB[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const i=t[n],s=t[n+1];t[n]=i*e[0]+s*e[2]+e[4],t[n+1]=i*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];for(let h=0;h<6;h+=2){const e=t[n+h],c=t[n+h+1];t[n+h]=e*i+c*r+a,t[n+h+1]=e*s+c*o+l}}static applyInverseTransform(t,e){const n=t[0],i=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,n){const i=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5],h=t[0],c=t[1],u=t[2],d=t[3];let p=i*h+a,f=p,m=i*u+a,g=m,y=o*c+l,v=y,_=o*d+l,b=_;if(0!==s||0!==r){const t=s*h,e=s*u,n=r*c,i=r*d;p+=n,g+=n,m+=i,f+=i,y+=t,b+=t,_+=e,v+=e}n[0]=Math.min(n[0],p,m,f,g),n[1]=Math.min(n[1],y,_,v,b),n[2]=Math.max(n[2],p,m,f,g),n[3]=Math.max(n[3],y,_,v,b)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],s=t[2],r=t[3],o=n**2+i**2,a=n*s+i*r,l=s**2+r**2,h=(o+l)/2,c=Math.sqrt(h**2-(o*l-a**2));e[0]=Math.sqrt(h+c||1),e[1]=Math.sqrt(h-c||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>r?null:[n,s,i,r]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,s){s[0]=Math.min(s[0],t,n),s[1]=Math.min(s[1],e,i),s[2]=Math.max(s[2],t,n),s[3]=Math.max(s[3],e,i)}static bezierBoundingBox(e,i,s,r,o,a,l,h,c){c[0]=Math.min(c[0],e,l),c[1]=Math.min(c[1],i,h),c[2]=Math.max(c[2],e,l),c[3]=Math.max(c[3],i,h),Vu(this,t,n).call(this,e,s,o,l,i,r,a,h,3*(3*(s-o)-e+l),6*(e-2*s+o),3*(s-e),c),Vu(this,t,n).call(this,e,s,o,l,i,r,a,h,3*(3*(r-a)-i+h),6*(i-2*r+a),3*(r-i),c)}}t=new WeakSet,e=function(t,e,n,i,s,r,o,a,l,h){if(l<=0||l>=1)return;const c=1-l,u=l*l,d=u*l,p=c*(c*(c*t+3*l*e)+3*u*n)+d*i,f=c*(c*(c*s+3*l*r)+3*u*o)+d*a;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],f),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],f)},n=function(n,i,s,r,o,a,l,h,c,u,d,p){if(Math.abs(c)<1e-12)return void(Math.abs(u)>=1e-12&&Vu(this,t,e).call(this,n,i,s,r,o,a,l,h,-d/u,p));const f=u**2-4*d*c;if(f<0)return;const m=Math.sqrt(f),g=2*c;Vu(this,t,e).call(this,n,i,s,r,o,a,l,h,(-u+m)/g,p),Vu(this,t,e).call(this,n,i,s,r,o,a,l,h,(-u-m)/g,p)},Hu(KB,t);let XB=null,YB=null;function QB(t){return XB||(XB=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,YB=new Map([["","t"]])),t.replaceAll(XB,(t,e,n)=>e?e.normalize("NFKC"):YB.get(n))}function JB(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),VB(t)}const tz="pdfjs_internal_id_";function ez(t,e,n){return Math.min(Math.max(t,e),n)}function nz(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(VB(t))}"function"!=typeof Promise.try&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})}),"function"!=typeof Math.sumPrecise&&(Math.sumPrecise=function(t){return t.reduce((t,e)=>t+e,0)});class iz{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};return function t(n){if(!n)return;let i=null;const s=n.name;if("#text"===s)i=n.value;else{if(!iz.shouldBuildText(s))return;n?.attributes?.textContent?i=n.attributes.textContent:n.value&&(i=n.value)}if(null!==i&&e.push({str:i}),n.children)for(const e of n.children)t(e)}(t),n}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}class sz{static setupStorage(t,e,n,i,s){const r=i.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===s)break;t.addEventListener("input",t=>{i.setValue(e,{value:t.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?t.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===s)break;t.addEventListener("change",t=>{i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===s)break;t.addEventListener("input",t=>{i.setValue(e,{value:t.target.value})})}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);for(const t of n.children)t.attributes.value===r.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",t=>{const n=t.target.options,s=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(e,{value:s})})}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:s}){const{attributes:r}=e,o=t instanceof HTMLAnchorElement;"radio"===r.type&&(r.name=`${r.name}-${i}`);for(const[a,l]of Object.entries(r))if(null!=l)switch(a){case"class":l.length&&t.setAttribute(a,l.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",l);break;case"style":Object.assign(t.style,l);break;case"textContent":t.textContent=l;break;default:(!o||"href"!==a&&"newWindow"!==a)&&t.setAttribute(a,l)}o&&s.addLinkAttributes(t,r.href,r.newWindow),n&&r.dataId&&this.setupStorage(t,r.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,s=t.intent||"display",r=document.createElement(i.name);i.attributes&&this.setAttributes({html:r,element:i,intent:s,linkService:n});const o="richText"!==s,a=t.div;if(a.append(r),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;a.style.transform=e}o&&a.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const t=document.createTextNode(i.value);r.append(t),o&&iz.shouldBuildText(i.name)&&l.push(t)}return{textDivs:l}}const h=[[i,-1,r]];for(;h.length>0;){const[t,i,r]=h.at(-1);if(i+1===t.children.length){h.pop();continue}const a=t.children[++h.at(-1)[1]];if(null===a)continue;const{name:c}=a;if("#text"===c){const t=document.createTextNode(a.value);l.push(t),r.append(t);continue}const u=a?.attributes?.xmlns?document.createElementNS(a.attributes.xmlns,c):document.createElement(c);if(r.append(u),a.attributes&&this.setAttributes({html:u,element:a,storage:e,intent:s,linkService:n}),a.children?.length>0)h.push([a,-1,u]);else if(a.value){const t=document.createTextNode(a.value);o&&iz.shouldBuildText(c)&&l.push(t),u.append(t)}}for(const c of a.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))c.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const rz="http://www.w3.org/2000/svg",oz=class{};Wu(oz,"CSS",96),Wu(oz,"PDF",72),Wu(oz,"PDF_TO_CSS_UNITS",oz.CSS/oz.PDF);let az=oz;async function lz(t,e="text"){if(gz(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)i(new Error(s.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void n(s.response)}n(s.responseText)}},s.send(null)})}class hz{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=r,n*=e;const a=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let h,c,u,d,p,f,m,g;switch((i%=360)<0&&(i+=360),i){case 180:h=-1,c=0,u=0,d=1;break;case 90:h=0,c=1,u=1,d=0;break;case 270:h=0,c=-1,u=-1,d=0;break;case 0:h=1,c=0,u=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(u=-u,d=-d),0===h?(p=Math.abs(l-t[1])*n+s,f=Math.abs(a-t[0])*n+r,m=(t[3]-t[1])*n,g=(t[2]-t[0])*n):(p=Math.abs(a-t[0])*n+s,f=Math.abs(l-t[1])*n+r,m=(t[2]-t[0])*n,g=(t[3]-t[1])*n),this.transform=[h*n,c*n,u*n,d*n,p-h*n*a-u*n*l,f-c*n*a-d*n*l],this.width=m,this.height=g}get rawDims(){const t=this.viewBox;return FB(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new hz({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(t,e){const n=[t,e];return KB.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];KB.applyTransform(e,this.transform);const n=[t[2],t[3]];return KB.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return KB.applyInverseTransform(n,this.transform),n}}class cz extends BB{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function uz(t){const e=t.length;let n=0;for(;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function dz(t){return"string"==typeof t&&/\.pdf$/i.test(t)}function pz(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function fz(t,e="document.pdf"){if("string"!=typeof t)return e;if(uz(t))return e;const n=(t=>{try{return new URL(t)}catch{try{return new URL(decodeURIComponent(t))}catch{try{return new URL(t,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(t),"https://foo.bar")}catch{return null}}}}})(t);if(!n)return e;const i=t=>{try{let e=decodeURIComponent(t);return e.includes("/")?(e=e.split("/").at(-1),e.test(/^\.pdf$/i)?e:t):e}catch{return t}},s=/\.pdf$/i,r=n.pathname.split("/").at(-1);if(s.test(r))return i(r);if(n.searchParams.size>0){const t=Array.from(n.searchParams.values()).reverse();for(const n of t)if(s.test(n))return i(n);const e=Array.from(n.searchParams.keys()).reverse();for(const n of e)if(s.test(n))return i(n)}if(n.hash){const t=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(t)return i(t[0])}return e}class mz{constructor(){Wu(this,"started",Object.create(null)),Wu(this,"times",[])}time(t){this.started,this.started[t]=Date.now()}timeEnd(t){this.started,this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:s}of this.times)t.push(`${n.padEnd(e)} ${s-i}ms\n`);return t.join("")}}function gz(t,e){const n=e?URL.parse(t,e):URL.parse(t);return"http:"===n?.protocol||"https:"===n?.protocol}function yz(t){t.preventDefault()}function vz(t){t.preventDefault(),t.stopPropagation()}class _z{static toDateObject(t){if(t instanceof Date)return t;if(!t||"string"!=typeof t)return null;Uu(this,i)||$u(this,i,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=Uu(this,i).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const h=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===h?(o+=c,a+=u):"+"===h&&(o-=c,a-=u),new Date(Date.UTC(n,s,r,o,a,l))}}function bz(t,{scale:e=1,rotation:n=0}){const{width:i,height:s}=t.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new hz({viewBox:r,userUnit:1,scale:e,rotation:n})}function wz(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(t=>parseInt(t)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):[0,0,0]}function xz(t){const{a:e,b:n,c:i,d:s,e:r,f:o}=t.getTransform();return[e,n,i,s,r,o]}function Sz(t){const{a:e,b:n,c:i,d:s,e:r,f:o}=t.getTransform().invertSelf();return[e,n,i,s,r,o]}function Az(t,e,n=!1,i=!0){if(e instanceof hz){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:r}=t,o=GB.isCSSRoundSupported,a=`var(--total-scale-factor) * ${i}px`,l=`var(--total-scale-factor) * ${s}px`,h=o?`round(down, ${a}, var(--scale-round-x))`:`calc(${a})`,c=o?`round(down, ${l}, var(--scale-round-y))`:`calc(${l})`;n&&e.rotation%180!=0?(r.width=c,r.height=h):(r.width=h,r.height=c)}i&&t.setAttribute("data-main-rotation",e.rotation)}i=new WeakMap,Hu(_z,i);class kz{constructor(){const{pixelRatio:t}=kz;this.sx=t,this.sy=t}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i,s=-1){let r=1/0,o=1/0,a=1/0;(n=kz.capPixels(n,s))>0&&(r=Math.sqrt(n/(t*e))),-1!==i&&(o=i/t,a=i/e);const l=Math.min(r,o,a);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const Pz=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Ez{static get isDarkMode(){return FB(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Cz{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),FB(this,"commentForegroundColor",wz(n))}}function Mz(t,e,n,i){const s=255*(1-(i=Math.min(Math.max(i??1,0),1)));return[t=Math.round(t*i+s),e=Math.round(e*i+s),n=Math.round(n*i+s)]}function Tz(t,e){const n=t[0]/255,i=t[1]/255,s=t[2]/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;if(r===o)e[0]=e[1]=0;else{const t=r-o;switch(e[1]=a<.5?t/(r+o):t/(2-r-o),r){case n:e[0]=60*((i-s)/t+(i<s?6:0));break;case i:e[0]=60*((s-n)/t+2);break;case s:e[0]=60*((n-i)/t+4)}}e[2]=a}function Lz(t,e){const n=t[0],i=t[1],s=t[2],r=(1-Math.abs(2*s-1))*i,o=r*(1-Math.abs(n/60%2-1)),a=s-r/2;switch(Math.floor(n/60)){case 0:e[0]=r+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=r+a,e[2]=a;break;case 2:e[0]=a,e[1]=r+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=r+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=r+a;break;case 5:case 6:e[0]=r+a,e[1]=a,e[2]=o+a}}function Rz(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function Iz(t,e,n){Lz(t,n),n.map(Rz);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];Lz(e,n),n.map(Rz);const s=.2126*n[0]+.7152*n[1]+.0722*n[2];return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)}const Dz=new Map;function Oz(t,e){const n=t[0]+256*t[1]+65536*t[2]+16777216*e[0]+4294967296*e[1]+1099511627776*e[2];let i=Dz.get(n);if(i)return i;const s=new Float32Array(9),r=s.subarray(0,3),o=s.subarray(3,6);Tz(t,o);const a=s.subarray(6,9);Tz(e,a);const l=a[2]<.5,h=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),Iz(o,a,r)<h){let t,e;l?(t=o[2],e=1):(t=0,e=o[2]);const n=.005;for(;e-t>n;){const n=o[2]=(t+e)/2;l===Iz(o,a,r)<h?t=n:e=n}o[2]=l?e:t}return Lz(o,r),i=KB.makeHexColor(Math.round(255*r[0]),Math.round(255*r[1]),Math.round(255*r[2])),Dz.set(n,i),i}function Nz({html:t,dir:e,className:n},i){const s=document.createDocumentFragment();if("string"==typeof t){const n=document.createElement("p");n.dir=e||"auto";const i=t.split(/(?:\r\n?|\n)/);for(let t=0,e=i.length;t<e;++t){const s=i[t];n.append(document.createTextNode(s)),t<e-1&&n.append(document.createElement("br"))}s.append(n)}else sz.render({xfaHtml:t,div:s,intent:"richText"});s.firstChild.classList.add("richText",n),i.append(s)}const Fz=class t{constructor(e){Hu(this,m),Hu(this,s,null),Hu(this,r,null),Hu(this,o),Hu(this,a,null),Hu(this,l,null),Hu(this,h,null),Hu(this,c,null),Hu(this,u,null),$u(this,o,e),Uu(t,d)||$u(t,d,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=$u(this,s,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=Uu(this,o)._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",yz,{signal:n}),e.addEventListener("pointerdown",Vu(t,p,f),{signal:n}));const i=$u(this,a,document.createElement("div"));i.className="buttons",e.append(i);const r=Uu(this,o).toolbarPosition;if(r){const{style:t}=e,n="ltr"===Uu(this,o)._uiManager.direction?1-r[0]:r[0];t.insetInlineEnd=100*n+"%",t.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return Uu(this,s)}hide(){Uu(this,s).classList.add("hidden"),Uu(this,r)?.hideDropdown()}show(){Uu(this,s).classList.remove("hidden"),Uu(this,l)?.shown(),Uu(this,h)?.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=Uu(this,o),i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Uu(t,d)[e]),Vu(this,m,v).call(this,i)&&i.addEventListener("click",t=>{n.delete()},{signal:n._signal}),Uu(this,a).append(i)}async addAltText(t){const e=await t.render();Vu(this,m,v).call(this,e),Uu(this,a).append(e,Uu(this,m,_)),$u(this,l,t)}addComment(t,e=null){if(Uu(this,h))return;const n=t.renderForToolbar();if(!n)return;Vu(this,m,v).call(this,n);const i=$u(this,c,Uu(this,m,_));e?(Uu(this,a).insertBefore(n,e),Uu(this,a).insertBefore(i,e)):Uu(this,a).append(n,i),$u(this,h,t),t.toolbar=this}addColorPicker(t){if(Uu(this,r))return;$u(this,r,t);const e=t.renderButton();Vu(this,m,v).call(this,e),Uu(this,a).append(e,Uu(this,m,_))}async addEditSignatureButton(t){const e=$u(this,u,await t.renderEditButton(Uu(this,o)));Vu(this,m,v).call(this,e),Uu(this,a).append(e,Uu(this,m,_))}removeButton(t){"comment"===t&&(Uu(this,h)?.removeToolbarCommentButton(),$u(this,h,null),Uu(this,c)?.remove(),$u(this,c,null))}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e)}}async addButtonBefore(t,e,n){const i=Uu(this,a).querySelector(n);i&&"comment"===t&&this.addComment(e,i)}updateEditSignatureButton(t){Uu(this,u)&&(Uu(this,u).title=t)}remove(){Uu(this,s).remove(),Uu(this,r)?.destroy(),$u(this,r,null)}};s=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,l=new WeakMap,h=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakSet,f=function(t){t.stopPropagation()},m=new WeakSet,g=function(t){Uu(this,o)._focusEventsAllowed=!1,vz(t)},y=function(t){Uu(this,o)._focusEventsAllowed=!0,vz(t)},v=function(t){const e=Uu(this,o)._uiManager._signal;return e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("focusin",Vu(this,m,g).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",Vu(this,m,y).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",yz,{signal:e}),!0)},_=function(){const t=document.createElement("div");return t.className="divider",t},Hu(Fz,p),Hu(Fz,d,null);let Bz=Fz;class zz{constructor(t){Hu(this,S),Hu(this,b,null),Hu(this,w,null),Hu(this,x),$u(this,x,t)}show(t,e,n){const[i,s]=Vu(this,S,k).call(this,e,n),{style:r}=Uu(this,w)||$u(this,w,Vu(this,S,A).call(this));t.append(Uu(this,w)),r.insetInlineEnd=100*i+"%",r.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){Uu(this,w).remove()}}function Wz(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))}b=new WeakMap,w=new WeakMap,x=new WeakMap,S=new WeakSet,A=function(){const t=$u(this,w,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=Uu(this,x)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",yz,{signal:e});const n=$u(this,b,document.createElement("div"));return n.className="buttons",t.append(n),Uu(this,x).hasCommentManager()&&Vu(this,S,P).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{Uu(this,x).commentSelection("floating_button")}),Vu(this,S,P).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{Uu(this,x).highlightSelection("floating_button")}),t},k=function(t,e){let n=0,i=0;for(const s of t){const t=s.y+s.height;if(t<n)continue;const r=s.x+(e?s.width:0);t>n?(i=r,n=t):e?r>i&&(i=r):r<i&&(i=r)}return[e?1-i:i,n]},P=function(t,e,n,i){const s=document.createElement("button");s.classList.add("basic",t),s.tabIndex=0,s.setAttribute("data-l10n-id",e);const r=document.createElement("span");s.append(r),r.className="visuallyHidden",r.setAttribute("data-l10n-id",n);const o=Uu(this,x)._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",yz,{signal:o}),s.addEventListener("click",i,{signal:o})),Uu(this,b).append(s)};class jz{constructor(){Hu(this,E,0)}get id(){return`${wB}${qu(this,E)._++}`}}E=new WeakMap;const Uz=class{constructor(){Hu(this,R),Hu(this,C,JB()),Hu(this,M,0),Hu(this,T,null)}static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',FB(this,"_isSVGFittingCanvas",e.decode().then(()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(t){const{lastModified:e,name:n,size:i,type:s}=t;return Vu(this,R,I).call(this,`${e}_${n}_${i}_${s}`,t)}async getFromUrl(t){return Vu(this,R,I).call(this,t,t)}async getFromBlob(t,e){const n=await e;return Vu(this,R,I).call(this,t,n)}async getFromId(t){Uu(this,T)||$u(this,T,new Map);const e=Uu(this,T).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:t}=e;return delete e.blobPromise,this.getFromBlob(e.id,t)}return this.getFromUrl(e.url)}getFromCanvas(t,e){Uu(this,T)||$u(this,T,new Map);let n=Uu(this,T).get(t);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${Uu(this,C)}_${qu(this,M)._++}`,refCounter:1,isSvg:!1},Uu(this,T).set(t,n),Uu(this,T).set(n.id,n),n}getSvgUrl(t){const e=Uu(this,T).get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){Uu(this,T)||$u(this,T,new Map);const e=Uu(this,T).get(t);if(!e)return;if(e.refCounter-=1,0!==e.refCounter)return;const{bitmap:n}=e;if(!e.url&&!e.file){const t=new OffscreenCanvas(n.width,n.height);t.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=t.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${Uu(this,C)}_`)}};C=new WeakMap,M=new WeakMap,T=new WeakMap,R=new WeakSet,I=async function(t,e){Uu(this,T)||$u(this,T,new Map);let n=Uu(this,T).get(t);if(null===n)return null;if(n?.bitmap)return n.refCounter+=1,n;try{let t;if(n||(n={bitmap:null,id:`image_${Uu(this,C)}_${qu(this,M)._++}`,refCounter:0,isSvg:!1}),"string"==typeof e?(n.url=e,t=await lz(e,"blob")):e instanceof File?t=n.file=e:e instanceof Blob&&(t=e),"image/svg+xml"===t.type){const e=Uz._isSVGFittingCanvas,i=new FileReader,s=new Image,r=new Promise((t,r)=>{s.onload=()=>{n.bitmap=s,n.isSvg=!0,t()},i.onload=async()=>{const t=n.svgUrl=i.result;s.src=await e?`${t}#svgView(preserveAspectRatio(none))`:t},s.onerror=i.onerror=r});i.readAsDataURL(t),await r}else n.bitmap=await createImageBitmap(t);n.refCounter=1}catch(iG){n=null}return Uu(this,T).set(t,n),n&&Uu(this,T).set(n.id,n),n};let Hz=Uz;class $z{constructor(t=128){Hu(this,D,[]),Hu(this,O,!1),Hu(this,N),Hu(this,F,-1),$u(this,N,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:s=NaN,overwriteIfSameType:r=!1,keepUndo:o=!1}){if(i&&t(),Uu(this,O))return;const a={cmd:t,undo:e,post:n,type:s};if(-1===Uu(this,F))return Uu(this,D).length>0&&(Uu(this,D).length=0),$u(this,F,0),void Uu(this,D).push(a);if(r&&Uu(this,D)[Uu(this,F)].type===s)return o&&(a.undo=Uu(this,D)[Uu(this,F)].undo),void(Uu(this,D)[Uu(this,F)]=a);const l=Uu(this,F)+1;l===Uu(this,N)?Uu(this,D).splice(0,1):($u(this,F,l),l<Uu(this,D).length&&Uu(this,D).splice(l)),Uu(this,D).push(a)}undo(){if(-1===Uu(this,F))return;$u(this,O,!0);const{undo:t,post:e}=Uu(this,D)[Uu(this,F)];t(),e?.(),$u(this,O,!1),$u(this,F,Uu(this,F)-1)}redo(){if(Uu(this,F)<Uu(this,D).length-1){$u(this,F,Uu(this,F)+1),$u(this,O,!0);const{cmd:t,post:e}=Uu(this,D)[Uu(this,F)];t(),e?.(),$u(this,O,!1)}}hasSomethingToUndo(){return-1!==Uu(this,F)}hasSomethingToRedo(){return Uu(this,F)<Uu(this,D).length-1}cleanType(t){if(-1!==Uu(this,F)){for(let e=Uu(this,F);e>=0;e--)if(Uu(this,D)[e].type!==t)return Uu(this,D).splice(e+1,Uu(this,F)-e),void $u(this,F,e);Uu(this,D).length=0,$u(this,F,-1)}}destroy(){$u(this,D,null)}}D=new WeakMap,O=new WeakMap,N=new WeakMap,F=new WeakMap;class Vz{constructor(t){Hu(this,B),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=GB.platform;for(const[n,i,s={}]of t)for(const t of n){const n=t.startsWith("mac+");e&&n?(this.callbacks.set(t.slice(4),{callback:i,options:s}),this.allKeys.add(t.split("+").at(-1))):e||n||(this.callbacks.set(t,{callback:i,options:s}),this.allKeys.add(t.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(Vu(this,B,z).call(this,e));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:r=[],checker:o=null}}=n;o&&!o(t,e)||(i.bind(t,...r,e)(),s||vz(e))}}B=new WeakSet,z=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const qz=class t{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,wz(i))}e.remove()}(t),FB(this,"_colors",t)}convert(e){const n=wz(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[i,s]of this._colors)if(s.every((t,e)=>t===n[e]))return t._colorsMapping.get(i);return n}getHexCode(t){const e=this._colors.get(t);return e?KB.makeHexColor(...e):t}};Wu(qz,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Gz=qz;const Zz=class t{constructor(t,e,n,i,s,r,o,a,l,h,c,u,d,p,f,m){Hu(this,Ot),Hu(this,W,new AbortController),Hu(this,j,null),Hu(this,U,null),Hu(this,H,new Map),Hu(this,$,new Map),Hu(this,V,null),Hu(this,q,null),Hu(this,G,null),Hu(this,Z,new $z),Hu(this,K,null),Hu(this,X,null),Hu(this,Y,null),Hu(this,Q,0),Hu(this,J,new Set),Hu(this,tt,null),Hu(this,et,null),Hu(this,nt,new Set),Wu(this,"_editorUndoBar",null),Hu(this,it,!1),Hu(this,st,!1),Hu(this,rt,!1),Hu(this,ot,null),Hu(this,at,null),Hu(this,lt,null),Hu(this,ht,null),Hu(this,ct,!1),Hu(this,ut,null),Hu(this,dt,new jz),Hu(this,pt,!1),Hu(this,ft,!1),Hu(this,mt,!1),Hu(this,gt,null),Hu(this,yt,null),Hu(this,vt,null),Hu(this,_t,null),Hu(this,bt,null),Hu(this,wt,xB.NONE),Hu(this,xt,new Set),Hu(this,St,null),Hu(this,At,null),Hu(this,kt,null),Hu(this,Pt,null),Hu(this,Et,null),Hu(this,Ct,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),Hu(this,Mt,[0,0]),Hu(this,Tt,null),Hu(this,Lt,null),Hu(this,Rt,null),Hu(this,It,null),Hu(this,Dt,null);const g=this._signal=Uu(this,W).signal;$u(this,Lt,t),$u(this,Rt,e),$u(this,It,n),$u(this,V,i),$u(this,K,s),$u(this,At,r),$u(this,Et,a),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:g}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),o._on("setpreference",this.onSetPreference.bind(this),{signal:g}),o._on("switchannotationeditorparams",t=>this.updateParams(t.type,t.value),{signal:g}),window.addEventListener("pointerdown",()=>{$u(this,ft,!0)},{capture:!0,signal:g}),window.addEventListener("pointerup",()=>{$u(this,ft,!1)},{capture:!0,signal:g}),Vu(this,Ot,jt).call(this),Vu(this,Ot,Zt).call(this),Vu(this,Ot,$t).call(this),$u(this,q,a.annotationStorage),$u(this,ot,a.filterFactory),$u(this,kt,l),$u(this,ht,h||null),$u(this,it,c),$u(this,st,u),$u(this,rt,d),$u(this,bt,p||null),this.viewParameters={realScale:az.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=!1!==m,s?.setSidebarUiManager(this)}static get _keyboardManager(){const e=t.prototype,n=t=>Uu(t,Lt).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),i=(t,{target:e})=>{if(e instanceof HTMLInputElement){const{type:t}=e;return"text"!==t&&"number"!==t}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return FB(this,"_keyboardManager",new Vz([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&Uu(t,Lt).contains(e)&&!t.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&Uu(t,Lt).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:n}]]))}destroy(){Uu(this,Dt)?.resolve(),$u(this,Dt,null),Uu(this,W)?.abort(),$u(this,W,null),this._signal=null;for(const t of Uu(this,$).values())t.destroy();Uu(this,$).clear(),Uu(this,H).clear(),Uu(this,nt).clear(),Uu(this,_t)?.clear(),$u(this,j,null),Uu(this,xt).clear(),Uu(this,Z).destroy(),Uu(this,V)?.destroy(),Uu(this,K)?.destroy(),Uu(this,At)?.destroy(),Uu(this,ut)?.hide(),$u(this,ut,null),Uu(this,vt)?.destroy(),$u(this,vt,null),$u(this,U,null),Uu(this,at)&&(clearTimeout(Uu(this,at)),$u(this,at,null)),Uu(this,Tt)&&(clearTimeout(Uu(this,Tt)),$u(this,Tt,null)),this._editorUndoBar?.destroy(),$u(this,Et,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return Uu(this,bt)}get useNewAltTextFlow(){return Uu(this,st)}get useNewAltTextWhenAddingImage(){return Uu(this,rt)}get hcmFilter(){return FB(this,"hcmFilter",Uu(this,kt)?Uu(this,ot).addHCMFilter(Uu(this,kt).foreground,Uu(this,kt).background):"none")}get direction(){return FB(this,"direction",getComputedStyle(Uu(this,Lt)).direction)}get _highlightColors(){return FB(this,"_highlightColors",Uu(this,ht)?new Map(Uu(this,ht).split(",").map(t=>(t=t.split("=").map(t=>t.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return FB(this,"highlightColors",null);const e=new Map,n=!!Uu(this,kt);for(const[i,s]of t){const t=i.endsWith("_HCM");n&&t?e.set(i.replace("_HCM",""),s):n||t||e.set(i,s)}return FB(this,"highlightColors",e)}get highlightColorNames(){return FB(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),$u(this,Y,t)}setMainHighlightColorPicker(t){$u(this,vt,t)}editAltText(t,e=!1){Uu(this,V)?.editAltText(this,t,e)}hasCommentManager(){return!!Uu(this,K)}editComment(t,e,n,i){Uu(this,K)?.showDialog(this,t,e,n,i)}selectComment(t,e){const n=Uu(this,$).get(t),i=n?.getEditorByUID(e);i?.toggleComment(!0,!0)}updateComment(t){Uu(this,K)?.updateComment(t.getData())}updatePopupColor(t){Uu(this,K)?.updatePopupColor(t)}removeComment(t){Uu(this,K)?.removeComments([t.uid])}toggleComment(t,e,n=void 0){Uu(this,K)?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&Uu(this,K)?.makeCommentColor(t,e)||null}getCommentDialogElement(){return Uu(this,K)?.dialogElement||null}async waitForEditorsRendered(t){if(Uu(this,$).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=n=>{n.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){Uu(this,At)?.getSignature({uiManager:this,editor:t})}get signatureManager(){return Uu(this,At)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){"enableNewAltTextWhenAddingImage"===t&&$u(this,rt,e)}onPageChanging({pageNumber:t}){$u(this,Q,t-1)}focusMainContainer(){Uu(this,Lt).focus()}findParent(t,e){for(const n of Uu(this,$).values()){const{x:i,y:s,width:r,height:o}=n.div.getBoundingClientRect();if(t>=i&&t<=i+r&&e>=s&&e<=s+o)return n}return null}disableUserSelect(t=!1){Uu(this,Rt).classList.toggle("noUserSelect",t)}addShouldRescale(t){Uu(this,nt).add(t)}removeShouldRescale(t){Uu(this,nt).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*az.PDF_TO_CSS_UNITS;for(const e of Uu(this,nt))e.onScaleChanging();Uu(this,Y)?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=n,a=n.toString(),l=Vu(this,Ot,Nt).call(this,n).closest(".textLayer"),h=this.getSelectionBoxes(l);if(!h)return;n.empty();const c=Vu(this,Ot,Ft).call(this,l),u=Uu(this,wt)===xB.NONE,d=()=>{const n=c?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:a});u&&this.showAllEditors("highlight",!0,!0),e&&n?.editComment()};u?this.switchToMode(xB.HIGHLIGHT,d):d()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!Uu(this,q))return null;const e=`${wB}${t}`,n=Uu(this,q).getRawValue(e);return n&&Uu(this,q).remove(e),n}addToAnnotationStorage(t){t.isEmpty()||!Uu(this,q)||Uu(this,q).has(t.id)||Uu(this,q).setValue(t.id,t)}a11yAlert(t,e=null){const n=Uu(this,It);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Uu(this,ct)&&($u(this,ct,!1),Vu(this,Ot,Wt).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of Uu(this,xt))if(e.div.contains(t)){$u(this,yt,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!Uu(this,yt))return;const[t,e]=Uu(this,yt);$u(this,yt,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){Vu(this,Ot,$t).call(this),Vu(this,Ot,qt).call(this)}removeEditListeners(){Vu(this,Ot,Vt).call(this),Vu(this,Ot,Gt).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of Uu(this,et))if(n.isHandlingMimeForPasting(e))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const e of t.dataTransfer.items)for(const n of Uu(this,et))if(n.isHandlingMimeForPasting(e.type))return n.paste(e,this.currentLayer),void t.preventDefault()}copy(t){if(t.preventDefault(),Uu(this,j)?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of Uu(this,xt)){const t=n.serialize(!0);t&&e.push(t)}0!==e.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const t of Uu(this,et))if(t.isHandlingMimeForPasting(r.type))return void t.paste(r,this.currentLayer);let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){return void s.message}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const t=[];for(const r of n){const e=await i.deserialize(r);if(!e)return;t.push(e)}const e=()=>{for(const e of t)Vu(this,Ot,Jt).call(this,e);Vu(this,Ot,ne).call(this,t)},s=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:s,mustExec:!0})}catch(s){s.message}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),Uu(this,wt)===xB.NONE||this.isEditorHandlingKeyboard||t._keyboardManager.exec(this,e)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,Uu(this,ct)&&($u(this,ct,!1),Vu(this,Ot,Wt).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}setEditingState(t){t?(Vu(this,Ot,Ut).call(this),Vu(this,Ot,qt).call(this),Vu(this,Ot,Kt).call(this,{isEditing:Uu(this,wt)!==xB.NONE,isEmpty:Vu(this,Ot,ee).call(this),hasSomethingToUndo:Uu(this,Z).hasSomethingToUndo(),hasSomethingToRedo:Uu(this,Z).hasSomethingToRedo(),hasSelectedEditor:!1})):(Vu(this,Ot,Ht).call(this),Vu(this,Ot,Gt).call(this),Vu(this,Ot,Kt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!Uu(this,et)){$u(this,et,t);for(const t of Uu(this,et))Vu(this,Ot,Xt).call(this,t.defaultPropertiesToUpdate)}}getId(){return Uu(this,dt).id}get currentLayer(){return Uu(this,$).get(Uu(this,Q))}getLayer(t){return Uu(this,$).get(t)}get currentPageIndex(){return Uu(this,Q)}addLayer(t){Uu(this,$).set(t.pageIndex,t),Uu(this,pt)?t.enable():t.disable()}removeLayer(t){Uu(this,$).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,i=!1,s=!1){if(Uu(this,wt)!==t&&(!Uu(this,Dt)||(await Uu(this,Dt).promise,Uu(this,Dt)))){if($u(this,Dt,Promise.withResolvers()),Uu(this,Y)?.commitOrRemove(),Uu(this,wt)===xB.POPUP&&Uu(this,K)?.hideSidebar(),Uu(this,K)?.destroyPopup(),$u(this,wt,t),t===xB.NONE){this.setEditingState(!1),Vu(this,Ot,Qt).call(this);for(const t of Uu(this,H).values())t.hideStandaloneCommentButton();return this._editorUndoBar?.hide(),this.toggleComment(null),void Uu(this,Dt).resolve()}for(const t of Uu(this,H).values())t.addStandaloneCommentButton();t===xB.SIGNATURE&&await(Uu(this,At)?.loadSignatures()),this.setEditingState(!0),await Vu(this,Ot,Yt).call(this),this.unselectAll();for(const e of Uu(this,$).values())e.updateMode(t);if(t===xB.POPUP){Uu(this,U)||$u(this,U,await Uu(this,Et).getAnnotationsByType(new Set(Uu(this,et).map(t=>t._editorType))));const t=new Set,e=[];for(const n of Uu(this,H).values()){const{annotationElementId:i,hasComment:s,deleted:r}=n;i&&t.add(i),s&&!r&&e.push(n.getData())}for(const n of Uu(this,U)){const{id:i,popupRef:s,contentsObj:r}=n;s&&r?.str&&!t.has(i)&&!Uu(this,J).has(i)&&e.push(n)}Uu(this,K)?.showSidebar(e)}if(!e)return n&&this.addNewEditorFromKeyboard(),void Uu(this,Dt).resolve();for(const t of Uu(this,H).values())t.uid===e?(this.setSelected(t),s?t.editComment():i?t.enterInEditMode():t.focus()):t.unselect();Uu(this,Dt).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==Uu(this,wt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(Uu(this,et)){switch(t){case SB.CREATE:return void this.currentLayer.addNewEditor(e);case SB.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Uu(this,Pt)||$u(this,Pt,new Map)).set(t,e),this.showAllEditors("highlight",e)}if(this.hasSelection)for(const n of Uu(this,xt))n.updateParams(t,e);else for(const n of Uu(this,et))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const i of Uu(this,H).values())i.editorType===t&&i.show(e);(Uu(this,Pt)?.get(SB.HIGHLIGHT_SHOW_ALL)??!0)!==e&&Vu(this,Ot,Xt).call(this,[[SB.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(Uu(this,mt)!==t){$u(this,mt,t);for(const e of Uu(this,$).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of Uu(this,H).values())e.pageIndex===t&&(yield e)}getEditor(t){return Uu(this,H).get(t)}addEditor(t){Uu(this,H).set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(Uu(this,at)&&clearTimeout(Uu(this,at)),$u(this,at,setTimeout(()=>{this.focusMainContainer(),$u(this,at,null)},0))),Uu(this,H).delete(t.id),t.annotationElementId&&Uu(this,_t)?.delete(t.annotationElementId),this.unselect(t),t.annotationElementId&&Uu(this,J).has(t.annotationElementId)||Uu(this,q)?.remove(t.id)}addDeletedAnnotationElement(t){Uu(this,J).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return Uu(this,J).has(t)}removeDeletedAnnotationElement(t){Uu(this,J).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){Uu(this,j)!==t&&($u(this,j,t),t&&Vu(this,Ot,Xt).call(this,t.propertiesToUpdate))}updateUI(t){Uu(this,Ot,te)===t&&Vu(this,Ot,Xt).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){Vu(this,Ot,Xt).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(Uu(this,xt).has(t))return Uu(this,xt).delete(t),t.unselect(),void Vu(this,Ot,Kt).call(this,{hasSelectedEditor:this.hasSelection});Uu(this,xt).add(t),t.select(),Vu(this,Ot,Xt).call(this,t.propertiesToUpdate),Vu(this,Ot,Kt).call(this,{hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),Uu(this,Y)?.commitOrRemove();for(const e of Uu(this,xt))e!==t&&e.unselect();Uu(this,xt).clear(),Uu(this,xt).add(t),t.select(),Vu(this,Ot,Xt).call(this,t.propertiesToUpdate),Vu(this,Ot,Kt).call(this,{hasSelectedEditor:!0})}isSelected(t){return Uu(this,xt).has(t)}get firstSelectedEditor(){return Uu(this,xt).values().next().value}unselect(t){t.unselect(),Uu(this,xt).delete(t),Vu(this,Ot,Kt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==Uu(this,xt).size}get isEnterHandled(){return 1===Uu(this,xt).size&&this.firstSelectedEditor.isEnterHandled}undo(){Uu(this,Z).undo(),Vu(this,Ot,Kt).call(this,{hasSomethingToUndo:Uu(this,Z).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Vu(this,Ot,ee).call(this)}),this._editorUndoBar?.hide()}redo(){Uu(this,Z).redo(),Vu(this,Ot,Kt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Uu(this,Z).hasSomethingToRedo(),isEmpty:Vu(this,Ot,ee).call(this)})}addCommands(t){Uu(this,Z).add(t),Vu(this,Ot,Kt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Vu(this,Ot,ee).call(this)})}cleanUndoStack(t){Uu(this,Z).cleanType(t)}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...Uu(this,xt)],n=()=>{for(const t of e)Vu(this,Ot,Jt).call(this,t)};this.addCommands({cmd:()=>{this._editorUndoBar?.show(n,1===e.length?e[0].editorType:e.length);for(const t of e)t.remove()},undo:n,mustExec:!0})}commitOrRemove(){Uu(this,j)?.commitOrRemove()}hasSomethingToControl(){return Uu(this,j)||this.hasSelection}selectAll(){for(const t of Uu(this,xt))t.commit();Vu(this,Ot,ne).call(this,Uu(this,H).values())}unselectAll(){if((!Uu(this,j)||(Uu(this,j).commitOrRemove(),Uu(this,wt)===xB.NONE))&&!Uu(this,Y)?.commitOrRemove()&&this.hasSelection){for(const t of Uu(this,xt))t.unselect();Uu(this,xt).clear(),Vu(this,Ot,Kt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;Uu(this,Mt)[0]+=t,Uu(this,Mt)[1]+=e;const[i,s]=Uu(this,Mt),r=[...Uu(this,xt)];Uu(this,Tt)&&clearTimeout(Uu(this,Tt)),$u(this,Tt,setTimeout(()=>{$u(this,Tt,null),Uu(this,Mt)[0]=Uu(this,Mt)[1]=0,this.addCommands({cmd:()=>{for(const t of r)Uu(this,H).has(t.id)&&(t.translateInPage(i,s),t.translationDone())},undo:()=>{for(const t of r)Uu(this,H).has(t.id)&&(t.translateInPage(-i,-s),t.translationDone())},mustExec:!1})},1e3));for(const o of r)o.translateInPage(t,e),o.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),$u(this,tt,new Map);for(const t of Uu(this,xt))Uu(this,tt).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Uu(this,tt))return!1;this.disableUserSelect(!1);const t=Uu(this,tt);$u(this,tt,null);let e=!1;for(const[{x:i,y:s,pageIndex:r},o]of t)o.newX=i,o.newY=s,o.newPageIndex=r,e||(e=i!==o.savedX||s!==o.savedY||r!==o.savedPageIndex);if(!e)return!1;const n=(t,e,n,i)=>{if(Uu(this,H).has(t.id)){const s=Uu(this,$).get(i);s?t._setParentAndPosition(s,e,n):(t.pageIndex=i,t.x=e,t.y=n)}};return this.addCommands({cmd:()=>{for(const[e,{newX:i,newY:s,newPageIndex:r}]of t)n(e,i,s,r)},undo:()=>{for(const[e,{savedX:i,savedY:s,savedPageIndex:r}]of t)n(e,i,s,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(Uu(this,tt))for(const n of Uu(this,tt).keys())n.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===Uu(this,xt).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return Uu(this,j)===t}getActive(){return Uu(this,j)}getMode(){return Uu(this,wt)}isEditingMode(){return Uu(this,wt)!==xB.NONE}get imageManager(){return FB(this,"imageManager",new Hz)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,h=e.rangeCount;l<h;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:r}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(t,e,o,a)=>({x:(e-i)/r,y:1-(t+o-n)/s,width:a/r,height:o/s});break;case"180":o=(t,e,o,a)=>({x:1-(t+o-n)/s,y:1-(e+a-i)/r,width:o/s,height:a/r});break;case"270":o=(t,e,o,a)=>({x:1-(e+a-i)/r,y:(t-n)/s,width:a/r,height:o/s});break;default:o=(t,e,o,a)=>({x:(t-n)/s,y:(e-i)/r,width:o/s,height:a/r})}const a=[];for(let l=0,h=e.rangeCount;l<h;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:n,width:i,height:s}of t.getClientRects())0!==i&&0!==s&&a.push(o(e,n,i,s))}return 0===a.length?null:a}addChangedExistingAnnotation({annotationElementId:t,id:e}){(Uu(this,G)||$u(this,G,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){Uu(this,G)?.delete(t)}renderAnnotationElement(t){const e=Uu(this,G)?.get(t.data.id);if(!e)return;const n=Uu(this,q).getRawValue(e);n&&(Uu(this,wt)!==xB.NONE||n.hasBeenModified)&&n.renderAnnotationElement(t)}setMissingCanvas(t,e,n){const i=Uu(this,_t)?.get(t);i&&(i.setCanvas(e,n),Uu(this,_t).delete(t))}addMissingCanvas(t,e){(Uu(this,_t)||$u(this,_t,new Map)).set(t,e)}};W=new WeakMap,j=new WeakMap,U=new WeakMap,H=new WeakMap,$=new WeakMap,V=new WeakMap,q=new WeakMap,G=new WeakMap,Z=new WeakMap,K=new WeakMap,X=new WeakMap,Y=new WeakMap,Q=new WeakMap,J=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap,it=new WeakMap,st=new WeakMap,rt=new WeakMap,ot=new WeakMap,at=new WeakMap,lt=new WeakMap,ht=new WeakMap,ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,pt=new WeakMap,ft=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,vt=new WeakMap,_t=new WeakMap,bt=new WeakMap,wt=new WeakMap,xt=new WeakMap,St=new WeakMap,At=new WeakMap,kt=new WeakMap,Pt=new WeakMap,Et=new WeakMap,Ct=new WeakMap,Mt=new WeakMap,Tt=new WeakMap,Lt=new WeakMap,Rt=new WeakMap,It=new WeakMap,Dt=new WeakMap,Ot=new WeakSet,Nt=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Ft=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of Uu(this,$).values())if(n.hasTextLayer(t))return n;return null},Bt=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=Vu(this,Ot,Nt).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(e);n&&(Uu(this,ut)||$u(this,ut,new zz(this)),Uu(this,ut).show(e,n,"ltr"===this.direction))},zt=function(){const t=document.getSelection();if(!t||t.isCollapsed)return void(Uu(this,St)&&(Uu(this,ut)?.hide(),$u(this,St,null),Vu(this,Ot,Kt).call(this,{hasSelectedText:!1})));const{anchorNode:e}=t;if(e===Uu(this,St))return;const n=Vu(this,Ot,Nt).call(this,t).closest(".textLayer");if(n){if(Uu(this,ut)?.hide(),$u(this,St,e),Vu(this,Ot,Kt).call(this,{hasSelectedText:!0}),(Uu(this,wt)===xB.HIGHLIGHT||Uu(this,wt)===xB.NONE)&&(Uu(this,wt)===xB.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),$u(this,ct,this.isShiftKeyDown),!this.isShiftKeyDown)){const t=Uu(this,wt)===xB.HIGHLIGHT?Vu(this,Ot,Ft).call(this,n):null;if(t?.toggleDrawing(),Uu(this,ft)){const e=new AbortController,n=this.combinedSignal(e),i=n=>{"pointerup"===n.type&&0!==n.button||(e.abort(),t?.toggleDrawing(!0),"pointerup"===n.type&&Vu(this,Ot,Wt).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}else t?.toggleDrawing(!0),Vu(this,Ot,Wt).call(this,"main_toolbar")}}else Uu(this,St)&&(Uu(this,ut)?.hide(),$u(this,St,null),Vu(this,Ot,Kt).call(this,{hasSelectedText:!1}))},Wt=function(t=""){Uu(this,wt)===xB.HIGHLIGHT?this.highlightSelection(t):Uu(this,it)&&Vu(this,Ot,Bt).call(this)},jt=function(){document.addEventListener("selectionchange",Vu(this,Ot,zt).bind(this),{signal:this._signal})},Ut=function(){if(Uu(this,lt))return;$u(this,lt,new AbortController);const t=this.combinedSignal(Uu(this,lt));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Ht=function(){Uu(this,lt)?.abort(),$u(this,lt,null)},$t=function(){if(Uu(this,gt))return;$u(this,gt,new AbortController);const t=this.combinedSignal(Uu(this,gt));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},Vt=function(){Uu(this,gt)?.abort(),$u(this,gt,null)},qt=function(){if(Uu(this,X))return;$u(this,X,new AbortController);const t=this.combinedSignal(Uu(this,X));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Gt=function(){Uu(this,X)?.abort(),$u(this,X,null)},Zt=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Kt=function(t){Object.entries(t).some(([t,e])=>Uu(this,Ct)[t]!==e)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Uu(this,Ct),t)}),Uu(this,wt)===xB.HIGHLIGHT&&!1===t.hasSelectedEditor&&Vu(this,Ot,Xt).call(this,[[SB.HIGHLIGHT_FREE,!0]]))},Xt=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Yt=async function(){if(!Uu(this,pt)){$u(this,pt,!0);const t=[];for(const e of Uu(this,$).values())t.push(e.enable());await Promise.all(t);for(const e of Uu(this,H).values())e.enable()}},Qt=function(){if(this.unselectAll(),Uu(this,pt)){$u(this,pt,!1);for(const t of Uu(this,$).values())t.disable();for(const t of Uu(this,H).values())t.disable()}},Jt=function(t){const e=Uu(this,$).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},te=function(){let t=null;for(t of Uu(this,xt));return t},ee=function(){if(0===Uu(this,H).size)return!0;if(1===Uu(this,H).size)for(const t of Uu(this,H).values())return t.isEmpty();return!1},ne=function(t){for(const e of Uu(this,xt))e.unselect();Uu(this,xt).clear();for(const e of t)e.isEmpty()||(Uu(this,xt).add(e),e.select());Vu(this,Ot,Kt).call(this,{hasSelectedEditor:this.hasSelection})},Wu(Zz,"TRANSLATE_SMALL",1),Wu(Zz,"TRANSLATE_BIG",10);let Kz=Zz;const Xz=class t{constructor(e){Hu(this,ge),Hu(this,ie,null),Hu(this,se,!1),Hu(this,re,null),Hu(this,oe,null),Hu(this,ae,null),Hu(this,le,null),Hu(this,he,!1),Hu(this,ce,null),Hu(this,ue,null),Hu(this,de,null),Hu(this,pe,null),Hu(this,fe,!1),$u(this,ue,e),$u(this,fe,e._uiManager.useNewAltTextFlow),Uu(t,me)||$u(t,me,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){t._l10n??(t._l10n=e)}async render(){const e=$u(this,re,document.createElement("button"));e.className="altText",e.tabIndex="0";const n=$u(this,oe,document.createElement("span"));e.append(n),Uu(this,fe)?(e.classList.add("new"),e.setAttribute("data-l10n-id",Uu(t,me).missing),n.setAttribute("data-l10n-id",Uu(t,me)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=Uu(this,ue)._uiManager._signal;e.addEventListener("contextmenu",yz,{signal:i}),e.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:i});const s=t=>{t.preventDefault(),Uu(this,ue)._uiManager.editAltText(Uu(this,ue)),Uu(this,fe)&&Uu(this,ue)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Uu(this,ge,ye)}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&($u(this,he,!0),s(t))},{signal:i}),await Vu(this,ge,ve).call(this),e}finish(){Uu(this,re)&&(Uu(this,re).focus({focusVisible:Uu(this,he)}),$u(this,he,!1))}isEmpty(){return Uu(this,fe)?null===Uu(this,ie):!Uu(this,ie)&&!Uu(this,se)}hasData(){return Uu(this,fe)?null!==Uu(this,ie)||!!Uu(this,de):this.isEmpty()}get guessedText(){return Uu(this,de)}async setGuessedText(e){null===Uu(this,ie)&&($u(this,de,e),$u(this,pe,await t._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),Vu(this,ge,ve).call(this))}toggleAltTextBadge(t=!1){if(!Uu(this,fe)||Uu(this,ie))return Uu(this,ce)?.remove(),void $u(this,ce,null);if(!Uu(this,ce)){const t=$u(this,ce,document.createElement("div"));t.className="noAltTextBadge",Uu(this,ue).div.append(t)}Uu(this,ce).classList.toggle("hidden",!t)}serialize(t){let e=Uu(this,ie);return t||Uu(this,de)!==e||(e=Uu(this,pe)),{altText:e,decorative:Uu(this,se),guessedText:Uu(this,de),textWithDisclaimer:Uu(this,pe)}}get data(){return{altText:Uu(this,ie),decorative:Uu(this,se)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:s=!1}){n&&($u(this,de,n),$u(this,pe,i)),Uu(this,ie)===t&&Uu(this,se)===e||(s||($u(this,ie,t),$u(this,se,e)),Vu(this,ge,ve).call(this))}toggle(t=!1){Uu(this,re)&&(!t&&Uu(this,le)&&(clearTimeout(Uu(this,le)),$u(this,le,null)),Uu(this,re).disabled=!t)}shown(){Uu(this,ue)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Uu(this,ge,ye)}})}destroy(){Uu(this,re)?.remove(),$u(this,re,null),$u(this,oe,null),$u(this,ae,null),Uu(this,ce)?.remove(),$u(this,ce,null)}};ie=new WeakMap,se=new WeakMap,re=new WeakMap,oe=new WeakMap,ae=new WeakMap,le=new WeakMap,he=new WeakMap,ce=new WeakMap,ue=new WeakMap,de=new WeakMap,pe=new WeakMap,fe=new WeakMap,me=new WeakMap,ge=new WeakSet,ye=function(){return(Uu(this,ie)?"added":null===Uu(this,ie)&&this.guessedText&&"review")||"missing"},ve=async function(){const t=Uu(this,re);if(!t)return;if(Uu(this,fe)){if(t.classList.toggle("done",!!Uu(this,ie)),t.setAttribute("data-l10n-id",Uu(Xz,me)[Uu(this,ge,ye)]),Uu(this,oe)?.setAttribute("data-l10n-id",Uu(Xz,me)[`${Uu(this,ge,ye)}-label`]),!Uu(this,ie))return void Uu(this,ae)?.remove()}else{if(!Uu(this,ie)&&!Uu(this,se))return t.classList.remove("done"),void Uu(this,ae)?.remove();t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=Uu(this,ae);if(!e){$u(this,ae,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${Uu(this,ue).id}`;const n=100,i=Uu(this,ue)._uiManager._signal;i.addEventListener("abort",()=>{clearTimeout(Uu(this,le)),$u(this,le,null)},{once:!0}),t.addEventListener("mouseenter",()=>{$u(this,le,setTimeout(()=>{$u(this,le,null),Uu(this,ae).classList.add("show"),Uu(this,ue)._reportTelemetry({action:"alt_text_tooltip"})},n))},{signal:i}),t.addEventListener("mouseleave",()=>{Uu(this,le)&&(clearTimeout(Uu(this,le)),$u(this,le,null)),Uu(this,ae)?.classList.remove("show")},{signal:i})}Uu(this,se)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=Uu(this,ie)),e.parentNode||t.append(e);const n=Uu(this,ue).getElementForAltText();n?.setAttribute("aria-describedby",e.id)},Hu(Xz,me,null),Wu(Xz,"_l10n",null);let Yz=Xz;class Qz{constructor(t){Hu(this,Me),Hu(this,_e,null),Hu(this,be,null),Hu(this,we,!1),Hu(this,xe,null),Hu(this,Se,null),Hu(this,Ae,null),Hu(this,ke,null),Hu(this,Pe,null),Hu(this,Ee,!1),Hu(this,Ce,null),$u(this,xe,t)}renderForToolbar(){const t=$u(this,be,document.createElement("button"));return t.className="comment",Vu(this,Me,Te).call(this,t,!1)}renderForStandalone(){const t=$u(this,_e,document.createElement("button"));t.className="annotationCommentButton";const e=Uu(this,xe).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*("ltr"===Uu(this,xe)._uiManager.direction?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const i=Uu(this,xe).commentButtonColor;i&&(n.backgroundColor=i)}return Vu(this,Me,Te).call(this,t,!0)}focusButton(){setTimeout(()=>{(Uu(this,_e)??Uu(this,be))?.focus()},0)}onUpdatedColor(){if(!Uu(this,_e))return;const t=Uu(this,xe).commentButtonColor;t&&(Uu(this,_e).style.backgroundColor=t),Uu(this,xe)._uiManager.updatePopupColor(Uu(this,xe))}get commentButtonWidth(){return(Uu(this,_e)?.getBoundingClientRect().width??0)/Uu(this,xe).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(Uu(this,Ce))return Uu(this,Ce);if(!Uu(this,_e))return null;const{x:t,y:e,height:n}=Uu(this,_e).getBoundingClientRect(),{x:i,y:s,width:r,height:o}=Uu(this,xe).parent.boundingClientRect;return[(t-i)/r,(e+n-s)/o]}set commentPopupPositionInLayer(t){$u(this,Ce,t)}hasDefaultPopupPosition(){return null===Uu(this,Ce)}removeStandaloneCommentButton(){Uu(this,_e)?.remove(),$u(this,_e,null)}removeToolbarCommentButton(){Uu(this,be)?.remove(),$u(this,be,null)}setCommentButtonStates({selected:t,hasPopup:e}){Uu(this,_e)&&(Uu(this,_e).classList.toggle("selected",t),Uu(this,_e).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=Uu(this,xe).commentButtonPosition;const{width:t,height:e,x:s,y:r}=Uu(this,xe);n=s+n*t,i=r+i*e}const s=Uu(this,xe).parent.boundingClientRect,{x:r,y:o,width:a,height:l}=s;Uu(this,xe)._uiManager.editComment(Uu(this,xe),r+n*a,o+i*l,{...t,parentDimensions:s})}finish(){Uu(this,be)&&(Uu(this,be).focus({focusVisible:Uu(this,we)}),$u(this,we,!1))}isDeleted(){return Uu(this,Ee)||""===Uu(this,ke)}isEmpty(){return null===Uu(this,ke)}hasBeenEdited(){return this.isDeleted()||Uu(this,ke)!==Uu(this,Se)}serialize(){return this.data}get data(){return{text:Uu(this,ke),richText:Uu(this,Ae),date:Uu(this,Pe),deleted:this.isDeleted()}}set data(t){if(t!==Uu(this,ke)&&$u(this,Ae,null),null===t)return $u(this,ke,""),void $u(this,Ee,!0);$u(this,ke,t),$u(this,Pe,new Date),$u(this,Ee,!1)}setInitialText(t,e=null){$u(this,Se,t),this.data=t,$u(this,Pe,null),$u(this,Ae,e)}shown(){}destroy(){Uu(this,be)?.remove(),$u(this,be,null),Uu(this,_e)?.remove(),$u(this,_e,null),$u(this,ke,""),$u(this,Ae,null),$u(this,Pe,null),$u(this,xe,null),$u(this,we,!1),$u(this,Ee,!1)}}_e=new WeakMap,be=new WeakMap,we=new WeakMap,xe=new WeakMap,Se=new WeakMap,Ae=new WeakMap,ke=new WeakMap,Pe=new WeakMap,Ee=new WeakMap,Ce=new WeakMap,Me=new WeakSet,Te=function(t,e){if(!Uu(this,xe)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[Uu(this,xe)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=Uu(this,xe)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",yz,{signal:n}),e&&(t.addEventListener("focusin",t=>{Uu(this,xe)._focusEventsAllowed=!1,vz(t)},{capture:!0,signal:n}),t.addEventListener("focusout",t=>{Uu(this,xe)._focusEventsAllowed=!0,vz(t)},{capture:!0,signal:n})),t.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:n});const i=e=>{e.preventDefault(),t===Uu(this,be)?this.edit():Uu(this,xe).toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&($u(this,we,!0),i(e))},{signal:n}),t.addEventListener("pointerenter",()=>{Uu(this,xe).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{Uu(this,xe).toggleComment(!1,!1)},{signal:n}),t};const Jz=class{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:r=null,signal:o}){Hu(this,He),Hu(this,Le),Hu(this,Re,!1),Hu(this,Ie,null),Hu(this,De),Hu(this,Oe),Hu(this,Ne),Hu(this,Fe),Hu(this,Be,null),Hu(this,ze),Hu(this,We,null),Hu(this,je),Hu(this,Ue,null),$u(this,Le,t),$u(this,Ie,n),$u(this,De,e),$u(this,Oe,i),$u(this,Ne,s),$u(this,Fe,r),$u(this,je,new AbortController),$u(this,ze,AbortSignal.any([o,Uu(this,je).signal])),t.addEventListener("touchstart",Vu(this,He,$e).bind(this),{passive:!1,signal:Uu(this,ze)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/kz.pixelRatio}destroy(){Uu(this,je)?.abort(),$u(this,je,null),Uu(this,Be)?.abort(),$u(this,Be,null)}};Le=new WeakMap,Re=new WeakMap,Ie=new WeakMap,De=new WeakMap,Oe=new WeakMap,Ne=new WeakMap,Fe=new WeakMap,Be=new WeakMap,ze=new WeakMap,We=new WeakMap,je=new WeakMap,Ue=new WeakMap,He=new WeakSet,$e=function(t){var e,n,i;if(null==(e=Uu(this,De))?void 0:e.call(this))return;if(1===t.touches.length){if(Uu(this,Be))return;const t=$u(this,Be,new AbortController),e=AbortSignal.any([Uu(this,ze),t.signal]),n=Uu(this,Le),i={capture:!0,signal:e,passive:!1},s=t=>{"touch"===t.pointerType&&(Uu(this,Be)?.abort(),$u(this,Be,null))};return n.addEventListener("pointerdown",t=>{"touch"===t.pointerType&&(vz(t),s(t))},i),n.addEventListener("pointerup",s,i),void n.addEventListener("pointercancel",s,i)}if(!Uu(this,Ue)){$u(this,Ue,new AbortController);const t=AbortSignal.any([Uu(this,ze),Uu(this,Ue).signal]),e=Uu(this,Le),i={signal:t,capture:!1,passive:!1};e.addEventListener("touchmove",Vu(this,He,Ve).bind(this),i);const s=Vu(this,He,qe).bind(this);e.addEventListener("touchend",s,i),e.addEventListener("touchcancel",s,i),i.capture=!0,e.addEventListener("pointerdown",vz,i),e.addEventListener("pointermove",vz,i),e.addEventListener("pointercancel",vz,i),e.addEventListener("pointerup",vz,i),null==(n=Uu(this,Oe))||n.call(this)}if(vz(t),2!==t.touches.length||(null==(i=Uu(this,Ie))?void 0:i.call(this)))return void $u(this,We,null);let[s,r]=t.touches;s.identifier>r.identifier&&([s,r]=[r,s]),$u(this,We,{touch0X:s.screenX,touch0Y:s.screenY,touch1X:r.screenX,touch1Y:r.screenY})},Ve=function(t){var e;if(!Uu(this,We)||2!==t.touches.length)return;vz(t);let[n,i]=t.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:s,screenY:r}=n,{screenX:o,screenY:a}=i,l=Uu(this,We),{touch0X:h,touch0Y:c,touch1X:u,touch1Y:d}=l,p=u-h,f=d-c,m=o-s,g=a-r,y=Math.hypot(m,g)||1,v=Math.hypot(p,f)||1;if(!Uu(this,Re)&&Math.abs(v-y)<=Jz.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,!Uu(this,Re))return void $u(this,Re,!0);const _=[(s+o)/2,(r+a)/2];null==(e=Uu(this,Ne))||e.call(this,_,v,y)},qe=function(t){var e;t.touches.length>=2||(Uu(this,Ue)&&(Uu(this,Ue).abort(),$u(this,Ue,null),null==(e=Uu(this,Fe))||e.call(this)),Uu(this,We)&&(vz(t),$u(this,We,null),$u(this,Re,!1)))};let tW=Jz;const eW=class t{constructor(e){Hu(this,bn),Hu(this,Ge,null),Hu(this,Ze,null),Hu(this,Ke,null),Hu(this,Xe,null),Hu(this,Ye,null),Hu(this,Qe,!1),Hu(this,Je,null),Hu(this,tn,""),Hu(this,en,null),Hu(this,nn,null),Hu(this,sn,null),Hu(this,rn,null),Hu(this,on,null),Hu(this,an,""),Hu(this,ln,!1),Hu(this,hn,null),Hu(this,cn,!1),Hu(this,un,!1),Hu(this,dn,!1),Hu(this,pn,null),Hu(this,fn,0),Hu(this,mn,0),Hu(this,gn,null),Hu(this,yn,null),Wu(this,"isSelected",!1),Wu(this,"_isCopy",!1),Wu(this,"_editToolbar",null),Wu(this,"_initialOptions",Object.create(null)),Wu(this,"_initialData",null),Wu(this,"_isVisible",!0),Wu(this,"_uiManager",null),Wu(this,"_focusEventsAllowed",!0),Hu(this,vn,!1),Hu(this,_n,t._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:n,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=t.prototype._resizeWithKeyboard,n=Kz.TRANSLATE_SMALL,i=Kz.TRANSLATE_BIG;return FB(this,"_resizerKeyboardManager",new Vz([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],t.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return FB(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new iW({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(e,n){if(t._l10n??(t._l10n=e),t._l10nResizer||(t._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==t._borderLineWidth)return;const i=getComputedStyle(document.documentElement);t._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){IB("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Uu(this,vn)}set _isDraggable(t){$u(this,vn,t),this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Uu(this,_n)}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(Vu(this,bn,Wn).call(this),Uu(this,rn)?.remove(),$u(this,rn,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(Uu(this,ln)?$u(this,ln,!1):this.parent.setSelected(this))}focusout(t){if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const e=t.relatedTarget;e?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[s,r]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/s,this.y=(e+i)/r,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){Vu(this,bn,wn).call(this,this.parentDimensions,t,e)}translateInPage(t,e){Uu(this,hn)||$u(this,hn,[this.x,this.y,this.width,this.height]),Vu(this,bn,wn).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){Uu(this,hn)||$u(this,hn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,s]}=this;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[a,l]=this.getBaseTranslation();r+=a,o+=l;const{style:h}=n;h.left=`${(100*r).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(r,o),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!Uu(this,hn)&&(Uu(this,hn)[0]!==this.x||Uu(this,hn)[1]!==this.y)}get _hasBeenResized(){return!!Uu(this,hn)&&(Uu(this,hn)[2]!==this.width||Uu(this,hn)[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:i}=t,s=i/e,r=i/n;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:s,y:r,width:o,height:a}=this;if(o*=n,a*=i,s*=n,r*=i,this._mustFixPosition)switch(t){case 0:s=ez(s,0,n-o),r=ez(r,0,i-a);break;case 90:s=ez(s,0,n-a),r=ez(r,o,i);break;case 180:s=ez(s,o,n),r=ez(r,a,i);break;case 270:s=ez(s,a,n),r=ez(r,0,i-o)}this.x=s/=n,this.y=r/=i;const[l,h]=this.getBaseTranslation();s+=l,r+=h,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,n){var i;return Vu(i=t,xn,Sn).call(i,e,n,this.parentRotation)}pageTranslationToScreen(e,n){var i;return Vu(i=t,xn,Sn).call(i,e,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(1e4*t)/1e4}_onResizing(){}altTextFinish(){Uu(this,Ke)?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Uu(this,un))return this._editToolbar;this._editToolbar=new Bz(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,Uu(this,Ke)?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Uu(this,Ke)||(Yz.initialize(t._l10n),$u(this,Ke,new Yz(this)),Uu(this,Ge)&&(Uu(this,Ke).data=Uu(this,Ge),$u(this,Ge,null))),Uu(this,Ke)}get altTextData(){return Uu(this,Ke)?.data}set altTextData(t){Uu(this,Ke)&&(Uu(this,Ke).data=t)}get guessedAltText(){return Uu(this,Ke)?.guessedText}async setGuessedAltText(t){await(Uu(this,Ke)?.setGuessedText(t))}serializeAltText(t){return Uu(this,Ke)?.serialize(t)}hasAltText(){return!!Uu(this,Ke)&&!Uu(this,Ke).isEmpty()}hasAltTextData(){return Uu(this,Ke)?.hasData()??!1}focusCommentButton(){Uu(this,Xe)?.focusButton()}addCommentButton(){return Uu(this,Xe)||$u(this,Xe,new Qz(this))}addStandaloneCommentButton(){Uu(this,Ye)?this._uiManager.isEditingMode()&&Uu(this,Ye).classList.remove("hidden"):this.hasComment&&($u(this,Ye,Uu(this,Xe).renderForStandalone()),this.div.append(Uu(this,Ye)))}removeStandaloneCommentButton(){Uu(this,Xe).removeStandaloneCommentButton(),$u(this,Ye,null)}hideStandaloneCommentButton(){Uu(this,Ye)?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:i}}=Uu(this,Xe);return{text:e,richText:t,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){Uu(this,Xe)||$u(this,Xe,new Qz(this)),Uu(this,Xe).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e)return;if(Uu(this,Xe)||$u(this,Xe,new Qz(this)),Uu(this,Xe).setInitialText(t,n),!this.annotationElementId)return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return Uu(this,Xe)?.hasBeenEdited()}get hasDeletedComment(){return Uu(this,Xe)?.isDeleted()}get hasComment(){return!!Uu(this,Xe)&&!Uu(this,Xe).isEmpty()&&!Uu(this,Xe).isDeleted()}async editComment(t){Uu(this,Xe)||$u(this,Xe,new Qz(this)),Uu(this,Xe).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){Uu(this,Xe).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const e=180,n=100,[,,,i]=t.rect,[s]=this.pageDimensions,[r]=this.pageTranslation,o=r+s+1,a=i-n,l=o+e;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,a,l,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){Uu(this,Xe).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=Uu(this,Qe)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),Vu(this,bn,On).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!=0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Wz(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Uu(this,yn)||$u(this,yn,new tW({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:Vu(this,bn,Tn).bind(this),onPinching:Vu(this,bn,Ln).bind(this),onPinchEnd:Vu(this,bn,Rn).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}pointerdown(t){const{isMac:e}=GB.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():($u(this,ln,!0),this._isDraggable?Vu(this,bn,Dn).call(this,t):Vu(this,bn,In).call(this,t))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Uu(this,pn)&&clearTimeout(Uu(this,pn)),$u(this,pn,setTimeout(()=>{$u(this,pn,null),this.parent?.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[s,r]=this.pageDimensions,[o,a]=this.pageTranslation,l=t/i,h=e/i,c=this.x*s,u=this.y*r,d=this.width*s,p=this.height*r;switch(n){case 0:return[c+l+o,r-u-h-p+a,c+l+d+o,r-u-h+a];case 90:return[c+h+o,r-u+l+a,c+h+p+o,r-u+l+d+a];case 180:return[c-l-d+o,r-u+h+a,c-l+o,r-u+h+p+a];case 270:return[c-h-p+o,r-u-l-d+a,c-h+o,r-u-l+a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,s,r]=t,o=s-n,a=r-i;switch(this.rotation){case 0:return[n,e-r,o,a];case 90:return[n,e-i,a,o];case 180:return[s,e-i,o,a];case 270:return[s,e-r,a,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&t._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){Uu(this,Xe)?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:s,richText:r},uid:o,pageIndex:a,creationDate:l,modificationDate:h}=this;return{id:o,pageIndex:a,rect:this.getPDFRect(),richText:r,contentsObj:{str:t},creationDate:l,modificationDate:n||h,popupRef:!s,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),$u(this,un,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),$u(this,un,!1),!0)}isInEditMode(){return Uu(this,un)}shouldGetKeyboardEvents(){return Uu(this,dn)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:r}=window;return e<r&&i>0&&t<s&&n>0}rebuild(){Vu(this,bn,On).call(this)}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,$u(i,Ge,t.accessibilityData),i._isCopy=t.isCopy||!1;const[s,r]=i.pageDimensions,[o,a,l,h]=i.getRectInCurrentCoords(t.rect,r);return i.x=o/s,i.y=a/r,i.width=l/s,i.height=h/r,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(Uu(this,on)?.abort(),$u(this,on,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Uu(this,pn)&&(clearTimeout(Uu(this,pn)),$u(this,pn,null)),Vu(this,bn,Wn).call(this),this.removeEditToolbar(),Uu(this,gn)){for(const t of Uu(this,gn).values())clearTimeout(t);$u(this,gn,null)}this.parent=null,Uu(this,yn)?.destroy(),$u(this,yn,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Vu(this,bn,kn).call(this),Uu(this,en).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return"ltr"===this._uiManager.direction?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[i,s,r,o]=this.getPDFRect();return[t._round(i+(r-i)*e),t._round(s+(o-s)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return Uu(this,Xe).commentPopupPositionInLayer}set commentPopupPosition(t){Uu(this,Xe).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return Uu(this,Xe).hasDefaultPopupPosition()}get commentButtonWidth(){return Uu(this,Xe).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){Uu(this,Xe).setCommentButtonStates(t)}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),$u(this,sn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=Uu(this,en).children;if(!Uu(this,Ze)){$u(this,Ze,Array.from(n));const e=Vu(this,bn,Nn).bind(this),i=Vu(this,bn,Fn).bind(this),s=this._uiManager._signal;for(const n of Uu(this,Ze)){const r=n.getAttribute("data-resizer-name");n.setAttribute("role","spinbutton"),n.addEventListener("keydown",e,{signal:s}),n.addEventListener("blur",i,{signal:s}),n.addEventListener("focus",Vu(this,bn,Bn).bind(this,r),{signal:s}),n.setAttribute("data-l10n-id",t._l10nResizer[r])}}const i=Uu(this,Ze)[0];let s=0;for(const t of n){if(t===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(Uu(this,Ze).length/4);if(r!==s){if(r<s)for(let t=0;t<s-r;t++)Uu(this,en).append(Uu(this,en).firstChild);else if(r>s)for(let t=0;t<r-s;t++)Uu(this,en).firstChild.before(Uu(this,en).lastChild);let e=0;for(const i of n){const n=Uu(this,Ze)[e++].getAttribute("data-resizer-name");i.setAttribute("data-l10n-id",t._l10nResizer[n])}}Vu(this,bn,zn).call(this,0),$u(this,dn,!0),Uu(this,en).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(t,e){Uu(this,dn)&&Vu(this,bn,Mn).call(this,Uu(this,an),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){Vu(this,bn,Wn).call(this),this.div.focus()}select(){this.isSelected&&this._editToolbar?this._editToolbar.show():(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),Uu(this,Ke)?.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()}))}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,Uu(this,en)?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),Uu(this,Ke)?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){"BUTTON"!==t.target.nodeName&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Uu(this,cn)}set isEditing(t){$u(this,cn,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){Uu(this,gn)||$u(this,gn,new Map);const{action:n}=e;let i=Uu(this,gn).get(n);return i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),Uu(this,gn).delete(n),0===Uu(this,gn).size&&$u(this,gn,null)},t._telemetryTimeout),void Uu(this,gn).set(n,i)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),$u(this,Qe,!1)}disable(){this.div&&(this.div.tabIndex=-1),$u(this,Qe,!0)}updateFakeAnnotationElement(t){if(Uu(this,rn)||this.deleted)return this.deleted?(Uu(this,rn).remove(),void $u(this,rn,null)):void((this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&Uu(this,rn).updateEdited({rect:this.getPDFRect(),popup:this.comment}));$u(this,rn,t.addFakeAnnotation(this))}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===e?.nodeName&&e.classList.contains("annotationContent")&&e.remove()}};Ge=new WeakMap,Ze=new WeakMap,Ke=new WeakMap,Xe=new WeakMap,Ye=new WeakMap,Qe=new WeakMap,Je=new WeakMap,tn=new WeakMap,en=new WeakMap,nn=new WeakMap,sn=new WeakMap,rn=new WeakMap,on=new WeakMap,an=new WeakMap,ln=new WeakMap,hn=new WeakMap,cn=new WeakMap,un=new WeakMap,dn=new WeakMap,pn=new WeakMap,fn=new WeakMap,mn=new WeakMap,gn=new WeakMap,yn=new WeakMap,vn=new WeakMap,_n=new WeakMap,bn=new WeakSet,wn=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},xn=new WeakSet,Sn=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},An=function(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}},kn=function(){if(Uu(this,en))return;$u(this,en,document.createElement("div")),Uu(this,en).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const t=document.createElement("div");Uu(this,en).append(t),t.classList.add("resizer",n),t.setAttribute("data-resizer-name",n),t.addEventListener("pointerdown",Vu(this,bn,Pn).bind(this,n),{signal:e}),t.addEventListener("contextmenu",yz,{signal:e}),t.tabIndex=-1}this.div.prepend(Uu(this,en))},Pn=function(t,e){e.preventDefault();const{isMac:n}=GB.platform;if(0!==e.button||e.ctrlKey&&n)return;Uu(this,Ke)?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,$u(this,nn,[e.screenX,e.screenY]);const s=new AbortController,r=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Vu(this,bn,Mn).bind(this,t),{passive:!0,capture:!0,signal:r}),window.addEventListener("touchmove",vz,{passive:!1,signal:r}),window.addEventListener("contextmenu",yz,{signal:r}),$u(this,sn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,a=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const l=()=>{s.abort(),this.parent.togglePointerEvents(!0),Uu(this,Ke)?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=a,Vu(this,bn,Cn).call(this)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},En=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Cn=function(){if(!Uu(this,sn))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=Uu(this,sn);$u(this,sn,null);const s=this.x,r=this.y,o=this.width,a=this.height;s===t&&r===e&&o===n&&a===i||this.addCommands({cmd:Vu(this,bn,En).bind(this,s,r,o,a),undo:Vu(this,bn,En).bind(this,t,e,n,i),mustExec:!0})},Mn=function(t,e){const[n,i]=this.parentDimensions,s=this.x,r=this.y,o=this.width,a=this.height,l=eW.MIN_SIZE/n,h=eW.MIN_SIZE/i,c=Vu(this,bn,An).call(this,this.rotation),u=(t,e)=>[c[0]*t+c[2]*e,c[1]*t+c[3]*e],d=Vu(this,bn,An).call(this,360-this.rotation);let p,f,m=!1,g=!1;switch(t){case"topLeft":m=!0,p=(t,e)=>[0,0],f=(t,e)=>[t,e];break;case"topMiddle":p=(t,e)=>[t/2,0],f=(t,e)=>[t/2,e];break;case"topRight":m=!0,p=(t,e)=>[t,0],f=(t,e)=>[0,e];break;case"middleRight":g=!0,p=(t,e)=>[t,e/2],f=(t,e)=>[0,e/2];break;case"bottomRight":m=!0,p=(t,e)=>[t,e],f=(t,e)=>[0,0];break;case"bottomMiddle":p=(t,e)=>[t/2,e],f=(t,e)=>[t/2,0];break;case"bottomLeft":m=!0,p=(t,e)=>[0,e],f=(t,e)=>[t,0];break;case"middleLeft":g=!0,p=(t,e)=>[0,e/2],f=(t,e)=>[t,e/2]}const y=p(o,a),v=f(o,a);let _=u(...v);const b=eW._round(s+_[0]),w=eW._round(r+_[1]);let x,S,A=1,k=1;if(e.fromKeyboard)({deltaX:x,deltaY:S}=e);else{const{screenX:t,screenY:n}=e,[i,s]=Uu(this,nn);[x,S]=this.screenToPageTranslation(t-i,n-s),Uu(this,nn)[0]=t,Uu(this,nn)[1]=n}if([x,S]=((t,e)=>[d[0]*t+d[2]*e,d[1]*t+d[3]*e])(x/n,S/i),m){const t=Math.hypot(o,a);A=k=Math.max(Math.min(Math.hypot(v[0]-y[0]-x,v[1]-y[1]-S)/t,1/o,1/a),l/o,h/a)}else g?A=ez(Math.abs(v[0]-y[0]-x),l,1)/o:k=ez(Math.abs(v[1]-y[1]-S),h,1)/a;const P=eW._round(o*A),E=eW._round(a*k);_=u(...f(P,E));const C=b-_[0],M=w-_[1];Uu(this,hn)||$u(this,hn,[this.x,this.y,this.width,this.height]),this.width=P,this.height=E,this.x=C,this.y=M,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Tn=function(){$u(this,sn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),Uu(this,Ke)?.toggle(!1),this.parent.togglePointerEvents(!1)},Ln=function(t,e,n){let i=n/e*.7+1-.7;if(1===i)return;const s=Vu(this,bn,An).call(this,this.rotation),r=(t,e)=>[s[0]*t+s[2]*e,s[1]*t+s[3]*e],[o,a]=this.parentDimensions,l=this.x,h=this.y,c=this.width,u=this.height,d=eW.MIN_SIZE/o,p=eW.MIN_SIZE/a;i=Math.max(Math.min(i,1/c,1/u),d/c,p/u);const f=eW._round(c*i),m=eW._round(u*i);if(f===c&&m===u)return;Uu(this,hn)||$u(this,hn,[l,h,c,u]);const g=r(c/2,u/2),y=eW._round(l+g[0]),v=eW._round(h+g[1]),_=r(f/2,m/2);this.x=y-_[0],this.y=v-_[1],this.width=f,this.height=m,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Rn=function(){Uu(this,Ke)?.toggle(!0),this.parent.togglePointerEvents(!0),Vu(this,bn,Cn).call(this)},In=function(t){const{isMac:e}=GB.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Dn=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),r={capture:!0,passive:!1,signal:s},o=t=>{i.abort(),$u(this,Je,null),$u(this,ln,!1),this._uiManager.endDragSession()||Vu(this,bn,In).call(this,t),n&&this._onStopDragging()};e&&($u(this,fn,t.clientX),$u(this,mn,t.clientY),$u(this,Je,t.pointerId),$u(this,tn,t.pointerType),window.addEventListener("pointermove",t=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:e,clientY:i,pointerId:s}=t;if(s!==Uu(this,Je))return void vz(t);const[r,o]=this.screenToPageTranslation(e-Uu(this,fn),i-Uu(this,mn));$u(this,fn,e),$u(this,mn,i),this._uiManager.dragSelectedEditors(r,o)},r),window.addEventListener("touchmove",vz,r),window.addEventListener("pointerdown",t=>{t.pointerType===Uu(this,tn)&&(Uu(this,yn)||t.isPrimary)&&o(t),vz(t)},r));const a=t=>{Uu(this,Je)&&Uu(this,Je)!==t.pointerId?vz(t):o(t)};window.addEventListener("pointerup",a,{signal:s}),window.addEventListener("blur",a,{signal:s})},On=function(){if(Uu(this,on)||!this.div)return;$u(this,on,new AbortController);const t=this._uiManager.combinedSignal(Uu(this,on));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Nn=function(t){eW._resizerKeyboardManager.exec(this,t)},Fn=function(t){Uu(this,dn)&&t.relatedTarget?.parentNode!==Uu(this,en)&&Vu(this,bn,Wn).call(this)},Bn=function(t){$u(this,an,Uu(this,dn)?t:"")},zn=function(t){if(Uu(this,Ze))for(const e of Uu(this,Ze))e.tabIndex=t},Wn=function(){$u(this,dn,!1),Vu(this,bn,zn).call(this,-1),Vu(this,bn,Cn).call(this)},Hu(eW,xn),Wu(eW,"_l10n",null),Wu(eW,"_l10nResizer",null),Wu(eW,"_borderLineWidth",-1),Wu(eW,"_colorManager",new Gz),Wu(eW,"_zIndex",1),Wu(eW,"_telemetryTimeout",1e3);let nW=eW;class iW extends nW{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const sW=3285377520,rW=4294901760,oW=65535;class aW{constructor(t){this.h1=t?4294967295&t:sW,this.h2=t?4294967295&t:sW}update(t){let e,n;if("string"==typeof t){e=new Uint8Array(2*t.length),n=0;for(let i=0,s=t.length;i<s;i++){const s=t.charCodeAt(i);s<=255?e[n++]=s:(e[n++]=s>>>8,e[n++]=255&s)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),n=e.byteLength}const i=n>>2,s=n-4*i,r=new Uint32Array(e.buffer,0,i);let o=0,a=0,l=this.h1,h=this.h2;const c=3432918353,u=461845907,d=11601,p=13715;for(let f=0;f<i;f++)1&f?(o=r[f],o=o*c&rW|o*d&oW,o=o<<15|o>>>17,o=o*u&rW|o*p&oW,l^=o,l=l<<13|l>>>19,l=5*l+3864292196):(a=r[f],a=a*c&rW|a*d&oW,a=a<<15|a>>>17,a=a*u&rW|a*p&oW,h^=a,h=h<<13|h>>>19,h=5*h+3864292196);switch(o=0,s){case 3:o^=e[4*i+2]<<16;case 2:o^=e[4*i+1]<<8;case 1:o^=e[4*i],o=o*c&rW|o*d&oW,o=o<<15|o>>>17,o=o*u&rW|o*p&oW,1&i?l^=o:h^=o}this.h1=l,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&rW|36045*t&oW,e=4283543511*e&rW|(2950163797*(e<<16|t>>>16)&rW)>>>16,t^=e>>>1,t=444984403*t&rW|60499*t&oW,e=3301882366*e&rW|(3120437893*(e<<16|t>>>16)&rW)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const lW=Object.freeze({map:null,hash:"",transfer:void 0});class hW{constructor(){Hu(this,Vn),Hu(this,jn,!1),Hu(this,Un,null),Hu(this,Hn,null),Hu(this,$n,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=Uu(this,$n).get(t);return void 0===n?e:Object.assign(e,n)}getRawValue(t){return Uu(this,$n).get(t)}remove(t){const e=Uu(this,$n).get(t);if(void 0!==e&&(e instanceof nW&&Uu(this,Hn).delete(e.annotationElementId),Uu(this,$n).delete(t),0===Uu(this,$n).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor)){for(const t of Uu(this,$n).values())if(t instanceof nW)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=Uu(this,$n).get(t);let i=!1;if(void 0!==n)for(const[s,r]of Object.entries(e))n[s]!==r&&(i=!0,n[s]=r);else i=!0,Uu(this,$n).set(t,e);i&&Vu(this,Vn,qn).call(this),e instanceof nW&&((Uu(this,Hn)||$u(this,Hn,new Map)).set(e.annotationElementId,e),"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type))}has(t){return Uu(this,$n).has(t)}get size(){return Uu(this,$n).size}resetModified(){Uu(this,jn)&&($u(this,jn,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new cW(this)}get serializable(){if(0===Uu(this,$n).size)return lW;const t=new Map,e=new aW,n=[],i=Object.create(null);let s=!1;for(const[r,o]of Uu(this,$n)){const n=o instanceof nW?o.serialize(!1,i):o;n&&(t.set(r,n),e.update(`${r}:${JSON.stringify(n)}`),s||(s=!!n.bitmap))}if(s)for(const r of t.values())r.bitmap&&n.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:lW}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const s of Uu(this,$n).values()){if(!(s instanceof nW)){s.popup&&(s.popup.deleted?i+=1:n+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(n+=1);const r=s.telemetryFinalData;if(!r)continue;const{type:o}=r;e.has(o)||e.set(o,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const a=t[o]||(t[o]=new Map);for(const[t,e]of Object.entries(r)){if("type"===t)continue;let n=a.get(t);n||(n=new Map,a.set(t,n));const i=n.get(e)??0;n.set(e,i+1)}}if((i>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:i,edited:n}),!t)return null;for(const[s,r]of e)t[s]=r.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){$u(this,Un,null)}updateEditor(t,e){const n=Uu(this,Hn)?.get(t);return!!n&&(n.updateFromAnnotationLayer(e),!0)}getEditor(t){return Uu(this,Hn)?.get(t)||null}get modifiedIds(){if(Uu(this,Un))return Uu(this,Un);const t=[];if(Uu(this,Hn))for(const e of Uu(this,Hn).values())e.serialize()&&t.push(e.annotationElementId);return $u(this,Un,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return Uu(this,$n).entries()}}jn=new WeakMap,Un=new WeakMap,Hn=new WeakMap,$n=new WeakMap,Vn=new WeakSet,qn=function(){Uu(this,jn)||($u(this,jn,!0),"function"==typeof this.onSetModified&&this.onSetModified())};class cW extends hW{constructor(t){super(),Hu(this,Gn);const{map:e,hash:n,transfer:i}=t.serializable,s=structuredClone(e,i?{transfer:i}:null);$u(this,Gn,{map:s,hash:n,transfer:i})}get print(){IB("Should not call PrintAnnotationStorage.print")}get serializable(){return Uu(this,Gn)}get modifiedIds(){return FB(this,"modifiedIds",{ids:new Set,hash:""})}}Gn=new WeakMap;class uW{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){Hu(this,Zn,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),Uu(this,Zn).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(t&&!Uu(this,Zn).has(t.loadedName)){if(DB(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:i,style:s}=t,r=new FontFace(e,i,s);this.addNativeFontFace(r);try{await r.load(),Uu(this,Zn).add(e),n?.(t)}catch{t.baseFontName,this.removeNativeFontFace(r)}return}IB("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void(await this.loadSystemFont(t));if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(n){throw e.family,t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(e=>{const n=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){return FB(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){return FB(this,"isSyncFontLoadingSupported",yB||GB.platform.isFirefox)}_queueLoadingCallback(t){const{loadingRequests:e}=this,n={done:!1,complete:function(){for(DB(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(n),n}get _loadTestFont(){return FB(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}let s,r;const o=this._document.createElement("canvas");o.width=1,o.height=1;const a=o.getContext("2d");let l=0;const h=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=i(c,976,h.length,h);const u=1482184792;let d=n(c,16);for(s=0,r=h.length-3;s<r;s+=4)d=d-u+n(h,s)|0;var p;s<h.length&&(d=d-u+n(h+"XXX",s)|0),c=i(c,16,4,(p=d,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f=`@font-face {font-family:"${h}";src:url(data:font/opentype;base64,${btoa(c)});}`;this.insertRule(f);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const g of[t.loadedName,h]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=g,m.append(t)}this._document.body.append(m),function t(e,n){++l>30?n():(a.font="30px "+e,a.fillText(".",0,20),a.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n)))}(h,()=>{m.remove(),e.complete()})}}Zn=new WeakMap;class dW{constructor(t,e=null,n,i){Hu(this,Kn),this.compiledGlyphs=Object.create(null),$u(this,Kn,t),this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${nz(this.data)});`;let e;if(this.cssFontInfo){let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}else e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(r){}const s=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=s}get black(){return Uu(this,Kn).black}get bold(){return Uu(this,Kn).bold}get disableFontFace(){return Uu(this,Kn).disableFontFace??!1}get fontExtraProperties(){return Uu(this,Kn).fontExtraProperties??!1}get isInvalidPDFjsFont(){return Uu(this,Kn).isInvalidPDFjsFont}get isType3Font(){return Uu(this,Kn).isType3Font}get italic(){return Uu(this,Kn).italic}get missingFile(){return Uu(this,Kn).missingFile}get remeasure(){return Uu(this,Kn).remeasure}get vertical(){return Uu(this,Kn).vertical}get ascent(){return Uu(this,Kn).ascent}get defaultWidth(){return Uu(this,Kn).defaultWidth}get descent(){return Uu(this,Kn).descent}get bbox(){return Uu(this,Kn).bbox}get fontMatrix(){return Uu(this,Kn).fontMatrix}get fallbackName(){return Uu(this,Kn).fallbackName}get loadedName(){return Uu(this,Kn).loadedName}get mimetype(){return Uu(this,Kn).mimetype}get name(){return Uu(this,Kn).name}get data(){return Uu(this,Kn).data}clearData(){Uu(this,Kn).clearData()}get cssFontInfo(){return Uu(this,Kn).cssFontInfo}get systemFontInfo(){return Uu(this,Kn).systemFontInfo}get defaultVMetrics(){return Uu(this,Kn).defaultVMetrics}}function pW(t){if("string"!=typeof t)return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}Kn=new WeakMap;const fW=t=>"object"==typeof t&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0,mW=function(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,s,...r]=n;if(!t(i)&&!Number.isInteger(i))return!1;if(!e(s))return!1;const o=r.length;let a=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return 0===o;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(4!==o)return!1;a=!1;break;default:return!1}for(const l of r)if(!("number"==typeof l||a&&null===l))return!1;return!0}.bind(null,fW,t=>"object"==typeof t&&"string"==typeof t?.name);class gW{constructor(){Hu(this,Xn,new Map),Hu(this,Yn,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};Uu(this,Yn).then(()=>{for(const[t]of Uu(this,Xn))t.call(this,n)})}addEventListener(t,e,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:s}=n;if(s.aborted)return;const r=()=>this.removeEventListener(t,e);i=()=>s.removeEventListener("abort",r),s.addEventListener("abort",r)}Uu(this,Xn).set(e,i)}removeEventListener(t,e){const n=Uu(this,Xn).get(e);n?.(),Uu(this,Xn).delete(e)}terminate(){for(const[,t]of Uu(this,Xn))t?.();Uu(this,Xn).clear()}}Xn=new WeakMap,Yn=new WeakMap;function yW(){}function vW(t){if(t instanceof $B||t instanceof jB||t instanceof zB||t instanceof UB||t instanceof WB)return t;switch(t instanceof Error||"object"==typeof t&&null!==t||IB('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new $B(t.message);case"InvalidPDFException":return new jB(t.message);case"PasswordException":return new zB(t.message,t.code);case"ResponseException":return new UB(t.message,t.status,t.missing);case"UnknownErrorException":return new WB(t.message,t.details)}return new WB(t.message,t.toString())}class _W{constructor(t,e,n){Hu(this,Jn),Hu(this,Qn,new AbortController),this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",Vu(this,Jn,ti).bind(this),{signal:Uu(this,Qn).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(r){s.reject(r)}return s.promise}sendWithStream(t,e,n,i){const s=this.streamId++,r=this.sourceName,o=this.targetName,a=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},a.postMessage({sourceName:r,targetName:o,action:t,streamId:s,data:e,desiredSize:n.desiredSize},i),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[s].pullCall=e,a.postMessage({sourceName:r,targetName:o,stream:6,streamId:s,desiredSize:t.desiredSize}),e.promise},cancel:t=>{DB(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[s].cancelCall=e,this.streamControllers[s].isClosed=!0,a.postMessage({sourceName:r,targetName:o,stream:1,streamId:s,reason:vW(t)}),e.promise}},n)}destroy(){Uu(this,Qn)?.abort(),$u(this,Qn,null)}}Qn=new WeakMap,Jn=new WeakSet,ti=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream)return void Vu(this,Jn,ni).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],1===t.callback)n.resolve(t.data);else{if(2!==t.callback)throw new Error("Unexpected callback case");n.reject(vW(t.reason))}return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,s=this.comObj;return void Promise.try(e,t.data).then(function(e){s.postMessage({sourceName:n,targetName:i,callback:1,callbackId:t.callbackId,data:e})},function(e){s.postMessage({sourceName:n,targetName:i,callback:2,callbackId:t.callbackId,reason:vW(e)})})}t.streamId?Vu(this,Jn,ei).call(this,t):e(t.data)},ei=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,r=this,o=this.actionHandler[t.action],a={enqueue(t,r=1,o){if(this.isCancelled)return;const a=this.desiredSize;this.desiredSize-=r,a>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:4,streamId:e,chunk:t},o)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:3,streamId:e}),delete r.streamSinks[e])},error(t){DB(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:5,streamId:e,reason:vW(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};a.sinkCapability.resolve(),a.ready=a.sinkCapability.promise,this.streamSinks[e]=a,Promise.try(o,t.data,a).then(function(){s.postMessage({sourceName:n,targetName:i,stream:8,streamId:e,success:!0})},function(t){s.postMessage({sourceName:n,targetName:i,stream:8,streamId:e,reason:vW(t)})})},ni=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,r=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case 8:t.success?r.startCall.resolve():r.startCall.reject(vW(t.reason));break;case 7:t.success?r.pullCall.resolve():r.pullCall.reject(vW(t.reason));break;case 6:if(!o){s.postMessage({sourceName:n,targetName:i,stream:7,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||yW).then(function(){s.postMessage({sourceName:n,targetName:i,stream:7,streamId:e,success:!0})},function(t){s.postMessage({sourceName:n,targetName:i,stream:7,streamId:e,reason:vW(t)})});break;case 4:if(DB(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case 3:if(DB(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),Vu(this,Jn,ii).call(this,r,e);break;case 5:DB(r,"error should have stream controller"),r.controller.error(vW(t.reason)),Vu(this,Jn,ii).call(this,r,e);break;case 2:t.success?r.cancelCall.resolve():r.cancelCall.reject(vW(t.reason)),Vu(this,Jn,ii).call(this,r,e);break;case 1:if(!o)break;const a=vW(t.reason);Promise.try(o.onCancel||yW,a).then(function(){s.postMessage({sourceName:n,targetName:i,stream:2,streamId:e,success:!0})},function(t){s.postMessage({sourceName:n,targetName:i,stream:2,streamId:e,reason:vW(t)})}),o.sinkCapability.reject(a),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},ii=async function(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]};class bW{constructor({enableHWA:t=!1}){Hu(this,si,!1),$u(this,si,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!Uu(this,si)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){IB("Abstract method `_createCanvas` called.")}}si=new WeakMap;class wW extends bW{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class xW{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(t=>({cMapData:t,isCompressed:this.isCompressed})).catch(t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){IB("Abstract method `_fetch` called.")}}class SW extends xW{async _fetch(t){const e=await lz(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):qB(e)}}class AW{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,s){return"none"}destroy(t=!1){}}class kW extends AW{constructor({docId:t,ownerDocument:e=globalThis.document}){super(),Hu(this,di),Hu(this,ri),Hu(this,oi),Hu(this,ai),Hu(this,li),Hu(this,hi),Hu(this,ci),Hu(this,ui,0),$u(this,li,t),$u(this,hi,e)}addFilter(t){if(!t)return"none";let e=Uu(this,di,pi).get(t);if(e)return e;const[n,i,s]=Vu(this,di,gi).call(this,t),r=1===t.length?n:`${n}${i}${s}`;if(e=Uu(this,di,pi).get(r),e)return Uu(this,di,pi).set(t,e),e;const o=`g_${Uu(this,li)}_transfer_map_${qu(this,ui)._++}`,a=Vu(this,di,yi).call(this,o);Uu(this,di,pi).set(t,a),Uu(this,di,pi).set(r,a);const l=Vu(this,di,bi).call(this,o);return Vu(this,di,xi).call(this,n,i,s,l),a}addHCMFilter(t,e){const n=`${t}-${e}`,i="base";let s=Uu(this,di,fi).get(i);if(s?.key===n)return s.url;if(s?(s.filter?.remove(),s.key=n,s.url="none",s.filter=null):(s={key:n,url:"none",filter:null},Uu(this,di,fi).set(i,s)),!t||!e)return s.url;const r=Vu(this,di,Ai).call(this,t);t=KB.makeHexColor(...r);const o=Vu(this,di,Ai).call(this,e);if(e=KB.makeHexColor(...o),Uu(this,di,mi).style.color="","#000000"===t&&"#ffffff"===e||t===e)return s.url;const a=new Array(256);for(let d=0;d<=255;d++){const t=d/255;a[d]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const l=a.join(","),h=`g_${Uu(this,li)}_hcm_filter`,c=s.filter=Vu(this,di,bi).call(this,h);Vu(this,di,xi).call(this,l,l,l,c),Vu(this,di,_i).call(this,c);const u=(t,e)=>{const n=r[t]/255,i=o[t]/255,s=new Array(e+1);for(let r=0;r<=e;r++)s[r]=n+r/e*(i-n);return s.join(",")};return Vu(this,di,xi).call(this,u(0,5),u(1,5),u(2,5),c),s.url=Vu(this,di,yi).call(this,h),s.url}addAlphaFilter(t){let e=Uu(this,di,pi).get(t);if(e)return e;const[n]=Vu(this,di,gi).call(this,[t]),i=`alpha_${n}`;if(e=Uu(this,di,pi).get(i),e)return Uu(this,di,pi).set(t,e),e;const s=`g_${Uu(this,li)}_alpha_map_${qu(this,ui)._++}`,r=Vu(this,di,yi).call(this,s);Uu(this,di,pi).set(t,r),Uu(this,di,pi).set(i,r);const o=Vu(this,di,bi).call(this,s);return Vu(this,di,Si).call(this,n,o),r}addLuminosityFilter(t){let e,n,i=Uu(this,di,pi).get(t||"luminosity");if(i)return i;if(t?([e]=Vu(this,di,gi).call(this,[t]),n=`luminosity_${e}`):n="luminosity",i=Uu(this,di,pi).get(n),i)return Uu(this,di,pi).set(t,i),i;const s=`g_${Uu(this,li)}_luminosity_map_${qu(this,ui)._++}`,r=Vu(this,di,yi).call(this,s);Uu(this,di,pi).set(t,r),Uu(this,di,pi).set(n,r);const o=Vu(this,di,bi).call(this,s);return Vu(this,di,vi).call(this,o),t&&Vu(this,di,Si).call(this,e,o),r}addHighlightHCMFilter(t,e,n,i,s){const r=`${e}-${n}-${i}-${s}`;let o=Uu(this,di,fi).get(t);if(o?.key===r)return o.url;if(o?(o.filter?.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},Uu(this,di,fi).set(t,o)),!e||!n)return o.url;const[a,l]=[e,n].map(Vu(this,di,Ai).bind(this));let h=Math.round(.2126*a[0]+.7152*a[1]+.0722*a[2]),c=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),[u,d]=[i,s].map(Vu(this,di,Ai).bind(this));c<h&&([h,c,u,d]=[c,h,d,u]),Uu(this,di,mi).style.color="";const p=(t,e,n)=>{const i=new Array(256),s=(c-h)/n,r=t/255,o=(e-t)/(255*n);let a=0;for(let l=0;l<=n;l++){const t=Math.round(h+l*s),e=r+l*o;for(let n=a;n<=t;n++)i[n]=e;a=t+1}for(let l=a;l<256;l++)i[l]=i[a-1];return i.join(",")},f=`g_${Uu(this,li)}_hcm_${t}_filter`,m=o.filter=Vu(this,di,bi).call(this,f);return Vu(this,di,_i).call(this,m),Vu(this,di,xi).call(this,p(u[0],d[0],5),p(u[1],d[1],5),p(u[2],d[2],5),m),o.url=Vu(this,di,yi).call(this,f),o.url}destroy(t=!1){t&&Uu(this,ci)?.size||(Uu(this,ai)?.parentNode.parentNode.remove(),$u(this,ai,null),Uu(this,oi)?.clear(),$u(this,oi,null),Uu(this,ci)?.clear(),$u(this,ci,null),$u(this,ui,0))}}ri=new WeakMap,oi=new WeakMap,ai=new WeakMap,li=new WeakMap,hi=new WeakMap,ci=new WeakMap,ui=new WeakMap,di=new WeakSet,pi=function(){return Uu(this,oi)||$u(this,oi,new Map)},fi=function(){return Uu(this,ci)||$u(this,ci,new Map)},mi=function(){if(!Uu(this,ai)){const t=Uu(this,hi).createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=Uu(this,hi).createElementNS(rz,"svg");n.setAttribute("width",0),n.setAttribute("height",0),$u(this,ai,Uu(this,hi).createElementNS(rz,"defs")),t.append(n),n.append(Uu(this,ai)),Uu(this,hi).body.append(t)}return Uu(this,ai)},gi=function(t){if(1===t.length){const e=t[0],n=new Array(256);for(let t=0;t<256;t++)n[t]=e[t]/255;const i=n.join(",");return[i,i,i]}const[e,n,i]=t,s=new Array(256),r=new Array(256),o=new Array(256);for(let a=0;a<256;a++)s[a]=e[a]/255,r[a]=n[a]/255,o[a]=i[a]/255;return[s.join(","),r.join(","),o.join(",")]},yi=function(t){if(void 0===Uu(this,ri)){$u(this,ri,"");const t=Uu(this,hi).URL;t!==Uu(this,hi).baseURI&&(uz(t)||$u(this,ri,NB(t,"")))}return`url(${Uu(this,ri)}#${t})`},vi=function(t){const e=Uu(this,hi).createElementNS(rz,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)},_i=function(t){const e=Uu(this,hi).createElementNS(rz,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)},bi=function(t){const e=Uu(this,hi).createElementNS(rz,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),Uu(this,di,mi).append(e),e},wi=function(t,e,n){const i=Uu(this,hi).createElementNS(rz,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)},xi=function(t,e,n,i){const s=Uu(this,hi).createElementNS(rz,"feComponentTransfer");i.append(s),Vu(this,di,wi).call(this,s,"feFuncR",t),Vu(this,di,wi).call(this,s,"feFuncG",e),Vu(this,di,wi).call(this,s,"feFuncB",n)},Si=function(t,e){const n=Uu(this,hi).createElementNS(rz,"feComponentTransfer");e.append(n),Vu(this,di,wi).call(this,n,"feFuncA",t)},Ai=function(t){return Uu(this,di,mi).style.color=t,wz(getComputedStyle(Uu(this,di,mi)).getPropertyValue("color"))};class PW{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(t=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){IB("Abstract method `_fetch` called.")}}class EW extends PW{async _fetch(t){const e=await lz(t,"arraybuffer");return new Uint8Array(e)}}class CW{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(t=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){IB("Abstract method `_fetch` called.")}}class MW extends CW{async _fetch(t){const e=await lz(t,"arraybuffer");return new Uint8Array(e)}}async function TW(t){const e=process.getBuiltinModule("fs"),n=await e.promises.readFile(t);return new Uint8Array(n)}class LW extends AW{}class RW extends bW{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class IW extends xW{async _fetch(t){return TW(t)}}class DW extends PW{async _fetch(t){return TW(t)}}class OW extends CW{async _fetch(t){return TW(t)}}const NW="__forcedDependency",{floor:FW,ceil:BW}=Math;function zW(t,e,n,i,s,r){t[4*e+0]=Math.min(t[4*e+0],n),t[4*e+1]=Math.min(t[4*e+1],i),t[4*e+2]=Math.max(t[4*e+2],s),t[4*e+3]=Math.max(t[4*e+3],r)}const WW=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class jW{constructor(t,e){Hu(this,ki),Hu(this,Pi),$u(this,ki,t),$u(this,Pi,e)}get length(){return Uu(this,ki).length}isEmpty(t){return Uu(this,ki)[t]===WW}minX(t){return Uu(this,Pi)[4*t+0]/256}minY(t){return Uu(this,Pi)[4*t+1]/256}maxX(t){return(Uu(this,Pi)[4*t+2]+1)/256}maxY(t){return(Uu(this,Pi)[4*t+3]+1)/256}}ki=new WeakMap,Pi=new WeakMap;const UW=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};class HW{constructor(t,e,n=!1){Hu(this,$i),Hu(this,Ei,{__proto__:null}),Hu(this,Ci,{__proto__:null,transform:[],moveText:[],sameLineText:[],[NW]:[]}),Hu(this,Mi,new Map),Hu(this,Ti,[]),Hu(this,Li,[]),Hu(this,Ri,[[1,0,0,1,0,0]]),Hu(this,Ii,[-1/0,-1/0,1/0,1/0]),Hu(this,Di,new Float64Array([1/0,1/0,-1/0,-1/0])),Hu(this,Oi,-1),Hu(this,Ni,new Set),Hu(this,Fi,new Map),Hu(this,Bi,new Map),Hu(this,zi),Hu(this,Wi),Hu(this,ji),Hu(this,Ui),Hu(this,Hi),$u(this,zi,t.width),$u(this,Wi,t.height),Vu(this,$i,Vi).call(this,e),n&&$u(this,Hi,new Map)}growOperationsCount(t){t>=Uu(this,Ui).length&&Vu(this,$i,Vi).call(this,t,Uu(this,Ui))}save(t){return $u(this,Ei,{__proto__:Uu(this,Ei)}),$u(this,Ci,{__proto__:Uu(this,Ci),transform:{__proto__:Uu(this,Ci).transform},moveText:{__proto__:Uu(this,Ci).moveText},sameLineText:{__proto__:Uu(this,Ci).sameLineText},[NW]:{__proto__:Uu(this,Ci)[NW]}}),$u(this,Ii,{__proto__:Uu(this,Ii)}),Uu(this,Ti).push(t),this}restore(t){const e=Object.getPrototypeOf(Uu(this,Ei));if(null===e)return this;$u(this,Ei,e),$u(this,Ci,Object.getPrototypeOf(Uu(this,Ci))),$u(this,Ii,Object.getPrototypeOf(Uu(this,Ii)));const n=Uu(this,Ti).pop();return void 0!==n&&(UW(Uu(this,Hi),t)?.dependencies.add(n),Uu(this,Ui)[t]=Uu(this,Ui)[n]),this}recordOpenMarker(t){return Uu(this,Ti).push(t),this}getOpenMarker(){return 0===Uu(this,Ti).length?null:Uu(this,Ti).at(-1)}recordCloseMarker(t){const e=Uu(this,Ti).pop();return void 0!==e&&(UW(Uu(this,Hi),t)?.dependencies.add(e),Uu(this,Ui)[t]=Uu(this,Ui)[e]),this}beginMarkedContent(t){return Uu(this,Li).push(t),this}endMarkedContent(t){const e=Uu(this,Li).pop();return void 0!==e&&(UW(Uu(this,Hi),t)?.dependencies.add(e),Uu(this,Ui)[t]=Uu(this,Ui)[e]),this}pushBaseTransform(t){return Uu(this,Ri).push(KB.multiplyByDOMMatrix(Uu(this,Ri).at(-1),t.getTransform())),this}popBaseTransform(){return Uu(this,Ri).length>1&&Uu(this,Ri).pop(),this}recordSimpleData(t,e){return Uu(this,Ei)[t]=e,this}recordIncrementalData(t,e){return Uu(this,Ci)[t].push(e),this}resetIncrementalData(t,e){return Uu(this,Ci)[t].length=0,this}recordNamedData(t,e){return Uu(this,Mi).set(t,e),this}recordSimpleDataFromNamed(t,e,n){Uu(this,Ei)[t]=Uu(this,Mi).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(NW,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in Uu(this,Ei)&&this.recordFutureForcedDependency(e,Uu(this,Ei)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of Uu(this,Ni))this.recordFutureForcedDependency(NW,t);return this}resetBBox(t){return Uu(this,Oi)!==t&&($u(this,Oi,t),Uu(this,Di)[0]=1/0,Uu(this,Di)[1]=1/0,Uu(this,Di)[2]=-1/0,Uu(this,Di)[3]=-1/0),this}recordClipBox(t,e,n,i,s,r){const o=KB.multiplyByDOMMatrix(Uu(this,Ri).at(-1),e.getTransform()),a=[1/0,1/0,-1/0,-1/0];KB.axialAlignedBoundingBox([n,s,i,r],o,a);const l=KB.intersect(Uu(this,Ii),a);return l?(Uu(this,Ii)[0]=l[0],Uu(this,Ii)[1]=l[1],Uu(this,Ii)[2]=l[2],Uu(this,Ii)[3]=l[3]):(Uu(this,Ii)[0]=Uu(this,Ii)[1]=1/0,Uu(this,Ii)[2]=Uu(this,Ii)[3]=-1/0),this}recordBBox(t,e,n,i,s,r){const o=Uu(this,Ii);if(o[0]===1/0)return this;const a=KB.multiplyByDOMMatrix(Uu(this,Ri).at(-1),e.getTransform());if(o[0]===-1/0)return KB.axialAlignedBoundingBox([n,s,i,r],a,Uu(this,Di)),this;const l=[1/0,1/0,-1/0,-1/0];return KB.axialAlignedBoundingBox([n,s,i,r],a,l),Uu(this,Di)[0]=Math.min(Uu(this,Di)[0],Math.max(l[0],o[0])),Uu(this,Di)[1]=Math.min(Uu(this,Di)[1],Math.max(l[1],o[1])),Uu(this,Di)[2]=Math.max(Uu(this,Di)[2],Math.min(l[2],o[2])),Uu(this,Di)[3]=Math.max(Uu(this,Di)[3],Math.min(l[3],o[3])),this}recordCharacterBBox(t,e,n,i=1,s=0,r=0,o){const a=n.bbox;let l,h;if(a&&(l=a[2]!==a[0]&&a[3]!==a[1]&&Uu(this,Bi).get(n),!1!==l&&(h=[0,0,0,0],KB.axialAlignedBoundingBox(a,n.fontMatrix,h),1===i&&0===s&&0===r||KB.scaleMinMax([i,0,0,-i,s,r],h),l)))return this.recordBBox(t,e,h[0],h[2],h[1],h[3]);if(!o)return this.recordFullPageBBox(t);const c=o();return a&&h&&void 0===l&&(l=h[0]<=s-c.actualBoundingBoxLeft&&h[2]>=s+c.actualBoundingBoxRight&&h[1]<=r-c.actualBoundingBoxAscent&&h[3]>=r+c.actualBoundingBoxDescent,Uu(this,Bi).set(n,l),l)?this.recordBBox(t,e,h[0],h[2],h[1],h[3]):this.recordBBox(t,e,s-c.actualBoundingBoxLeft,s+c.actualBoundingBoxRight,r-c.actualBoundingBoxAscent,r+c.actualBoundingBoxDescent)}recordFullPageBBox(t){return Uu(this,Di)[0]=Math.max(0,Uu(this,Ii)[0]),Uu(this,Di)[1]=Math.max(0,Uu(this,Ii)[1]),Uu(this,Di)[2]=Math.min(Uu(this,zi),Uu(this,Ii)[2]),Uu(this,Di)[3]=Math.min(Uu(this,Wi),Uu(this,Ii)[3]),this}getSimpleIndex(t){return Uu(this,Ei)[t]}recordDependencies(t,e){const n=Uu(this,Ni),i=Uu(this,Ei),s=Uu(this,Ci);for(const r of e)r in Uu(this,Ei)?n.add(i[r]):r in s&&s[r].forEach(n.add,n);return this}recordNamedDependency(t,e){return Uu(this,Mi).has(e)&&Uu(this,Ni).add(Uu(this,Mi).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[NW]),Uu(this,Hi)){const e=UW(Uu(this,Hi),t),{dependencies:n}=e;Uu(this,Ni).forEach(n.add,n),Uu(this,Ti).forEach(n.add,n),Uu(this,Li).forEach(n.add,n),n.delete(t),e.isRenderingOperation=!0}if(Uu(this,Oi)===t){const n=FW(256*Uu(this,Di)[0]/Uu(this,zi)),i=FW(256*Uu(this,Di)[1]/Uu(this,Wi)),s=BW(256*Uu(this,Di)[2]/Uu(this,zi)),r=BW(256*Uu(this,Di)[3]/Uu(this,Wi));zW(Uu(this,ji),t,n,i,s,r);for(const e of Uu(this,Ni))e!==t&&zW(Uu(this,ji),e,n,i,s,r);for(const e of Uu(this,Ti))e!==t&&zW(Uu(this,ji),e,n,i,s,r);for(const e of Uu(this,Li))e!==t&&zW(Uu(this,ji),e,n,i,s,r);e||(Uu(this,Ni).clear(),$u(this,Oi,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(Uu(this,Ni));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return Uu(this,Oi)===t&&($u(this,Oi,-1),Uu(this,Ii)[0]=Math.max(Uu(this,Ii)[0],Uu(this,Di)[0]),Uu(this,Ii)[1]=Math.max(Uu(this,Ii)[1],Uu(this,Di)[1]),Uu(this,Ii)[2]=Math.min(Uu(this,Ii)[2],Uu(this,Di)[2]),Uu(this,Ii)[3]=Math.min(Uu(this,Ii)[3],Uu(this,Di)[3]),e||Uu(this,Ni).clear()),this}_takePendingDependencies(){const t=Uu(this,Ni);return $u(this,Ni,new Set),t}_extractOperation(t){const e=Uu(this,Fi).get(t);return Uu(this,Fi).delete(t),e}_pushPendingDependencies(t){for(const e of t)Uu(this,Ni).add(e)}take(){return Uu(this,Bi).clear(),new jW(Uu(this,Ui),Uu(this,ji))}takeDebugMetadata(){return Uu(this,Hi)}}Ei=new WeakMap,Ci=new WeakMap,Mi=new WeakMap,Ti=new WeakMap,Li=new WeakMap,Ri=new WeakMap,Ii=new WeakMap,Di=new WeakMap,Oi=new WeakMap,Ni=new WeakMap,Fi=new WeakMap,Bi=new WeakMap,zi=new WeakMap,Wi=new WeakMap,ji=new WeakMap,Ui=new WeakMap,Hi=new WeakMap,$i=new WeakSet,Vi=function(t,e){const n=new ArrayBuffer(4*t);$u(this,ji,new Uint8ClampedArray(n)),$u(this,Ui,new Uint32Array(n)),e&&e.length>0?(Uu(this,Ui).set(e),Uu(this,Ui).fill(WW,e.length)):Uu(this,Ui).fill(WW)},qi=new WeakMap,Gi=new WeakMap,Zi=new WeakMap,Ki=new WeakMap,Xi=new WeakMap;let $W=class t{constructor(e,n,i){if(Hu(this,qi),Hu(this,Gi),Hu(this,Zi),Hu(this,Ki,0),Hu(this,Xi,0),e instanceof t&&Uu(e,Zi)===!!i)return e;$u(this,qi,e),$u(this,Gi,n),$u(this,Zi,!!i)}growOperationsCount(){throw new Error("Unreachable")}save(t){return qu(this,Xi)._++,Uu(this,qi).save(Uu(this,Gi)),this}restore(t){return Uu(this,Xi)>0&&(Uu(this,qi).restore(Uu(this,Gi)),qu(this,Xi)._--),this}recordOpenMarker(t){return qu(this,Ki)._++,this}getOpenMarker(){return Uu(this,Ki)>0?Uu(this,Gi):Uu(this,qi).getOpenMarker()}recordCloseMarker(t){return qu(this,Ki)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return Uu(this,qi).pushBaseTransform(t),this}popBaseTransform(){return Uu(this,qi).popBaseTransform(),this}recordSimpleData(t,e){return Uu(this,qi).recordSimpleData(t,Uu(this,Gi)),this}recordIncrementalData(t,e){return Uu(this,qi).recordIncrementalData(t,Uu(this,Gi)),this}resetIncrementalData(t,e){return Uu(this,qi).resetIncrementalData(t,Uu(this,Gi)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return Uu(this,qi).recordSimpleDataFromNamed(t,e,Uu(this,Gi)),this}recordFutureForcedDependency(t,e){return Uu(this,qi).recordFutureForcedDependency(t,Uu(this,Gi)),this}inheritSimpleDataAsFutureForcedDependencies(t){return Uu(this,qi).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return Uu(this,qi).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return Uu(this,Zi)||Uu(this,qi).resetBBox(Uu(this,Gi)),this}recordClipBox(t,e,n,i,s,r){return Uu(this,Zi)||Uu(this,qi).recordClipBox(Uu(this,Gi),e,n,i,s,r),this}recordBBox(t,e,n,i,s,r){return Uu(this,Zi)||Uu(this,qi).recordBBox(Uu(this,Gi),e,n,i,s,r),this}recordCharacterBBox(t,e,n,i,s,r,o){return Uu(this,Zi)||Uu(this,qi).recordCharacterBBox(Uu(this,Gi),e,n,i,s,r,o),this}recordFullPageBBox(t){return Uu(this,Zi)||Uu(this,qi).recordFullPageBBox(Uu(this,Gi)),this}getSimpleIndex(t){return Uu(this,qi).getSimpleIndex(t)}recordDependencies(t,e){return Uu(this,qi).recordDependencies(Uu(this,Gi),e),this}recordNamedDependency(t,e){return Uu(this,qi).recordNamedDependency(Uu(this,Gi),e),this}recordOperation(t){return Uu(this,qi).recordOperation(Uu(this,Gi),!0),this}recordShowTextOperation(t){return Uu(this,qi).recordShowTextOperation(Uu(this,Gi),!0),this}bboxToClipBoxDropOperation(t){return Uu(this,Zi)||Uu(this,qi).bboxToClipBoxDropOperation(Uu(this,Gi),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};const VW=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],qW=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],GW=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],ZW=["filter","fillColor","fillAlpha"],KW=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],XW=["transform"],YW=["transform","fillColor"],QW="Fill",JW="Stroke",tj="Shading";function ej(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],n,i),t.clip(s)}class nj{isModifyingCurrentTransform(){return!1}getPattern(){IB("Abstract method `getPattern` called.")}}class ij extends nj{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let s;if(i===JW||i===QW){const r=e.current.getClippedPathBoundingBox(i,xz(t))||[0,0,0,0],o=Math.ceil(r[2]-r[0])||1,a=Math.ceil(r[3]-r[1])||1,l=e.cachedCanvases.getCanvas("pattern",o,a),h=l.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-r[0],-r[1]),n=KB.transform(n,[1,0,0,1,r[0],r[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),ej(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=t.createPattern(l.canvas,"no-repeat");const c=new DOMMatrix(n);s.setTransform(c)}else ej(t,this._bbox),s=this._createGradient(t);return s}}function sj(t,e,n,i,s,r,o,a){const l=e.coords,h=e.colors,c=t.data,u=4*t.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=r,r=o,o=d),l[i+1]>l[s+1]&&(d=i,i=s,s=d,d=o,o=a,a=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=r,r=o,o=d);const p=(l[n]+e.offsetX)*e.scaleX,f=(l[n+1]+e.offsetY)*e.scaleY,m=(l[i]+e.offsetX)*e.scaleX,g=(l[i+1]+e.offsetY)*e.scaleY,y=(l[s]+e.offsetX)*e.scaleX,v=(l[s+1]+e.offsetY)*e.scaleY;if(f>=v)return;const _=h[r],b=h[r+1],w=h[r+2],x=h[o],S=h[o+1],A=h[o+2],k=h[a],P=h[a+1],E=h[a+2],C=Math.round(f),M=Math.round(v);let T,L,R,I,D,O,N,F;for(let B=C;B<=M;B++){if(B<g){const t=B<f?0:(f-B)/(f-g);T=p-(p-m)*t,L=_-(_-x)*t,R=b-(b-S)*t,I=w-(w-A)*t}else{let t;t=B>v?1:g===v?0:(g-B)/(g-v),T=m-(m-y)*t,L=x-(x-k)*t,R=S-(S-P)*t,I=A-(A-E)*t}let t;t=B<f?0:B>v?1:(f-B)/(f-v),D=p-(p-y)*t,O=_-(_-k)*t,N=b-(b-P)*t,F=w-(w-E)*t;const e=Math.round(Math.min(T,D)),n=Math.round(Math.max(T,D));let i=u*B+4*e;for(let s=e;s<=n;s++)t=(T-s)/(T-D),t<0?t=0:t>1&&(t=1),c[i++]=L-(L-O)*t|0,c[i++]=R-(R-N)*t|0,c[i++]=I-(I-F)*t|0,c[i++]=255}}function rj(t,e,n){const i=e.coords,s=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(i.length/a)-1,h=a-1;for(r=0;r<l;r++){let e=r*a;for(let r=0;r<h;r++,e++)sj(t,n,i[e],i[e+1],i[e+a],s[e],s[e+1],s[e+a]),sj(t,n,i[e+a+1],i[e+1],i[e+a],s[e+a+1],s[e+1],s[e+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)sj(t,n,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class oj extends nj{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const i=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-i,o=Math.ceil(this._bounds[3])-s,a=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(o*t[1]*1.1)),3e3),h=r/a,c=o/l,u={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-s,scaleX:1/h,scaleY:1/c},d=a+4,p=l+4,f=n.getCanvas("mesh",d,p),m=f.context,g=m.createImageData(a,l);if(e){const t=g.data;for(let n=0,i=t.length;n<i;n+=4)t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=255}for(const y of this._figures)rj(g,y,u);return m.putImageData(g,2,2),{canvas:f.canvas,offsetX:i-2*h,offsetY:s-2*c,scaleX:h,scaleY:c}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){ej(t,this._bbox);const s=new Float32Array(2);if(i===tj)KB.singularValueDecompose2dScale(xz(t),s);else if(this.matrix){KB.singularValueDecompose2dScale(this.matrix,s);const[t,n]=s;KB.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=t,s[1]*=n}else KB.singularValueDecompose2dScale(e.baseTransform,s);const r=this._createMeshCanvas(s,i===tj?null:this._background,e.cachedCanvases);return i!==tj&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class aj extends nj{getPattern(){return"hotpink"}}const lj=class t{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){const{bbox:n,operatorList:i,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:h}=this;l=Math.abs(l),h=Math.abs(h);const c=n[0],u=n[1],d=n[2],p=n[3],f=d-c,m=p-u,g=new Float32Array(2);KB.singularValueDecompose2dScale(this.matrix,g);const[y,v]=g;KB.singularValueDecompose2dScale(this.baseTransform,g);const _=y*g[0],b=v*g[1];let w=f,x=m,S=!1,A=!1;const k=Math.ceil(l*_),P=Math.ceil(h*b);k>=Math.ceil(f*_)?w=l:S=!0,P>=Math.ceil(m*b)?x=h:A=!0;const E=this.getSizeAndScale(w,this.ctx.canvas.width,_),C=this.getSizeAndScale(x,this.ctx.canvas.height,b),M=t.cachedCanvases.getCanvas("pattern",E.size,C.size),T=M.context,L=a.createCanvasGraphics(T,e);if(L.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(L,s,o),T.translate(-E.scale*c,-C.scale*u),L.transform(0,E.scale,0,0,C.scale,0,0),T.save(),L.dependencyTracker?.save(),this.clipBbox(L,c,u,d,p),L.baseTransform=xz(L.ctx),L.executeOperatorList(i),L.endDrawing(),L.dependencyTracker?.restore(),T.restore(),S||A){const e=M.canvas;S&&(w=l),A&&(x=h);const n=this.getSizeAndScale(w,this.ctx.canvas.width,_),i=this.getSizeAndScale(x,this.ctx.canvas.height,b),s=n.size,r=i.size,o=t.cachedCanvases.getCanvas("pattern-workaround",s,r),a=o.context,d=S?Math.floor(f/l):0,p=A?Math.floor(m/h):0;for(let t=0;t<=d;t++)for(let n=0;n<=p;n++)a.drawImage(e,s*t,r*n,s,r,0,0,s,r);return{canvas:o.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:c,offsetY:u}}return{canvas:M.canvas,scaleX:E.scale,scaleY:C.scale,offsetX:c,offsetY:u}}getSizeAndScale(e,n,i){const s=Math.max(t.MAX_PATTERN_SIZE,n);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(t,e,n,i,s){const r=i-e,o=s-n;t.ctx.rect(e,n,r,o),KB.axialAlignedBoundingBox([e,n,i,s],xz(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,s=t.current;switch(e){case 1:const{fillStyle:t,strokeStyle:r}=this.ctx;i.fillStyle=s.fillColor=t,i.strokeStyle=s.strokeColor=r;break;case 2:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new HB(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,s){let r=n;i!==tj&&(r=KB.transform(r,e.baseTransform),this.matrix&&(r=KB.transform(r,this.matrix)));const o=this.createPatternCanvas(e,s);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=t.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};Wu(lj,"MAX_PATTERN_SIZE",3e3);let hj=lj;function cj({src:t,srcPos:e=0,dest:n,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=GB.isLittleEndian?4278190080:255,[l,h]=o?[r,a]:[a,r],c=i>>3,u=7&i,d=t.length;n=new Uint32Array(n.buffer);let p=0;for(let f=0;f<s;f++){for(const s=e+c;e<s;e++){const i=e<d?t[e]:255;n[p++]=128&i?h:l,n[p++]=64&i?h:l,n[p++]=32&i?h:l,n[p++]=16&i?h:l,n[p++]=8&i?h:l,n[p++]=4&i?h:l,n[p++]=2&i?h:l,n[p++]=1&i?h:l}if(0===u)continue;const i=e<d?t[e++]:255;for(let t=0;t<u;t++)n[p++]=i&1<<7-t?h:l}return{srcPos:e,destPos:p}}const uj=16,dj=new DOMMatrix,pj=new Float32Array(2),fj=new Float32Array([1/0,1/0,-1/0,-1/0]);class mj{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function gj(t,e,n,i,s,r,o,a,l,h){const[c,u,d,p,f,m]=xz(t);if(0===u&&0===d){const g=o*c+f,y=Math.round(g),v=a*p+m,_=Math.round(v),b=(o+l)*c+f,w=Math.abs(Math.round(b)-y)||1,x=(a+h)*p+m,S=Math.abs(Math.round(x)-_)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(p),y,_),t.drawImage(e,n,i,s,r,0,0,w,S),t.setTransform(c,u,d,p,f,m),[w,S]}if(0===c&&0===p){const g=a*d+f,y=Math.round(g),v=o*u+m,_=Math.round(v),b=(a+h)*d+f,w=Math.abs(Math.round(b)-y)||1,x=(o+l)*u+m,S=Math.abs(Math.round(x)-_)||1;return t.setTransform(0,Math.sign(u),Math.sign(d),0,y,_),t.drawImage(e,n,i,s,r,0,0,S,w),t.setTransform(c,u,d,p,f,m),[S,w]}return t.drawImage(e,n,i,s,r,o,a,l,h),[Math.hypot(c,u)*l,Math.hypot(d,p)*h]}class yj{constructor(t,e,n){Wu(this,"alphaIsShape",!1),Wu(this,"fontSize",0),Wu(this,"fontSizeScale",1),Wu(this,"textMatrix",null),Wu(this,"textMatrixScale",1),Wu(this,"fontMatrix",vB),Wu(this,"leading",0),Wu(this,"x",0),Wu(this,"y",0),Wu(this,"lineX",0),Wu(this,"lineY",0),Wu(this,"charSpacing",0),Wu(this,"wordSpacing",0),Wu(this,"textHScale",1),Wu(this,"textRenderingMode",0),Wu(this,"textRise",0),Wu(this,"fillColor","#000000"),Wu(this,"strokeColor","#000000"),Wu(this,"patternFill",!1),Wu(this,"patternStroke",!1),Wu(this,"fillAlpha",1),Wu(this,"strokeAlpha",1),Wu(this,"lineWidth",1),Wu(this,"activeSMask",null),Wu(this,"transferMaps","none"),n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=fj.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=QW,e=null){const n=this.minMax.slice();if(t===JW){e||IB("Stroke bounding box must include transform."),KB.singularValueDecompose2dScale(e,pj);const t=pj[0]*this.lineWidth/2,i=pj[1]*this.lineWidth/2;n[0]-=t,n[1]-=i,n[2]+=t,n[3]+=i}return n}updateClipFromPath(){const t=KB.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(fj,0)}getClippedPathBoundingBox(t=QW,e=null){return KB.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function vj(t,e){if(e instanceof ImageData)return void t.putImageData(e,0,0);const n=e.height,i=e.width,s=n%uj,r=(n-s)/uj,o=0===s?r:r+1,a=t.createImageData(i,uj);let l,h=0;const c=e.data,u=a.data;let d,p,f,m;if(e.kind===kB.GRAYSCALE_1BPP){const e=c.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),m=n.length,g=i+7>>3,y=4294967295,v=GB.isLittleEndian?4278190080:255;for(d=0;d<o;d++){for(f=d<r?uj:s,l=0,p=0;p<f;p++){const t=e-h;let s=0;const r=t>g?i:8*t-7,o=-8&r;let a=0,u=0;for(;s<o;s+=8)u=c[h++],n[l++]=128&u?y:v,n[l++]=64&u?y:v,n[l++]=32&u?y:v,n[l++]=16&u?y:v,n[l++]=8&u?y:v,n[l++]=4&u?y:v,n[l++]=2&u?y:v,n[l++]=1&u?y:v;for(;s<r;s++)0===a&&(u=c[h++],a=128),n[l++]=u&a?y:v,a>>=1}for(;l<m;)n[l++]=0;t.putImageData(a,0,d*uj)}}else if(e.kind===kB.RGBA_32BPP){for(p=0,m=i*uj*4,d=0;d<r;d++)u.set(c.subarray(h,h+m)),h+=m,t.putImageData(a,0,p),p+=uj;d<o&&(m=i*s*4,u.set(c.subarray(h,h+m)),t.putImageData(a,0,p))}else{if(e.kind!==kB.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(f=uj,m=i*f,d=0;d<o;d++){for(d>=r&&(f=s,m=i*f),l=0,p=m;p--;)u[l++]=c[h++],u[l++]=c[h++],u[l++]=c[h++],u[l++]=255;t.putImageData(a,0,d*uj)}}}function _j(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const n=e.height,i=e.width,s=n%uj,r=(n-s)/uj,o=0===s?r:r+1,a=t.createImageData(i,uj);let l=0;const h=e.data,c=a.data;for(let u=0;u<o;u++){const e=u<r?uj:s;({srcPos:l}=cj({src:h,srcPos:l,dest:c,width:i,height:e,nonBlackColor:0})),t.putImageData(a,0,u*uj)}}function bj(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==t[i]&&(e[i]=t[i]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function wj(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}function xj(t,e){if(e)return!0;KB.singularValueDecompose2dScale(t,pj);const n=Math.fround(kz.pixelRatio*az.PDF_TO_CSS_UNITS);return pj[0]<=n&&pj[1]<=n}const Sj=["butt","round","square"],Aj=["miter","round","bevel"],kj={},Pj={};Yi=new WeakSet,Qi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ji=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},ts=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i};let Ej=class t{constructor(t,e,n,i,s,{optionalContentConfig:r,markedContentStack:o=null},a,l,h){Hu(this,Yi),this.ctx=t,this.current=new yj(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=r,this.cachedCanvases=new mj(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(t,e,n=null){return"string"==typeof e?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const s=this.ctx.canvas.width,r=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,r),this.ctx.fillStyle=o,n){const t=this.cachedCanvases.getCanvas("transparent",s,r);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...xz(this.compositeCtx))}this.ctx.save(),wj(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=xz(this.ctx)}executeOperatorList(t,e,n,i,s){const r=t.argsArray,o=t.fnArray;let a=e||0;const l=r.length;if(l===a)return a;const h=l-a>10&&"function"==typeof n,c=h?Date.now()+15:0;let u=0;const d=this.commonObjs,p=this.objs;let f,m;for(;;){if(void 0!==i&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(!s||s(a))if(f=o[a],m=r[a]??null,f!==CB.dependency)null===m?this[f](a):this[f](a,...m);else for(const t of m){this.dependencyTracker?.recordNamedData(t,a);const e=t.startsWith("g_")?d:p;if(!e.has(t))return e.get(t,n),a}if(a++,a===l)return a;if(h&&++u>10){if(Date.now()>c)return n(),a;u=0}}}endDrawing(){Vu(this,Yi,Qi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),Vu(this,Yi,Ji).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let s,r,o=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=n,h=i,c="prescale1";for(;o>2&&l>1||a>2&&h>1;){let e=l,n=h;o>2&&l>1&&(e=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),o/=l/e),a>2&&h>1&&(n=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,a/=h/n),s=this.cachedCanvases.getCanvas(c,e,n),r=s.context,r.clearRect(0,0,e,n),r.drawImage(t,0,0,l,h,0,0,e,n),t=s.canvas,l=e,h=n,c="prescale1"===c?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t,e){const n=this.ctx,{width:i,height:s}=e,r=this.current.fillColor,o=this.current.patternFill,a=xz(n);let l,h,c,u;if((e.bitmap||e.data)&&e.count>1){const n=e.bitmap||e.data.buffer;h=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(n),l||(l=new Map,this._cachedBitmapsMap.set(n,l));const i=l.get(h);if(i&&!o){const e=Math.round(Math.min(a[0],a[2])+a[4]),n=Math.round(Math.min(a[1],a[3])+a[5]);return this.dependencyTracker?.recordDependencies(t,YW),{canvas:i,offsetX:e,offsetY:n}}c=i}c||(u=this.cachedCanvases.getCanvas("maskCanvas",i,s),_j(u.context,e));let d=KB.transform(a,[1/i,0,0,-1/s,0,0]);d=KB.transform(d,[1,0,0,1,0,-s]);const p=fj.slice();KB.axialAlignedBoundingBox([0,0,i,s],d,p);const[f,m,g,y]=p,v=Math.round(g-f)||1,_=Math.round(y-m)||1,b=this.cachedCanvases.getCanvas("fillCanvas",v,_),w=b.context,x=f,S=m;w.translate(-x,-S),w.transform(...d),c||(c=this._scaleImage(u.canvas,Sz(w)),c=c.img,l&&o&&l.set(h,c)),w.imageSmoothingEnabled=xj(xz(w),e.interpolate),gj(w,c,0,0,c.width,c.height,0,0,i,s),w.globalCompositeOperation="source-in";const A=KB.transform(Sz(w),[1,0,0,1,-x,-S]);return w.fillStyle=o?r.getPattern(n,this,A,QW,t):r,w.fillRect(0,0,i,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(h,b.canvas)),this.dependencyTracker?.recordDependencies(t,YW),{canvas:b.canvas,offsetX:Math.round(x),offsetY:Math.round(S)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=Sj[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=Aj[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,i]of e)switch(n){case"LW":this.setLineWidth(t,i);break;case"LC":this.setLineCap(t,i);break;case"LJ":this.setLineJoin(t,i);break;case"ML":this.setMiterLimit(t,i);break;case"D":this.setDash(t,i[0],i[1]);break;case"RI":this.setRenderingIntent(t,i);break;case"FL":this.setFlatness(t,i);break;case"Font":this.setFont(t,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const r=this.ctx=s.context;r.setTransform(this.suspendedCtx.getTransform()),bj(this.suspendedCtx,r),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,i,s,r,o){e.transform(t,n,i,s,r,o),this.__originalTransform(t,n,i,s,r,o)},t.setTransform=function(t,n,i,s,r,o){e.setTransform(t,n,i,s,r,o),this.__originalSetTransform(t,n,i,s,r,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,i,s,r,o){e.bezierCurveTo(t,n,i,s,r,o),this.__originalBezierCurveTo(t,n,i,s,r,o)},t.rect=function(t,n,i,s){e.rect(t,n,i,s),this.__originalRect(t,n,i,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bj(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const s=i[0],r=i[1],o=i[2]-s,a=i[3]-r;0!==o&&0!==a&&(this.genericComposeSMask(e.context,n,o,a,e.subtype,e.backdrop,e.transferMap,s,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,s,r,o,a,l,h,c){let u=t.canvas,d=a-h,p=l-c;if(r)if(d<0||p<0||d+n>u.width||p+i>u.height){const t=this.cachedCanvases.getCanvas("maskExtension",n,i),e=t.context;e.drawImage(u,-d,-p),e.globalCompositeOperation="destination-atop",e.fillStyle=r,e.fillRect(0,0,n,i),e.globalCompositeOperation="source-over",u=t.canvas,d=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(d,p,n,i),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=r,t.fillRect(d,p,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===s&&o?e.filter=this.filterFactory.addAlphaFilter(o):"Luminosity"===s&&(e.filter=this.filterFactory.addLuminosityFilter(o));const f=new Path2D;f.rect(a,l,n,i),e.clip(f),e.globalCompositeOperation="destination-in",e.drawImage(u,d,p,n,i,a,l,n,i),e.restore()}save(t){this.inSMaskMode&&bj(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){this.dependencyTracker?.restore(t),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&bj(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(t,e,n,i,s,r,o){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[s]=n;if(!i)return s||(s=n[0]=new Path2D),void this[e](t,s);if(null!==this.dependencyTracker){const n=e===CB.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-n,i[2]+n,i[1]-n,i[3]+n).recordDependencies(t,["transform"])}if(!(s instanceof Path2D)){const t=n[0]=new Path2D;for(let e=0,n=s.length;e<n;)switch(s[e++]){case 0:t.moveTo(s[e++],s[e++]);break;case 1:t.lineTo(s[e++],s[e++]);break;case 2:t.bezierCurveTo(s[e++],s[e++],s[e++],s[e++],s[e++],s[e++]);break;case 3:t.closePath();break;default:RB(s[e-1])}s=t}KB.axialAlignedBoundingBox(i,xz(this.ctx),this.current.minMax),this[e](t,s),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"==typeof s&&s?.getPattern){const n=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,Sz(i),JW,t),n){const t=new Path2D;t.addPath(e,i.getTransform().invertSelf().multiplySelf(n)),e=t}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,VW),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(JW,xz(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const i=this.ctx,s=this.current.fillColor;let r=!1;if(this.current.patternFill){const n=s.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(t),i.save(),i.fillStyle=s.getPattern(i,this,Sz(i),QW,t),n){const t=new Path2D;t.addPath(e,i.getTransform().invertSelf().multiplySelf(n)),e=t}r=!0}const o=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==o&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),this.dependencyTracker?.recordDependencies(t,qW),r&&(i.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,o)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,ZW).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=kj}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Pj}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;void 0!==e&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",t),n.recordCloseMarker(t)}if(void 0!==e){const t=new Path2D,i=n.getTransform().invertSelf();for(const{transform:n,x:s,y:r,fontSize:o,path:a}of e)a&&t.addPath(a,new DOMMatrix(n).preMultiplySelf(i).translate(s,r).scale(o,-o));n.clip(t)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||vB,0===s.fontMatrix[0]||s.fontMatrix[3],n<0?(n=-n,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=i.systemFontInfo?.css||`"${r}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let h=n;n<16?h=16:n>100&&(h=100),this.current.fontSizeScale=n/h,this.ctx.font=`${l} ${a} ${h}px ${o}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,i,s,r){const o=this.ctx,a=this.current,l=a.font,h=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,u=3&h,d=!!(4&h),p=a.patternFill&&!l.missingFile,f=a.patternStroke&&!l.missingFile;let m;if((l.disableFontFace||d||p||f)&&!l.missingFile&&(m=l.getPathGenerator(this.commonObjs,e)),m&&(l.disableFontFace||p||f)){let e;if(o.save(),o.translate(n,i),o.scale(c,-c),this.dependencyTracker?.recordCharacterBBox(t,o,l),0===u||2===u)if(s){e=o.getTransform(),o.setTransform(...s);const t=Vu(this,Yi,ts).call(this,m,e,s);o.fill(t)}else o.fill(m);if(1===u||2===u)if(r){e||(e=o.getTransform()),o.setTransform(...r);const{a:t,b:n,c:i,d:s}=e,a=KB.inverseTransform(r),l=KB.transform([t,n,i,s,0,0],a);KB.singularValueDecompose2dScale(l,pj),o.lineWidth*=Math.max(pj[0],pj[1])/c,o.stroke(Vu(this,Yi,ts).call(this,m,e,r))}else o.lineWidth/=c,o.stroke(m);o.restore()}else 0!==u&&2!==u||(o.fillText(e,n,i),this.dependencyTracker?.recordCharacterBBox(t,o,l,c,n,i,()=>o.measureText(e))),1!==u&&2!==u||(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,o,l,c,n,i,()=>o.measureText(e)).recordDependencies(t,VW),o.strokeText(e,n,i));d&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:xz(o),x:n,y:i,fontSize:c,path:m}),this.dependencyTracker?.recordCharacterBBox(t,o,l,c,n,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return FB(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,KW).resetBBox(t),4&this.current.textRenderingMode&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font)return this.showType3Text(t,e),void this.dependencyTracker?.recordShowTextOperation(t);const s=n.fontSize;if(0===s)return void this.dependencyTracker?.recordOperation(t);const r=this.ctx,o=n.fontSizeScale,a=n.charSpacing,l=n.wordSpacing,h=n.fontDirection,c=n.textHScale*h,u=e.length,d=i.vertical,p=d?1:-1,f=i.defaultVMetrics,m=s*n.fontMatrix[0],g=0===n.textRenderingMode&&!i.disableFontFace&&!n.patternFill;let y,v;if(r.save(),n.textMatrix&&r.transform(...n.textMatrix),r.translate(n.x,n.y+n.textRise),h>0?r.scale(c,-1):r.scale(c,1),n.patternFill){r.save();const e=n.fillColor.getPattern(r,this,Sz(r),QW,t);y=xz(r),r.restore(),r.fillStyle=e}if(n.patternStroke){r.save();const e=n.strokeColor.getPattern(r,this,Sz(r),JW,t);v=xz(r),r.restore(),r.strokeStyle=e}let _=n.lineWidth;const b=n.textMatrixScale;if(0===b||0===_){const t=3&n.textRenderingMode;1!==t&&2!==t||(_=this.getSinglePixelWidth())}else _/=b;if(1!==o&&(r.scale(o,o),_/=o),r.lineWidth=_,i.isInvalidPDFjsFont){const i=[];let s=0;for(const t of e)i.push(t.unicode),s+=t.width;const o=i.join("");if(r.fillText(o,0,0),null!==this.dependencyTracker){const e=r.measureText(o);this.dependencyTracker.recordBBox(t,this.ctx,-e.actualBoundingBoxLeft,e.actualBoundingBoxRight,-e.actualBoundingBoxAscent,e.actualBoundingBoxDescent).recordShowTextOperation(t)}return n.x+=s*m*c,r.restore(),void this.compose()}let w,x=0;for(w=0;w<u;++w){const n=e[w];if("number"==typeof n){x+=p*n*s/1e3;continue}let c=!1;const u=(n.isSpace?l:0)+a,_=n.fontChar,b=n.accent;let S,A,k,P=n.width;if(d){const t=n.vmetric||f,e=-(n.vmetric?t[1]:.5*P)*m,i=t[2]*m;P=t?-t[0]:P,S=e/o,A=(x+i)/o}else S=x/o,A=0;if(i.remeasure&&P>0){k=r.measureText(_);const t=1e3*k.width/s*o;if(P<t&&this.isFontSubpixelAAEnabled){const e=P/t;c=!0,r.save(),r.scale(e,1),S/=e}else P!==t&&(S+=(P-t)/2e3*s/o)}if(this.contentVisible&&(n.isInFont||i.missingFile))if(g&&!b)r.fillText(_,S,A),this.dependencyTracker?.recordCharacterBBox(t,r,k?{bbox:null}:i,s/o,S,A,()=>k??r.measureText(_));else if(this.paintChar(t,_,S,A,y,v),b){const e=S+s*b.offset.x/o,n=A-s*b.offset.y/o;this.paintChar(t,b.fontChar,e,n,y,v)}x+=d?P*m-u*h:P*m+u*h,c&&r.restore()}d?n.y-=x:n.x+=x*c,r.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,a=s.vertical?1:-1,l=i.charSpacing,h=i.wordSpacing,c=i.textHScale*o,u=i.fontMatrix||vB,d=e.length;let p,f,m,g;if(3===i.textRenderingMode||0===r)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(c,o);const y=this.dependencyTracker;for(this.dependencyTracker=y?new $W(y,t):null,p=0;p<d;++p){if(f=e[p],"number"==typeof f){g=a*f*r/1e3,this.ctx.translate(g,0),i.x+=g*c;continue}const t=(f.isSpace?h:0)+l,o=s.charProcOperatorList[f.operatorListId];o?this.contentVisible&&(this.save(),n.scale(r,r),n.transform(...u),this.executeOperatorList(o),this.restore()):RB(f.operatorListId);const d=[f.width,0];KB.applyTransform(d,u),m=d[0]*r+t,n.translate(m,0),i.x+=m*c}n.restore(),y&&(this.dependencyTracker=y)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,s,r,o){const a=new Path2D;a.rect(i,s,r-i,o-s),this.ctx.clip(a),this.dependencyTracker?.recordBBox(t,this.ctx,i,r,s,o).recordClipBox(t,this.ctx,i,r,s,o),this.endPath(t)}getColorN_Pattern(e,n){let i;if("TilingPattern"===n[0]){const e=this.baseTransform||xz(this.ctx),s={createCanvasGraphics:(e,n)=>new t(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new $W(this.dependencyTracker,n,!0):null)};i=new hj(n,this.ctx,s,e)}else i=this._getPattern(e,n[1],n[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=function(t){switch(t[0]){case"RadialAxial":return new ij(t);case"Mesh":return new oj(t);case"Dummy":return new aj}throw new Error(`Unknown IR type: ${t[0]}`)}(this.getObject(t,e)),this.cachedPatterns.set(e,i)),n&&(i.matrix=n),i}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const i=this._getPattern(t,e);n.fillStyle=i.getPattern(n,this,Sz(n),tj,t);const s=Sz(n);if(s){const{width:t,height:e}=n.canvas,i=fj.slice();KB.axialAlignedBoundingBox([0,0,t,e],s,i);const[r,o,a,l]=i;this.ctx.fillRect(r,o,a-r,l-o)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,XW).recordDependencies(t,qW).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){IB("Should not call beginInlineImage")}beginImageData(){IB("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=xz(this.ctx),n)){KB.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[e,i,s,r]=n,o=new Path2D;o.rect(e,i,s-e,r-i),this.ctx.clip(o),this.dependencyTracker?.recordClipBox(t,this.ctx,e,s,i,r),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated,e.knockout;const i=xz(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=fj.slice();KB.axialAlignedBoundingBox(e.bbox,xz(n),s);const r=[0,0,n.canvas.width,n.canvas.height];s=KB.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),h=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,h]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(c,l,h),d=u.context;d.translate(-o,-a),d.transform(...i);let p=new Path2D;const[f,m,g,y]=e.bbox;if(p.rect(f,m,g-f,y-m),e.matrix){const t=new Path2D;t.addPath(p,new DOMMatrix(e.matrix)),p=t}d.clip(p),e.smask&&this.smaskStack.push({canvas:u.canvas,context:d,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),e.smask&&!this.dependencyTracker||(n.setTransform(1,0,0,1,0,0),n.translate(o,a),n.save()),bj(n,d),this.ctx=d,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const e=xz(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...e);const i=fj.slice();KB.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],e,i),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(t,e,n,i,s,r){if(Vu(this,Yi,Qi).call(this),wj(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const s=n[2]-n[0],o=n[3]-n[1];if(r&&this.annotationCanvasMap){(i=i.slice())[4]-=n[0],i[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=s,n[3]=o,KB.singularValueDecompose2dScale(xz(this.ctx),pj);const{viewportScale:t}=this,r=Math.ceil(s*this.outputScaleX*t),a=Math.ceil(o*this.outputScaleY*t);this.annotationCanvas=this.canvasFactory.create(r,a);const{canvas:l,context:h}=this.annotationCanvas;this.annotationCanvasMap.set(e,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=h,this.ctx.save(),this.ctx.setTransform(pj[0],0,0,-pj[1],0,o*pj[1]),wj(this.ctx)}else{wj(this.ctx),this.endPath(t);const e=new Path2D;e.rect(n[0],n[1],s,o),this.ctx.clip(e)}}this.current=new yj(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...s)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),Vu(this,Yi,Ji).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;(e=this.getObject(t,e.data,e)).count=n;const i=this.ctx,s=this._createMaskCanvas(t,e),r=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,s.offsetX,s.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,s.offsetX,s.offsetX+r.width,s.offsetY,s.offsetY+r.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,i=0,s=0,r,o){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const a=this.ctx;a.save();const l=xz(a);a.transform(n,i,s,r,0,0);const h=this._createMaskCanvas(t,e);a.setTransform(1,0,0,1,h.offsetX-l[4],h.offsetY-l[5]),this.dependencyTracker?.resetBBox(t);for(let c=0,u=o.length;c<u;c+=2){const e=KB.transform(l,[n,i,s,r,o[c],o[c+1]]);a.drawImage(h.canvas,e[4],e[5]),this.dependencyTracker?.recordBBox(t,this.ctx,e[4],e[4]+h.canvas.width,e[5],e[5]+h.canvas.height)}a.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,s=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,YW);for(const r of e){const{data:e,width:o,height:a,transform:l}=r,h=this.cachedCanvases.getCanvas("maskCanvas",o,a),c=h.context;c.save(),_j(c,this.getObject(t,e,r)),c.globalCompositeOperation="source-in",c.fillStyle=s?i.getPattern(c,this,Sz(n),QW,t):i,c.fillRect(0,0,o,a),c.restore(),n.save(),n.transform(...l),n.scale(1,-1),gj(n,h.canvas,0,0,o,a,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,o,0,a),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);n&&this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,i,s){if(!this.contentVisible)return;const r=this.getObject(t,e);if(!r)return;const o=r.width,a=r.height,l=[];for(let h=0,c=s.length;h<c;h+=2)l.push({transform:[n,0,0,i,s[h],s[h+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(t,r,l)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:n,height:i}=t,s=this.cachedCanvases.getCanvas("inlineImage",n,i),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",s.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,i=e.height,s=this.ctx;this.save(t);const{filter:r}=s;let o;if("none"!==r&&""!==r&&(s.filter="none"),s.scale(1/n,-1/i),e.bitmap)o=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)o=e;else{const t=this.cachedCanvases.getCanvas("inlineImage",n,i).context;vj(t,e),o=this.applyTransferMapsToCanvas(t)}const a=this._scaleImage(o,Sz(s));s.imageSmoothingEnabled=xj(xz(s),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,s,0,n,-i,0).recordDependencies(t,GW).recordOperation(t),gj(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,n,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const t=e.width,n=e.height,i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;vj(i,e),s=this.applyTransferMapsToCanvas(i)}this.dependencyTracker?.resetBBox(t);for(const r of n)i.save(),i.transform(...r.transform),i.scale(1,-1),gj(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,qW).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===Pj?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=xz(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:s}=this.ctx.getTransform();let r,o;if(0===n&&0===i){const n=Math.abs(e),i=Math.abs(s);if(n===i)if(0===t)r=o=1/n;else{const e=n*t;r=o=e<1?1/e:1}else if(0===t)r=1/n,o=1/i;else{const e=n*t,s=i*t;r=e<1?1/e:1,o=s<1?1/s:1}}else{const a=Math.abs(e*s-n*i),l=Math.hypot(e,n),h=Math.hypot(i,s);if(0===t)r=h/a,o=l/a;else{const e=t*a;r=h>e?h/e:1,o=l>e?l/e:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[s,r]=this.getScaleForStroking();if(s===r)return n.lineWidth=(i||1)*s,void n.stroke(t);const o=n.getLineDash();e&&n.save(),n.scale(s,r),dj.a=1/s,dj.d=1/r;const a=new Path2D;if(a.addPath(t,dj),o.length>0){const t=Math.max(s,r);n.setLineDash(o.map(e=>e/t)),n.lineDashOffset/=t}n.lineWidth=i||1,n.stroke(a),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(const L in CB)void 0!==Ej.prototype[L]&&(Ej.prototype[CB[L]]=Ej.prototype[L]);const Cj=class t{constructor(t){Hu(this,ss),Hu(this,es),Hu(this,ns),Hu(this,is),$u(this,es,t),$u(this,ns,new DataView(Uu(this,es))),$u(this,is,new TextDecoder)}static write(e){const n=new TextEncoder,i={};let s=0;for(const h of t.strings){const t=n.encode(e[h]);i[h]=t,s+=4+t.length}const r=new ArrayBuffer(s),o=new Uint8Array(r),a=new DataView(r);let l=0;for(const h of t.strings){const t=i[h],e=t.length;a.setUint32(l,e),o.set(t,l+4),l+=4+e}return DB(l===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return Vu(this,ss,rs).call(this,0)}get fontWeight(){return Vu(this,ss,rs).call(this,1)}get italicAngle(){return Vu(this,ss,rs).call(this,2)}};es=new WeakMap,ns=new WeakMap,is=new WeakMap,ss=new WeakSet,rs=function(t){DB(t<Cj.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=Uu(this,ns).getUint32(e)+4;const n=Uu(this,ns).getUint32(e);return Uu(this,is).decode(new Uint8Array(Uu(this,es),e+4,n))},Wu(Cj,"strings",["fontFamily","fontWeight","italicAngle"]);let Mj=Cj;const Tj=class t{constructor(t){Hu(this,hs),Hu(this,os),Hu(this,as),Hu(this,ls),$u(this,os,t),$u(this,as,new DataView(Uu(this,os))),$u(this,ls,new TextDecoder)}static write(e){const n=new TextEncoder,i={};let s=0;for(const d of t.strings){const t=n.encode(e[d]);i[d]=t,s+=4+t.length}s+=4;let r,o,a=1+s;e.style&&(r=n.encode(e.style.style),o=n.encode(e.style.weight),a+=4+r.length+4+o.length);const l=new ArrayBuffer(a),h=new Uint8Array(l),c=new DataView(l);let u=0;c.setUint8(u++,e.guessFallback?1:0),c.setUint32(u,0),u+=4,s=0;for(const d of t.strings){const t=i[d],e=t.length;s+=4+e,c.setUint32(u,e),h.set(t,u+4),u+=4+e}return c.setUint32(u-s-4,s),e.style&&(c.setUint32(u,r.length),h.set(r,u+4),u+=4+r.length,c.setUint32(u,o.length),h.set(o,u+4),u+=4+o.length),DB(u<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(u)}get guessFallback(){return 0!==Uu(this,as).getUint8(0)}get css(){return Vu(this,hs,cs).call(this,0)}get loadedName(){return Vu(this,hs,cs).call(this,1)}get baseFontName(){return Vu(this,hs,cs).call(this,2)}get src(){return Vu(this,hs,cs).call(this,3)}get style(){let t=1;t+=4+Uu(this,as).getUint32(t);const e=Uu(this,as).getUint32(t),n=Uu(this,ls).decode(new Uint8Array(Uu(this,os),t+4,e));t+=4+e;const i=Uu(this,as).getUint32(t);return{style:n,weight:Uu(this,ls).decode(new Uint8Array(Uu(this,os),t+4,i))}}};os=new WeakMap,as=new WeakMap,ls=new WeakMap,hs=new WeakSet,cs=function(t){DB(t<Tj.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=Uu(this,as).getUint32(e)+4;const n=Uu(this,as).getUint32(e);return Uu(this,ls).decode(new Uint8Array(Uu(this,os),e+4,n))},Wu(Tj,"strings",["css","loadedName","baseFontName","src"]);let Lj=Tj;const Rj=class t{constructor({data:t,extra:e}){Hu(this,_s),Hu(this,gs),Hu(this,ys),Hu(this,vs),$u(this,gs,t),$u(this,ys,new TextDecoder),$u(this,vs,new DataView(Uu(this,gs))),e&&Object.assign(this,e)}get black(){return Vu(this,_s,bs).call(this,0)}get bold(){return Vu(this,_s,bs).call(this,1)}get disableFontFace(){return Vu(this,_s,bs).call(this,2)}get fontExtraProperties(){return Vu(this,_s,bs).call(this,3)}get isInvalidPDFjsFont(){return Vu(this,_s,bs).call(this,4)}get isType3Font(){return Vu(this,_s,bs).call(this,5)}get italic(){return Vu(this,_s,bs).call(this,6)}get missingFile(){return Vu(this,_s,bs).call(this,7)}get remeasure(){return Vu(this,_s,bs).call(this,8)}get vertical(){return Vu(this,_s,bs).call(this,9)}get ascent(){return Vu(this,_s,ws).call(this,0)}get defaultWidth(){return Vu(this,_s,ws).call(this,1)}get descent(){return Vu(this,_s,ws).call(this,2)}get bbox(){let e=Uu(t,ds);if(0===Uu(this,vs).getUint8(e))return;e+=1;const n=[];for(let t=0;t<4;t++)n.push(Uu(this,vs).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=Uu(t,ps);if(0===Uu(this,vs).getUint8(e))return;e+=1;const n=[];for(let t=0;t<6;t++)n.push(Uu(this,vs).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=Uu(t,fs);if(0===Uu(this,vs).getUint8(e))return;e+=1;const n=[];for(let t=0;t<3;t++)n.push(Uu(this,vs).getInt16(e,!0)),e+=2;return n}get fallbackName(){return Vu(this,_s,xs).call(this,0)}get loadedName(){return Vu(this,_s,xs).call(this,1)}get mimetype(){return Vu(this,_s,xs).call(this,2)}get name(){return Vu(this,_s,xs).call(this,3)}get data(){let e=Uu(t,ms);e+=4+Uu(this,vs).getUint32(e),e+=4+Uu(this,vs).getUint32(e),e+=4+Uu(this,vs).getUint32(e);const n=Uu(this,vs).getUint32(e);if(0!==n)return new Uint8Array(Uu(this,gs),e+4,n)}clearData(){let e=Uu(t,ms);e+=4+Uu(this,vs).getUint32(e),e+=4+Uu(this,vs).getUint32(e),e+=4+Uu(this,vs).getUint32(e);const n=Uu(this,vs).getUint32(e);new Uint8Array(Uu(this,gs),e+4,n).fill(0),Uu(this,vs).setUint32(e,0)}get cssFontInfo(){let e=Uu(t,ms);e+=4+Uu(this,vs).getUint32(e),e+=4+Uu(this,vs).getUint32(e);const n=Uu(this,vs).getUint32(e);if(0===n)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(Uu(this,gs),e+4,n)),new Mj(i.buffer)}get systemFontInfo(){let e=Uu(t,ms);e+=4+Uu(this,vs).getUint32(e);const n=Uu(this,vs).getUint32(e);if(0===n)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(Uu(this,gs),e+4,n)),new Lj(i.buffer)}static write(e){const n=e.systemFontInfo?Lj.write(e.systemFontInfo):null,i=e.cssFontInfo?Mj.write(e.cssFontInfo):null,s=new TextEncoder,r={};let o=0;for(const m of t.strings)r[m]=s.encode(e[m]),o+=4+r[m].length;const a=Uu(t,ms)+4+o+4+(n?n.byteLength:0)+4+(i?i.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(a),h=new Uint8Array(l),c=new DataView(l);let u=0;const d=t.bools.length;let p=0,f=0;for(let m=0;m<d;m++){const n=e[t.bools[m]];p|=(void 0===n?0:n?2:1)<<f,f+=2,8!==f&&m!==d-1||(c.setUint8(u++,p),p=0,f=0)}DB(u===Uu(t,us),"FontInfo.write: Boolean properties offset mismatch");for(const m of t.numbers)c.setFloat64(u,e[m]),u+=8;if(DB(u===Uu(t,ds),"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(u++,4);for(const t of e.bbox)c.setInt16(u,t,!0),u+=2}else c.setUint8(u++,0),u+=8;if(DB(u===Uu(t,ps),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(u++,6);for(const t of e.fontMatrix)c.setFloat64(u,t,!0),u+=8}else c.setUint8(u++,0),u+=48;if(DB(u===Uu(t,fs),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(u++,1);for(const t of e.defaultVMetrics)c.setInt16(u,t,!0),u+=2}else c.setUint8(u++,0),u+=6;DB(u===Uu(t,ms),"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(Uu(t,ms),0),u+=4;for(const m of t.strings){const t=r[m],e=t.length;c.setUint32(u,e),h.set(t,u+4),u+=4+e}if(c.setUint32(Uu(t,ms),u-Uu(t,ms)-4),n){const t=n.byteLength;c.setUint32(u,t),DB(u+4+t<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(n),u+4),u+=4+t}else c.setUint32(u,0),u+=4;if(i){const t=i.byteLength;c.setUint32(u,t),DB(u+4+t<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(i),u+4),u+=4+t}else c.setUint32(u,0),u+=4;return void 0===e.data?(c.setUint32(u,0),u+=4):(c.setUint32(u,e.data.length),h.set(e.data,u+4),u+=4+e.data.length),DB(u<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(u)}};us=new WeakMap,ds=new WeakMap,ps=new WeakMap,fs=new WeakMap,ms=new WeakMap,gs=new WeakMap,ys=new WeakMap,vs=new WeakMap,_s=new WeakSet,bs=function(t){DB(t<Rj.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=2*t%8,i=Uu(this,vs).getUint8(e)>>n&3;return 0===i?void 0:2===i},ws=function(t){return DB(t<Rj.numbers.length,"Invalid number index"),Uu(this,vs).getFloat64(Uu(Rj,us)+8*t)},xs=function(t){DB(t<Rj.strings.length,"Invalid string index");let e=Uu(Rj,ms)+4;for(let s=0;s<t;s++)e+=Uu(this,vs).getUint32(e)+4;const n=Uu(this,vs).getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(Uu(this,gs),e+4,n)),Uu(this,ys).decode(i)},Wu(Rj,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Wu(Rj,"numbers",["ascent","defaultWidth","descent"]),Wu(Rj,"strings",["fallbackName","loadedName","mimetype","name"]),Hu(Rj,us,Math.ceil(2*Rj.bools.length/8)),Hu(Rj,ds,Uu(Rj,us)+8*Rj.numbers.length),Hu(Rj,ps,Uu(Rj,ds)+1+8),Hu(Rj,fs,Uu(Rj,ps)+1+48),Hu(Rj,ms,Uu(Rj,fs)+1+6);let Ij=Rj;class Dj{static get workerPort(){return Uu(this,Ss)}static set workerPort(t){if(!("undefined"!=typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");$u(this,Ss,t)}static get workerSrc(){return Uu(this,As)}static set workerSrc(t){if("string"!=typeof t)throw new Error("Invalid `workerSrc` type.");$u(this,As,t)}}Ss=new WeakMap,As=new WeakMap,Hu(Dj,Ss,null),Hu(Dj,As,"");class Oj{constructor({parsedData:t,rawData:e}){Hu(this,ks),Hu(this,Ps),$u(this,ks,t),$u(this,Ps,e)}getRaw(){return Uu(this,Ps)}get(t){return Uu(this,ks).get(t)??null}[Symbol.iterator](){return Uu(this,ks).entries()}}ks=new WeakMap,Ps=new WeakMap;const Nj=Symbol("INTERNAL");class Fj{constructor(t,{name:e,intent:n,usage:i,rbGroups:s}){Hu(this,Es,!1),Hu(this,Cs,!1),Hu(this,Ms,!1),Hu(this,Ts,!0),$u(this,Es,!!(2&t)),$u(this,Cs,!!(4&t)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=s}get visible(){if(Uu(this,Ms))return Uu(this,Ts);if(!Uu(this,Ts))return!1;const{print:t,view:e}=this.usage;return Uu(this,Es)?"OFF"!==e?.viewState:!Uu(this,Cs)||"OFF"!==t?.printState}_setVisible(t,e,n=!1){t!==Nj&&IB("Internal method `_setVisible` called."),$u(this,Ms,n),$u(this,Ts,e)}}Es=new WeakMap,Cs=new WeakMap,Ms=new WeakMap,Ts=new WeakMap;class Bj{constructor(t,e=2){if(Hu(this,Os),Hu(this,Ls,null),Hu(this,Rs,new Map),Hu(this,Is,null),Hu(this,Ds,null),this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,$u(this,Ds,t.order);for(const n of t.groups)Uu(this,Rs).set(n.id,new Fj(e,n));if("OFF"===t.baseState)for(const t of Uu(this,Rs).values())t._setVisible(Nj,!1);for(const e of t.on)Uu(this,Rs).get(e)._setVisible(Nj,!0);for(const e of t.off)Uu(this,Rs).get(e)._setVisible(Nj,!1);$u(this,Is,this.getHash())}}isVisible(t){if(0===Uu(this,Rs).size)return!0;if(!t)return!0;if("OCG"===t.type)return Uu(this,Rs).has(t.id)?Uu(this,Rs).get(t.id).visible:(t.id,!0);if("OCMD"===t.type){if(t.expression)return Vu(this,Os,Ns).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!Uu(this,Rs).has(e))return RB(),!0;if(Uu(this,Rs).get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!Uu(this,Rs).has(e))return RB(),!0;if(!Uu(this,Rs).get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!Uu(this,Rs).has(e))return RB(),!0;if(!Uu(this,Rs).get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!Uu(this,Rs).has(e))return RB(),!0;if(Uu(this,Rs).get(e).visible)return!1}return!0}return t.policy,!0}return t.type,!0}setVisibility(t,e=!0,n=!0){const i=Uu(this,Rs).get(t);if(i){if(n&&e&&i.rbGroups.length)for(const e of i.rbGroups)for(const n of e)n!==t&&Uu(this,Rs).get(n)?._setVisible(Nj,!1,!0);i._setVisible(Nj,!!e,!0),$u(this,Ls,null)}}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const t=Uu(this,Rs).get(i);if(t)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!t.visible,e)}}$u(this,Ls,null)}get hasInitialVisibility(){return null===Uu(this,Is)||this.getHash()===Uu(this,Is)}getOrder(){return Uu(this,Rs).size?Uu(this,Ds)?Uu(this,Ds).slice():[...Uu(this,Rs).keys()]:null}getGroup(t){return Uu(this,Rs).get(t)||null}getHash(){if(null!==Uu(this,Ls))return Uu(this,Ls);const t=new aW;for(const[e,n]of Uu(this,Rs))t.update(`${e}:${n.visible}`);return $u(this,Ls,t.hexdigest())}[Symbol.iterator](){return Uu(this,Rs).entries()}}Ls=new WeakMap,Rs=new WeakMap,Is=new WeakMap,Ds=new WeakMap,Os=new WeakSet,Ns=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const e=t[i];let s;if(Array.isArray(e))s=Vu(this,Os,Ns).call(this,e);else{if(!Uu(this,Rs).has(e))return RB(),!0;s=Uu(this,Rs).get(e).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n};class zj{constructor(t,{disableRange:e=!1,disableStream:n=!1}){DB(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:r,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=o,s?.length>0){const t=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((t,e)=>{this._onReceiveData({begin:t,chunk:e})}),t.addProgressListener((t,e)=>{this._onProgress({loaded:t,total:e})}),t.addProgressiveReadListener(t=>{this._onReceiveData({chunk:t})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n):DB(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(n),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){void 0===t.total?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){DB(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Wj(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new jj(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Wj{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=dz(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class jj{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Uj(t,e){const n=new Headers;if(!t||!e||"object"!=typeof e)return n;for(const i in e){const t=e[i];void 0!==t&&n.append(i,t)}return n}function Hj(t){return URL.parse(t)?.origin??null}function $j({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(t.get("Content-Length"),10);return Number.isInteger(r)?(s.suggestedLength=r,r<=2*n||i||!e||"bytes"!==t.get("Accept-Ranges")||"identity"!==(t.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s):s}function Vj(t){const e=t.get("Content-Disposition");if(e){let t=function(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let t=o(n);return t=unescape(t),t=a(t),t=l(t),r(t)}if(n=function(t){const e=[];let n;const s=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=s.exec(t));){let[,t,i,s]=n;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[i,s]}const r=[];for(let i=0;i<e.length&&i in e;++i){let[t,n]=e[i];n=o(n),t&&(n=unescape(n),0===i&&(n=a(n))),r.push(n)}return r.join("")}(t),n)return r(l(n));if(n=i("filename","i").exec(t),n){n=n[1];let t=o(n);return t=l(t),r(t)}function i(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(t,{fatal:!0}),s=qB(n);n=i.decode(s),e=!1}catch{}}return n}function r(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function o(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const n=e[t].indexOf('"');-1!==n&&(e[t]=e[t].slice(0,n),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function a(t){const e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,n,i){if("q"===n||"Q"===n)return s(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}));try{i=atob(i)}catch{}return s(e,i)})}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(dz(t))return t}return null}function qj(t,e){return new UB(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,404===t||0===t&&e.startsWith("file:"))}function Gj(t){return 200===t||206===t}function Zj(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Kj(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:new Uint8Array(t).buffer}class Xj{constructor(t){Wu(this,"_responseOrigin",null),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Uj(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return DB(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Yj(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Qj(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Yj{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,Zj(n,this._withCredentials,this._abortController)).then(e=>{if(t._responseOrigin=Hj(e.url),!Gj(e.status))throw qj(e.status,i);this._reader=e.body.getReader(),this._headersCapability.resolve();const n=e.headers,{allowRangeRequests:s,suggestedLength:r}=$j({responseHeaders:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=r||this._contentLength,this._filename=Vj(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new $B("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Kj(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Qj{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range",`bytes=${e}-${n-1}`);const r=i.url;fetch(r,Zj(s,this._withCredentials,this._abortController)).then(e=>{const n=Hj(e.url);if(n!==t._responseOrigin)throw new Error(`Expected range response-origin "${n}" to match "${t._responseOrigin}".`);if(!Gj(e.status))throw qj(e.status,r);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Kj(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Jj{constructor({url:t,httpHeaders:e,withCredentials:n}){Wu(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Uj(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,r]of this.headers)e.setRequestHeader(s,r);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",DB(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===i.status&&this.isHttp)return void n.onError(i.status);const s=i.status||200;if((200!==s||206!==n.expectedStatus)&&s!==n.expectedStatus)return void n.onError(i.status);const r=function(t){const e=t.response;return"string"!=typeof e?e:qB(e).buffer}(i);if(206===s){const t=i.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);e?n.onDone({begin:parseInt(e[1],10),chunk:r}):n.onError(0)}else r?n.onDone({begin:0,chunk:r}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class tU{constructor(t){this._source=t,this._manager=new Jj(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return DB(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new eU(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new nU(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class eU{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Hj(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(t=>{const[e,...n]=t.split(": ");return[e,n.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:r}=$j({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Vj(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=qj(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class nU{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Hj(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=qj(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const iU=/^[a-z][a-z0-9\-+.]+:/i;class sU{constructor(t){this.source=t,this.url=function(t){if(iU.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}(t.url),DB("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return DB(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new rU(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new oU(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class rU{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(t=>{this._contentLength=t.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},t=>{"ENOENT"===t.code&&(t=qj(0,this._url.href)),this._storedError=t,this._headersCapability.reject(t)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new $B("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class oU{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const aU=Symbol("INITIAL_DATA");class lU{constructor(){Hu(this,Bs),Hu(this,Fs,Object.create(null))}get(t,e=null){if(e){const n=Vu(this,Bs,zs).call(this,t);return n.promise.then(()=>e(n.data)),null}const n=Uu(this,Fs)[t];if(!n||n.data===aU)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=Uu(this,Fs)[t];return!!e&&e.data!==aU}delete(t){const e=Uu(this,Fs)[t];return!(!e||e.data===aU||(delete Uu(this,Fs)[t],0))}resolve(t,e=null){const n=Vu(this,Bs,zs).call(this,t);n.data=e,n.resolve()}clear(){for(const t in Uu(this,Fs)){const{data:e}=Uu(this,Fs)[t];e?.bitmap?.close()}$u(this,Fs,Object.create(null))}*[Symbol.iterator](){for(const t in Uu(this,Fs)){const{data:e}=Uu(this,Fs)[t];e!==aU&&(yield[t,e])}}}Fs=new WeakMap,Bs=new WeakSet,zs=function(t){var e;return(e=Uu(this,Fs))[t]||(e[t]={...Promise.withResolvers(),data:aU})};const hU=class t{constructor({textContentSource:e,container:n,viewport:i}){var s;if(Hu(this,hr),Hu(this,Ws,Promise.withResolvers()),Hu(this,js,null),Hu(this,Us,!1),Hu(this,Hs,!!globalThis.FontInspector?.enabled),Hu(this,$s,null),Hu(this,Vs,null),Hu(this,qs,0),Hu(this,Gs,0),Hu(this,Zs,null),Hu(this,Ks,null),Hu(this,Xs,0),Hu(this,Ys,0),Hu(this,Qs,Object.create(null)),Hu(this,Js,[]),Hu(this,tr,null),Hu(this,er,[]),Hu(this,nr,new WeakMap),Hu(this,ir,null),e instanceof ReadableStream)$u(this,tr,e);else{if("object"!=typeof e)throw new Error('No "textContentSource" parameter specified.');$u(this,tr,new ReadableStream({start(t){t.enqueue(e),t.close()}}))}$u(this,js,$u(this,Ks,n)),$u(this,Ys,i.scale*kz.pixelRatio),$u(this,Xs,i.rotation),$u(this,Vs,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:a,pageY:l}=i.rawDims;$u(this,ir,[1,0,0,-1,-a,l+o]),$u(this,Gs,r),$u(this,qs,o),Vu(s=t,pr,gr).call(s),Az(n,i),Uu(this,Ws).promise.finally(()=>{Uu(t,lr).delete(this),$u(this,Vs,null),$u(this,Qs,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=GB.platform;return FB(this,"fontFamilyMap",new Map([["sans-serif",(t&&e?"Calibri, ":"")+"sans-serif"],["monospace",(t&&e?"Lucida Console, ":"")+"monospace"]]))}render(){const e=()=>{Uu(this,Zs).read().then(({value:t,done:n})=>{n?Uu(this,Ws).resolve():(Uu(this,$s)??$u(this,$s,t.lang),Object.assign(Uu(this,Qs),t.styles),Vu(this,hr,cr).call(this,t.items),e())},Uu(this,Ws).reject)};return $u(this,Zs,Uu(this,tr).getReader()),Uu(t,lr).add(this),e(),Uu(this,Ws).promise}update({viewport:e,onBefore:n=null}){var i;const s=e.scale*kz.pixelRatio,r=e.rotation;if(r!==Uu(this,Xs)&&(n?.(),$u(this,Xs,r),Az(Uu(this,Ks),{rotation:r})),s!==Uu(this,Ys)){n?.(),$u(this,Ys,s);const e={div:null,properties:null,ctx:Vu(i=t,pr,fr).call(i,Uu(this,$s))};for(const t of Uu(this,er))e.properties=Uu(this,nr).get(t),e.div=t,Vu(this,hr,dr).call(this,e)}}cancel(){const t=new $B("TextLayer task cancelled.");Uu(this,Zs)?.cancel(t).catch(()=>{}),$u(this,Zs,null),Uu(this,Ws).reject(t)}get textDivs(){return Uu(this,er)}get textContentItemsStr(){return Uu(this,Js)}static cleanup(){if(!(Uu(this,lr).size>0)){Uu(this,sr).clear();for(const{canvas:t}of Uu(this,rr).values())t.remove();Uu(this,rr).clear()}}};Ws=new WeakMap,js=new WeakMap,Us=new WeakMap,Hs=new WeakMap,$s=new WeakMap,Vs=new WeakMap,qs=new WeakMap,Gs=new WeakMap,Zs=new WeakMap,Ks=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Qs=new WeakMap,Js=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,ir=new WeakMap,sr=new WeakMap,rr=new WeakMap,or=new WeakMap,ar=new WeakMap,lr=new WeakMap,hr=new WeakSet,cr=function(t){var e,n;if(Uu(this,Us))return;(n=Uu(this,Vs)).ctx??(n.ctx=Vu(e=hU,pr,fr).call(e,Uu(this,$s)));const i=Uu(this,er),s=Uu(this,Js);for(const r of t){if(i.length>1e5)return RB(),void $u(this,Us,!0);if(void 0!==r.str)s.push(r.str),Vu(this,hr,ur).call(this,r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const t=Uu(this,js);$u(this,js,document.createElement("span")),Uu(this,js).classList.add("markedContent"),r.id&&Uu(this,js).setAttribute("id",`${r.id}`),t.append(Uu(this,js))}else"endMarkedContent"===r.type&&$u(this,js,Uu(this,js).parentNode)}},ur=function(t){var e;const n=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};Uu(this,er).push(n);const s=KB.transform(Uu(this,ir),t.transform);let r=Math.atan2(s[1],s[0]);const o=Uu(this,Qs)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=Uu(this,Hs)&&o.fontSubstitution||o.fontFamily;a=hU.fontFamilyMap.get(a)||a;const l=Math.hypot(s[2],s[3]),h=l*Vu(e=hU,pr,yr).call(e,a,o,Uu(this,$s));let c,u;0===r?(c=s[4],u=s[5]-h):(c=s[4]+h*Math.sin(r),u=s[5]-h*Math.cos(r));const d="calc(var(--total-scale-factor) *",p=n.style;Uu(this,js)===Uu(this,Ks)?(p.left=`${(100*c/Uu(this,Gs)).toFixed(2)}%`,p.top=`${(100*u/Uu(this,qs)).toFixed(2)}%`):(p.left=`${d}${c.toFixed(2)}px)`,p.top=`${d}${u.toFixed(2)}px)`),p.fontSize=`${d}${(Uu(hU,ar)*l).toFixed(2)}px)`,p.fontFamily=a,i.fontSize=l,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,Uu(this,Hs)&&(n.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),0!==r&&(i.angle=r*(180/Math.PI));let f=!1;if(t.str.length>1)f=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(f=!0)}if(f&&(i.canvasWidth=o.vertical?t.height:t.width),Uu(this,nr).set(n,i),Uu(this,Vs).div=n,Uu(this,Vs).properties=i,Vu(this,hr,dr).call(this,Uu(this,Vs)),i.hasText&&Uu(this,js).append(n),i.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),Uu(this,js).append(t)}},dr=function(t){var e;const{div:n,properties:i,ctx:s}=t,{style:r}=n;let o="";if(Uu(hU,ar)>1&&(o=`scale(${1/Uu(hU,ar)})`),0!==i.canvasWidth&&i.hasText){const{fontFamily:t}=r,{canvasWidth:a,fontSize:l}=i;Vu(e=hU,pr,mr).call(e,s,l*Uu(this,Ys),t);const{width:h}=s.measureText(n.textContent);h>0&&(o=`scaleX(${a*Uu(this,Ys)/h}) ${o}`)}0!==i.angle&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},pr=new WeakSet,fr=function(t=null){let e=Uu(this,rr).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),Uu(this,rr).set(t,e),Uu(this,or).set(e,{size:0,family:""})}return e},mr=function(t,e,n){const i=Uu(this,or).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},gr=function(){if(null!==Uu(this,ar))return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),$u(this,ar,t.getBoundingClientRect().height),t.remove()},yr=function(t,e,n){const i=Uu(this,sr).get(t);if(i)return i;const s=Vu(this,pr,fr).call(this,n);s.canvas.width=s.canvas.height=30,Vu(this,pr,mr).call(this,s,30,t);const r=s.measureText(""),o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let l=.8;return o?l=o/(o+a):(GB.platform.isFirefox,e.ascent?l=e.ascent:e.descent&&(l=1+e.descent)),Uu(this,sr).set(t,l),l},Hu(hU,pr),Hu(hU,sr,new Map),Hu(hU,rr,new Map),Hu(hU,or,new WeakMap),Hu(hU,ar,null),Hu(hU,lr,new Set);let cU=hU;function uU(t={}){"string"==typeof t||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new pU,{docId:n}=e,i=t.url?function(t){if(t instanceof URL)return t.href;if("string"==typeof t){if(yB)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(t.url):null,s=t.data?function(t){if(yB&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return qB(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"==typeof t&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(t.data):null,r=t.httpHeaders||null,o=!0===t.withCredentials,a=t.password??null,l=t.range instanceof fU?t.range:null,h=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:65536;let c=t.worker instanceof vU?t.worker:null;const u=t.verbosity,d="string"!=typeof t.docBaseUrl||uz(t.docBaseUrl)?null:t.docBaseUrl,p=pW(t.cMapUrl),f=!1!==t.cMapPacked,m=t.CMapReaderFactory||(yB?IW:SW),g=pW(t.iccUrl),y=pW(t.standardFontDataUrl),v=t.StandardFontDataFactory||(yB?DW:EW),_=pW(t.wasmUrl),b=t.WasmFactory||(yB?OW:MW),w=!0!==t.stopAtErrors,x=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,S=!1!==t.isEvalSupported,A="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!yB,k="boolean"==typeof t.isImageDecoderSupported?t.isImageDecoderSupported:!yB&&(GB.platform.isFirefox||!globalThis.chrome),P=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,E="boolean"==typeof t.disableFontFace?t.disableFontFace:yB,C=!0===t.fontExtraProperties,M=!0===t.enableXfa,T=t.ownerDocument||globalThis.document,L=!0===t.disableRange,R=!0===t.disableStream,I=!0===t.disableAutoFetch,D=!0===t.pdfBug,O=t.CanvasFactory||(yB?RW:wW),N=t.FilterFactory||(yB?LW:kW),F=!0===t.enableHWA,B=!1!==t.useWasm,z=l?l.length:t.length??NaN,W="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!yB&&!E,j="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:!!(m===SW&&v===EW&&b===MW&&p&&y&&_&&gz(p,document.baseURI)&&gz(y,document.baseURI)&&gz(_,document.baseURI));var U;U=u,Number.isInteger(U)&&(TB=U);const H={canvasFactory:new O({ownerDocument:T,enableHWA:F}),filterFactory:new N({docId:n,ownerDocument:T}),cMapReaderFactory:j?null:new m({baseUrl:p,isCompressed:f}),standardFontDataFactory:j?null:new v({baseUrl:y}),wasmFactory:j?null:new b({baseUrl:_})};c||(c=vU.create({verbosity:u,port:Dj.workerPort}),e._worker=c);const $={docId:n,apiVersion:"5.4.296",data:s,password:a,disableAutoFetch:I,rangeChunkSize:h,length:z,docBaseUrl:d,enableXfa:M,evaluatorOptions:{maxImageSize:x,disableFontFace:E,ignoreErrors:w,isEvalSupported:S,isOffscreenCanvasSupported:A,isImageDecoderSupported:k,canvasMaxAreaInBytes:P,fontExtraProperties:C,useSystemFonts:W,useWasm:B,useWorkerFetch:j,cMapUrl:p,iccUrl:g,standardFontDataUrl:y,wasmUrl:_}},V={ownerDocument:T,pdfBug:D,styleElement:null,loadingParams:{disableAutoFetch:I,enableXfa:M}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const t=c.messageHandler.sendWithPromise("GetDocRequest",$,s?[s.buffer]:null);let a;if(l)a=new zj(l,{disableRange:L,disableStream:R});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const t=gz(i)?Xj:yB?sU:tU;a=new t({url:i,length:z,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:L,disableStream:R})}return t.then(t=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const i=new _W(n,t,c.port),s=new _U(i,e,a,V,H,F);e._transport=s,i.send("Ready",null)})}).catch(e._capability.reject),e}const dU=class t{constructor(){Wu(this,"_capability",Promise.withResolvers()),Wu(this,"_transport",null),Wu(this,"_worker",null),Wu(this,"docId","d"+qu(t,vr)._++),Wu(this,"destroyed",!1),Wu(this,"onPassword",null),Wu(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}};vr=new WeakMap,Hu(dU,vr,0);let pU=dU;class fU{constructor(t,e,n=!1,i=null){Hu(this,_r,Promise.withResolvers()),Hu(this,br,[]),Hu(this,wr,[]),Hu(this,xr,[]),Hu(this,Sr,[]),this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){Uu(this,Sr).push(t)}addProgressListener(t){Uu(this,xr).push(t)}addProgressiveReadListener(t){Uu(this,wr).push(t)}addProgressiveDoneListener(t){Uu(this,br).push(t)}onDataRange(t,e){for(const n of Uu(this,Sr))n(t,e)}onDataProgress(t,e){Uu(this,_r).promise.then(()=>{for(const n of Uu(this,xr))n(t,e)})}onDataProgressiveRead(t){Uu(this,_r).promise.then(()=>{for(const e of Uu(this,wr))e(t)})}onDataProgressiveDone(){Uu(this,_r).promise.then(()=>{for(const t of Uu(this,br))t()})}transportReady(){Uu(this,_r).resolve()}requestDataRange(t,e){IB("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}_r=new WeakMap,br=new WeakMap,wr=new WeakMap,xr=new WeakMap,Sr=new WeakMap;class mU{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return FB(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class gU{constructor(t,e,n,i=!1){Hu(this,kr),Hu(this,Ar,!1),this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new mz:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new lU,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}={}){return new hz({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return FB(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:i="display",annotationMode:s=bB.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:c=null,isEditing:u=!1,recordOperations:d=!1,operationsFilter:p=null}){this._stats?.time("Overall");const f=this._transport.getRenderingIntent(i,s,c,u),{renderingIntent:m,cacheKey:g}=f;$u(this,Ar,!1),a||(a=this._transport.getOptionalContentConfig(m));let y=this._intentStates.get(g);y||(y=Object.create(null),this._intentStates.set(g,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const v=!!(4&m);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(f));const _=Boolean(this._pdfBug&&globalThis.StepperManager?.enabled),b=!this.recordedBBoxes&&(d||_),w=t=>{if(y.renderTasks.delete(x),b){const t=x.gfx?.dependencyTracker.take();t&&(x.stepper&&x.stepper.setOperatorBBoxes(t,x.gfx.dependencyTracker.takeDebugMetadata()),d&&(this.recordedBBoxes=t))}v&&$u(this,Ar,!0),Vu(this,kr,Pr).call(this),t?(x.capability.reject(t),this._abortOperatorList({intentState:y,reason:t instanceof Error?t:new Error(t)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new xU({callback:w,params:{canvas:e,canvasContext:t,dependencyTracker:b?new HW(e,y.operatorList.length,_):null,viewport:n,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:p});(y.renderTasks||(y.renderTasks=new Set)).add(x);const S=x.task;return Promise.all([y.displayReadyCapability.promise,a]).then(([t,e])=>{if(this.destroyed)w();else{if(this._stats?.time("Rendering"),!(e.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:t,optionalContentConfig:e}),x.operatorListChanged()}}).catch(w),S}getOperatorList({intent:t="display",annotationMode:e=bB.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){const s=this._transport.getRenderingIntent(t,e,n,i,!0);let r,o=this._intentStates.get(s.cacheKey);return o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o)),o.opListReadCapability||(r=Object.create(null),r.operatorListChanged=function(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(r))},o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(r),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(t=>iz.textContent(t));const e=this.streamTextContent(t);return new Promise(function(t,n){const i=e.getReader(),s={items:[],styles:Object.create(null),lang:null};!function e(){i.read().then(function({value:n,done:i}){i?t(s):(s.lang??(s.lang=n.lang),Object.assign(s.styles,n.styles),s.items.push(...n.items),e())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),$u(this,Ar,!1),Promise.all(t)}cleanup(t=!1){$u(this,Ar,!0);const e=Vu(this,kr,Pr).call(this);return t&&e&&this._stats&&(this._stats=new mz),e}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&Vu(this,kr,Pr).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:s,transfer:r}=n,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:i},r).getReader(),a=this._intentStates.get(e);a.streamReader=o;const l=()=>{o.read().then(({value:t,done:e})=>{e?a.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,a),l())},t=>{if(a.streamReader=null,!this._transport.destroyed){if(a.operatorList){a.operatorList.lastChunk=!0;for(const t of a.renderTasks)t.operatorListChanged();Vu(this,kr,Pr).call(this)}if(a.displayReadyCapability)a.displayReadyCapability.reject(t);else{if(!a.opListReadCapability)throw t;a.opListReadCapability.reject(t)}}})};l()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof cz){let n=100;return e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n))}}if(t.streamReader.cancel(new $B(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}Ar=new WeakMap,kr=new WeakSet,Pr=function(){if(!Uu(this,Ar)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),$u(this,Ar,!1),!0};const yU=class t{constructor({name:e=null,port:n=null,verbosity:i=LB()}={}){if(Hu(this,Dr),Hu(this,Er,Promise.withResolvers()),Hu(this,Cr,null),Hu(this,Mr,null),Hu(this,Tr,null),this.name=e,this.destroyed=!1,this.verbosity=i,n){if(Uu(t,Ir).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Uu(t,Ir).set(n,this),Vu(this,Dr,Nr).call(this,n)}else Vu(this,Dr,Fr).call(this)}get promise(){return Uu(this,Er).promise}get port(){return Uu(this,Mr)}get messageHandler(){return Uu(this,Cr)}destroy(){this.destroyed=!0,Uu(this,Tr)?.terminate(),$u(this,Tr,null),Uu(t,Ir).delete(Uu(this,Mr)),$u(this,Mr,null),Uu(this,Cr)?.destroy(),$u(this,Cr,null)}static create(e){const n=Uu(this,Ir).get(e?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new t(e)}static get workerSrc(){if(Dj.workerSrc)return Dj.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return FB(this,"_setupFakeWorkerGlobal",(async()=>Uu(this,zr,Wr)?Uu(this,zr,Wr):(await import(this.workerSrc)).WorkerMessageHandler)())}};Er=new WeakMap,Cr=new WeakMap,Mr=new WeakMap,Tr=new WeakMap,Lr=new WeakMap,Rr=new WeakMap,Ir=new WeakMap,Dr=new WeakSet,Or=function(){Uu(this,Er).resolve(),Uu(this,Cr).send("configure",{verbosity:this.verbosity})},Nr=function(t){$u(this,Mr,t),$u(this,Cr,new _W("main","worker",t)),Uu(this,Cr).on("ready",()=>{}),Vu(this,Dr,Or).call(this)},Fr=function(){if(Uu(yU,Rr)||Uu(yU,zr,Wr))return void Vu(this,Dr,Br).call(this);let{workerSrc:t}=yU;try{yU._isSameOrigin(window.location,t)||(t=yU._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new _W("main","worker",e),i=()=>{s.abort(),n.destroy(),e.terminate(),this.destroyed?Uu(this,Er).reject(new Error("Worker was destroyed")):Vu(this,Dr,Br).call(this)},s=new AbortController;e.addEventListener("error",()=>{Uu(this,Tr)||i()},{signal:s.signal}),n.on("test",t=>{s.abort(),!this.destroyed&&t?($u(this,Cr,n),$u(this,Mr,e),$u(this,Tr,e),Vu(this,Dr,Or).call(this)):i()}),n.on("ready",t=>{if(s.abort(),this.destroyed)i();else try{r()}catch{Vu(this,Dr,Br).call(this)}});const r=()=>{const t=new Uint8Array;n.send("test",t,[t.buffer])};return void r()}catch{}Vu(this,Dr,Br).call(this)},Br=function(){Uu(yU,Rr)||$u(yU,Rr,!0),yU._setupFakeWorkerGlobal.then(t=>{if(this.destroyed)return void Uu(this,Er).reject(new Error("Worker was destroyed"));const e=new gW;$u(this,Mr,e);const n="fake"+qu(yU,Lr)._++,i=new _W(n+"_worker",n,e);t.setup(i,e),$u(this,Cr,new _W(n,n+"_worker",e)),Vu(this,Dr,Or).call(this)}).catch(t=>{Uu(this,Er).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},zr=new WeakSet,Wr=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Hu(yU,zr),Hu(yU,Lr,0),Hu(yU,Rr,!1),Hu(yU,Ir,new WeakMap),yB&&($u(yU,Rr,!0),Dj.workerSrc||(Dj.workerSrc="./pdf.worker.mjs")),yU._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||"null"===n.origin)return!1;const i=new URL(e,n);return n.origin===i.origin},yU._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},yU.fromPort=t=>{if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return yU.create(t)};let vU=yU;class _U{constructor(t,e,n,i,s,r){Hu(this,qr),Hu(this,jr,new Map),Hu(this,Ur,new Map),Hu(this,Hr,new Map),Hu(this,$r,new Map),Hu(this,Vr,null),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new lU,this.fontLoader=new uW({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=r,this.setupMessageHandler()}get annotationStorage(){return FB(this,"annotationStorage",new hW)}getRenderingIntent(t,e=bB.ENABLE,n=null,i=!1,s=!1){let r=2,o=lW;switch(t){case"any":r=1;break;case"display":break;case"print":r=4}const a=4&r&&n instanceof cW?n:this.annotationStorage;switch(e){case bB.DISABLE:r+=64;break;case bB.ENABLE:break;case bB.ENABLE_FORMS:r+=16;break;case bB.ENABLE_STORAGE:r+=32,o=a.serializable}i&&(r+=128),s&&(r+=256);const{ids:l,hash:h}=a.modifiedIds;return{renderingIntent:r,cacheKey:[r,o.hash,h].join("_"),annotationStorageSerializable:o,modifiedIds:l}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),Uu(this,Vr)?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of Uu(this,Ur).values())t.push(n._destroy());Uu(this,Ur).clear(),Uu(this,Hr).clear(),Uu(this,$r).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Uu(this,jr).clear(),this.filterFactory.destroy(),cU.cleanup(),this._networkStream?.cancelAllRequests(new $B("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(t,e)=>{DB(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then(function({value:t,done:n}){n?e.close():(DB(t instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}}),t.on("ReaderHeadersReady",async t=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:s}=this._fullReader;return n&&i||(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),{isStreamingSupported:n,isRangeSupported:i,contentLength:s}}),t.on("GetRangeReader",(t,e)=>{DB(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(t.begin,t.end);n?(e.onPull=()=>{n.read().then(function({value:t,done:n}){n?e.close():(DB(t instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{n.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}):e.close()}),t.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new mU(t,this))}),t.on("DocException",t=>{e._capability.reject(vW(t))}),t.on("PasswordRequest",t=>{$u(this,Vr,Promise.withResolvers());try{if(!e.onPassword)throw vW(t);const n=t=>{t instanceof Error?Uu(this,Vr).reject(t):Uu(this,Vr).resolve({password:t})};e.onPassword(n,t.code)}catch(n){Uu(this,Vr).reject(n)}return Uu(this,Vr).promise}),t.on("DataLoaded",t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),t.on("StartRenderPage",t=>{this.destroyed||Uu(this,Ur).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),t.on("commonobj",([e,n,i])=>{if(this.destroyed)return null;if(this.commonObjs.has(e))return null;switch(n){case"Font":if("error"in i){const t=i.error;this.commonObjs.resolve(e,t);break}const s=new Ij(i),r=this._params.pdfBug&&globalThis.FontInspector?.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,o=new dW(s,r,i.extra,i.charProcOperatorList);this.fontLoader.bind(o).catch(()=>t.sendWithPromise("FontFallback",{id:e})).finally(()=>{!o.fontExtraProperties&&o.data&&o.clearData(),this.commonObjs.resolve(e,o)});break;case"CopyLocalImage":const{imageRef:a}=i;DB(a,"The imageRef must be defined.");for(const t of Uu(this,Ur).values())for(const[,n]of t.objs)if(n?.ref===a)return n.dataLen?(this.commonObjs.resolve(e,structuredClone(n)),n.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(e,i);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([t,e,n,i])=>{if(this.destroyed)return;const s=Uu(this,Ur).get(e);if(!s.objs.has(t))if(0!==s._intentStates.size)switch(n){case"Image":case"Pattern":s.objs.resolve(t,i);break;default:throw new Error(`Got unknown object type ${n}`)}else i?.bitmap?.close()}),t.on("DocProgress",t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})}),t.on("FetchBinaryData",async t=>{if(this.destroyed)throw new Error("Worker was destroyed.");const e=this[t.type];if(!e)throw new Error(`${t.type} not initialized, see the \`useWorkerFetch\` parameter.`);return e.fetch(t)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size;const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=Uu(this,Hr).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&Uu(this,$r).set(n.refStr,t);const i=new gU(e,n,this,this._params.pdfBug);return Uu(this,Ur).set(e,i),i});return Uu(this,Hr).set(e,i),i}getPageIndex(t){return fW(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return Vu(this,qr,Gr).call(this,"GetFieldObjects")}hasJSActions(){return Vu(this,qr,Gr).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return Vu(this,qr,Gr).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return Vu(this,qr,Gr).call(this,"GetOptionalContentConfig").then(e=>new Bj(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=Uu(this,jr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(t=>({info:t[0],metadata:t[1]?new Oj(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return Uu(this,jr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of Uu(this,Ur).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),Uu(this,jr).clear(),this.filterFactory.destroy(!0),cU.cleanup()}}cachedPageNumber(t){if(!fW(t))return null;const e=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return Uu(this,$r).get(e)??null}}jr=new WeakMap,Ur=new WeakMap,Hr=new WeakMap,$r=new WeakMap,Vr=new WeakMap,qr=new WeakSet,Gr=function(t,e=null){const n=Uu(this,jr).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return Uu(this,jr).set(t,i),i};class bU{constructor(t){Hu(this,Zr,null),Wu(this,"onContinue",null),Wu(this,"onError",null),$u(this,Zr,t)}get promise(){return Uu(this,Zr).capability.promise}cancel(t=0){Uu(this,Zr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=Uu(this,Zr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=Uu(this,Zr);return t.form||t.canvas&&e?.size>0}}Zr=new WeakMap;const wU=class t{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:s,operatorList:r,pageIndex:o,canvasFactory:a,filterFactory:l,useRequestAnimationFrame:h=!1,pdfBug:c=!1,pageColors:u=null,enableHWA:d=!1,operationsFilter:p=null}){Hu(this,Kr,null),this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=o,this.canvasFactory=a,this.filterFactory=l,this._pdfBug=c,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bU(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=d,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(Uu(t,Xr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Uu(t,Xr).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:s,background:r,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ej(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),Uu(this,Kr)&&(window.cancelAnimationFrame(Uu(this,Kr)),$u(this,Kr,null)),Uu(t,Xr).delete(this._canvas),e||(e=new cz(`Rendering cancelled, page ${this._pageIndex+1}`,n)),this.callback(e),this.task.onError?.(e)}operatorListChanged(){this.graphicsReady?(this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?$u(this,Kr,window.requestAnimationFrame(()=>{$u(this,Kr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Uu(t,Xr).delete(this._canvas),this.callback())))}};Kr=new WeakMap,Xr=new WeakMap,Hu(wU,Xr,new WeakSet);let xU=wU;const SU="5.4.296",AU="f56dc8601",kU=class t{constructor({editor:e=null,uiManager:n=null}){Hu(this,lo),Hu(this,Yr,null),Hu(this,Qr,null),Hu(this,Jr),Hu(this,to,null),Hu(this,eo,!1),Hu(this,no,!1),Hu(this,io,null),Hu(this,so),Hu(this,ro,null),Hu(this,oo,null),e?($u(this,no,!1),$u(this,io,e)):$u(this,no,!0),$u(this,oo,e?._uiManager||n),$u(this,so,Uu(this,oo)._eventBus),$u(this,Jr,e?.color?.toUpperCase()||Uu(this,oo)?.highlightColors.values().next().value||"#FFFF98"),Uu(t,ao)||$u(t,ao,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return FB(this,"_keyboardManager",new Vz([[["Escape","mac+Escape"],t.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],t.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],t.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],t.prototype._moveToPrevious],[["Home","mac+Home"],t.prototype._moveToBeginning],[["End","mac+End"],t.prototype._moveToEnd]]))}renderButton(){const t=$u(this,Yr,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",Uu(this,io)&&(t.ariaControls=`${Uu(this,io).id}_colorpicker_dropdown`);const e=Uu(this,oo)._signal;t.addEventListener("click",Vu(this,lo,po).bind(this),{signal:e}),t.addEventListener("keydown",Vu(this,lo,uo).bind(this),{signal:e});const n=$u(this,Qr,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=Uu(this,Jr),t.append(n),t}renderMainDropdown(){const t=$u(this,to,Vu(this,lo,ho).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===Uu(this,Yr))return void Vu(this,lo,po).call(this,t);const e=t.target.getAttribute("data-color");e&&Vu(this,lo,co).call(this,e,t)}_moveToNext(t){Uu(this,lo,mo)?t.target!==Uu(this,Yr)?t.target.nextSibling?.focus():Uu(this,to).firstChild?.focus():Vu(this,lo,po).call(this,t)}_moveToPrevious(t){t.target!==Uu(this,to)?.firstChild&&t.target!==Uu(this,Yr)?(Uu(this,lo,mo)||Vu(this,lo,po).call(this,t),t.target.previousSibling?.focus()):Uu(this,lo,mo)&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){Uu(this,lo,mo)?Uu(this,to).firstChild?.focus():Vu(this,lo,po).call(this,t)}_moveToEnd(t){Uu(this,lo,mo)?Uu(this,to).lastChild?.focus():Vu(this,lo,po).call(this,t)}hideDropdown(){Uu(this,to)?.classList.add("hidden"),Uu(this,Yr).ariaExpanded="false",Uu(this,ro)?.abort(),$u(this,ro,null)}_hideDropdownFromKeyboard(){Uu(this,no)||(Uu(this,lo,mo)?(this.hideDropdown(),Uu(this,Yr).focus({preventScroll:!0,focusVisible:Uu(this,eo)})):Uu(this,io)?.unselect())}updateColor(t){if(Uu(this,Qr)&&(Uu(this,Qr).style.backgroundColor=t),!Uu(this,to))return;const e=Uu(this,oo).highlightColors.values();for(const n of Uu(this,to).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){Uu(this,Yr)?.remove(),$u(this,Yr,null),$u(this,Qr,null),Uu(this,to)?.remove(),$u(this,to,null)}};Yr=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,to=new WeakMap,eo=new WeakMap,no=new WeakMap,io=new WeakMap,so=new WeakMap,ro=new WeakMap,oo=new WeakMap,ao=new WeakMap,lo=new WeakSet,ho=function(){const t=document.createElement("div"),e=Uu(this,oo)._signal;t.addEventListener("contextmenu",yz,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Uu(this,io)&&(t.id=`${Uu(this,io).id}_colorpicker_dropdown`);for(const[n,i]of Uu(this,oo).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",Uu(kU,ao)[n]);const r=document.createElement("span");s.append(r),r.className="swatch",r.style.backgroundColor=i,s.ariaSelected=i===Uu(this,Jr),s.addEventListener("click",Vu(this,lo,co).bind(this,i),{signal:e}),t.append(s)}return t.addEventListener("keydown",Vu(this,lo,uo).bind(this),{signal:e}),t},co=function(t,e){e.stopPropagation(),Uu(this,so).dispatch("switchannotationeditorparams",{source:this,type:SB.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},uo=function(t){kU._keyboardManager.exec(this,t)},po=function(t){if(Uu(this,lo,mo))return void this.hideDropdown();if($u(this,eo,0===t.detail),Uu(this,ro)||($u(this,ro,new AbortController),window.addEventListener("pointerdown",Vu(this,lo,fo).bind(this),{signal:Uu(this,oo).combinedSignal(Uu(this,ro))})),Uu(this,Yr).ariaExpanded="true",Uu(this,to))return void Uu(this,to).classList.remove("hidden");const e=$u(this,to,Vu(this,lo,ho).call(this));Uu(this,Yr).append(e)},fo=function(t){Uu(this,to)?.contains(t.target)||this.hideDropdown()},mo=function(){return Uu(this,to)&&!Uu(this,to).classList.contains("hidden")},Hu(kU,ao,null);let PU=kU;const EU=class t{constructor(e){Hu(this,go,null),Hu(this,yo,null),Hu(this,vo,null),$u(this,yo,e),$u(this,vo,e._uiManager),Uu(t,_o)||$u(t,_o,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Uu(this,go))return Uu(this,go);const{editorType:e,colorType:n,colorValue:i}=Uu(this,yo),s=$u(this,go,document.createElement("input"));return s.type="color",s.value=i||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",Uu(t,_o)[e]),s.addEventListener("input",()=>{Uu(this,vo).updateParams(n,s.value)},{signal:Uu(this,vo)._signal}),s}update(t){Uu(this,go)&&(Uu(this,go).value=t)}destroy(){Uu(this,go)?.remove(),$u(this,go,null)}hideDropdown(){}};go=new WeakMap,yo=new WeakMap,vo=new WeakMap,_o=new WeakMap,Hu(EU,_o,null);let CU=EU;function MU(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function TU(t){return Math.max(0,Math.min(255,255*t))}class LU{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return[t=TU(t),t,t]}static G_HTML([t]){const e=MU(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(TU)}static RGB_HTML(t){return`#${t.map(MU).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[TU(1-Math.min(1,t+i)),TU(1-Math.min(1,n+i)),TU(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,s=1-e,r=1-n;return["CMYK",i,s,r,Math.min(i,s,r)]}}class RU{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){IB("Abstract method `_createSVG` called.")}}class IU extends RU{_createSVG(t){return document.createElementNS(rz,t)}}const DU=new WeakSet,OU=60*(new Date).getTimezoneOffset()*1e3;class NU{static create(t){switch(t.data.annotationType){case PB.LINK:return new zU(t);case PB.TEXT:return new WU(t);case PB.WIDGET:switch(t.data.fieldType){case"Tx":return new UU(t);case"Btn":return t.data.radioButton?new VU(t):t.data.checkBox?new $U(t):new qU(t);case"Ch":return new GU(t);case"Sig":return new HU(t)}return new jU(t);case PB.POPUP:return new ZU(t);case PB.FREETEXT:return new XU(t);case PB.LINE:return new YU(t);case PB.SQUARE:return new QU(t);case PB.CIRCLE:return new JU(t);case PB.POLYLINE:return new tH(t);case PB.CARET:return new nH(t);case PB.INK:return new iH(t);case PB.POLYGON:return new eH(t);case PB.HIGHLIGHT:return new sH(t);case PB.UNDERLINE:return new rH(t);case PB.SQUIGGLY:return new oH(t);case PB.STRIKEOUT:return new aH(t);case PB.STAMP:return new lH(t);case PB.FILEATTACHMENT:return new hH(t);default:return new FU(t)}}}bo=new WeakMap,wo=new WeakMap,xo=new WeakMap,So=new WeakSet,Ao=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:a}}}}=this;n?.splice(0,4,...t),e.left=100*(t[0]-o)/s+"%",e.top=100*(r-t[3]+a)/r+"%",0===i?(e.width=100*(t[2]-t[0])/s+"%",e.height=100*(t[3]-t[1])/r+"%"):this.setRotation(i)};let FU=class t{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){Hu(this,So),Hu(this,bo,null),Hu(this,wo,!1),Hu(this,xo,null),this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!(!t?.str&&!e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return t._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:i}=this.data;let s=-1/0,r=-1/0;if(e?.length>=8){for(let t=0;t<e.length;t+=8)e[t+1]>r?(r=e[t+1],s=e[t+2]):e[t+1]===r&&(s=Math.max(s,e[t+2]));return[s,r]}if(n?.length>=1){for(const t of n)for(let e=0,n=t.length;e<n;e+=2)t[e+1]>r?(r=t[e+1],s=t[e]):t[e+1]===r&&(s=Math.max(s,t[e]));if(s!==1/0)return[s,r]}return i?[i[2],i[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:r}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-s)/n,t[1]=100*(t[1]-r)/i,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${wB}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${wB}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(Uu(this,xo)?.popup||this.popup)?.remove(),$u(this,xo,this.popup=null)}updateEdited(t){if(!this.container)return;t.rect&&(Uu(this,bo)||$u(this,bo,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&Vu(this,So,Ao).call(this,e);let i=Uu(this,xo)?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=Uu(this,xo).popup),i&&(i.updateEdited(t),n?.deleted&&(i.remove(),$u(this,xo,null),this.popup=null))}resetEdited(){Uu(this,bo)&&(Vu(this,So,Ao).call(this,Uu(this,bo).rect),Uu(this,xo)?.popup.resetEdited(),$u(this,bo,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),this instanceof jU||this instanceof zU||(s.tabIndex=0);const{style:r}=s;if(r.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof ZU){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,s),s}const{width:o,height:a}=this;if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,n=e.borderStyle.verticalCornerRadius;if(t>0||n>0){const e=`calc(${t}px * var(--total-scale-factor)) / calc(${n}px * var(--total-scale-factor))`;r.borderRadius=e}else if(this instanceof VU){const t=`calc(${o}px * var(--total-scale-factor)) / calc(${a}px * var(--total-scale-factor))`;r.borderRadius=t}switch(e.borderStyle.style){case 1:r.borderStyle="solid";break;case 2:r.borderStyle="dashed";break;case 3:case 4:break;case 5:r.borderBottomStyle="solid"}const i=e.borderColor||null;i?($u(this,wo,!0),r.borderColor=KB.makeHexColor(0|i[0],0|i[1],0|i[2])):r.borderWidth=0}const l=KB.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:c,pageX:u,pageY:d}=i.rawDims;r.left=100*(l[0]-u)/h+"%",r.top=100*(l[1]-d)/c+"%";const{rotation:p}=e;return e.hasOwnCanvas||0===p?(r.width=100*o/h+"%",r.height=100*a/c+"%"):this.setRotation(p,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:r}=this;t%180!=0&&([s,r]=[r,s]),e.style.width=100*s/n+"%",e.style.height=100*r/i+"%",e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,n)=>{const i=n.detail[t],s=i[0],r=i.slice(1);n.target.style[e]=LU[`${s}_HTML`](r),this.annotationStorage.setValue(this.data.id,{[e]:LU[`${s}_rgb`](r)})};return FB(this,"_commonActions",{display:t=>{const{display:e}=t.detail,n=e%2==1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const s=t[i]||n[i];s?.(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,s]of Object.entries(e)){const r=n[i];r&&(r({detail:{[i]:s},target:t}),delete e[i])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,s]=this.data.rect.map(t=>Math.fround(t));if(8===t.length){const[r,o,a,l]=t.subarray(2,6);if(i===r&&s===o&&e===a&&n===l)return}const{style:r}=this.container;let o;if(Uu(this,wo)){const{borderColor:t,borderWidth:e}=r;r.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${e}">`],this.container.classList.add("hasBorder")}const a=i-e,l=s-n,{svgFactory:h}=this,c=h.createElement("svg");c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0),c.role="none";const u=h.createElement("defs");c.append(u);const d=h.createElement("clipPath"),p=`clippath_${this.data.id}`;d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),u.append(d);for(let f=2,m=t.length;f<m;f+=8){const n=t[f],i=t[f+1],r=t[f+2],c=t[f+3],u=h.createElement("rect"),p=(r-e)/a,m=(s-i)/l,g=(n-r)/a,y=(i-c)/l;u.setAttribute("x",p),u.setAttribute("y",m),u.setAttribute("width",g),u.setAttribute("height",y),d.append(u),o?.push(`<rect vector-effect="non-scaling-stroke" x="${p}" y="${m}" width="${g}" height="${y}"/>`)}Uu(this,wo)&&(o.push("</g></svg>')"),r.backgroundImage=o.join("")),this.container.append(c),this.container.style.clipPath=`url(#${p})`}_createPopup(t=null){const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate);const s=$u(this,xo,new ZU({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(s.render())}get hasPopupElement(){return!!(Uu(this,xo)||this.popup||this.data.popupRef)}get extraPopupElement(){return Uu(this,xo)}render(){IB("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:t,id:s,exportValues:r}of i){if(-1===t)continue;if(s===e)continue;const i="string"==typeof r?r:null,o=document.querySelector(`[data-element-id="${s}"]`);!o||DU.has(o)?n.push({id:s,exportValue:i,domElement:o}):RB()}return n}for(const i of document.getElementsByName(t)){const{exportValue:t}=i,s=i.getAttribute("data-element-id");s!==e&&DU.has(i)&&n.push({id:s,exportValue:t,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};class BU extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class zU extends FU{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),Hu(this,ko),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),i=!0):t.attachment?(Vu(this,ko,Eo).call(this,n,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(Vu(this,ko,Co).call(this,n,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&Vu(this,ko,Po).call(this),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),Vu(this,ko,Po).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const s=n.get(i);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),Vu(this,ko,Po).call(this)}_bindResetFormAction(t,e){const n=t.onclick;n||(t.href=this.linkService.getAnchorUrl("")),Vu(this,ko,Po).call(this),this._fieldObjects?t.onclick=()=>{n?.();const{fields:t,refs:i,include:s}=e,r=[];if(0!==t.length||0!==i.length){const e=new Set(i);for(const n of t){const t=this._fieldObjects[n]||[];for(const{id:n}of t)e.add(n)}for(const t of Object.values(this._fieldObjects))for(const n of t)e.has(n.id)===s&&r.push(n)}else for(const e of Object.values(this._fieldObjects))r.push(...e);const o=this.annotationStorage,a=[];for(const e of r){const{id:t}=e;switch(a.push(t),e.type){case"text":{const n=e.defaultValue||"";o.setValue(t,{value:n});break}case"checkbox":case"radiobutton":{const n=e.defaultValue===e.exportValues;o.setValue(t,{value:n});break}case"combobox":case"listbox":{const n=e.defaultValue||"";o.setValue(t,{value:n});break}default:continue}const n=document.querySelector(`[data-element-id="${t}"]`);n&&(DU.has(n)?n.dispatchEvent(new Event("resetform")):RB())}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:a,name:"ResetForm"}}),!1}:n||(t.onclick=()=>!1)}}ko=new WeakSet,Po=function(){this.container.setAttribute("data-internal-link","")},Eo=function(t,e,n="",i=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),Vu(this,ko,Po).call(this)},Co=function(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),Vu(this,ko,Po).call(this)};class WU extends FU{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class jU extends FU{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&("CANVAS"===t.previousSibling?.nodeName&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return GB.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,s){n.includes("mouse")?t.addEventListener(n,t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})}):t.addEventListener(n,t=>{if("blur"===n){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===n){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(t)}})})}_setEventListeners(t,e,n,i){for(const[s,r]of n)("Action"===r||this.data.actions?.[r])&&("Focus"!==r&&"Blur"!==r||e||(e={focused:!1}),this._setEventListener(t,e,s,r,i),"Focus"!==r||this.data.actions?.Blur?"Blur"!==r||this.data.actions?.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":KB.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const{fontColor:e}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||9,i=t.style;let s;const r=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(_B*n))||1);s=Math.min(n,r(e/_B))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(n,r(t/_B))}i.fontSize=`calc(${s}px * var(--total-scale-factor))`,i.color=KB.makeHexColor(e[0],e[1],e[2]),null!==this.data.textAlignment&&(i.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class UU extends jU{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,n,i){const s=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=n),s.setValue(r.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=t.getValue(e,{value:this.data.fieldValue});let s=i.value||"";const r=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;r&&s.length>r&&(s=s.slice(0,r));let o=i.formattedValue||this.data.textContent?.join("\n")||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const a={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=o??s,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",o??s),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),DU.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:l,datetimeType:h,timeStep:c}=this.data,u=!!h&&this.enableScripting;l&&(n.title=l),this._setRequired(n,this.data.required),r&&(n.maxLength=r),n.addEventListener("input",i=>{t.setValue(e,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),a.formattedValue=null}),n.addEventListener("resetform",t=>{const e=this.data.defaultFieldValue??"";n.value=a.userValue=e,a.formattedValue=null});let d=t=>{const{formattedValue:e}=a;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",t=>{if(a.focused)return;const{target:e}=t;if(u&&(e.type=h,c&&(e.step=c)),a.userValue){const t=a.userValue;if(u)if("time"===h){const n=new Date(t),i=[n.getHours(),n.getMinutes(),n.getSeconds()];e.value=i.map(t=>t.toString().padStart(2,"0")).join(":")}else e.value=new Date(t-OU).toISOString().split("date"===h?"T":".",1)[0];else e.value=t}a.lastCommittedValue=e.value,a.commitKey=1,this.data.actions?.Focus||(a.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){a.userValue=n.detail.value??"",u||t.setValue(e,{value:a.userValue.toString()}),n.target.value=a.userValue},formattedValue(n){const{formattedValue:i}=n.detail;a.formattedValue=i,null!=i&&n.target!==document.activeElement&&(n.target.value=i);const s={formattedValue:i};u&&(s.value=i),t.setValue(e,s)},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:n=>{const{charLimit:i}=n.detail,{target:s}=n;if(0===i)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",i);let r=a.userValue;!r||r.length<=i||(r=r.slice(0,i),s.value=a.userValue=r,t.setValue(e,{value:r}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",t=>{a.commitKey=1;let n=-1;if("Escape"===t.key?n=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(a.commitKey=3):n=2,-1===n)return;const{value:i}=t.target;a.lastCommittedValue!==i&&(a.lastCommittedValue=i,a.userValue=i,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:n,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))});const i=d;d=null,n.addEventListener("blur",t=>{if(!a.focused||!t.relatedTarget)return;this.data.actions?.Blur||(a.focused=!1);const{target:n}=t;let{value:s}=n;if(u){if(s&&"time"===h){const t=s.split(":").map(t=>parseInt(t,10));s=new Date(2e3,0,1,t[0],t[1],t[2]||0).valueOf(),n.step=""}else s.includes("T")||(s=`${s}T00:00`),s=new Date(s).valueOf();n.type="text"}a.userValue=s,a.lastCommittedValue!==s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:a.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),i(t)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",t=>{a.lastCommittedValue=null;const{data:n,target:i}=t,{value:s,selectionStart:r,selectionEnd:o}=i;let l=r,h=o;switch(t.inputType){case"deleteWordBackward":{const t=s.substring(0,r).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=s.substring(r).match(/^[^\w]*\w*/);t&&(h+=t[0].length);break}case"deleteContentBackward":r===o&&(l-=1);break;case"deleteContentForward":r===o&&(h+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,change:n||"",willCommit:!1,selStart:l,selEnd:h}})}),this._setEventListeners(n,a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/r;n.classList.add("comb"),n.style.letterSpacing=`calc(${t}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class HU extends jU{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class $U extends jU{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;"string"==typeof i&&(i="Off"!==i,t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return DU.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",i=>{const{name:s,checked:r}=i.target;for(const o of this._getElementsByName(s,n)){const n=r&&o.exportValue===e.exportValue;o.domElement&&(o.domElement.checked=n),t.setValue(o.id,{value:n})}t.setValue(n,{value:r})}),s.addEventListener("resetform",t=>{const n=e.defaultFieldValue||"Off";t.target.checked=n===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",e=>{const i={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(n,{value:e.target.checked})}};this._dispatchEventFromSandbox(i,e)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class VU extends jU{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof i&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const r of this._getElementsByName(e.fieldName,n))t.setValue(r.id,{value:!1});const s=document.createElement("input");if(DU.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",e=>{const{name:i,checked:s}=e.target;for(const r of this._getElementsByName(i,n))t.setValue(r.id,{value:!1});t.setValue(n,{value:s})}),s.addEventListener("resetform",t=>{const n=e.defaultFieldValue;t.target.checked=null!=n&&n===e.buttonValue}),this.enableScripting&&this.hasJSActions){const i=e.buttonValue;s.addEventListener("updatefromsandbox",e=>{const s={value:e=>{const s=i===e.detail.value;for(const i of this._getElementsByName(e.target.name)){const e=s&&i.id===n;i.domElement&&(i.domElement.checked=e),t.setValue(i.id,{value:e})}}};this._dispatchEventFromSandbox(s,e)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class qU extends zU{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({},t)})),t}}class GU extends jU{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");DU.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",t=>{const e=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===e});for(const h of this.data.options){const t=document.createElement("option");t.textContent=h.displayValue,t.value=h.exportValue,n.value.includes(h.exportValue)&&(t.setAttribute("selected",!0),s=!1),i.append(t)}let r=null;if(s){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),i.prepend(t),r=()=>{t.remove(),i.removeEventListener("input",r),r=null},i.addEventListener("input",r)}const o=t=>{const e=t?"value":"textContent",{options:n,multiple:s}=i;return s?Array.prototype.filter.call(n,t=>t.selected).map(t=>t[e]):-1===n.selectedIndex?null:n[n.selectedIndex][e]};let a=o(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,t=>({displayValue:t.textContent,exportValue:t.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const s={value(n){r?.();const s=n.detail.value,l=new Set(Array.isArray(s)?s:[s]);for(const t of i.options)t.selected=l.has(t.value);t.setValue(e,{value:o(!0)}),a=o(!1)},multipleSelection(t){i.multiple=!0},remove(n){const s=i.options,r=n.detail.remove;s[r].selected=!1,i.remove(r),s.length>0&&-1===Array.prototype.findIndex.call(s,t=>t.selected)&&(s[0].selected=!0),t.setValue(e,{value:o(!0),items:l(n)}),a=o(!1)},clear(n){for(;0!==i.length;)i.remove(0);t.setValue(e,{value:null,items:[]}),a=o(!1)},insert(n){const{index:s,displayValue:r,exportValue:h}=n.detail.insert,c=i.children[s],u=document.createElement("option");u.textContent=r,u.value=h,c?c.before(u):i.append(u),t.setValue(e,{value:o(!0),items:l(n)}),a=o(!1)},items(n){const{items:s}=n.detail;for(;0!==i.length;)i.remove(0);for(const t of s){const{displayValue:e,exportValue:n}=t,s=document.createElement("option");s.textContent=e,s.value=n,i.append(s)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:o(!0),items:l(n)}),a=o(!1)},indices(n){const i=new Set(n.detail.indices);for(const t of n.target.options)t.selected=i.has(t.index);t.setValue(e,{value:o(!0)}),a=o(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(s,n)}),i.addEventListener("input",n=>{const i=o(!0),s=o(!1);t.setValue(e,{value:i}),n.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:a,change:s,changeEx:i,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],t=>t.target.value)):i.addEventListener("input",function(n){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ZU extends FU{constructor(t){const{data:e,elements:n,parent:i}=t,s=!!i._commentManager;if(super(t,{isRenderable:!s&&FU._hasPopupData(e)}),Hu(this,Mo),this.elements=n,s&&FU._hasPopupData(e)){const t=this.popup=Vu(this,Mo,To).call(this);for(const e of n)e.popup=t}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=Vu(this,Mo,To).call(this),n=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(t=>`${tz}${t}`).join(",")),this.container}}Mo=new WeakSet,To=function(){return new KU({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};class KU{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:s,contentsObj:r,richText:o,parent:a,rect:l,parentRect:h,open:c,commentManager:u=null}){Hu(this,ia),Hu(this,Lo,null),Hu(this,Ro,Vu(this,ia,da).bind(this)),Hu(this,Io,Vu(this,ia,ga).bind(this)),Hu(this,Do,Vu(this,ia,ma).bind(this)),Hu(this,Oo,Vu(this,ia,fa).bind(this)),Hu(this,No,null),Hu(this,Fo,null),Hu(this,Bo,null),Hu(this,zo,null),Hu(this,Wo,null),Hu(this,jo,null),Hu(this,Uo,null),Hu(this,Ho,!1),Hu(this,$o,null),Hu(this,Vo,null),Hu(this,qo,null),Hu(this,Go,null),Hu(this,Zo,null),Hu(this,Ko,null),Hu(this,Xo,null),Hu(this,Yo,null),Hu(this,Qo,null),Hu(this,Jo,null),Hu(this,ta,!1),Hu(this,ea,null),Hu(this,na,null),$u(this,Fo,t),$u(this,Qo,i),$u(this,Bo,r),$u(this,Yo,o),$u(this,jo,a),$u(this,No,e),$u(this,Xo,l),$u(this,Uo,h),$u(this,Wo,n),$u(this,Lo,u),$u(this,ea,n[0]),$u(this,zo,_z.toDateObject(s)),this.trigger=n.flatMap(t=>t.getElementsToTriggerPopup()),u?this.renderCommentButton():(Vu(this,ia,sa).call(this),Uu(this,Fo).hidden=!0,c&&Vu(this,ia,fa).call(this))}renderCommentButton(){if(Uu(this,Go))return;if(Uu(this,Zo)||Vu(this,ia,ra).call(this),!Uu(this,Zo))return;const{signal:t}=$u(this,Vo,new AbortController),e=!!Uu(this,ea).extraPopupElement,n=()=>{Uu(this,Lo).toggleCommentPopup(this,!0,void 0,!e)},i=()=>{Uu(this,Lo).toggleCommentPopup(this,!1,!0,!e)},s=()=>{Uu(this,Lo).toggleCommentPopup(this,!1,!1)};if(e){$u(this,Go,Uu(this,ea).container);for(const e of this.trigger)e.ariaHasPopup="dialog",e.ariaControls="commentPopup",e.addEventListener("keydown",Uu(this,Ro),{signal:t}),e.addEventListener("click",n,{signal:t}),e.addEventListener("pointerenter",i,{signal:t}),e.addEventListener("pointerleave",s,{signal:t}),e.classList.add("popupTriggerArea")}else{const e=$u(this,Go,document.createElement("button"));e.className="annotationCommentButton";const r=Uu(this,ea).container;e.style.zIndex=r.style.zIndex+1,e.tabIndex=0,e.ariaHasPopup="dialog",e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button"),Vu(this,ia,aa).call(this),Vu(this,ia,oa).call(this),e.addEventListener("keydown",Uu(this,Ro),{signal:t}),e.addEventListener("click",n,{signal:t}),e.addEventListener("pointerenter",i,{signal:t}),e.addEventListener("pointerleave",s,{signal:t}),r.after(e)}}get commentButtonColor(){const{color:t,opacity:e}=Uu(this,ea).commentData;return t?Uu(this,jo)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{Uu(this,Go)?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:s}=Uu(this,ea).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:s}}get elementBeforePopup(){return Uu(this,Go)}get comment(){return Uu(this,na)||$u(this,na,Uu(this,ea).commentText),Uu(this,na)}set comment(t){t!==this.comment&&(Uu(this,ea).commentText=$u(this,na,t))}get parentBoundingClientRect(){return Uu(this,ea).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){Uu(this,Go)&&(Uu(this,Go).classList.toggle("selected",t),Uu(this,Go).ariaExpanded=e)}setSelectedCommentButton(t){Uu(this,Go).classList.toggle("selected",t)}get commentPopupPosition(){if(Uu(this,Ko))return Uu(this,Ko);const{x:t,y:e,height:n}=Uu(this,Go).getBoundingClientRect(),{x:i,y:s,width:r,height:o}=Uu(this,ea).layer.getBoundingClientRect();return[(t-i)/r,(e+n-s)/o]}set commentPopupPosition(t){$u(this,Ko,t)}hasDefaultPopupPosition(){return null===Uu(this,Ko)}get commentButtonPosition(){return Uu(this,Zo)}get commentButtonWidth(){return Uu(this,Go).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=Uu(this,Ko)||this.commentButtonPosition.map(t=>t/100),i=this.parentBoundingClientRect,{x:s,y:r,width:o,height:a}=i;Uu(this,Lo).showDialog(null,this,s+e*o,r+n*a,{...t,parentDimensions:i})}render(){if(Uu(this,$o))return;const t=$u(this,$o,document.createElement("div"));if(t.className="popup",Uu(this,No)){const e=t.style.outlineColor=KB.makeHexColor(...Uu(this,No));t.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`}const e=document.createElement("span");if(e.className="header",Uu(this,Qo)?.str){const t=document.createElement("span");t.className="title",e.append(t),({dir:t.dir,str:t.textContent}=Uu(this,Qo))}if(t.append(e),Uu(this,zo)){const t=document.createElement("time");t.className="popupDate",t.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),t.setAttribute("data-l10n-args",JSON.stringify({dateObj:Uu(this,zo).valueOf()})),t.dateTime=Uu(this,zo).toISOString(),e.append(t)}Nz({html:Uu(this,ia,la)||Uu(this,Bo).str,dir:Uu(this,Bo)?.dir,className:"popupContent"},t),Uu(this,Fo).append(t)}updateEdited({rect:t,popup:e,deleted:n}){if(Uu(this,Lo))return n?(this.remove(),$u(this,na,null)):e&&(e.deleted?this.remove():(Vu(this,ia,aa).call(this),$u(this,na,e.text))),void(t&&($u(this,Zo,null),Vu(this,ia,ra).call(this),Vu(this,ia,oa).call(this)));n||e?.deleted?this.remove():(Vu(this,ia,sa).call(this),Uu(this,Jo)||$u(this,Jo,{contentsObj:Uu(this,Bo),richText:Uu(this,Yo)}),t&&$u(this,qo,null),e&&e.text&&($u(this,Yo,Vu(this,ia,ua).call(this,e.text)),$u(this,zo,_z.toDateObject(e.date)),$u(this,Bo,null)),Uu(this,$o)?.remove(),$u(this,$o,null))}resetEdited(){Uu(this,Jo)&&(({contentsObj:qu(this,Bo)._,richText:qu(this,Yo)._}=Uu(this,Jo)),$u(this,Jo,null),Uu(this,$o)?.remove(),$u(this,$o,null),$u(this,qo,null))}remove(){if(Uu(this,Vo)?.abort(),$u(this,Vo,null),Uu(this,$o)?.remove(),$u(this,$o,null),$u(this,ta,!1),$u(this,Ho,!1),Uu(this,Go)?.remove(),$u(this,Go,null),this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}forceHide(){$u(this,ta,this.isVisible),Uu(this,ta)&&(Uu(this,Fo).hidden=!0)}maybeShow(){Uu(this,Lo)||(Vu(this,ia,sa).call(this),Uu(this,ta)&&(Uu(this,$o)||Vu(this,ia,ma).call(this),$u(this,ta,!1),Uu(this,Fo).hidden=!1))}get isVisible(){return!Uu(this,Lo)&&!1===Uu(this,Fo).hidden}}Lo=new WeakMap,Ro=new WeakMap,Io=new WeakMap,Do=new WeakMap,Oo=new WeakMap,No=new WeakMap,Fo=new WeakMap,Bo=new WeakMap,zo=new WeakMap,Wo=new WeakMap,jo=new WeakMap,Uo=new WeakMap,Ho=new WeakMap,$o=new WeakMap,Vo=new WeakMap,qo=new WeakMap,Go=new WeakMap,Zo=new WeakMap,Ko=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Qo=new WeakMap,Jo=new WeakMap,ta=new WeakMap,ea=new WeakMap,na=new WeakMap,ia=new WeakSet,sa=function(){if(Uu(this,Vo))return;$u(this,Vo,new AbortController);const{signal:t}=Uu(this,Vo);for(const e of this.trigger)e.addEventListener("click",Uu(this,Oo),{signal:t}),e.addEventListener("pointerenter",Uu(this,Do),{signal:t}),e.addEventListener("pointerleave",Uu(this,Io),{signal:t}),e.classList.add("popupTriggerArea");for(const e of Uu(this,Wo))e.container?.addEventListener("keydown",Uu(this,Ro),{signal:t})},ra=function(){const t=Uu(this,Wo).find(t=>t.hasCommentButton);t&&$u(this,Zo,t._normalizePoint(t.commentButtonPosition))},oa=function(){if(Uu(this,ea).extraPopupElement&&!Uu(this,ea).editor)return;this.renderCommentButton();const[t,e]=Uu(this,Zo),{style:n}=Uu(this,Go);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},aa=function(){Uu(this,ea).extraPopupElement||(this.renderCommentButton(),Uu(this,Go).style.backgroundColor=this.commentButtonColor||"")},la=function(){const t=Uu(this,Yo),e=Uu(this,Bo);return!t?.str||e?.str&&e.str!==t.str?null:Uu(this,Yo).html||null},ha=function(){return Uu(this,ia,la)?.attributes?.style?.fontSize||0},ca=function(){return Uu(this,ia,la)?.attributes?.style?.color||null},ua=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:Uu(this,ia,ca),fontSize:Uu(this,ia,ha)?`calc(${Uu(this,ia,ha)}px * var(--total-scale-factor))`:""}};for(const s of t.split("\n"))e.push({name:"span",value:s,attributes:i});return n},da=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&Uu(this,Ho))&&Vu(this,ia,fa).call(this)},pa=function(){if(null!==Uu(this,qo))return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:s}}}=Uu(this,jo);let r=!!Uu(this,Uo),o=Uu(this,r?Uo:Xo);for(const d of Uu(this,Wo))if(!o||null!==KB.intersect(d.data.rect,o)){o=d.data.rect,r=!0;break}const a=KB.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),l=r?o[2]-o[0]+5:0,h=a[0]+l,c=a[1];$u(this,qo,[100*(h-i)/e,100*(c-s)/n]);const{style:u}=Uu(this,Fo);u.left=`${Uu(this,qo)[0]}%`,u.top=`${Uu(this,qo)[1]}%`},fa=function(){Uu(this,Lo)?Uu(this,Lo).toggleCommentPopup(this,!1):($u(this,Ho,!Uu(this,Ho)),Uu(this,Ho)?(Vu(this,ia,ma).call(this),Uu(this,Fo).addEventListener("click",Uu(this,Oo)),Uu(this,Fo).addEventListener("keydown",Uu(this,Ro))):(Vu(this,ia,ga).call(this),Uu(this,Fo).removeEventListener("click",Uu(this,Oo)),Uu(this,Fo).removeEventListener("keydown",Uu(this,Ro))))},ma=function(){Uu(this,$o)||this.render(),this.isVisible?Uu(this,Ho)&&Uu(this,Fo).classList.add("focused"):(Vu(this,ia,pa).call(this),Uu(this,Fo).hidden=!1,Uu(this,Fo).style.zIndex=parseInt(Uu(this,Fo).style.zIndex)+1e3)},ga=function(){Uu(this,Fo).classList.remove("focused"),!Uu(this,Ho)&&this.isVisible&&(Uu(this,Fo).hidden=!0,Uu(this,Fo).style.zIndex=parseInt(Uu(this,Fo).style.zIndex)-1e3)};class XU extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=xB.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class YU extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),Hu(this,ya,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),s=$u(this,ya,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Uu(this,ya)}addHighlightArea(){this.container.classList.add("highlightArea")}}ya=new WeakMap;class QU extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),Hu(this,va,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),s=t.borderStyle.width,r=$u(this,va,this.svgFactory.createElement("svg:rect"));return r.setAttribute("x",s/2),r.setAttribute("y",s/2),r.setAttribute("width",e-s),r.setAttribute("height",n-s),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Uu(this,va)}addHighlightArea(){this.container.classList.add("highlightArea")}}va=new WeakMap;class JU extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),Hu(this,_a,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),s=t.borderStyle.width,r=$u(this,_a,this.svgFactory.createElement("svg:ellipse"));return r.setAttribute("cx",e/2),r.setAttribute("cy",n/2),r.setAttribute("rx",e/2-s/2),r.setAttribute("ry",n/2-s/2),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Uu(this,_a)}addHighlightArea(){this.container.classList.add("highlightArea")}}_a=new WeakMap;class tH extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),Hu(this,ba,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:i},width:s,height:r}=this;if(!e)return this.container;const o=this.svgFactory.create(s,r,!0);let a=[];for(let h=0,c=e.length;h<c;h+=2){const n=e[h]-t[0],i=t[3]-e[h+1];a.push(`${n},${i}`)}a=a.join(" ");const l=$u(this,ba,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",a),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Uu(this,ba)}addHighlightArea(){this.container.classList.add("highlightArea")}}ba=new WeakMap;class eH extends tH{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nH extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class iH extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),Hu(this,Sa),Hu(this,wa,null),Hu(this,xa,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?xB.HIGHLIGHT:xB.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:i,popupRef:s}}=this,{transform:r,width:o,height:a}=Vu(this,Sa,Aa).call(this,e,t),l=this.svgFactory.create(o,a,!0),h=$u(this,wa,this.svgFactory.createElement("svg:g"));l.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",r);for(let c=0,u=n.length;c<u;c++){const t=this.svgFactory.createElement(this.svgElementName);Uu(this,xa).push(t),t.setAttribute("points",n[c].join(",")),h.append(t)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:i}=t,s=Uu(this,wa);if(e>=0&&s.setAttribute("stroke-width",e||1),n)for(let r=0,o=Uu(this,xa).length;r<o;r++)Uu(this,xa)[r].setAttribute("points",n[r].join(","));if(i){const{transform:t,width:e,height:n}=Vu(this,Sa,Aa).call(this,this.data.rotation,i);s.parentElement.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("transform",t)}}getElementsToTriggerPopup(){return Uu(this,xa)}addHighlightArea(){this.container.classList.add("highlightArea")}}wa=new WeakMap,xa=new WeakMap,Sa=new WeakSet,Aa=function(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}};class sH extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xB.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const e=document.createElement("mark");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class rH extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class oH extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class aH extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const e=document.createElement("s");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class lH extends FU{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xB.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class hH extends FU{constructor(t){super(t,{isRenderable:!0}),Hu(this,Pa),Hu(this,ka,null);const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||0===e.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),n.addEventListener("dblclick",Vu(this,Pa,Ea).bind(this)),$u(this,ka,n);const{isMac:i}=GB.platform;return t.addEventListener("keydown",t=>{"Enter"===t.key&&(i?t.metaKey:t.ctrlKey)&&Vu(this,Pa,Ea).call(this)}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return Uu(this,ka)}addHighlightArea(){this.container.classList.add("highlightArea")}}ka=new WeakMap,Pa=new WeakSet,Ea=function(){this.downloadManager?.openOrDownloadData(this.content,this.filename)},Ca=new WeakMap,Ma=new WeakMap,Ta=new WeakMap,La=new WeakMap,Ra=new WeakMap,Ia=new WeakMap,Da=new WeakSet,Oa=async function(t,e,n){const i=t.firstChild||t,s=i.id=`${tz}${e}`,r=await(Uu(this,Ra)?.getAriaAttributes(s));if(r)for(const[o,a]of r)i.setAttribute(o,a);n?n.at(-1).container.after(t):(this.div.append(t),Uu(this,Ca)?.moveElementInDOM(this.div,t,i,!1))},Na=function(){if(!Uu(this,Ma))return;const t=this.div;for(const[e,n]of Uu(this,Ma)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:s}=i;s?"CANVAS"===s.nodeName?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):i.append(n);const r=Uu(this,La).get(e);r&&(r._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,n),r._hasNoCanvas=!1):r.canvas=n)}Uu(this,Ma).clear()};let cH=class t{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:s,viewport:r,structTreeLayer:o,commentManager:a,linkService:l,annotationStorage:h}){Hu(this,Da),Hu(this,Ca,null),Hu(this,Ma,null),Hu(this,Ta,null),Hu(this,La,new Map),Hu(this,Ra,null),Hu(this,Ia,null),this.div=t,$u(this,Ca,e),$u(this,Ma,n),$u(this,Ra,o||null),$u(this,Ia,l||null),$u(this,Ta,h||new hW),this.page=s,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=a||null}hasEditableAnnotations(){return Uu(this,La).size>0}async render(t){const{annotations:e}=t,n=this.div;Az(n,this.viewport);const i=new Map,s={data:null,layer:n,linkService:Uu(this,Ia),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new IU,annotationStorage:Uu(this,Ta),enableComment:!0===t.enableComment,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const r of e){if(r.noHTML)continue;const t=r.annotationType===PB.POPUP;if(t){const t=i.get(r.id);if(!t)continue;s.elements=t}else if(r.rect[2]===r.rect[0]||r.rect[3]===r.rect[1])continue;s.data=r;const e=NU.create(s);if(!e.isRenderable)continue;if(!t&&r.popupRef){const t=i.get(r.popupRef);t?t.push(e):i.set(r.popupRef,[e])}const n=e.render();r.hidden&&(n.style.visibility="hidden"),await Vu(this,Da,Oa).call(this,n,r.id,s.elements),e.extraPopupElement?.popup?.renderCommentButton(),e._isEditable&&(Uu(this,La).set(e.data.id,e),this._annotationEditorUIManager?.renderAnnotationElement(e))}Vu(this,Da,Na).call(this)}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:Uu(this,Ia),svgFactory:new IU,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=t._defaultBorderStyle),n.data=i;const e=NU.create(n);if(!e.isRenderable)continue;const s=e.render();await Vu(this,Da,Oa).call(this,s,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Az(e,{rotation:t.rotation}),Vu(this,Da,Na).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(Uu(this,La).values())}getEditableAnnotation(t){return Uu(this,La).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:i}=t,s=new BU({data:{id:n,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:Uu(this,Ia),annotationStorage:Uu(this,Ta)}),r=s.render();return e.append(r),Uu(this,Ca)?.moveElementInDOM(e,r,r,!1),s.createOrUpdatePopup(),s}static get _defaultBorderStyle(){return FB(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:1,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const uH=/\r\n?|\n/g,dH=class t extends nW{constructor(e){super({...e,name:"freeTextEditor"}),Hu(this,ja),Hu(this,Fa,""),Hu(this,Ba,`${this.id}-editor`),Hu(this,za,null),Hu(this,Wa),Wu(this,"_colorPicker",null),this.color=e.color||t._defaultColor||nW._defaultLineColor,$u(this,Wa,e.fontSize||t._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=t.prototype,n=t=>t.isEmpty(),i=Kz.TRANSLATE_SMALL,s=Kz.TRANSLATE_BIG;return FB(this,"_keyboardManager",new Vz([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,e){nW.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case SB.FREETEXT_SIZE:t._defaultFontSize=n;break;case SB.FREETEXT_COLOR:t._defaultColor=n}}updateParams(t,e){switch(t){case SB.FREETEXT_SIZE:Vu(this,ja,Ua).call(this,e);break;case SB.FREETEXT_COLOR:Vu(this,ja,Ha).call(this,e)}}static get defaultPropertiesToUpdate(){return[[SB.FREETEXT_SIZE,t._defaultFontSize],[SB.FREETEXT_COLOR,t._defaultColor||nW._defaultLineColor]]}get propertiesToUpdate(){return[[SB.FREETEXT_SIZE,Uu(this,Wa)],[SB.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new CU(this)),[["colorPicker",this._colorPicker]]}get colorType(){return SB.FREETEXT_COLOR}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const e=this.parentScale;return[-t._internalPadding*e,-(t._internalPadding+Uu(this,Wa))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),$u(this,za,new AbortController);const t=this._uiManager.combinedSignal(Uu(this,za));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Uu(this,Ba)),this._isDraggable=!0,Uu(this,za)?.abort(),$u(this,za,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=Uu(this,Fa),e=$u(this,Fa,Vu(this,ja,$a).call(this).trimEnd());if(t===e)return;const n=t=>{$u(this,Fa,t),t?(Vu(this,ja,Za).call(this),this._uiManager.rebuild(this),Vu(this,ja,Va).call(this)):this.remove()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),Vu(this,ja,Va).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(e){t._keyboardManager.exec(this,e)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Uu(this,Ba)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${Uu(this,Wa)}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[r,o]=this.getInitialTranslation();[r,o]=this.pageTranslationToScreen(r,o);const[a,l]=this.pageDimensions,[h,c]=this.pageTranslation;let u,d;switch(this.rotation){case 0:u=t+(s[0]-h)/a,d=e+this.height-(s[1]-c)/l;break;case 90:u=t+(s[0]-h)/a,d=e-(s[1]-c)/l,[r,o]=[o,-r];break;case 180:u=t-this.width+(s[0]-h)/a,d=e-(s[1]-c)/l,[r,o]=[-r,-o];break;case 270:u=t+(s[0]-h-this.height*l)/a,d=e+(s[1]-c-this.width*a)/l,[r,o]=[-o,r]}this.setAt(u*n,d*i,r,o)}else this._moveAfterPaste(t,e);Vu(this,ja,Za).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var n,i,s;const r=e.clipboardData||window.clipboardData,{types:o}=r;if(1===o.length&&"text/plain"===o[0])return;e.preventDefault();const a=Vu(n=t,qa,Xa).call(n,r.getData("text")||"").replaceAll(uH,"\n");if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const h=l.getRangeAt(0);if(!a.includes("\n"))return h.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),void l.collapseToStart();const{startContainer:c,startOffset:u}=h,d=[],p=[];if(c.nodeType===Node.TEXT_NODE){const e=c.parentElement;if(p.push(c.nodeValue.slice(u).replaceAll(uH,"")),e!==this.editorDiv){let n=d;for(const s of this.editorDiv.childNodes)s!==e?n.push(Vu(i=t,qa,Ga).call(i,s)):n=p}d.push(c.nodeValue.slice(0,u).replaceAll(uH,""))}else if(c===this.editorDiv){let e=d,n=0;for(const i of this.editorDiv.childNodes)n++===u&&(e=p),e.push(Vu(s=t,qa,Ga).call(s,i))}$u(this,Fa,`${d.join("\n")}${a}${p.join("\n")}`),Vu(this,ja,Za).call(this);const f=new Range;let m=Math.sumPrecise(d.map(t=>t.length));for(const{firstChild:t}of this.editorDiv.childNodes)if(t.nodeType===Node.TEXT_NODE){const e=t.nodeValue.length;if(m<=e){f.setStart(t,m),f.setEnd(t,m);break}m-=e}l.removeAllRanges(),l.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=t._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,i){var s;let r=null;if(e instanceof XU){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:i,rotation:s,id:o,popupRef:a,richText:l,contentsObj:h,creationDate:c,modificationDate:u},textContent:d,textPosition:p,parent:{page:{pageNumber:f}}}=e;if(!d||0===d.length)return null;r=e={annotationType:xB.FREETEXT,color:Array.from(n),fontSize:t,value:d.join("\n"),position:p,pageIndex:f-1,rect:i.slice(0),rotation:s,annotationElementId:o,id:o,deleted:!1,popupRef:a,comment:h?.str||null,richText:l,creationDate:c,modificationDate:u}}const o=await super.deserialize(e,n,i);return $u(o,Wa,e.fontSize),o.color=KB.makeHexColor(...e.color),$u(o,Fa,Vu(s=t,qa,Xa).call(s,e.value)),o._initialData=r,e.comment&&o.setCommentData(e),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=nW._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:Uu(this,Wa),value:Vu(this,ja,Ka).call(this)});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!Vu(this,ja,Ya).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${Uu(this,Wa)}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const i of Uu(this,Fa).split("\n")){const t=document.createElement("div");t.append(i?document.createTextNode(i):document.createElement("br")),e.append(t)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:Uu(this,Fa)}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Fa=new WeakMap,Ba=new WeakMap,za=new WeakMap,Wa=new WeakMap,ja=new WeakSet,Ua=function(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--total-scale-factor))`,this.translate(0,-(t-Uu(this,Wa))*this.parentScale),$u(this,Wa,t),Vu(this,ja,Va).call(this)},n=Uu(this,Wa);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:SB.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Ha=function(t){const e=t=>{this.color=t,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:SB.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$a=function(){var t;const e=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(Vu(t=dH,qa,Ga).call(t,i)),n=i);return e.join("\n")},Va=function(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,i=e.style.display,s=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),n=e.getBoundingClientRect(),e.remove(),e.style.display=i,e.classList.toggle("hidden",s)}this.rotation%180==this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()},qa=new WeakSet,Ga=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(uH,"")},Za=function(){if(this.editorDiv.replaceChildren(),Uu(this,Fa))for(const t of Uu(this,Fa).split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}},Ka=function(){return Uu(this,Fa).replaceAll(""," ")},Xa=function(t){return t.replaceAll(" ","")},Ya=function(t){const{value:e,fontSize:n,color:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((t,e)=>t!==i[e])||t.pageIndex!==s},Hu(dH,qa),Wu(dH,"_freeTextDefaultContent",""),Wu(dH,"_internalPadding",0),Wu(dH,"_defaultColor",null),Wu(dH,"_defaultFontSize",10),Wu(dH,"_type","freetext"),Wu(dH,"_editorType",xB.FREETEXT);let pH=dH;class fH{toSVGPath(){IB("Abstract method `toSVGPath` must be implemented.")}get box(){IB("Abstract getter `box` must be implemented.")}serialize(t,e){IB("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,s,r){r||(r=new Float32Array(t.length));for(let o=0,a=t.length;o<a;o+=2)r[o]=e+t[o]*i,r[o+1]=n+t[o+1]*s;return r}static _rescaleAndSwap(t,e,n,i,s,r){r||(r=new Float32Array(t.length));for(let o=0,a=t.length;o<a;o+=2)r[o]=e+t[o+1]*i,r[o+1]=n+t[o]*s;return r}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let s=0,r=t.length;s<r;s+=2)i[s]=e+t[s],i[s+1]=n+t[s+1];return i}static svgRound(t){return Math.round(1e4*t)}static _normalizePoint(t,e,n,i,s){switch(s){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,s,r){return[(t+5*n)/6,(e+5*i)/6,(5*n+s)/6,(5*i+r)/6,(n+s)/2,(i+r)/2]}}Wu(fH,"PRECISION",1e-4);const mH=class t{constructor({x:e,y:n},i,s,r,o,a=0){Hu(this,fl),Hu(this,Qa),Hu(this,Ja,[]),Hu(this,tl),Hu(this,el),Hu(this,nl,[]),Hu(this,il,new Float32Array(18)),Hu(this,sl),Hu(this,rl),Hu(this,ol),Hu(this,al),Hu(this,ll),Hu(this,hl),Hu(this,cl,[]),$u(this,Qa,i),$u(this,hl,r*s),$u(this,el,o),Uu(this,il).set([NaN,NaN,NaN,NaN,e,n],6),$u(this,tl,a),$u(this,al,Uu(t,ul)*s),$u(this,ol,Uu(t,pl)*s),$u(this,ll,s),Uu(this,cl).push(e,n)}isEmpty(){return isNaN(Uu(this,il)[8])}add({x:t,y:e}){$u(this,sl,t),$u(this,rl,e);const[n,i,s,r]=Uu(this,Qa);let[o,a,l,h]=Uu(this,il).subarray(8,12);const c=t-l,u=e-h,d=Math.hypot(c,u);if(d<Uu(this,ol))return!1;const p=d-Uu(this,al),f=p/d,m=f*c,g=f*u;let y=o,v=a;o=l,a=h,l+=m,h+=g,Uu(this,cl)?.push(t,e);const _=m/p,b=-g/p*Uu(this,hl),w=_*Uu(this,hl);return Uu(this,il).set(Uu(this,il).subarray(2,8),0),Uu(this,il).set([l+b,h+w],4),Uu(this,il).set(Uu(this,il).subarray(14,18),12),Uu(this,il).set([l-b,h-w],16),isNaN(Uu(this,il)[6])?(0===Uu(this,nl).length&&(Uu(this,il).set([o+b,a+w],2),Uu(this,nl).push(NaN,NaN,NaN,NaN,(o+b-n)/s,(a+w-i)/r),Uu(this,il).set([o-b,a-w],14),Uu(this,Ja).push(NaN,NaN,NaN,NaN,(o-b-n)/s,(a-w-i)/r)),Uu(this,il).set([y,v,o,a,l,h],6),!this.isEmpty()):(Uu(this,il).set([y,v,o,a,l,h],6),Math.abs(Math.atan2(v-a,y-o)-Math.atan2(g,m))<Math.PI/2?([o,a,l,h]=Uu(this,il).subarray(2,6),Uu(this,nl).push(NaN,NaN,NaN,NaN,((o+l)/2-n)/s,((a+h)/2-i)/r),[o,a,y,v]=Uu(this,il).subarray(14,18),Uu(this,Ja).push(NaN,NaN,NaN,NaN,((y+o)/2-n)/s,((v+a)/2-i)/r),!0):([y,v,o,a,l,h]=Uu(this,il).subarray(0,6),Uu(this,nl).push(((y+5*o)/6-n)/s,((v+5*a)/6-i)/r,((5*o+l)/6-n)/s,((5*a+h)/6-i)/r,((o+l)/2-n)/s,((a+h)/2-i)/r),[l,h,o,a,y,v]=Uu(this,il).subarray(12,18),Uu(this,Ja).push(((y+5*o)/6-n)/s,((v+5*a)/6-i)/r,((5*o+l)/6-n)/s,((5*a+h)/6-i)/r,((o+l)/2-n)/s,((a+h)/2-i)/r),!0))}toSVGPath(){if(this.isEmpty())return"";const t=Uu(this,nl),e=Uu(this,Ja);if(isNaN(Uu(this,il)[6])&&!this.isEmpty())return Vu(this,fl,gl).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);Vu(this,fl,vl).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return Vu(this,fl,yl).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,s,r){return new yH(t,e,n,i,s,r)}getOutlines(){const t=Uu(this,nl),e=Uu(this,Ja),n=Uu(this,il),[i,s,r,o]=Uu(this,Qa),a=new Float32Array((Uu(this,cl)?.length??0)+2);for(let c=0,u=a.length-2;c<u;c+=2)a[c]=(Uu(this,cl)[c]-i)/r,a[c+1]=(Uu(this,cl)[c+1]-s)/o;if(a[a.length-2]=(Uu(this,sl)-i)/r,a[a.length-1]=(Uu(this,rl)-s)/o,isNaN(n[6])&&!this.isEmpty())return Vu(this,fl,_l).call(this,a);const l=new Float32Array(Uu(this,nl).length+24+Uu(this,Ja).length);let h=t.length;for(let c=0;c<h;c+=2)isNaN(t[c])?l[c]=l[c+1]=NaN:(l[c]=t[c],l[c+1]=t[c+1]);h=Vu(this,fl,wl).call(this,l,h);for(let c=e.length-6;c>=6;c-=6)for(let t=0;t<6;t+=2)isNaN(e[c+t])?(l[h]=l[h+1]=NaN,h+=2):(l[h]=e[c+t],l[h+1]=e[c+t+1],h+=2);return Vu(this,fl,bl).call(this,l,h),this.newFreeDrawOutline(l,a,Uu(this,Qa),Uu(this,ll),Uu(this,tl),Uu(this,el))}};Qa=new WeakMap,Ja=new WeakMap,tl=new WeakMap,el=new WeakMap,nl=new WeakMap,il=new WeakMap,sl=new WeakMap,rl=new WeakMap,ol=new WeakMap,al=new WeakMap,ll=new WeakMap,hl=new WeakMap,cl=new WeakMap,ul=new WeakMap,dl=new WeakMap,pl=new WeakMap,fl=new WeakSet,ml=function(){const t=Uu(this,il).subarray(4,6),e=Uu(this,il).subarray(16,18),[n,i,s,r]=Uu(this,Qa);return[(Uu(this,sl)+(t[0]-e[0])/2-n)/s,(Uu(this,rl)+(t[1]-e[1])/2-i)/r,(Uu(this,sl)+(e[0]-t[0])/2-n)/s,(Uu(this,rl)+(e[1]-t[1])/2-i)/r]},gl=function(){const[t,e,n,i]=Uu(this,Qa),[s,r,o,a]=Vu(this,fl,ml).call(this);return`M${(Uu(this,il)[2]-t)/n} ${(Uu(this,il)[3]-e)/i} L${(Uu(this,il)[4]-t)/n} ${(Uu(this,il)[5]-e)/i} L${s} ${r} L${o} ${a} L${(Uu(this,il)[16]-t)/n} ${(Uu(this,il)[17]-e)/i} L${(Uu(this,il)[14]-t)/n} ${(Uu(this,il)[15]-e)/i} Z`},yl=function(t){const e=Uu(this,Ja);t.push(`L${e[4]} ${e[5]} Z`)},vl=function(t){const[e,n,i,s]=Uu(this,Qa),r=Uu(this,il).subarray(4,6),o=Uu(this,il).subarray(16,18),[a,l,h,c]=Vu(this,fl,ml).call(this);t.push(`L${(r[0]-e)/i} ${(r[1]-n)/s} L${a} ${l} L${h} ${c} L${(o[0]-e)/i} ${(o[1]-n)/s}`)},_l=function(t){const e=Uu(this,il),[n,i,s,r]=Uu(this,Qa),[o,a,l,h]=Vu(this,fl,ml).call(this),c=new Float32Array(36);return c.set([NaN,NaN,NaN,NaN,(e[2]-n)/s,(e[3]-i)/r,NaN,NaN,NaN,NaN,(e[4]-n)/s,(e[5]-i)/r,NaN,NaN,NaN,NaN,o,a,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,(e[16]-n)/s,(e[17]-i)/r,NaN,NaN,NaN,NaN,(e[14]-n)/s,(e[15]-i)/r],0),this.newFreeDrawOutline(c,t,Uu(this,Qa),Uu(this,ll),Uu(this,tl),Uu(this,el))},bl=function(t,e){const n=Uu(this,Ja);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+6},wl=function(t,e){const n=Uu(this,il).subarray(4,6),i=Uu(this,il).subarray(16,18),[s,r,o,a]=Uu(this,Qa),[l,h,c,u]=Vu(this,fl,ml).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-r)/a,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-r)/a],e),e+24},Hu(mH,ul,8),Hu(mH,dl,2),Hu(mH,pl,Uu(mH,ul)+Uu(mH,dl));let gH=mH;class yH extends fH{constructor(t,e,n,i,s,r){super(),Hu(this,Ml),Hu(this,xl),Hu(this,Sl,new Float32Array(4)),Hu(this,Al),Hu(this,kl),Hu(this,Pl),Hu(this,El),Hu(this,Cl),$u(this,Cl,t),$u(this,Pl,e),$u(this,xl,n),$u(this,El,i),$u(this,Al,s),$u(this,kl,r),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],Vu(this,Ml,Tl).call(this,r);const[o,a,l,h]=Uu(this,Sl);for(let c=0,u=t.length;c<u;c+=2)t[c]=(t[c]-o)/l,t[c+1]=(t[c+1]-a)/h;for(let c=0,u=e.length;c<u;c+=2)e[c]=(e[c]-o)/l,e[c+1]=(e[c+1]-a)/h}toSVGPath(){const t=[`M${Uu(this,Cl)[4]} ${Uu(this,Cl)[5]}`];for(let e=6,n=Uu(this,Cl).length;e<n;e+=6)isNaN(Uu(this,Cl)[e])?t.push(`L${Uu(this,Cl)[e+4]} ${Uu(this,Cl)[e+5]}`):t.push(`C${Uu(this,Cl)[e]} ${Uu(this,Cl)[e+1]} ${Uu(this,Cl)[e+2]} ${Uu(this,Cl)[e+3]} ${Uu(this,Cl)[e+4]} ${Uu(this,Cl)[e+5]}`);return t.push("Z"),t.join(" ")}serialize([t,e,n,i],s){const r=n-t,o=i-e;let a,l;switch(s){case 0:a=fH._rescale(Uu(this,Cl),t,i,r,-o),l=fH._rescale(Uu(this,Pl),t,i,r,-o);break;case 90:a=fH._rescaleAndSwap(Uu(this,Cl),t,e,r,o),l=fH._rescaleAndSwap(Uu(this,Pl),t,e,r,o);break;case 180:a=fH._rescale(Uu(this,Cl),n,e,-r,o),l=fH._rescale(Uu(this,Pl),n,e,-r,o);break;case 270:a=fH._rescaleAndSwap(Uu(this,Cl),n,i,-r,-o),l=fH._rescaleAndSwap(Uu(this,Pl),n,i,-r,-o)}return{outline:Array.from(a),points:[Array.from(l)]}}get box(){return Uu(this,Sl)}newOutliner(t,e,n,i,s,r=0){return new gH(t,e,n,i,s,r)}getNewOutline(t,e){const[n,i,s,r]=Uu(this,Sl),[o,a,l,h]=Uu(this,xl),c=s*l,u=r*h,d=n*l+o,p=i*h+a,f=this.newOutliner({x:Uu(this,Pl)[0]*c+d,y:Uu(this,Pl)[1]*u+p},Uu(this,xl),Uu(this,El),t,Uu(this,kl),e??Uu(this,Al));for(let m=2;m<Uu(this,Pl).length;m+=2)f.add({x:Uu(this,Pl)[m]*c+d,y:Uu(this,Pl)[m+1]*u+p});return f.getOutlines()}}xl=new WeakMap,Sl=new WeakMap,Al=new WeakMap,kl=new WeakMap,Pl=new WeakMap,El=new WeakMap,Cl=new WeakMap,Ml=new WeakSet,Tl=function(t){const e=Uu(this,Cl);let n=e[4],i=e[5];const s=[n,i,n,i];let r=n,o=i,a=n,l=i;const h=t?Math.max:Math.min,c=new Float32Array(4);for(let d=6,p=e.length;d<p;d+=6){const t=e[d+4],u=e[d+5];isNaN(e[d])?(KB.pointBoundingBox(t,u,s),o>u?(r=t,o=u):o===u&&(r=h(r,t)),l<u?(a=t,l=u):l===u&&(a=h(a,t))):(c[0]=c[1]=1/0,c[2]=c[3]=-1/0,KB.bezierBoundingBox(n,i,...e.slice(d,d+6),c),KB.rectBoundingBox(c[0],c[1],c[2],c[3],s),o>c[1]?(r=c[0],o=c[1]):o===c[1]&&(r=h(r,c[0])),l<c[3]?(a=c[2],l=c[3]):l===c[3]&&(a=h(a,c[2]))),n=t,i=u}const u=Uu(this,Sl);u[0]=s[0]-Uu(this,Al),u[1]=s[1]-Uu(this,Al),u[2]=s[2]-s[0]+2*Uu(this,Al),u[3]=s[3]-s[1]+2*Uu(this,Al),this.firstPoint=[r,o],this.lastPoint=[a,l]};class vH{constructor(t,e=0,n=0,i=!0){Hu(this,Nl),Hu(this,Ll),Hu(this,Rl),Hu(this,Il),Hu(this,Dl,[]),Hu(this,Ol,[]);const s=[1/0,1/0,-1/0,-1/0],r=10**-4;for(const{x:f,y:m,width:g,height:y}of t){const t=Math.floor((f-e)/r)*r,n=Math.ceil((f+g+e)/r)*r,i=Math.floor((m-e)/r)*r,o=Math.ceil((m+y+e)/r)*r,a=[t,i,o,!0],l=[n,i,o,!1];Uu(this,Dl).push(a,l),KB.rectBoundingBox(t,i,n,o,s)}const o=s[2]-s[0]+2*n,a=s[3]-s[1]+2*n,l=s[0]-n,h=s[1]-n;let c=i?-1/0:1/0,u=1/0;const d=Uu(this,Dl).at(i?-1:-2),p=[d[0],d[2]];for(const f of Uu(this,Dl)){const[t,e,n,s]=f;!s&&i?e<u?(u=e,c=t):e===u&&(c=Math.max(c,t)):s&&!i&&(e<u?(u=e,c=t):e===u&&(c=Math.min(c,t))),f[0]=(t-l)/o,f[1]=(e-h)/a,f[2]=(n-h)/a}$u(this,Ll,new Float32Array([l,h,o,a])),$u(this,Rl,[c,u]),$u(this,Il,p)}getOutlines(){Uu(this,Dl).sort((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]);const t=[];for(const e of Uu(this,Dl))e[3]?(t.push(...Vu(this,Nl,jl).call(this,e)),Vu(this,Nl,zl).call(this,e)):(Vu(this,Nl,Wl).call(this,e),t.push(...Vu(this,Nl,jl).call(this,e)));return Vu(this,Nl,Fl).call(this,t)}}Ll=new WeakMap,Rl=new WeakMap,Il=new WeakMap,Dl=new WeakMap,Ol=new WeakMap,Nl=new WeakSet,Fl=function(t){const e=[],n=new Set;for(const r of t){const[t,n,i]=r;e.push([t,n,r],[t,i,r])}e.sort((t,e)=>t[1]-e[1]||t[0]-e[0]);for(let r=0,o=e.length;r<o;r+=2){const t=e[r][2],i=e[r+1][2];t.push(i),i.push(t),n.add(t),n.add(i)}const i=[];let s;for(;n.size>0;){const t=n.values().next().value;let[e,r,o,a,l]=t;n.delete(t);let h=e,c=r;for(s=[e,o],i.push(s);;){let t;if(n.has(a))t=a;else{if(!n.has(l))break;t=l}n.delete(t),[e,r,o,a,l]=t,h!==e&&(s.push(h,c,e,c===r?r:o),h=e),c=c===r?o:r}s.push(h,c)}return new _H(i,Uu(this,Ll),Uu(this,Rl),Uu(this,Il))},Bl=function(t){const e=Uu(this,Ol);let n=0,i=e.length-1;for(;n<=i;){const s=n+i>>1,r=e[s][0];if(r===t)return s;r<t?n=s+1:i=s-1}return i+1},zl=function([,t,e]){const n=Vu(this,Nl,Bl).call(this,t);Uu(this,Ol).splice(n,0,[t,e])},Wl=function([,t,e]){const n=Vu(this,Nl,Bl).call(this,t);for(let i=n;i<Uu(this,Ol).length;i++){const[n,s]=Uu(this,Ol)[i];if(n!==t)break;if(n===t&&s===e)return void Uu(this,Ol).splice(i,1)}for(let i=n-1;i>=0;i--){const[n,s]=Uu(this,Ol)[i];if(n!==t)break;if(n===t&&s===e)return void Uu(this,Ol).splice(i,1)}},jl=function(t){const[e,n,i]=t,s=[[e,n,i]],r=Vu(this,Nl,Bl).call(this,i);for(let o=0;o<r;o++){const[t,n]=Uu(this,Ol)[o];for(let i=0,r=s.length;i<r;i++){const[,o,a]=s[i];if(!(n<=o||a<=t))if(o>=t)if(a>n)s[i][1]=n;else{if(1===r)return[];s.splice(i,1),i--,r--}else s[i][2]=t,a>n&&s.push([e,n,a])}}return s};class _H extends fH{constructor(t,e,n,i){super(),Hu(this,Ul),Hu(this,Hl),$u(this,Hl,t),$u(this,Ul,e),this.firstPoint=n,this.lastPoint=i}toSVGPath(){const t=[];for(const e of Uu(this,Hl)){let[n,i]=e;t.push(`M${n} ${i}`);for(let s=2;s<e.length;s+=2){const r=e[s],o=e[s+1];r===n?(t.push(`V${o}`),i=o):o===i&&(t.push(`H${r}`),n=r)}t.push("Z")}return t.join(" ")}serialize([t,e,n,i],s){const r=[],o=n-t,a=i-e;for(const l of Uu(this,Hl)){const e=new Array(l.length);for(let n=0;n<l.length;n+=2)e[n]=t+l[n]*o,e[n+1]=i-l[n+1]*a;r.push(e)}return r}get box(){return Uu(this,Ul)}get classNamesForOutlining(){return["highlightOutline"]}}Ul=new WeakMap,Hl=new WeakMap;class bH extends gH{newFreeDrawOutline(t,e,n,i,s,r){return new wH(t,e,n,i,s,r)}}class wH extends yH{newOutliner(t,e,n,i,s,r=0){return new bH(t,e,n,i,s,r)}}const xH=class t extends nW{constructor(e){super({...e,name:"highlightEditor"}),Hu(this,lh),Hu(this,$l,null),Hu(this,Vl,0),Hu(this,ql),Hu(this,Gl,null),Hu(this,Zl,null),Hu(this,Kl,null),Hu(this,Xl,null),Hu(this,Yl,0),Hu(this,Ql,null),Hu(this,Jl,null),Hu(this,th,null),Hu(this,eh,!1),Hu(this,nh,null),Hu(this,ih,null),Hu(this,sh,null),Hu(this,rh,""),Hu(this,oh),Hu(this,ah,""),this.color=e.color||t._defaultColor,$u(this,oh,e.thickness||t._defaultThickness),this.opacity=e.opacity||t._defaultOpacity,$u(this,ql,e.boxes||null),$u(this,ah,e.methodOfCreation||""),$u(this,rh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?($u(this,eh,!0),Vu(this,lh,ch).call(this,e),Vu(this,lh,mh).call(this)):Uu(this,ql)&&($u(this,$l,e.anchorNode),$u(this,Vl,e.anchorOffset),$u(this,Xl,e.focusNode),$u(this,Yl,e.focusOffset),Vu(this,lh,hh).call(this),Vu(this,lh,mh).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=t.prototype;return FB(this,"_keyboardManager",new Vz([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:Uu(this,eh)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Uu(this,oh),methodOfCreation:Uu(this,ah)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(e,n){nW.initialize(e,n),t._defaultColor||(t._defaultColor=n.highlightColors?.values().next().value||"#fff066")}static updateDefaultParams(e,n){switch(e){case SB.HIGHLIGHT_COLOR:t._defaultColor=n;break;case SB.HIGHLIGHT_THICKNESS:t._defaultThickness=n}}translateInPage(t,e){}get toolbarPosition(){return Uu(this,ih)}get commentButtonPosition(){return Uu(this,nh)}updateParams(t,e){switch(t){case SB.HIGHLIGHT_COLOR:Vu(this,lh,uh).call(this,e);break;case SB.HIGHLIGHT_THICKNESS:Vu(this,lh,dh).call(this,e)}}static get defaultPropertiesToUpdate(){return[[SB.HIGHLIGHT_COLOR,t._defaultColor],[SB.HIGHLIGHT_THICKNESS,t._defaultThickness]]}get propertiesToUpdate(){return[[SB.HIGHLIGHT_COLOR,this.color||t._defaultColor],[SB.HIGHLIGHT_THICKNESS,Uu(this,oh)||t._defaultThickness],[SB.HIGHLIGHT_FREE,Uu(this,eh)]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(Uu(this,th),{root:{fill:this.color,"fill-opacity":this.opacity}}),Uu(this,Zl)?.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",$u(this,Zl,new PU({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Vu(this,lh,bh).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,Vu(this,lh,bh).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){Vu(this,lh,fh).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Vu(this,lh,mh).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?Vu(this,lh,fh).call(this):t&&(Vu(this,lh,mh).call(this,t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}rotate(e){var n,i,s;const{drawLayer:r}=this.parent;let o;Uu(this,eh)?(e=(e-this.rotation+360)%360,o=Vu(n=t,gh,yh).call(n,Uu(this,Jl).box,e)):o=Vu(i=t,gh,yh).call(i,[this.x,this.y,this.width,this.height],e),r.updateProperties(Uu(this,th),{bbox:o,root:{"data-main-rotation":e}}),r.updateProperties(Uu(this,sh),{bbox:Vu(s=t,gh,yh).call(s,Uu(this,Kl).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const t=super.render();Uu(this,rh)&&(t.setAttribute("aria-label",Uu(this,rh)),t.setAttribute("role","mark")),Uu(this,eh)?t.classList.add("free"):this.div.addEventListener("keydown",Vu(this,lh,vh).bind(this),{signal:this._uiManager._signal});const e=$u(this,Ql,document.createElement("div"));return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=Uu(this,Gl),this.setDims(this.width,this.height),Wz(this,Uu(this,Ql),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(Uu(this,sh),{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(Uu(this,sh),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:Vu(this,lh,_h).call(this,!0);break;case 1:case 3:Vu(this,lh,_h).call(this,!1)}}select(){super.select(),Uu(this,sh)&&this.parent?.drawLayer.updateProperties(Uu(this,sh),{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),Uu(this,sh)&&(this.parent?.drawLayer.updateProperties(Uu(this,sh),{rootClass:{selected:!1}}),Uu(this,eh)||Vu(this,lh,_h).call(this,!1))}get _mustFixPosition(){return!Uu(this,eh)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(Uu(this,th),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(Uu(this,sh),{rootClass:{hidden:!t}}))}static startHighlighting(t,e,{target:n,x:i,y:s}){const{x:r,y:o,width:a,height:l}=n.getBoundingClientRect(),h=new AbortController,c=t.combinedSignal(h),u=e=>{h.abort(),Vu(this,gh,Ah).call(this,t,e)};window.addEventListener("blur",u,{signal:c}),window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("pointerdown",vz,{capture:!0,passive:!1,signal:c}),window.addEventListener("contextmenu",yz,{signal:c}),n.addEventListener("pointermove",Vu(this,gh,Sh).bind(this,t),{signal:c}),this._freeHighlight=new bH({x:i,y:s},[r,o,a,l],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(t,e,n){var i,s,r,o;let a=null;if(t instanceof sH){const{data:{quadPoints:e,rect:n,rotation:i,id:s,color:r,opacity:o,popupRef:l,richText:h,contentsObj:c,creationDate:u,modificationDate:d},parent:{page:{pageNumber:p}}}=t;a=t={annotationType:xB.HIGHLIGHT,color:Array.from(r),opacity:o,quadPoints:e,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:i,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:h,comment:c?.str||null,creationDate:u,modificationDate:d}}else if(t instanceof iH){const{data:{inkLists:e,rect:n,rotation:i,id:s,color:r,borderStyle:{rawWidth:o},popupRef:l,richText:h,contentsObj:c,creationDate:u,modificationDate:d},parent:{page:{pageNumber:p}}}=t;a=t={annotationType:xB.HIGHLIGHT,color:Array.from(r),thickness:o,inkLists:e,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:i,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:h,comment:c?.str||null,creationDate:u,modificationDate:d}}const{color:l,quadPoints:h,inkLists:c,opacity:u}=t,d=await super.deserialize(t,e,n);d.color=KB.makeHexColor(...l),d.opacity=u||1,c&&$u(d,oh,t.thickness),d._initialData=a,t.comment&&d.setCommentData(t);const[p,f]=d.pageDimensions,[m,g]=d.pageTranslation;if(h){const t=$u(d,ql,[]);for(let e=0;e<h.length;e+=8)t.push({x:(h[e]-m)/p,y:1-(h[e+1]-g)/f,width:(h[e+2]-h[e])/p,height:(h[e+1]-h[e+5])/f});Vu(i=d,lh,hh).call(i),Vu(s=d,lh,mh).call(s),d.rotate(d.rotation)}else if(c){$u(d,eh,!0);const t=c[0],n={x:t[0]-m,y:f-(t[1]-g)},i=new bH(n,[0,0,p,f],1,Uu(d,oh)/2,!0,.001);for(let e=0,r=t.length;e<r;e+=2)n.x=t[e]-m,n.y=f-(t[e+1]-g),i.add(n);const{id:s,clipPathId:a}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);Vu(r=d,lh,ch).call(r,{highlightOutlines:i.getOutlines(),highlightId:s,clipPathId:a}),Vu(o=d,lh,mh).call(o),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=nW._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:Uu(this,oh),quadPoints:Vu(this,lh,wh).call(this),outlines:Vu(this,lh,xh).call(this,n.rect)}),this.addComment(n),this.annotationElementId&&!Vu(this,lh,kh).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};$l=new WeakMap,Vl=new WeakMap,ql=new WeakMap,Gl=new WeakMap,Zl=new WeakMap,Kl=new WeakMap,Xl=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,Jl=new WeakMap,th=new WeakMap,eh=new WeakMap,nh=new WeakMap,ih=new WeakMap,sh=new WeakMap,rh=new WeakMap,oh=new WeakMap,ah=new WeakMap,lh=new WeakSet,hh=function(){const t=new vH(Uu(this,ql),.001);$u(this,Jl,t.getOutlines()),[this.x,this.y,this.width,this.height]=Uu(this,Jl).box;const e=new vH(Uu(this,ql),.0025,.001,"ltr"===this._uiManager.direction);$u(this,Kl,e.getOutlines());const{firstPoint:n}=Uu(this,Jl);$u(this,nh,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]);const{lastPoint:i}=Uu(this,Kl);$u(this,ih,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},ch=function({highlightOutlines:t,highlightId:e,clipPathId:n}){var i,s;if($u(this,Jl,t),$u(this,Kl,t.getNewOutline(Uu(this,oh)/2+1.5,.0025)),e>=0)$u(this,th,e),$u(this,Gl,n),this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),$u(this,sh,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Uu(this,Kl).box,path:{d:Uu(this,Kl).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Uu(this,th),{bbox:Vu(i=xH,gh,yh).call(i,Uu(this,Jl).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(Uu(this,sh),{bbox:Vu(s=xH,gh,yh).call(s,Uu(this,Kl).box,e),path:{d:Uu(this,Kl).toSVGPath()}})}const[r,o,a,l]=t.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=a,this.height=l;break;case 90:{const[t,e]=this.parentDimensions;this.x=o,this.y=1-r,this.width=a*e/t,this.height=l*t/e;break}case 180:this.x=1-r,this.y=1-o,this.width=a,this.height=l;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-o,this.y=r,this.width=a*e/t,this.height=l*t/e;break}}const{firstPoint:h}=t;$u(this,nh,[(h[0]-r)/a,(h[1]-o)/l]);const{lastPoint:c}=Uu(this,Kl);$u(this,ih,[(c[0]-r)/a,(c[1]-o)/l])},uh=function(t){const e=(t,e)=>{this.color=t,this.opacity=e,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:e.bind(this,t,xH._defaultOpacity),undo:e.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:SB.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},dh=function(t){const e=Uu(this,oh),n=t=>{$u(this,oh,t),Vu(this,lh,ph).call(this,t)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:SB.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},ph=function(t){Uu(this,eh)&&(Vu(this,lh,ch).call(this,{highlightOutlines:Uu(this,Jl).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},fh=function(){null!==Uu(this,th)&&this.parent&&(this.parent.drawLayer.remove(Uu(this,th)),$u(this,th,null),this.parent.drawLayer.remove(Uu(this,sh)),$u(this,sh,null))},mh=function(t=this.parent){null===Uu(this,th)&&(({id:qu(this,th)._,clipPathId:qu(this,Gl)._}=t.drawLayer.draw({bbox:Uu(this,Jl).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:Uu(this,eh)},path:{d:Uu(this,Jl).toSVGPath()}},!1,!0)),$u(this,sh,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Uu(this,eh)},bbox:Uu(this,Kl).box,path:{d:Uu(this,Kl).toSVGPath()}},Uu(this,eh))),Uu(this,Ql)&&(Uu(this,Ql).style.clipPath=Uu(this,Gl)))},gh=new WeakSet,yh=function([t,e,n,i],s){switch(s){case 90:return[1-e-i,t,i,n];case 180:return[1-t-n,1-e-i,n,i];case 270:return[e,1-t-n,i,n]}return[t,e,n,i]},vh=function(t){xH._keyboardManager.exec(this,t)},_h=function(t){if(!Uu(this,$l))return;const e=window.getSelection();t?e.setPosition(Uu(this,$l),Uu(this,Vl)):e.setPosition(Uu(this,Xl),Uu(this,Yl))},bh=function(){return Uu(this,eh)?this.rotation:0},wh=function(){if(Uu(this,eh))return null;const[t,e]=this.pageDimensions,[n,i]=this.pageTranslation,s=Uu(this,ql),r=new Float32Array(8*s.length);let o=0;for(const{x:a,y:l,width:h,height:c}of s){const s=a*t+n,u=(1-l)*e+i;r[o]=r[o+4]=s,r[o+1]=r[o+3]=u,r[o+2]=r[o+6]=s+h*t,r[o+5]=r[o+7]=u-c*e,o+=8}return r},xh=function(t){return Uu(this,Jl).serialize(t,Vu(this,lh,bh).call(this))},Sh=function(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Ah=function(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},kh=function(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((t,n)=>t!==e[n])},Hu(xH,gh),Wu(xH,"_defaultColor",null),Wu(xH,"_defaultOpacity",1),Wu(xH,"_defaultThickness",12),Wu(xH,"_type","highlight"),Wu(xH,"_editorType",xB.HIGHLIGHT),Wu(xH,"_freeHighlightId",-1),Wu(xH,"_freeHighlight",null),Wu(xH,"_freeHighlightClipId","");let SH=xH;class AH{constructor(){Hu(this,Ph,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){Uu(this,Ph)[t]=e}toSVGProperties(){const t=Uu(this,Ph);return $u(this,Ph,Object.create(null)),{root:t}}reset(){$u(this,Ph,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){IB("Not implemented")}}Ph=new WeakMap;const kH=class t extends nW{constructor(t){super(t),Hu(this,Nh),Hu(this,Eh,null),Hu(this,Ch),Wu(this,"_colorPicker",null),Wu(this,"_drawId",null),$u(this,Ch,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(Vu(this,Nh,Fh).call(this,t),Vu(this,Nh,Wh).call(this))}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[i,s]of Object.entries(e))n.has(i)?Object.assign(t[i],s):t[i]=s;return t}static getDefaultDrawingOptions(t){IB("Not implemented")}static get typesMap(){IB("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(Uu(t,Mh).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)t.push([n,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,i]of this.constructor.typesMap)t.push([n,e[i]]);return t}_updateProperty(t,e,n){const i=this._drawingOptions,s=i[e],r=n=>{i.updateProperty(e,n);const s=Uu(this,Eh).updateProperty(e,n);s&&Vu(this,Nh,Hh).call(this,s),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,t._mergeSVGProperties(Uu(this,Eh).getPathResizingSVGProperties(Vu(this,Nh,Uh).call(this)),{bbox:Vu(this,Nh,$h).call(this)}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,t._mergeSVGProperties(Uu(this,Eh).getPathResizedSVGProperties(Vu(this,Nh,Uh).call(this)),{bbox:Vu(this,Nh,$h).call(this)}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:Vu(this,Nh,$h).call(this)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,t._mergeSVGProperties(Uu(this,Eh).getPathTranslatedSVGProperties(Vu(this,Nh,Uh).call(this),this.parentDimensions),{bbox:Vu(this,Nh,$h).call(this)}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Uu(this,Ch)&&($u(this,Ch,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){Vu(this,Nh,zh).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Vu(this,Nh,Wh).call(this),Vu(this,Nh,Hh).call(this,Uu(this,Eh).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),Vu(this,Nh,zh).call(this)):t&&(this._uiManager.addShouldRescale(this),Vu(this,Nh,Wh).call(this,t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,t._mergeSVGProperties({bbox:Vu(this,Nh,$h).call(this)},Uu(this,Eh).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&Vu(this,Nh,Hh).call(this,Uu(this,Eh).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,i,s){IB("Not implemented")}static startDrawing(e,n,i,s){const{target:r,offsetX:o,offsetY:a,pointerId:l,pointerType:h}=s;if(Uu(t,Ih)&&Uu(t,Ih)!==h)return;const{viewport:{rotation:c}}=e,{width:u,height:d}=r.getBoundingClientRect(),p=$u(t,Th,new AbortController),f=e.combinedSignal(p);Uu(t,Rh)||$u(t,Rh,l),Uu(t,Ih)??$u(t,Ih,h),window.addEventListener("pointerup",e=>{Uu(t,Rh)===e.pointerId?this._endDraw(e):Uu(t,Dh)?.delete(e.pointerId)},{signal:f}),window.addEventListener("pointercancel",e=>{Uu(t,Rh)===e.pointerId?this._currentParent.endDrawingSession():Uu(t,Dh)?.delete(e.pointerId)},{signal:f}),window.addEventListener("pointerdown",e=>{Uu(t,Ih)===e.pointerType&&((Uu(t,Dh)||$u(t,Dh,new Set)).add(e.pointerId),Uu(t,Mh).isCancellable()&&(Uu(t,Mh).removeLastElement(),Uu(t,Mh).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",yz,{signal:f}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:f}),r.addEventListener("touchmove",e=>{e.timeStamp===Uu(t,Oh)&&vz(e)},{signal:f}),e.toggleDrawing(),n._editorUndoBar?.hide(),Uu(t,Mh)?e.drawLayer.updateProperties(this._currentDrawId,Uu(t,Mh).startNew(o,a,u,d,c)):(n.updateUIForDefaultProperties(this),$u(t,Mh,this.createDrawerInstance(o,a,u,d,c)),$u(t,Lh,this.getDefaultDrawingOptions()),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Uu(t,Lh).toSVGProperties(),Uu(t,Mh).defaultSVGProperties),!0,!1)))}static _drawMove(e){if($u(t,Oh,-1),!Uu(t,Mh))return;const{offsetX:n,offsetY:i,pointerId:s}=e;Uu(t,Rh)===s&&(Uu(t,Dh)?.size>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,Uu(t,Mh).add(n,i)),$u(t,Oh,e.timeStamp),vz(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,$u(t,Mh,null),$u(t,Lh,null),$u(t,Ih,null),$u(t,Oh,NaN)),Uu(t,Th)&&(Uu(t,Th).abort(),$u(t,Th,null),$u(t,Rh,NaN),$u(t,Dh,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,Uu(t,Mh).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=Uu(t,Mh),i=this._currentDrawId,s=e.getLastElement();return void n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,e.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(i,e.removeLastElement())},mustExec:!1,type:SB.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(SB.DRAW_STEP),!Uu(t,Mh).isEmpty()){const{pageDimensions:[i,s],scale:r}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Uu(t,Mh).getOutlines(i*r,s*r,r,this._INNER_MARGIN),drawingOptions:Uu(t,Lh),mustBeCommitted:!e});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,i,s,r){IB("Not implemented")}static async deserialize(t,e,n){var i,s;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}=e.viewport,h=this.deserializeDraw(a,l,r,o,this._INNER_MARGIN,t),c=await super.deserialize(t,e,n);return c.createDrawingOptions(t),Vu(i=c,Nh,Fh).call(i,{drawOutlines:h}),Vu(s=c,Nh,Wh).call(s),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[e,n]=this.pageTranslation,[i,s]=this.pageDimensions;return Uu(this,Eh).serialize([e,n,i,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Eh=new WeakMap,Ch=new WeakMap,Mh=new WeakMap,Th=new WeakMap,Lh=new WeakMap,Rh=new WeakMap,Ih=new WeakMap,Dh=new WeakMap,Oh=new WeakMap,Nh=new WeakSet,Fh=function({drawOutlines:t,drawId:e,drawingOptions:n}){$u(this,Eh,t),this._drawingOptions||(this._drawingOptions=n),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=Vu(this,Nh,Bh).call(this,t,this.parent),Vu(this,Nh,Hh).call(this,t.box)},Bh=function(t,e){const{id:n}=e.drawLayer.draw(kH._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n},zh=function(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Wh=function(t=this.parent){null!==this._drawId&&this.parent===t||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=Vu(this,Nh,Bh).call(this,Uu(this,Eh),t)):this.parent.drawLayer.updateParent(this._drawId,t.drawLayer))},jh=function([t,e,n,i]){const{parentDimensions:[s,r],rotation:o}=this;switch(o){case 90:return[e,1-t,n*(r/s),i*(s/r)];case 180:return[1-t,1-e,n,i];case 270:return[1-e,t,n*(r/s),i*(s/r)];default:return[t,e,n,i]}},Uh=function(){const{x:t,y:e,width:n,height:i,parentDimensions:[s,r],rotation:o}=this;switch(o){case 90:return[1-e,t,n*(s/r),i*(r/s)];case 180:return[1-t,1-e,n,i];case 270:return[e,1-t,n*(s/r),i*(r/s)];default:return[t,e,n,i]}},Hh=function(t){[this.x,this.y,this.width,this.height]=Vu(this,Nh,jh).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},$h=function(){const{x:t,y:e,width:n,height:i,rotation:s,parentRotation:r,parentDimensions:[o,a]}=this;switch((4*s+r)/90){case 1:return[1-e-i,t,i,n];case 2:return[1-t-n,1-e-i,n,i];case 3:return[e,1-t-n,i,n];case 4:return[t,e-n*(o/a),i*(a/o),n*(o/a)];case 5:return[1-e,t,n*(o/a),i*(a/o)];case 6:return[1-t-i*(a/o),1-e,i*(a/o),n*(o/a)];case 7:return[e-n*(o/a),1-t-i*(a/o),n*(o/a),i*(a/o)];case 8:return[t-n,e-i,n,i];case 9:return[1-e,t-n,i,n];case 10:return[1-t,1-e,n,i];case 11:return[e-i,1-t,i,n];case 12:return[t-i*(a/o),e,i*(a/o),n*(o/a)];case 13:return[1-e-n*(o/a),t-i*(a/o),n*(o/a),i*(a/o)];case 14:return[1-t,1-e-n*(o/a),i*(a/o),n*(o/a)];case 15:return[e,1-t,n*(o/a),i*(a/o)];default:return[t,e,n,i]}},Wu(kH,"_currentDrawId",-1),Wu(kH,"_currentParent",null),Hu(kH,Mh,null),Hu(kH,Th,null),Hu(kH,Lh,null),Hu(kH,Rh,NaN),Hu(kH,Ih,null),Hu(kH,Dh,null),Hu(kH,Oh,NaN),Wu(kH,"_INNER_MARGIN",3);let PH=kH;class EH{constructor(t,e,n,i,s,r){Hu(this,nc),Hu(this,Vh,new Float64Array(6)),Hu(this,qh),Hu(this,Gh),Hu(this,Zh),Hu(this,Kh),Hu(this,Xh),Hu(this,Yh,""),Hu(this,Qh,0),Hu(this,Jh,new CH),Hu(this,tc),Hu(this,ec),$u(this,tc,n),$u(this,ec,i),$u(this,Zh,s),$u(this,Kh,r),[t,e]=Vu(this,nc,ic).call(this,t,e);const o=$u(this,qh,[NaN,NaN,NaN,NaN,t,e]);$u(this,Xh,[t,e]),$u(this,Gh,[{line:o,points:Uu(this,Xh)}]),Uu(this,Vh).set(o,0)}updateProperty(t,e){"stroke-width"===t&&$u(this,Kh,e)}isEmpty(){return!Uu(this,Gh)||0===Uu(this,Gh).length}isCancellable(){return Uu(this,Xh).length<=10}add(t,e){[t,e]=Vu(this,nc,ic).call(this,t,e);const[n,i,s,r]=Uu(this,Vh).subarray(2,6),o=t-s,a=e-r;return Math.hypot(Uu(this,tc)*o,Uu(this,ec)*a)<=2?null:(Uu(this,Xh).push(t,e),isNaN(n)?(Uu(this,Vh).set([s,r,t,e],2),Uu(this,qh).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(Uu(this,Vh)[0])&&Uu(this,qh).splice(6,6),Uu(this,Vh).set([n,i,s,r,t,e],0),Uu(this,qh).push(...fH.createBezierPoints(n,i,s,r,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){return this.add(t,e)||(2===Uu(this,Xh).length?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,s){$u(this,tc,n),$u(this,ec,i),$u(this,Zh,s),[t,e]=Vu(this,nc,ic).call(this,t,e);const r=$u(this,qh,[NaN,NaN,NaN,NaN,t,e]);$u(this,Xh,[t,e]);const o=Uu(this,Gh).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),Uu(this,Gh).push({line:r,points:Uu(this,Xh)}),Uu(this,Vh).set(r,0),$u(this,Qh,0),this.toSVGPath(),null}getLastElement(){return Uu(this,Gh).at(-1)}setLastElement(t){return Uu(this,Gh)?(Uu(this,Gh).push(t),$u(this,qh,t.line),$u(this,Xh,t.points),$u(this,Qh,0),{path:{d:this.toSVGPath()}}):Uu(this,Jh).setLastElement(t)}removeLastElement(){if(!Uu(this,Gh))return Uu(this,Jh).removeLastElement();Uu(this,Gh).pop(),$u(this,Yh,"");for(let t=0,e=Uu(this,Gh).length;t<e;t++){const{line:e,points:n}=Uu(this,Gh)[t];$u(this,qh,e),$u(this,Xh,n),$u(this,Qh,0),this.toSVGPath()}return{path:{d:Uu(this,Yh)}}}toSVGPath(){const t=fH.svgRound(Uu(this,qh)[4]),e=fH.svgRound(Uu(this,qh)[5]);if(2===Uu(this,Xh).length)return $u(this,Yh,`${Uu(this,Yh)} M ${t} ${e} Z`),Uu(this,Yh);if(Uu(this,Xh).length<=6){const n=Uu(this,Yh).lastIndexOf("M");$u(this,Yh,`${Uu(this,Yh).slice(0,n)} M ${t} ${e}`),$u(this,Qh,6)}if(4===Uu(this,Xh).length){const t=fH.svgRound(Uu(this,qh)[10]),e=fH.svgRound(Uu(this,qh)[11]);return $u(this,Yh,`${Uu(this,Yh)} L ${t} ${e}`),$u(this,Qh,12),Uu(this,Yh)}const n=[];0===Uu(this,Qh)&&(n.push(`M ${t} ${e}`),$u(this,Qh,6));for(let i=Uu(this,Qh),s=Uu(this,qh).length;i<s;i+=6){const[t,e,s,r,o,a]=Uu(this,qh).slice(i,i+6).map(fH.svgRound);n.push(`C${t} ${e} ${s} ${r} ${o} ${a}`)}return $u(this,Yh,Uu(this,Yh)+n.join(" ")),$u(this,Qh,Uu(this,qh).length),Uu(this,Yh)}getOutlines(t,e,n,i){const s=Uu(this,Gh).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),Uu(this,Jh).build(Uu(this,Gh),t,e,n,Uu(this,Zh),Uu(this,Kh),i),$u(this,Vh,null),$u(this,qh,null),$u(this,Gh,null),$u(this,Yh,null),Uu(this,Jh)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Vh=new WeakMap,qh=new WeakMap,Gh=new WeakMap,Zh=new WeakMap,Kh=new WeakMap,Xh=new WeakMap,Yh=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,tc=new WeakMap,ec=new WeakMap,nc=new WeakSet,ic=function(t,e){return fH._normalizePoint(t,e,Uu(this,tc),Uu(this,ec),Uu(this,Zh))};class CH extends fH{constructor(){super(...arguments),Hu(this,pc),Hu(this,sc),Hu(this,rc,0),Hu(this,oc),Hu(this,ac),Hu(this,lc),Hu(this,hc),Hu(this,cc),Hu(this,uc),Hu(this,dc)}build(t,e,n,i,s,r,o){$u(this,lc,e),$u(this,hc,n),$u(this,cc,i),$u(this,uc,s),$u(this,dc,r),$u(this,oc,o??0),$u(this,ac,t),Vu(this,pc,gc).call(this)}get thickness(){return Uu(this,dc)}setLastElement(t){return Uu(this,ac).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return Uu(this,ac).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of Uu(this,ac))if(t.push(`M${fH.svgRound(e[4])} ${fH.svgRound(e[5])}`),6!==e.length)if(12===e.length&&isNaN(e[6]))t.push(`L${fH.svgRound(e[10])} ${fH.svgRound(e[11])}`);else for(let n=6,i=e.length;n<i;n+=6){const[i,s,r,o,a,l]=e.subarray(n,n+6).map(fH.svgRound);t.push(`C${i} ${s} ${r} ${o} ${a} ${l}`)}else t.push("Z");return t.join("")}serialize([t,e,n,i],s){const r=[],o=[],[a,l,h,c]=Vu(this,pc,mc).call(this);let u,d,p,f,m,g,y,v,_;switch(Uu(this,uc)){case 0:_=fH._rescale,u=t,d=e+i,p=n,f=-i,m=t+a*n,g=e+(1-l-c)*i,y=t+(a+h)*n,v=e+(1-l)*i;break;case 90:_=fH._rescaleAndSwap,u=t,d=e,p=n,f=i,m=t+l*n,g=e+a*i,y=t+(l+c)*n,v=e+(a+h)*i;break;case 180:_=fH._rescale,u=t+n,d=e,p=-n,f=i,m=t+(1-a-h)*n,g=e+l*i,y=t+(1-a)*n,v=e+(l+c)*i;break;case 270:_=fH._rescaleAndSwap,u=t+n,d=e+i,p=-n,f=-i,m=t+(1-l-c)*n,g=e+(1-a-h)*i,y=t+(1-l)*n,v=e+(1-a)*i}for(const{line:b,points:w}of Uu(this,ac))r.push(_(b,u,d,p,f,s?new Array(b.length):null)),o.push(_(w,u,d,p,f,s?new Array(w.length):null));return{lines:r,points:o,rect:[m,g,y,v]}}static deserialize(t,e,n,i,s,{paths:{lines:r,points:o},rotation:a,thickness:l}){const h=[];let c,u,d,p,f;switch(a){case 0:f=fH._rescale,c=-t/n,u=e/i+1,d=1/n,p=-1/i;break;case 90:f=fH._rescaleAndSwap,c=-e/i,u=-t/n,d=1/i,p=1/n;break;case 180:f=fH._rescale,c=t/n+1,u=-e/i,d=-1/n,p=1/i;break;case 270:f=fH._rescaleAndSwap,c=e/i+1,u=t/n+1,d=-1/i,p=-1/n}if(!r){r=[];for(const t of o){const e=t.length;if(2===e){r.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1]]));continue}if(4===e){r.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1],NaN,NaN,NaN,NaN,t[2],t[3]]));continue}const n=new Float32Array(3*(e-2));r.push(n);let[i,s,o,a]=t.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,s],0);for(let r=4;r<e;r+=2){const e=t[r],l=t[r+1];n.set(fH.createBezierPoints(i,s,o,a,e,l),3*(r-2)),[i,s,o,a]=[o,a,e,l]}}}for(let g=0,y=r.length;g<y;g++)h.push({line:f(r[g].map(t=>t??NaN),c,u,d,p),points:f(o[g].map(t=>t??NaN),c,u,d,p)});const m=new this.prototype.constructor;return m.build(h,n,i,1,a,l,s),m}get box(){return Uu(this,sc)}updateProperty(t,e){return"stroke-width"===t?Vu(this,pc,yc).call(this,e):null}updateParentDimensions([t,e],n){const[i,s]=Vu(this,pc,fc).call(this);$u(this,lc,t),$u(this,hc,e),$u(this,cc,n);const[r,o]=Vu(this,pc,fc).call(this),a=r-i,l=o-s,h=Uu(this,sc);return h[0]-=a,h[1]-=l,h[2]+=2*a,h[3]+=2*l,h}updateRotation(t){return $u(this,rc,t),{path:{transform:this.rotationTransform}}}get viewBox(){return Uu(this,sc).map(fH.svgRound).join(" ")}get defaultProperties(){const[t,e]=Uu(this,sc);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fH.svgRound(t)} ${fH.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=Uu(this,sc);let n=0,i=0,s=0,r=0,o=0,a=0;switch(Uu(this,rc)){case 90:i=e/t,s=-t/e,o=t;break;case 180:n=-1,r=-1,o=t,a=e;break;case 270:i=-e/t,s=t/e,a=e;break;default:return""}return`matrix(${n} ${i} ${s} ${r} ${fH.svgRound(o)} ${fH.svgRound(a)})`}getPathResizingSVGProperties([t,e,n,i]){const[s,r]=Vu(this,pc,fc).call(this),[o,a,l,h]=Uu(this,sc);if(Math.abs(l-s)<=fH.PRECISION||Math.abs(h-r)<=fH.PRECISION){const s=t+n/2-(o+l/2),r=e+i/2-(a+h/2);return{path:{"transform-origin":`${fH.svgRound(t)} ${fH.svgRound(e)}`,transform:`${this.rotationTransform} translate(${s} ${r})`}}}const c=(n-2*s)/(l-2*s),u=(i-2*r)/(h-2*r),d=l/n,p=h/i;return{path:{"transform-origin":`${fH.svgRound(o)} ${fH.svgRound(a)}`,transform:`${this.rotationTransform} scale(${d} ${p}) translate(${fH.svgRound(s)} ${fH.svgRound(r)}) scale(${c} ${u}) translate(${fH.svgRound(-s)} ${fH.svgRound(-r)})`}}}getPathResizedSVGProperties([t,e,n,i]){const[s,r]=Vu(this,pc,fc).call(this),o=Uu(this,sc),[a,l,h,c]=o;if(o[0]=t,o[1]=e,o[2]=n,o[3]=i,Math.abs(h-s)<=fH.PRECISION||Math.abs(c-r)<=fH.PRECISION){const s=t+n/2-(a+h/2),r=e+i/2-(l+c/2);for(const{line:t,points:e}of Uu(this,ac))fH._translate(t,s,r,t),fH._translate(e,s,r,e);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fH.svgRound(t)} ${fH.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const u=(n-2*s)/(h-2*s),d=(i-2*r)/(c-2*r),p=-u*(a+s)+t+s,f=-d*(l+r)+e+r;if(1!==u||1!==d||0!==p||0!==f)for(const{line:m,points:g}of Uu(this,ac))fH._rescale(m,p,f,u,d,m),fH._rescale(g,p,f,u,d,g);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${fH.svgRound(t)} ${fH.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[i,s]=n,r=Uu(this,sc),o=t-r[0],a=e-r[1];if(Uu(this,lc)===i&&Uu(this,hc)===s)for(const{line:l,points:h}of Uu(this,ac))fH._translate(l,o,a,l),fH._translate(h,o,a,h);else{const t=Uu(this,lc)/i,e=Uu(this,hc)/s;$u(this,lc,i),$u(this,hc,s);for(const{line:n,points:i}of Uu(this,ac))fH._rescale(n,o,a,t,e,n),fH._rescale(i,o,a,t,e,i);r[2]*=t,r[3]*=e}return r[0]=t,r[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${fH.svgRound(t)} ${fH.svgRound(e)}`}}}get defaultSVGProperties(){const t=Uu(this,sc);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${fH.svgRound(t[0])} ${fH.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}sc=new WeakMap,rc=new WeakMap,oc=new WeakMap,ac=new WeakMap,lc=new WeakMap,hc=new WeakMap,cc=new WeakMap,uc=new WeakMap,dc=new WeakMap,pc=new WeakSet,fc=function(t=Uu(this,dc)){const e=Uu(this,oc)+t/2*Uu(this,cc);return Uu(this,uc)%180==0?[e/Uu(this,lc),e/Uu(this,hc)]:[e/Uu(this,hc),e/Uu(this,lc)]},mc=function(){const[t,e,n,i]=Uu(this,sc),[s,r]=Vu(this,pc,fc).call(this,0);return[t+s,e+r,n-2*s,i-2*r]},gc=function(){const t=$u(this,sc,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of Uu(this,ac)){if(i.length<=12){for(let e=4,n=i.length;e<n;e+=6)KB.pointBoundingBox(i[e],i[e+1],t);continue}let e=i[4],n=i[5];for(let s=6,r=i.length;s<r;s+=6){const[r,o,a,l,h,c]=i.subarray(s,s+6);KB.bezierBoundingBox(e,n,r,o,a,l,h,c,t),e=h,n=c}}const[e,n]=Vu(this,pc,fc).call(this);t[0]=ez(t[0]-e,0,1),t[1]=ez(t[1]-n,0,1),t[2]=ez(t[2]+e,0,1),t[3]=ez(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]},yc=function(t){const[e,n]=Vu(this,pc,fc).call(this);$u(this,dc,t);const[i,s]=Vu(this,pc,fc).call(this),[r,o]=[i-e,s-n],a=Uu(this,sc);return a[0]-=r,a[1]-=o,a[2]+=2*r,a[3]+=2*o,a};class MH extends AH{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:nW._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){"stroke-width"===t&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new MH(this._viewParameters);return t.updateAll(this),t}}const TH=class t extends PH{constructor(t){super({...t,name:"inkEditor"}),Hu(this,vc),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){nW.initialize(t,e),this._defaultDrawingOptions=new MH(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return FB(this,"typesMap",new Map([[SB.INK_THICKNESS,"stroke-width"],[SB.INK_COLOR,"stroke"],[SB.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,i,s){return new EH(t,e,n,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,i,s,r){return CH.deserialize(t,e,n,i,s,r)}static async deserialize(t,e,n){let i=null;if(t instanceof iH){const{data:{inkLists:e,rect:n,rotation:s,id:r,color:o,opacity:a,borderStyle:{rawWidth:l},popupRef:h,richText:c,contentsObj:u,creationDate:d,modificationDate:p},parent:{page:{pageNumber:f}}}=t;i=t={annotationType:xB.INK,color:Array.from(o),thickness:l,opacity:a,paths:{points:e},boxes:null,pageIndex:f-1,rect:n.slice(0),rotation:s,annotationElementId:r,id:r,deleted:!1,popupRef:h,richText:c,comment:u?.str||null,creationDate:d,modificationDate:p}}const s=await super.deserialize(t,e,n);return s._initialData=i,t.comment&&s.setCommentData(t),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new CU(this)),[["colorPicker",this._colorPicker]]}get colorType(){return SB.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=t.getDefaultDrawingOptions({stroke:KB.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":s,"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{color:nW._colorManager.convert(i),opacity:s,thickness:r,paths:{lines:e,points:n}});return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!Vu(this,vc,_c).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}};vc=new WeakSet,_c=function(t){const{color:e,thickness:n,opacity:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((t,n)=>t!==e[n])||t.thickness!==n||t.opacity!==i||t.pageIndex!==s},Wu(TH,"_type","ink"),Wu(TH,"_editorType",xB.INK),Wu(TH,"_defaultDrawingOptions",null);let LH=TH;class RH extends CH{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}class IH{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},s,r,o,a){let l=new OffscreenCanvas(1,1),h=l.getContext("2d",{alpha:!1});const c=h.font=`${n} ${i} 200px ${e}`,{actualBoundingBoxLeft:u,actualBoundingBoxRight:d,actualBoundingBoxAscent:p,actualBoundingBoxDescent:f,fontBoundingBoxAscent:m,fontBoundingBoxDescent:g,width:y}=h.measureText(t),v=Math.ceil(1.5*Math.max(Math.abs(u)+Math.abs(d)||0,y)),_=Math.ceil(1.5*Math.max(Math.abs(p)+Math.abs(f)||200,Math.abs(m)+Math.abs(g)||200));l=new OffscreenCanvas(v,_),h=l.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=c,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,v,_),h.fillStyle="black",h.fillText(t,.5*v/2,1.5*_/2);const b=Vu(this,wc,Lc).call(this,h.getImageData(0,0,v,_).data),w=Vu(this,wc,Tc).call(this,b),x=Vu(this,wc,Rc).call(this,w),S=Vu(this,wc,Pc).call(this,b,v,_,x);return this.processDrawnLines({lines:{curves:S,width:v,height:_},pageWidth:s,pageHeight:r,rotation:o,innerMargin:a,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,s){const[r,o,a]=Vu(this,wc,Ic).call(this,t),[l,h]=Vu(this,wc,Mc).call(this,r,o,a,Math.hypot(o,a)*Uu(this,bc).sigmaSFactor,Uu(this,bc).sigmaR,Uu(this,bc).kernelSize),c=Vu(this,wc,Rc).call(this,h),u=Vu(this,wc,Pc).call(this,l,o,a,c);return this.processDrawnLines({lines:{curves:u,width:o,height:a},pageWidth:e,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:r,areContours:o}){i%180!=0&&([e,n]=[n,e]);const{curves:a,width:l,height:h}=t,c=t.thickness??0,u=[],d=Math.min(e/l,n/h),p=d/e,f=d/n,m=[];for(const{points:y}of a){const t=r?Vu(this,wc,Cc).call(this,y):y;if(!t)continue;m.push(t);const e=t.length,n=new Float32Array(e),i=new Float32Array(3*(2===e?2:e-2));if(u.push({line:i,points:n}),2===e){n[0]=t[0]*p,n[1]=t[1]*f,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[s,o,a,l]=t;s*=p,o*=f,a*=p,l*=f,n.set([s,o,a,l],0),i.set([NaN,NaN,NaN,NaN,s,o],0);for(let r=4;r<e;r+=2){const e=n[r]=t[r]*p,h=n[r+1]=t[r+1]*f;i.set(fH.createBezierPoints(s,o,a,l,e,h),3*(r-2)),[s,o,a,l]=[a,l,e,h]}}if(0===u.length)return null;const g=o?new RH:new CH;return g.build(u,e,n,1,i,o?0:c,s),{outline:g,newCurves:m,areContours:o,thickness:c,width:l,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:s}){let r,o=1/0,a=-1/0,l=0;for(const y of t){l+=y.length;for(let t=2,e=y.length;t<e;t++){const e=y[t]-y[t-2];o=Math.min(o,e),a=Math.max(a,e)}}r=o>=-128&&a<=127?Int8Array:o>=-32768&&a<=32767?Int16Array:Int32Array;const h=t.length,c=8+3*h,u=new Uint32Array(c);let d=0;u[d++]=c*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*r.BYTES_PER_ELEMENT,u[d++]=0,u[d++]=i,u[d++]=s,u[d++]=e?0:1,u[d++]=Math.max(0,Math.floor(n??0)),u[d++]=h,u[d++]=r.BYTES_PER_ELEMENT;for(const y of t)u[d++]=y.length-2,u[d++]=y[0],u[d++]=y[1];const p=new CompressionStream("deflate-raw"),f=p.writable.getWriter();await f.ready,f.write(u);const m=r.prototype.constructor;for(const y of t){const t=new m(y.length-2);for(let e=2,n=y.length;e<n;e++)t[e-2]=y[e]-y[e-2];f.write(t)}f.close();const g=await new Response(p.readable).arrayBuffer();return nz(new Uint8Array(g))}static async decompressSignature(t){try{const n=(e=t,Uint8Array.fromBase64?Uint8Array.fromBase64(e):qB(atob(e))),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(n).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const t of i)o||(o=new Uint8Array(new Uint32Array(t.buffer,0,4)[0])),o.set(t,a),a+=t.length;const l=new Uint32Array(o.buffer,0,o.length>>2),h=l[1];if(0!==h)throw new Error(`Invalid version: ${h}`);const c=l[2],u=l[3],d=0===l[4],p=l[5],f=l[6],m=l[7],g=[],y=(8+3*f)*Uint32Array.BYTES_PER_ELEMENT;let v;switch(m){case Int8Array.BYTES_PER_ELEMENT:v=new Int8Array(o.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:v=new Int16Array(o.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:v=new Int32Array(o.buffer,y)}a=0;for(let t=0;t<f;t++){const e=l[3*t+8],n=new Float32Array(e+2);g.push(n);for(let i=0;i<2;i++)n[i]=l[3*t+8+i+1];for(let t=0;t<e;t++)n[t+2]=n[t]+v[a++]}return{areContours:d,thickness:p,outlines:g,width:c,height:u}}catch(iG){return null}var e}}bc=new WeakMap,wc=new WeakSet,xc=function(t,e,n,i){return i-=e,0===(n-=t)?i>0?0:4:1===n?i+6:2-i},Sc=new WeakMap,Ac=function(t,e,n,i,s,r,o){const a=Vu(this,wc,xc).call(this,n,i,s,r);for(let l=0;l<8;l++){const s=(-l+a-o+16)%8;if(0!==t[(n+Uu(this,Sc)[2*s])*e+(i+Uu(this,Sc)[2*s+1])])return s}return-1},kc=function(t,e,n,i,s,r,o){const a=Vu(this,wc,xc).call(this,n,i,s,r);for(let l=0;l<8;l++){const s=(l+a+o+16)%8;if(0!==t[(n+Uu(this,Sc)[2*s])*e+(i+Uu(this,Sc)[2*s+1])])return s}return-1},Pc=function(t,e,n,i){const s=t.length,r=new Int32Array(s);for(let h=0;h<s;h++)r[h]=t[h]<=i?1:0;for(let h=1;h<n-1;h++)r[h*e]=r[h*e+e-1]=0;for(let h=0;h<e;h++)r[h]=r[e*n-1-h]=0;let o,a=1;const l=[];for(let h=1;h<n-1;h++){o=1;for(let t=1;t<e-1;t++){const n=h*e+t,i=r[n];if(0===i)continue;let s=h,c=t;if(1===i&&0===r[n-1])a+=1,c-=1;else{if(!(i>=1&&0===r[n+1])){1!==i&&(o=Math.abs(i));continue}a+=1,c+=1,i>1&&(o=i)}const u=[t,h],d=c===t+1,p={isHole:d,points:u,id:a,parent:0};let f;l.push(p);for(const t of l)if(t.id===o){f=t;break}f?f.isHole?p.parent=d?f.parent:o:p.parent=d?o:f.parent:p.parent=d?o:0;const m=Vu(this,wc,Ac).call(this,r,e,h,t,s,c,0);if(-1===m){r[n]=-a,1!==r[n]&&(o=Math.abs(r[n]));continue}let g=Uu(this,Sc)[2*m],y=Uu(this,Sc)[2*m+1];const v=h+g,_=t+y;s=v,c=_;let b=h,w=t;for(;;){const i=Vu(this,wc,kc).call(this,r,e,b,w,s,c,1);g=Uu(this,Sc)[2*i],y=Uu(this,Sc)[2*i+1];const l=b+g,d=w+y;u.push(d,l);const p=b*e+w;if(0===r[p+1]?r[p]=-a:1===r[p]&&(r[p]=a),l===h&&d===t&&b===v&&w===_){1!==r[n]&&(o=Math.abs(r[n]));break}s=b,c=w,b=l,w=d}}}return l},Ec=function(t,e,n,i){if(n-e<=4){for(let s=e;s<n-2;s+=2)i.push(t[s],t[s+1]);return}const s=t[e],r=t[e+1],o=t[n-4]-s,a=t[n-3]-r,l=Math.hypot(o,a),h=o/l,c=a/l,u=h*r-c*s,d=a/o,p=1/l,f=Math.atan(d),m=Math.cos(f),g=Math.sin(f),y=p*(Math.abs(m)+Math.abs(g)),v=p*(1-y+y**2),_=Math.max(Math.atan(Math.abs(g+m)*v),Math.atan(Math.abs(g-m)*v));let b=0,w=e;for(let x=e+2;x<n-2;x+=2){const e=Math.abs(u-h*t[x+1]+c*t[x]);e>b&&(w=x,b=e)}b>(l*_)**2?(Vu(this,wc,Ec).call(this,t,e,w+2,i),Vu(this,wc,Ec).call(this,t,w,n,i)):i.push(s,r)},Cc=function(t){const e=[],n=t.length;return Vu(this,wc,Ec).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},Mc=function(t,e,n,i,s,r){const o=new Float32Array(r**2),a=-2*i**2,l=r>>1;for(let f=0;f<r;f++){const t=(f-l)**2;for(let e=0;e<r;e++)o[f*r+e]=Math.exp((t+(e-l)**2)/a)}const h=new Float32Array(256),c=-2*s**2;for(let f=0;f<256;f++)h[f]=Math.exp(f**2/c);const u=t.length,d=new Uint8Array(u),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let i=0;i<e;i++){const s=f*e+i,a=t[s];let c=0,u=0;for(let d=0;d<r;d++){const s=f+d-l;if(!(s<0||s>=n))for(let n=0;n<r;n++){const p=i+n-l;if(p<0||p>=e)continue;const f=t[s*e+p],m=o[d*r+n]*h[Math.abs(f-a)];c+=f*m,u+=m}}p[d[s]=Math.round(c/u)]++}return[d,p]},Tc=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},Lc=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,s=1/0;for(let o=0,a=n.length;o<a;o++){const e=n[o]=t[o<<2];i=Math.max(i,e),s=Math.min(s,e)}const r=255/(i-s);for(let o=0,a=n.length;o<a;o++)n[o]=(n[o]-s)*r;return n},Rc=function(t){let e,n=-1/0,i=-1/0;const s=t.findIndex(t=>0!==t);let r=s,o=s;for(e=s;e<256;e++){const s=t[e];s>n&&(e-r>i&&(i=e-r,o=e-1),n=s,r=e)}for(e=o-1;e>=0&&!(t[e]>t[e+1]);e--);return e},Ic=function(t){const e=t,{width:n,height:i}=t,{maxDim:s}=Uu(this,bc);let r=n,o=i;if(n>s||i>s){let a=n,l=i,h=Math.log2(Math.max(n,i)/s);const c=Math.floor(h);h=h===c?c-1:c;for(let n=0;n<h;n++){r=Math.ceil(a/2),o=Math.ceil(l/2);const n=new OffscreenCanvas(r,o);n.getContext("2d").drawImage(t,0,0,a,l,0,0,r,o),a=r,l=o,t!==e&&t.close(),t=n.transferToImageBitmap()}const u=Math.min(s/r,s/o);r=Math.round(r*u),o=Math.round(o*u)}const a=new OffscreenCanvas(r,o).getContext("2d",{willReadFrequently:!0});a.fillStyle="white",a.fillRect(0,0,r,o),a.filter="grayscale(1)",a.drawImage(t,0,0,t.width,t.height,0,0,r,o);const l=a.getImageData(0,0,r,o).data;return[Vu(this,wc,Lc).call(this,l),r,o]},Hu(IH,wc),Hu(IH,bc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),Hu(IH,Sc,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class DH extends AH{constructor(){super(),super.updateProperties({fill:nW._defaultLineColor,"stroke-width":0})}clone(){const t=new DH;return t.updateAll(this),t}}class OH extends MH{constructor(t){super(t),super.updateProperties({stroke:nW._defaultLineColor,"stroke-width":1})}clone(){const t=new OH(this._viewParameters);return t.updateAll(this),t}}const NH=class t extends PH{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),Hu(this,Dc,!1),Hu(this,Oc,null),Hu(this,Nc,null),Hu(this,Fc,null),this._willKeepAspectRatio=!0,$u(this,Nc,t.signatureData||null),$u(this,Oc,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){nW.initialize(t,e),this._defaultDrawingOptions=new DH,this._defaultDrawnSignatureOptions=new OH(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return FB(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Uu(this,Oc)}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),null===this._drawId)if(Uu(this,Nc)){const{lines:e,mustSmooth:n,areContours:i,description:s,uuid:r,heightInPage:o}=Uu(this,Nc),{rawDims:{pageWidth:a,pageHeight:l},rotation:h}=this.parent.viewport,c=IH.processDrawnLines({lines:e,pageWidth:a,pageHeight:l,rotation:h,innerMargin:t._INNER_MARGIN,mustSmooth:n,areContours:i});this.addSignature(c,o,s,r)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Uu(this,Oc)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(t){$u(this,Fc,t),this.addEditToolbar()}getUuid(){return Uu(this,Fc)}get description(){return Uu(this,Oc)}set description(t){$u(this,Oc,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:i,height:s}=Uu(this,Nc),r=Math.max(i,s);return{areContours:e,outline:IH.processDrawnLines({lines:{curves:t.map(t=>({points:t})),thickness:n,width:i,height:s},pageWidth:r,pageHeight:r,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,i,s){const{x:r,y:o}=this,{outline:a}=$u(this,Nc,e);let l;$u(this,Dc,a instanceof RH),this.description=i,Uu(this,Dc)?l=t.getDefaultDrawingOptions():(l=t._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:l});const[,h]=this.pageDimensions;let c=n/h;c=c>=1?.5:c,this.width*=c/this.height,this.width>=1&&(c*=.9/this.width,this.width=.9),this.height=c,this.setDims(),this.x=r,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return IH.process(e,n,i,s,t._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return IH.extractContoursFromText(e,n,i,s,r,t._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return IH.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:s,innerMargin:t._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=t.getDefaultDrawingOptions():(this._drawingOptions=t._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,s=Object.assign(super.serialize(t),{isSignature:!0,areContours:Uu(this,Dc),color:[0,0,0],thickness:Uu(this,Dc)?0:i});return this.addComment(s),t?(s.paths={lines:e,points:n},s.uuid=Uu(this,Fc),s.isCopy=!0):s.lines=e,Uu(this,Oc)&&(s.accessibilityData={type:"Figure",alt:Uu(this,Oc)}),s}static deserializeDraw(t,e,n,i,s,r){return r.areContours?RH.deserialize(t,e,n,i,s,r):CH.deserialize(t,e,n,i,s,r)}static async deserialize(t,e,n){const i=await super.deserialize(t,e,n);return $u(i,Dc,t.areContours),i.description=t.accessibilityData?.alt||"",$u(i,Fc,t.uuid),i}};Dc=new WeakMap,Oc=new WeakMap,Nc=new WeakMap,Fc=new WeakMap,Wu(NH,"_type","signature"),Wu(NH,"_editorType",xB.SIGNATURE),Wu(NH,"_defaultDrawingOptions",null);let FH=NH;class BH extends nW{constructor(t){super({...t,name:"stampEditor"}),Hu(this,Kc),Hu(this,Bc,null),Hu(this,zc,null),Hu(this,Wc,null),Hu(this,jc,null),Hu(this,Uc,null),Hu(this,Hc,""),Hu(this,$c,null),Hu(this,Vc,!1),Hu(this,qc,null),Hu(this,Gc,!1),Hu(this,Zc,!1),$u(this,jc,t.bitmapUrl),$u(this,Uc,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){nW.initialize(t,e)}static isHandlingMimeForPasting(t){return Pz.includes(t)}static paste(t,e){e.pasteEditor({mode:xB.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!(await n.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:r}=t||this.copyCanvas(null,null,!0).imageData,o=await n.guess({name:"altText",request:{data:i,width:s,height:r,channels:i.length/(s*r)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const a=o.output;return await this.setGuessedAltText(a),e&&!this.hasAltTextData()&&(this.altTextData={alt:a,decorative:!1}),a}remove(){Uu(this,zc)&&($u(this,Bc,null),this._uiManager.imageManager.deleteId(Uu(this,zc)),Uu(this,$c)?.remove(),$u(this,$c,null),Uu(this,qc)&&(clearTimeout(Uu(this,qc)),$u(this,qc,null))),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(Uu(this,zc)&&null===Uu(this,$c)&&Vu(this,Kc,Qc).call(this),this.isAttachedToDOM||this.parent.add(this))):Uu(this,zc)&&Vu(this,Kc,Qc).call(this)}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(Uu(this,Wc)||Uu(this,Bc)||Uu(this,jc)||Uu(this,Uc)||Uu(this,zc)||Uu(this,Vc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Uu(this,Vc)||(Uu(this,Bc)?Vu(this,Kc,Jc).call(this):Vu(this,Kc,Qc).call(this)),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&($u(this,zc,n),i&&$u(this,Bc,i),$u(this,Vc,!1),Vu(this,Kc,Jc).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){this.parent&&(null!==Uu(this,qc)&&clearTimeout(Uu(this,qc)),$u(this,qc,setTimeout(()=>{$u(this,qc,null),Vu(this,Kc,eu).call(this)},200)))}copyCanvas(t,e,n=!1){t||(t=224);const{width:i,height:s}=Uu(this,Bc),r=new kz;let o=Uu(this,Bc),a=i,l=s,h=null;if(e){if(i>e||s>e){const t=Math.min(e/i,e/s);a=Math.floor(i*t),l=Math.floor(s*t)}h=document.createElement("canvas");const t=h.width=Math.ceil(a*r.sx),n=h.height=Math.ceil(l*r.sy);Uu(this,Gc)||(o=Vu(this,Kc,tu).call(this,t,n));const c=h.getContext("2d");c.filter=this._uiManager.hcmFilter;let u="white",d="#cfcfd8";"none"!==this._uiManager.hcmFilter?d="black":Ez.isDarkMode&&(u="#8f8f9d",d="#42414d");const p=15,f=p*r.sx,m=p*r.sy,g=new OffscreenCanvas(2*f,2*m),y=g.getContext("2d");y.fillStyle=u,y.fillRect(0,0,2*f,2*m),y.fillStyle=d,y.fillRect(0,0,f,m),y.fillRect(f,m,f,m),c.fillStyle=c.createPattern(g,"repeat"),c.fillRect(0,0,t,n),c.drawImage(o,0,0,o.width,o.height,0,0,t,n)}let c=null;if(n){let e,n;if(r.symmetric&&o.width<t&&o.height<t)e=o.width,n=o.height;else if(o=Uu(this,Bc),i>t||s>t){const r=Math.min(t/i,t/s);e=Math.floor(i*r),n=Math.floor(s*r),Uu(this,Gc)||(o=Vu(this,Kc,tu).call(this,e,n))}const a=new OffscreenCanvas(e,n).getContext("2d",{willReadFrequently:!0});a.drawImage(o,0,0,o.width,o.height,0,0,e,n),c={width:e,height:n,data:a.getImageData(0,0,e,n).data}}return{canvas:h,width:a,height:l,imageData:c}}static async deserialize(t,e,n){let i=null,s=!1;if(t instanceof lH){const{data:{rect:r,rotation:o,id:a,structParent:l,popupRef:h,richText:c,contentsObj:u,creationDate:d,modificationDate:p},container:f,parent:{page:{pageNumber:m}},canvas:g}=t;let y,v;g?(delete t.canvas,({id:y,bitmap:v}=n.imageManager.getFromCanvas(f.id,g)),g.remove()):(s=!0,t._hasNoCanvas=!0);const _=(await e._structTree.getAriaAttributes(`${tz}${a}`))?.get("aria-label")||"";i=t={annotationType:xB.STAMP,bitmapId:y,bitmap:v,pageIndex:m-1,rect:r.slice(0),rotation:o,annotationElementId:a,id:a,deleted:!1,accessibilityData:{decorative:!1,altText:_},isSvg:!1,structParent:l,popupRef:h,richText:c,comment:u?.str||null,creationDate:d,modificationDate:p}}const r=await super.deserialize(t,e,n),{rect:o,bitmap:a,bitmapUrl:l,bitmapId:h,isSvg:c,accessibilityData:u}=t;s?(n.addMissingCanvas(t.id,r),$u(r,Vc,!0)):h&&n.imageManager.isValidId(h)?($u(r,zc,h),a&&$u(r,Bc,a)):$u(r,jc,l),$u(r,Gc,c);const[d,p]=r.pageDimensions;return r.width=(o[2]-o[0])/d,r.height=(o[3]-o[1])/p,u&&(r.altTextData=u),r._initialData=i,t.comment&&r.setCommentData(t),$u(r,Zc,!!i),r}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:Uu(this,zc),isSvg:Uu(this,Gc)});if(this.addComment(n),t)return n.bitmapUrl=Vu(this,Kc,nu).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const t=Vu(this,Kc,iu).call(this,n);return t.isSame?null:(t.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(null===e)return n;e.stamps||(e.stamps=new Map);const r=Uu(this,Gc)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(Uu(this,zc))){if(Uu(this,Gc)){const t=e.stamps.get(Uu(this,zc));r>t.area&&(t.area=r,t.serialized.bitmap.close(),t.serialized.bitmap=Vu(this,Kc,nu).call(this,!1))}}else e.stamps.set(Uu(this,zc),{area:r,serialized:n}),n.bitmap=Vu(this,Kc,nu).call(this,!1);return n}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Bc=new WeakMap,zc=new WeakMap,Wc=new WeakMap,jc=new WeakMap,Uc=new WeakMap,Hc=new WeakMap,$c=new WeakMap,Vc=new WeakMap,qc=new WeakMap,Gc=new WeakMap,Zc=new WeakMap,Kc=new WeakSet,Xc=function(t,e=!1){t?($u(this,Bc,t.bitmap),e||($u(this,zc,t.id),$u(this,Gc,t.isSvg)),t.file&&$u(this,Hc,t.file.name),Vu(this,Kc,Jc).call(this)):this.remove()},Yc=function(){if($u(this,Wc,null),this._uiManager.enableWaiting(!1),Uu(this,$c))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Uu(this,Bc))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Uu(this,Bc)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Qc=function(){if(Uu(this,zc))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(Uu(this,zc)).then(t=>Vu(this,Kc,Xc).call(this,t,!0)).finally(()=>Vu(this,Kc,Yc).call(this));if(Uu(this,jc)){const t=Uu(this,jc);return $u(this,jc,null),this._uiManager.enableWaiting(!0),void $u(this,Wc,this._uiManager.imageManager.getFromUrl(t).then(t=>Vu(this,Kc,Xc).call(this,t)).finally(()=>Vu(this,Kc,Yc).call(this)))}if(Uu(this,Uc)){const t=Uu(this,Uc);return $u(this,Uc,null),this._uiManager.enableWaiting(!0),void $u(this,Wc,this._uiManager.imageManager.getFromFile(t).then(t=>Vu(this,Kc,Xc).call(this,t)).finally(()=>Vu(this,Kc,Yc).call(this)))}const t=document.createElement("input");t.type="file",t.accept=Pz.join(",");const e=this._uiManager._signal;$u(this,Wc,new Promise(n=>{t.addEventListener("change",async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Vu(this,Kc,Xc).call(this,e)}else this.remove();n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>Vu(this,Kc,Yc).call(this))),t.click()},Jc=function(){const{div:t}=this;let{width:e,height:n}=Uu(this,Bc);const[i,s]=this.pageDimensions,r=.75;if(this.width)e=this.width*i,n=this.height*s;else if(e>r*i||n>r*s){const t=Math.min(r*i/e,r*s/n);e*=t,n*=t}this._uiManager.enableWaiting(!1);const o=$u(this,$c,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=e/i,this.height=n/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),Vu(this,Kc,eu).call(this),Uu(this,Zc)||(this.parent.addUndoableEditor(this),$u(this,Zc,!0)),this._reportTelemetry({action:"inserted_image"}),Uu(this,Hc)&&this.div.setAttribute("aria-description",Uu(this,Hc)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},tu=function(t,e){const{width:n,height:i}=Uu(this,Bc);let s=n,r=i,o=Uu(this,Bc);for(;s>2*t||r>2*e;){const n=s,i=r;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const a=new OffscreenCanvas(s,r);a.getContext("2d").drawImage(o,0,0,n,i,0,0,s,r),o=a.transferToImageBitmap()}return o},eu=function(){const[t,e]=this.parentDimensions,{width:n,height:i}=this,s=new kz,r=Math.ceil(n*t*s.sx),o=Math.ceil(i*e*s.sy),a=Uu(this,$c);if(!a||a.width===r&&a.height===o)return;a.width=r,a.height=o;const l=Uu(this,Gc)?Uu(this,Bc):Vu(this,Kc,tu).call(this,r,o),h=a.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(l,0,0,l.width,l.height,0,0,r,o)},nu=function(t){if(t){if(Uu(this,Gc)){const t=this._uiManager.imageManager.getSvgUrl(Uu(this,zc));if(t)return t}const t=document.createElement("canvas");return({width:t.width,height:t.height}=Uu(this,Bc)),t.getContext("2d").drawImage(Uu(this,Bc),0,0),t.toDataURL()}if(Uu(this,Gc)){const[t,e]=this.pageDimensions,n=Math.round(this.width*t*az.PDF_TO_CSS_UNITS),i=Math.round(this.height*e*az.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(n,i);return s.getContext("2d").drawImage(Uu(this,Bc),0,0,Uu(this,Bc).width,Uu(this,Bc).height,0,0,n,i),s.transferToImageBitmap()}return structuredClone(Uu(this,Bc))},iu=function(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,i=t.pageIndex===e,s=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&s,isSameAltText:s}},Wu(BH,"_type","stamp"),Wu(BH,"_editorType",xB.STAMP);const zH=class t{constructor({uiManager:e,pageIndex:n,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:h,l10n:c}){Hu(this,wu),Hu(this,su),Hu(this,ru,!1),Hu(this,ou,null),Hu(this,au,null),Hu(this,lu,null),Hu(this,hu,new Map),Hu(this,cu,!1),Hu(this,uu,!1),Hu(this,du,!1),Hu(this,pu,null),Hu(this,fu,null),Hu(this,mu,null),Hu(this,gu,null),Hu(this,yu,null),Hu(this,vu,-1),Hu(this,_u);const u=[...Uu(t,bu).values()];if(!t._initialized){t._initialized=!0;for(const t of u)t.initialize(c,e)}e.registerEditorTypes(u),$u(this,_u,e),this.pageIndex=n,this.div=i,$u(this,su,r),$u(this,ou,o),this.viewport=h,$u(this,mu,l),this.drawLayer=a,this._structTree=s,Uu(this,_u).addLayer(this)}get isEmpty(){return 0===Uu(this,hu).size}get isInvisible(){return this.isEmpty&&Uu(this,_u).getMode()===xB.NONE}updateToolbar(t){Uu(this,_u).updateToolbar(t)}updateMode(e=Uu(this,_u).getMode()){switch(Vu(this,wu,Eu).call(this),e){case xB.NONE:return this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case xB.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case xB.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===xB.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const i of Uu(t,bu).values())n.toggle(`${i._type}Editing`,e===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===Uu(this,mu)?.div}setEditingState(t){Uu(this,_u).setEditingState(t)}addCommands(t){Uu(this,_u).addCommands(t)}cleanUndoStack(t){Uu(this,_u).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){Uu(this,ou)?.div.classList.toggle("disabled",!t)}async enable(){$u(this,du,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),Uu(this,yu)?.abort(),$u(this,yu,null);const t=new Set;for(const n of Uu(this,wu,xu))n.enableEditing(),n.show(!0),n.annotationElementId&&(Uu(this,_u).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=Uu(this,ou);if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),Uu(this,_u).isDeletedAnnotationElement(n.data.id))continue;if(t.has(n.data.id))continue;const e=await this.deserialize(n);e&&(this.addOrRebuild(e),e.enableEditing())}$u(this,du,!1),Uu(this,_u)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if($u(this,uu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),Uu(this,mu)&&!Uu(this,yu)){$u(this,yu,new AbortController);const t=Uu(this,_u).combinedSignal(Uu(this,yu));Uu(this,mu).div.addEventListener("pointerdown",t=>{const{clientX:e,clientY:n,timeStamp:i}=t;if(i-Uu(this,vu)>500)return void $u(this,vu,i);$u(this,vu,-1);const{classList:s}=this.div;s.toggle("getElements",!0);const r=document.elementsFromPoint(e,n);if(s.toggle("getElements",!1),!this.div.contains(r[0]))return;let o;const a=new RegExp(`^${wB}[0-9]+$`);for(const h of r)if(a.test(h.id)){o=h.id;break}if(!o)return;const l=Uu(this,hu).get(o);null===l?.annotationElementId&&(t.stopPropagation(),t.preventDefault(),l.dblclick(t))},{signal:t,capture:!0})}const e=Uu(this,ou);if(e){const t=new Map,n=new Map;for(const s of Uu(this,wu,xu))s.disableEditing(),s.annotationElementId?null===s.serialize()?(n.set(s.annotationElementId,s),this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()):t.set(s.annotationElementId,s):s.updateFakeAnnotationElement(e);const i=e.getEditableAnnotations();for(const e of i){const{id:i}=e.data;if(Uu(this,_u).isDeletedAnnotationElement(i)){e.updateEdited({deleted:!0});continue}let s=n.get(i);s?(s.resetAnnotationElement(e),s.show(!1),e.show()):(s=t.get(i),s&&(Uu(this,_u).addChangedExistingAnnotation(s),s.renderAnnotationElement(e)&&s.show(!1)),e.show())}}Vu(this,wu,Eu).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of Uu(t,bu).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),$u(this,uu,!1)}getEditableAnnotation(t){return Uu(this,ou)?.getEditableAnnotation(t)||null}setActiveEditor(t){Uu(this,_u).getActive()!==t&&Uu(this,_u).setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,Uu(this,mu)?.div&&!Uu(this,gu)){$u(this,gu,new AbortController);const t=Uu(this,_u).combinedSignal(Uu(this,gu));Uu(this,mu).div.addEventListener("pointerdown",Vu(this,wu,Su).bind(this),{signal:t}),Uu(this,mu).div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,Uu(this,mu)?.div&&Uu(this,gu)&&(Uu(this,gu).abort(),$u(this,gu,null),Uu(this,mu).div.classList.remove("highlighting"))}enableClick(){if(Uu(this,au))return;$u(this,au,new AbortController);const t=Uu(this,_u).combinedSignal(Uu(this,au));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){Uu(this,au)?.abort(),$u(this,au,null)}attach(t){Uu(this,hu).set(t.id,t);const{annotationElementId:e}=t;e&&Uu(this,_u).isDeletedAnnotationElement(e)&&Uu(this,_u).removeDeletedAnnotationElement(t)}detach(t){Uu(this,hu).delete(t.id),Uu(this,su)?.removePointerInTextLayer(t.contentDiv),!Uu(this,uu)&&t.annotationElementId&&Uu(this,_u).addDeletedAnnotationElement(t)}remove(t){this.detach(t),Uu(this,_u).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(Uu(this,_u).addDeletedAnnotationElement(t.annotationElementId),nW.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),Uu(this,_u).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!Uu(this,du)),Uu(this,_u).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!Uu(this,lu)&&(t._focusEventsAllowed=!1,$u(this,lu,setTimeout(()=>{$u(this,lu,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:Uu(this,_u)._signal}),e.focus())},0))),t._structTreeParentId=Uu(this,su)?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getEditorByUID(t){for(const e of Uu(this,hu).values())if(e.uid===t)return e;return null}getNextId(){return Uu(this,_u).getId()}combinedSignal(t){return Uu(this,_u).combinedSignal(t)}canCreateNewEmptyEditor(){return Uu(this,wu,Au)?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await Uu(this,_u).updateMode(t.mode);const{offsetX:n,offsetY:i}=Vu(this,wu,Pu).call(this),s=this.getNextId(),r=Vu(this,wu,ku).call(this,{parent:this,id:s,x:n,y:i,uiManager:Uu(this,_u),isCentered:!0,...e});r&&this.add(r)}async deserialize(e){return await(Uu(t,bu).get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,Uu(this,_u)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),s=Vu(this,wu,ku).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:Uu(this,_u),isCentered:e,...n});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(Vu(this,wu,Pu).call(this),!0,t)}setSelected(t){Uu(this,_u).setSelected(t)}toggleSelected(t){Uu(this,_u).toggleSelected(t)}unselect(t){Uu(this,_u).unselect(t)}pointerup(t){const{isMac:e}=GB.platform;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;if(!Uu(this,cu))return;if($u(this,cu,!1),Uu(this,wu,Au)?.isDrawer&&Uu(this,wu,Au).supportMultipleDrawings)return;if(!Uu(this,ru))return void $u(this,ru,!0);const n=Uu(this,_u).getMode();n!==xB.STAMP&&n!==xB.SIGNATURE?this.createAndAddNewEditor(t,!1):Uu(this,_u).unselectAll()}pointerdown(t){if(Uu(this,_u).getMode()===xB.HIGHLIGHT&&this.enableTextSelection(),Uu(this,cu))return void $u(this,cu,!1);const{isMac:e}=GB.platform;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;if($u(this,cu,!0),Uu(this,wu,Au)?.isDrawer)return void this.startDrawingSession(t);const n=Uu(this,_u).getActive();$u(this,ru,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),Uu(this,pu))return void Uu(this,wu,Au).startDrawing(this,Uu(this,_u),!1,t);Uu(this,_u).setCurrentDrawingSession(this),$u(this,pu,new AbortController);const e=Uu(this,_u).combinedSignal(Uu(this,pu));this.div.addEventListener("blur",({relatedTarget:t})=>{t&&!this.div.contains(t)&&($u(this,fu,null),this.commitOrRemove())},{signal:e}),Uu(this,wu,Au).startDrawing(this,Uu(this,_u),!1,t)}pause(t){if(t){const{activeElement:t}=document;return void(this.div.contains(t)&&$u(this,fu,t))}Uu(this,fu)&&setTimeout(()=>{Uu(this,fu)?.focus(),$u(this,fu,null)},0)}endDrawingSession(t=!1){return Uu(this,pu)?(Uu(this,_u).setCurrentDrawingSession(null),Uu(this,pu).abort(),$u(this,pu,null),$u(this,fu,null),Uu(this,wu,Au).endDrawing(t)):null}findNewParent(t,e,n){const i=Uu(this,_u).findParent(e,n);return null!==i&&i!==this&&(i.changeParent(t),!0)}commitOrRemove(){return!!Uu(this,pu)&&(this.endDrawingSession(),!0)}onScaleChanging(){Uu(this,pu)&&Uu(this,wu,Au).onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),Uu(this,_u).getActive()?.parent===this&&(Uu(this,_u).commitOrRemove(),Uu(this,_u).setActiveEditor(null)),Uu(this,lu)&&(clearTimeout(Uu(this,lu)),$u(this,lu,null));for(const t of Uu(this,hu).values())Uu(this,su)?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,Uu(this,hu).clear(),Uu(this,_u).removeLayer(this)}render({viewport:t}){this.viewport=t,Az(this.div,t);for(const e of Uu(this,_u).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){Uu(this,_u).commitOrRemove(),Vu(this,wu,Eu).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Az(this.div,{rotation:n}),e!==n)for(const i of Uu(this,hu).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return Uu(this,_u).viewParameters.realScale}};su=new WeakMap,ru=new WeakMap,ou=new WeakMap,au=new WeakMap,lu=new WeakMap,hu=new WeakMap,cu=new WeakMap,uu=new WeakMap,du=new WeakMap,pu=new WeakMap,fu=new WeakMap,mu=new WeakMap,gu=new WeakMap,yu=new WeakMap,vu=new WeakMap,_u=new WeakMap,bu=new WeakMap,wu=new WeakSet,xu=function(){return 0!==Uu(this,hu).size?Uu(this,hu).values():Uu(this,_u).getEditors(this.pageIndex)},Su=function(t){Uu(this,_u).unselectAll();const{target:e}=t;if(e===Uu(this,mu).div||("img"===e.getAttribute("role")||e.classList.contains("endOfContent"))&&Uu(this,mu).div.contains(e)){const{isMac:e}=GB.platform;if(0!==t.button||t.ctrlKey&&e)return;Uu(this,_u).showAllEditors("highlight",!0,!0),Uu(this,mu).div.classList.add("free"),this.toggleDrawing(),SH.startHighlighting(this,"ltr"===Uu(this,_u).direction,{target:Uu(this,mu).div,x:t.x,y:t.y}),Uu(this,mu).div.addEventListener("pointerup",()=>{Uu(this,mu).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Uu(this,_u)._signal}),t.preventDefault()}},Au=function(){return Uu(zH,bu).get(Uu(this,_u).getMode())},ku=function(t){const e=Uu(this,wu,Au);return e?new e.prototype.constructor(t):null},Pu=function(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,s=Math.max(0,t),r=Math.max(0,e),o=(s+Math.min(window.innerWidth,t+n))/2-t,a=(r+Math.min(window.innerHeight,e+i))/2-e,[l,h]=this.viewport.rotation%180==0?[o,a]:[a,o];return{offsetX:l,offsetY:h}},Eu=function(){for(const t of Uu(this,hu).values())t.isEmpty()&&t.remove()},Wu(zH,"_initialized",!1),Hu(zH,bu,new Map([pH,LH,BH,SH,FH].map(t=>[t._editorType,t])));let WH=zH;const jH=class t{constructor({pageIndex:t}){Hu(this,Du),Hu(this,Cu,null),Hu(this,Mu,new Map),Hu(this,Tu,new Map),this.pageIndex=t}setParent(t){if(Uu(this,Cu)){if(Uu(this,Cu)!==t){if(Uu(this,Mu).size>0)for(const e of Uu(this,Mu).values())e.remove(),t.append(e);$u(this,Cu,t)}}else $u(this,Cu,t)}static get _svgFactory(){return FB(this,"_svgFactory",new IU)}draw(e,n=!1,i=!1){const s=qu(t,Lu)._++,r=Vu(this,Du,Ou).call(this),o=t._svgFactory.createElement("defs");r.append(o);const a=t._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),n&&Uu(this,Tu).set(s,a);const h=i?Vu(this,Du,Nu).call(this,o,l):null,c=t._svgFactory.createElement("use");return r.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(r,e),Uu(this,Mu).set(s,r),{id:s,clipPathId:`url(#${h})`}}drawOutline(e,n){const i=qu(t,Lu)._++,s=Vu(this,Du,Ou).call(this),r=t._svgFactory.createElement("defs");s.append(r);const o=t._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${i}`;let l;if(o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke"),n){const e=t._svgFactory.createElement("mask");r.append(e),l=`mask_p${this.pageIndex}_${i}`,e.setAttribute("id",l),e.setAttribute("maskUnits","objectBoundingBox");const n=t._svgFactory.createElement("rect");e.append(n),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("fill","white");const s=t._svgFactory.createElement("use");e.append(s),s.setAttribute("href",`#${a}`),s.setAttribute("stroke","none"),s.setAttribute("fill","black"),s.setAttribute("fill-rule","nonzero"),s.classList.add("mask")}const h=t._svgFactory.createElement("use");s.append(h),h.setAttribute("href",`#${a}`),l&&h.setAttribute("mask",`url(#${l})`);const c=h.cloneNode();return s.append(c),h.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(s,e),Uu(this,Mu).set(i,s),i}finalizeDraw(t,e){Uu(this,Tu).delete(t),this.updateProperties(t,e)}updateProperties(e,n){var i;if(!n)return;const{root:s,bbox:r,rootClass:o,path:a}=n,l="number"==typeof e?Uu(this,Mu).get(e):e;if(l){if(s&&Vu(this,Du,Fu).call(this,l,s),r&&Vu(i=t,Ru,Iu).call(i,l,r),o){const{classList:t}=l;for(const[e,n]of Object.entries(o))t.toggle(e,n)}if(a){const t=l.firstChild.firstChild;Vu(this,Du,Fu).call(this,t,a)}}}updateParent(t,e){if(e===this)return;const n=Uu(this,Mu).get(t);n&&(Uu(e,Cu).append(n),Uu(this,Mu).delete(t),Uu(e,Mu).set(t,n))}remove(t){Uu(this,Tu).delete(t),null!==Uu(this,Cu)&&(Uu(this,Mu).get(t).remove(),Uu(this,Mu).delete(t))}destroy(){$u(this,Cu,null);for(const t of Uu(this,Mu).values())t.remove();Uu(this,Mu).clear(),Uu(this,Tu).clear()}};Cu=new WeakMap,Mu=new WeakMap,Tu=new WeakMap,Lu=new WeakMap,Ru=new WeakSet,Iu=function(t,[e,n,i,s]){const{style:r}=t;r.top=100*n+"%",r.left=100*e+"%",r.width=100*i+"%",r.height=100*s+"%"},Du=new WeakSet,Ou=function(){const t=jH._svgFactory.create(1,1,!0);return Uu(this,Cu).append(t),t.setAttribute("aria-hidden",!0),t},Nu=function(t,e){const n=jH._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=jH._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),i},Fu=function(t,e){for(const[n,i]of Object.entries(e))null===i?t.removeAttribute(n):t.setAttribute(n,i)},Hu(jH,Ru),Hu(jH,Lu,0);let UH=jH;globalThis._pdfjsTestingUtils={HighlightOutliner:vH},globalThis.pdfjsLib={AbortException:$B,AnnotationEditorLayer:WH,AnnotationEditorParamsType:SB,AnnotationEditorType:xB,AnnotationEditorUIManager:Kz,AnnotationLayer:cH,AnnotationMode:bB,AnnotationType:PB,applyOpacity:Mz,build:AU,ColorPicker:PU,createValidAbsoluteUrl:OB,CSSConstants:Cz,DOMSVGFactory:IU,DrawLayer:UH,FeatureTest:GB,fetchData:lz,findContrastColor:Oz,getDocument:uU,getFilenameFromUrl:pz,getPdfFilenameFromUrl:fz,getRGB:wz,getUuid:JB,getXfaPageViewport:bz,GlobalWorkerOptions:Dj,ImageKind:kB,InvalidPDFException:jB,isDataScheme:uz,isPdfFile:dz,isValidExplicitDest:mW,MathClamp:ez,noContextMenu:yz,normalizeUnicode:QB,OPS:CB,OutputScale:kz,PasswordResponses:MB,PDFDataRangeTransport:fU,PDFDateString:_z,PDFWorker:vU,PermissionFlag:AB,PixelsPerInch:az,RenderingCancelledException:cz,renderRichText:Nz,ResponseException:UB,setLayerDimensions:Az,shadow:FB,SignatureExtractor:IH,stopEvent:vz,SupportedImageMimeTypes:Pz,TextLayer:cU,TouchManager:tW,updateUrlHash:NB,Util:KB,VerbosityLevel:EB,version:SU,XfaLayer:sz};const HH=Object.freeze(Object.defineProperty({__proto__:null,AbortException:$B,AnnotationEditorLayer:WH,AnnotationEditorParamsType:SB,AnnotationEditorType:xB,AnnotationEditorUIManager:Kz,AnnotationLayer:cH,AnnotationMode:bB,AnnotationType:PB,CSSConstants:Cz,ColorPicker:PU,DOMSVGFactory:IU,DrawLayer:UH,FeatureTest:GB,GlobalWorkerOptions:Dj,ImageKind:kB,InvalidPDFException:jB,MathClamp:ez,OPS:CB,OutputScale:kz,PDFDataRangeTransport:fU,PDFDateString:_z,PDFWorker:vU,PasswordResponses:MB,PermissionFlag:AB,PixelsPerInch:az,RenderingCancelledException:cz,ResponseException:UB,SignatureExtractor:IH,SupportedImageMimeTypes:Pz,TextLayer:cU,TouchManager:tW,Util:KB,VerbosityLevel:EB,XfaLayer:sz,applyOpacity:Mz,build:AU,createValidAbsoluteUrl:OB,fetchData:lz,findContrastColor:Oz,getDocument:uU,getFilenameFromUrl:pz,getPdfFilenameFromUrl:fz,getRGB:wz,getUuid:JB,getXfaPageViewport:bz,isDataScheme:uz,isPdfFile:dz,isValidExplicitDest:mW,noContextMenu:yz,normalizeUnicode:QB,renderRichText:Nz,setLayerDimensions:Az,shadow:FB,stopEvent:vz,updateUrlHash:NB,version:SU},Symbol.toStringTag,{value:"Module"}));function $H(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=$H(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function VH(){for(var t,e,n=0,i="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=$H(t))&&(i&&(i+=" "),i+=e);return i}var qH=Object.prototype.hasOwnProperty;function GH(t,e,n){for(n of t.keys())if(ZH(n,e))return n}function ZH(t,e){var n,i,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((i=t.length)===e.length)for(;i--&&ZH(t[i],e[i]););return-1===i}if(n===Set){if(t.size!==e.size)return!1;for(i of t){if((s=i)&&"object"==typeof s&&!(s=GH(e,s)))return!1;if(!e.has(s))return!1}return!0}if(n===Map){if(t.size!==e.size)return!1;for(i of t){if((s=i[0])&&"object"==typeof s&&!(s=GH(e,s)))return!1;if(!ZH(i[1],e.get(s)))return!1}return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((i=t.byteLength)===e.byteLength)for(;i--&&t.getInt8(i)===e.getInt8(i););return-1===i}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===e.byteLength)for(;i--&&t[i]===e[i];);return-1===i}if(!n||"object"==typeof t){for(n in i=0,t){if(qH.call(t,n)&&++i&&!qH.call(e,n))return!1;if(!(n in e)||!ZH(t[n],e[n]))return!1}return Object.keys(e).length===i}}return t!=t&&e!=e}function KH(t){let e=!1;return{promise:new Promise((n,i)=>{t.then(t=>!e&&n(t)).catch(t=>!e&&i(t))}),cancel(){e=!0}}}const XH=["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onBlur","onInput","onInvalid","onReset","onSubmit","onLoad","onError","onKeyDown","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onChange","onToggle"];function YH(t,e){const n={};for(const i of XH){const s=t[i];s&&(n[i]=e?t=>s(t,e(i)):s)}return n}function QH(t,e){if(!t)throw new Error("Invariant failed")}const JH=Ku(function(){});function t$(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter(Boolean);return n.length<=1?n[0]||null:function(t){for(var e=0,i=n;e<i.length;e++){var s=i[e];"function"==typeof s?s(t):s&&(s.current=t)}}}var e$={};!function(t){function e(t){var e,n,i,s;for(n=1,i=arguments.length;n<i;n++)for(e in s=arguments[n])t[e]=s[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var s=0;function r(t){return"_leaflet_id"in t||(t._leaflet_id=++s),t._leaflet_id}function o(t,e,n){var i,s,r,o;return o=function(){i=!1,s&&(r.apply(n,s),s=!1)},r=function(){i?s=arguments:(t.apply(n,arguments),setTimeout(o,e),i=!0)},r}function a(t,e,n){var i=e[1],s=e[0],r=i-s;return t===i&&n?t:((t-s)%r+r)%r+s}function l(){return!1}function h(t,e){if(!1===e)return t;var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function u(t){return c(t).split(/\s+/)}function d(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function p(t,e,n){var i=[];for(var s in t)i.push(encodeURIComponent(n?s.toUpperCase():s)+"="+encodeURIComponent(t[s]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var f=/\{ *([\w_ -]+) *\}/g;function m(t,e){return t.replace(f,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var x=window.requestAnimationFrame||_("RequestAnimationFrame")||w,S=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function A(t,e,n){if(!n||x!==w)return x.call(window,i(t,e));t.call(e)}function k(t){t&&S.call(window,t)}var P={__proto__:null,extend:e,create:n,bind:i,get lastId(){return s},stamp:r,throttle:o,wrapNum:a,falseFn:l,formatNum:h,trim:c,splitWords:u,setOptions:d,getParamString:p,template:m,isArray:g,indexOf:y,emptyImageUrl:v,requestFn:x,cancelFn:S,requestAnimFrame:A,cancelAnimFrame:k};function E(){}E.extend=function(t){var i=function(){d(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},s=i.__super__=this.prototype,r=n(s);for(var o in r.constructor=i,i.prototype=r,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(i[o]=this[o]);return t.statics&&e(i,t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e],L.Mixin.Events}}(t.includes),e.apply(null,[r].concat(t.includes))),e(r,t),delete r.statics,delete r.includes,r.options&&(r.options=s.options?n(s.options):{},e(r.options,t.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){s.callInitHooks&&s.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},i},E.include=function(t){var n=this.prototype.options;return e(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},E.mergeOptions=function(t){return e(this.prototype.options,t),this},E.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var C={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var s=0,r=(t=u(t)).length;s<r;s++)this._on(t[s],e,n);return this},off:function(t,e,n){if(arguments.length)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else{t=u(t);for(var s=1===arguments.length,r=0,o=t.length;r<o;r++)s?this._off(t[r]):this._off(t[r],e,n)}else delete this._events;return this},_on:function(t,e,n,i){if("function"==typeof e&&!1===this._listens(t,e,n)){n===this&&(n=void 0);var s={fn:e,ctx:n};i&&(s.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(s)}},_off:function(t,e,n){var i,s,r;if(this._events&&(i=this._events[t]))if(1!==arguments.length){if("function"==typeof e){var o=this._listens(t,e,n);if(!1!==o){var a=i[o];this._firingCount&&(a.fn=l,this._events[t]=i=i.slice()),i.splice(o,1)}}}else{if(this._firingCount)for(s=0,r=i.length;s<r;s++)i[s].fn=l;delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this;var s=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var o=0,a=r.length;o<a;o++){var l=r[o],h=l.fn;l.once&&this.off(t,h,l.ctx),h.call(l.ctx||this,s)}this._firingCount--}}return i&&this._propagateEvent(s),this},listens:function(t,e,n,i){var s=e;"function"!=typeof e&&(i=!!e,s=void 0,n=void 0);var r=this._events&&this._events[t];if(r&&r.length&&!1!==this._listens(t,s,n))return!0;if(i)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e,n,i))return!0;return!1},_listens:function(t,e,n){if(!this._events)return!1;var i=this._events[t]||[];if(!e)return!!i.length;n===this&&(n=void 0);for(var s=0,r=i.length;s<r;s++)if(i[s].fn===e&&i[s].ctx===n)return s;return!1},once:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e,!0);else for(var s=0,r=(t=u(t)).length;s<r;s++)this._on(t[s],e,n,!0);return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[r(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[r(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};C.addEventListener=C.on,C.removeEventListener=C.clearAllEventListeners=C.off,C.addOneTimeEventListener=C.once,C.fireEvent=C.fire,C.hasEventListeners=C.listens;var M=E.extend(C);function T(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var R=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function I(t,e,n){return t instanceof T?t:g(t)?new T(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new T(t.x,t.y):new T(t,e,n)}function D(t,e){if(t)for(var n=e?[t,e]:t,i=0,s=n.length;i<s;i++)this.extend(n[i])}function O(t,e){return!t||t instanceof D?t:new D(t,e)}function N(t,e){if(t)for(var n=e?[t,e]:t,i=0,s=n.length;i<s;i++)this.extend(n[i])}function F(t,e){return t instanceof N?t:new N(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function z(t,e,n){return t instanceof B?t:g(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}T.prototype={clone:function(){return new T(this.x,this.y)},add:function(t){return this.clone()._add(I(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(I(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new T(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new T(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=R(this.x),this.y=R(this.y),this},distanceTo:function(t){var e=(t=I(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=I(t)).x===this.x&&t.y===this.y},contains:function(t){return t=I(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}},D.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof T||"number"==typeof t[0]||"x"in t)e=n=I(t);else if(e=(t=O(t)).min,n=t.max,!e||!n)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=e.clone(),this.max=n.clone()),this},getCenter:function(t){return I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return I(this.min.x,this.max.y)},getTopRight:function(){return I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof T?I(t):O(t))instanceof D?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=O(t);var e=this.min,n=this.max,i=t.min,s=t.max,r=s.x>=e.x&&i.x<=n.x,o=s.y>=e.y&&i.y<=n.y;return r&&o},overlaps:function(t){t=O(t);var e=this.min,n=this.max,i=t.min,s=t.max,r=s.x>e.x&&i.x<n.x,o=s.y>e.y&&i.y<n.y;return r&&o},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,n=this.max,i=Math.abs(e.x-n.x)*t,s=Math.abs(e.y-n.y)*t;return O(I(e.x-i,e.y-s),I(n.x+i,n.y+s))},equals:function(t){return!!t&&(t=O(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},N.prototype={extend:function(t){var e,n,i=this._southWest,s=this._northEast;if(t instanceof B)e=t,n=t;else{if(!(t instanceof N))return t?this.extend(z(t)||F(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||s?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),s.lat=Math.max(n.lat,s.lat),s.lng=Math.max(n.lng,s.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,s=Math.abs(e.lng-n.lng)*t;return new N(new B(e.lat-i,e.lng-s),new B(n.lat+i,n.lng+s))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof B||"lat"in t?z(t):F(t);var e,n,i=this._southWest,s=this._northEast;return t instanceof N?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=s.lat&&e.lng>=i.lng&&n.lng<=s.lng},intersects:function(t){t=F(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>=e.lat&&i.lat<=n.lat,o=s.lng>=e.lng&&i.lng<=n.lng;return r&&o},overlaps:function(t){t=F(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>e.lat&&i.lat<n.lat,o=s.lng>e.lng&&i.lng<n.lng;return r&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=F(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(t,e){return!!t&&(t=z(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+h(this.lat,t)+", "+h(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,z(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return F([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var W,j={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new D(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?a(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?a(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,s=e.lng-n.lng;if(0===i&&0===s)return t;var r=t.getSouthWest(),o=t.getNorthEast();return new N(new B(r.lat-i,r.lng-s),new B(o.lat-i,o.lng-s))}},U=e({},j,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,s=e.lat*n,r=Math.sin((e.lat-t.lat)*n/2),o=Math.sin((e.lng-t.lng)*n/2),a=r*r+Math.cos(i)*Math.cos(s)*o*o,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),H=6378137,$={R:H,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),s=Math.sin(i*e);return new T(this.R*t.lng*e,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(W=H*Math.PI,new D([-W,-W],[W,W]))};function V(t,e,n,i){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function q(t,e,n,i){return new V(t,e,n,i)}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new T((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var G,Z=e({},U,{code:"EPSG:3857",projection:$,transformation:(G=.5/(Math.PI*$.R),q(G,.5,-G,.5))}),K=e({},Z,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t,e){var n,i,s,r,o,a,l="";for(n=0,s=t.length;n<s;n++){for(i=0,r=(o=t[n]).length;i<r;i++)l+=(i?"L":"M")+(a=o[i]).x+" "+a.y;l+=e?Ot.svg?"z":"x":""}return l||"M0 0"}var Q,J=document.documentElement.style,tt="ActiveXObject"in window,et=tt&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),it=Dt("webkit"),st=Dt("android"),rt=Dt("android 2")||Dt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=st&&Dt("Google")&&ot<537&&!("AudioNode"in window),lt=!!window.opera,ht=!nt&&Dt("chrome"),ct=Dt("gecko")&&!it&&!lt&&!tt,ut=!ht&&Dt("safari"),dt=Dt("phantom"),pt="OTransition"in J,ft=0===navigator.platform.indexOf("Win"),mt=tt&&"transition"in J,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,yt="MozPerspective"in J,vt=!window.L_DISABLE_3D&&(mt||gt||yt)&&!pt&&!dt,_t="undefined"!=typeof orientation||Dt("mobile"),bt=_t&&it,wt=_t&&gt,xt=!window.PointerEvent&&window.MSPointerEvent,St=!(!window.PointerEvent&&!xt),At="ontouchstart"in window||!!window.TouchEvent,kt=!window.L_NO_TOUCH&&(At||St),Pt=_t&&lt,Et=_t&&ct,Ct=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Mt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(iG){}return t}(),Tt=!!document.createElement("canvas").getContext,Lt=!(!document.createElementNS||!X("svg").createSVGRect),Rt=!!Lt&&((Q=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(Q.firstChild&&Q.firstChild.namespaceURI)),It=!Lt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(iG){return!1}}();function Dt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Ot={ie:tt,ielt9:et,edge:nt,webkit:it,android:st,android23:rt,androidStock:at,opera:lt,chrome:ht,gecko:ct,safari:ut,phantom:dt,opera12:pt,win:ft,ie3d:mt,webkit3d:gt,gecko3d:yt,any3d:vt,mobile:_t,mobileWebkit:bt,mobileWebkit3d:wt,msPointer:xt,pointer:St,touch:kt,touchNative:At,mobileOpera:Pt,mobileGecko:Et,retina:Ct,passiveEvents:Mt,canvas:Tt,svg:Lt,vml:It,inlineSvg:Rt,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Nt=Ot.msPointer?"MSPointerDown":"pointerdown",Ft=Ot.msPointer?"MSPointerMove":"pointermove",Bt=Ot.msPointer?"MSPointerUp":"pointerup",zt=Ot.msPointer?"MSPointerCancel":"pointercancel",Wt={touchstart:Nt,touchmove:Ft,touchend:Bt,touchcancel:zt},jt={touchstart:function(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Be(e),Zt(t,e)},touchmove:Zt,touchend:Zt,touchcancel:Zt},Ut={},Ht=!1;function $t(t,e,n){return"touchstart"===e&&(Ht||(document.addEventListener(Nt,Vt,!0),document.addEventListener(Ft,qt,!0),document.addEventListener(Bt,Gt,!0),document.addEventListener(zt,Gt,!0),Ht=!0)),jt[e]?(n=jt[e].bind(this,n),t.addEventListener(Wt[e],n,!1),n):l}function Vt(t){Ut[t.pointerId]=t}function qt(t){Ut[t.pointerId]&&(Ut[t.pointerId]=t)}function Gt(t){delete Ut[t.pointerId]}function Zt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],Ut)e.touches.push(Ut[n]);e.changedTouches=[e],t(e)}}var Kt,Xt,Yt,Qt,Jt,te=ge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ee=ge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ne="webkitTransition"===ee||"OTransition"===ee?ee+"End":"transitionend";function ie(t){return"string"==typeof t?document.getElementById(t):t}function se(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function re(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function oe(t){var e=t.parentNode;e&&e.removeChild(t)}function ae(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function he(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ce(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=fe(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ue(t,e){if(void 0!==t.classList)for(var n=u(e),i=0,s=n.length;i<s;i++)t.classList.add(n[i]);else if(!ce(t,e)){var r=fe(t);pe(t,(r?r+" ":"")+e)}}function de(t,e){void 0!==t.classList?t.classList.remove(e):pe(t,c((" "+fe(t)+" ").replace(" "+e+" "," ")))}function pe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function fe(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(iG){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ge(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ye(t,e,n){var i=e||new T(0,0);t.style[te]=(Ot.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function ve(t,e){t._leaflet_pos=e,Ot.any3d?ye(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function _e(t){return t._leaflet_pos||new T(0,0)}if("onselectstart"in document)Kt=function(){Ce(window,"selectstart",Be)},Xt=function(){Te(window,"selectstart",Be)};else{var be=ge(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Kt=function(){if(be){var t=document.documentElement.style;Yt=t[be],t[be]="none"}},Xt=function(){be&&(document.documentElement.style[be]=Yt,Yt=void 0)}}function we(){Ce(window,"dragstart",Be)}function xe(){Te(window,"dragstart",Be)}function Se(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ae(),Qt=t,Jt=t.style.outlineStyle,t.style.outlineStyle="none",Ce(window,"keydown",Ae))}function Ae(){Qt&&(Qt.style.outlineStyle=Jt,Qt=void 0,Jt=void 0,Te(window,"keydown",Ae))}function ke(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Pe(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ee={__proto__:null,TRANSFORM:te,TRANSITION:ee,TRANSITION_END:ne,get:ie,getStyle:se,create:re,remove:oe,empty:ae,toFront:le,toBack:he,hasClass:ce,addClass:ue,removeClass:de,setClass:pe,getClass:fe,setOpacity:me,testProp:ge,setTransform:ye,setPosition:ve,getPosition:_e,get disableTextSelection(){return Kt},get enableTextSelection(){return Xt},disableImageDrag:we,enableImageDrag:xe,preventOutline:Se,restoreOutline:Ae,getSizedParentNode:ke,getScale:Pe};function Ce(t,e,n,i){if(e&&"object"==typeof e)for(var s in e)Ie(t,s,e[s],n);else for(var r=0,o=(e=u(e)).length;r<o;r++)Ie(t,e[r],n,i);return this}var Me="_leaflet_events";function Te(t,e,n,i){if(1===arguments.length)Le(t),delete t[Me];else if(e&&"object"==typeof e)for(var s in e)De(t,s,e[s],n);else if(e=u(e),2===arguments.length)Le(t,function(t){return-1!==y(e,t)});else for(var r=0,o=e.length;r<o;r++)De(t,e[r],n,i);return this}function Le(t,e){for(var n in t[Me]){var i=n.split(/\d/)[0];e&&!e(i)||De(t,i,null,null,n)}}var Re={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ie(t,e,n,i){var s=e+r(n)+(i?"_"+r(i):"");if(t[Me]&&t[Me][s])return this;var o=function(e){return n.call(i||t,e||window.event)},a=o;!Ot.touchNative&&Ot.pointer&&0===e.indexOf("touch")?o=$t(t,e,o):Ot.touch&&"dblclick"===e?o=function(t,e){t.addEventListener("dblclick",e);var n,i=0;function s(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var s=We(t);if(!s.some(function(t){return t instanceof HTMLLabelElement&&t.attributes.for})||s.some(function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement})){var r=Date.now();r-i<=200?2===++n&&e(function(t){var e,n,i={};for(n in t)e=t[n],i[n]=e&&e.bind?e.bind(t):e;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}(t)):n=1,i=r}}}else n=t.detail}return t.addEventListener("click",s),{dblclick:e,simDblclick:s}}(t,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Re[e]||e,o,!!Ot.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,$e(t,e)&&a(e)},t.addEventListener(Re[e],o,!1)):t.addEventListener(e,a,!1):t.attachEvent("on"+e,o),t[Me]=t[Me]||{},t[Me][s]=o}function De(t,e,n,i,s){s=s||e+r(n)+(i?"_"+r(i):"");var o=t[Me]&&t[Me][s];if(!o)return this;!Ot.touchNative&&Ot.pointer&&0===e.indexOf("touch")?function(t,e,n){Wt[e]&&t.removeEventListener(Wt[e],n,!1)}(t,e,o):Ot.touch&&"dblclick"===e?function(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}(t,o):"removeEventListener"in t?t.removeEventListener(Re[e]||e,o,!1):t.detachEvent("on"+e,o),t[Me][s]=null}function Oe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ne(t){return Ie(t,"wheel",Oe),this}function Fe(t){return Ce(t,"mousedown touchstart dblclick contextmenu",Oe),t._leaflet_disable_click=!0,this}function Be(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ze(t){return Be(t),Oe(t),this}function We(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function je(t,e){if(!e)return new T(t.clientX,t.clientY);var n=Pe(e),i=n.boundingClientRect;return new T((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Ue=Ot.linux&&Ot.chrome?window.devicePixelRatio:Ot.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function He(t){return Ot.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ue:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function $e(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t}var Ve={__proto__:null,on:Ce,off:Te,stopPropagation:Oe,disableScrollPropagation:Ne,disableClickPropagation:Fe,preventDefault:Be,stop:ze,getPropagationPath:We,getMousePosition:je,getWheelDelta:He,isExternalTarget:$e,addListener:Ce,removeListener:Te},qe=M.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=_e(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ve(this._el,n),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ge=M.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(z(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ee&&Ot.any3d&&!Ot.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ce(this._proxy,ne,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(z(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n,i.pan&&i.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),s=this.getSize().divideBy(2),r=(t instanceof T?t:this.latLngToContainerPoint(t)).subtract(s).multiplyBy(1-1/i),o=this.containerPointToLatLng(s.add(r));return this.setView(o,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():F(t);var n=I(e.paddingTopLeft||e.padding||[0,0]),i=I(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,n.add(i));if((s="number"==typeof e.maxZoom?Math.min(e.maxZoom,s):s)===1/0)return{center:t.getCenter(),zoom:s};var r=i.subtract(n).divideBy(2),o=this.project(t.getSouthWest(),s),a=this.project(t.getNorthEast(),s);return{center:this.unproject(o.add(a).divideBy(2).add(r),s),zoom:s}},fitBounds:function(t,e){if(!(t=F(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=I(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ue(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!Ot.any3d)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),s=this.project(t),r=this.getSize(),o=this._zoom;t=z(t),e=void 0===e?o:e;var a=Math.max(r.x,r.y),l=a*this.getZoomScale(o,e),h=s.distanceTo(i)||1,c=1.42,u=2.0164;function d(t){var e=(l*l-a*a+(t?-1:1)*u*u*h*h)/(2*(t?l:a)*u*h),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=d(0);function g(t){return a*(f(m)*(p(e=m+c*t)/f(e))-p(m))/u;var e}var y=Date.now(),v=(d(1)-m)/c,_=n.duration?1e3*n.duration:1e3*v*.8;return this._moveStart(!0,n.noMoveStart),function n(){var r=(Date.now()-y)/_,l=function(t){return 1-Math.pow(1-t,1.5)}(r)*v;r<=1?(this._flyToFrame=A(n,this),this._move(this.unproject(i.add(s.subtract(i).multiplyBy(g(l)/h)),o),this.getScaleZoom(a/function(t){return a*(f(m)/f(m+c*t))}(l),o),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=F(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,F(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=I((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=I(e.paddingBottomRight||e.padding||[0,0]),s=this.project(this.getCenter()),r=this.project(t),o=this.getPixelBounds(),a=O([o.min.add(n),o.max.subtract(i)]),l=a.getSize();if(!a.contains(r)){this._enforcingBounds=!0;var h=r.subtract(a.getCenter()),c=a.extend(r).getSize().subtract(l);s.x+=h.x<0?-c.x:c.x,s.y+=h.y<0?-c.y:c.y,this.panTo(this.unproject(s),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var s=this.getSize(),r=n.divideBy(2).round(),o=s.divideBy(2).round(),a=r.subtract(o);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:s})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=i(this._handleGeolocationResponse,this),s=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,s,t):navigator.geolocation.getCurrentPosition(n,s,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new B(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var s=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(s,i.maxZoom):s)}var r={latlng:e,bounds:n,timestamp:t.timestamp};for(var o in t.coords)"number"==typeof t.coords[o]&&(r[o]=t.coords[o]);this.fire("locationfound",r)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(iG){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)oe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=re("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new N(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=F(t),n=I(n||[0,0]);var i=this.getZoom()||0,s=this.getMinZoom(),r=this.getMaxZoom(),o=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(n),h=O(this.project(a,i),this.project(o,i)).getSize(),c=Ot.any3d?this.options.zoomSnap:1,u=l.x/h.x,d=l.y/h.y,p=e?Math.max(u,d):Math.min(u,d);return i=this.getScaleZoom(p,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(s,Math.min(r,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new T(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new D(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(z(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(I(t),e)},layerPointToLatLng:function(t){var e=I(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(z(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(F(t))},distance:function(t,e){return this.options.crs.distance(z(t),z(e))},containerPointToLayerPoint:function(t){return I(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return I(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(I(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(t)))},mouseEventToContainerPoint:function(t){return je(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ie(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ce(e,"scroll",this._onScroll,this),this._containerId=r(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ot.any3d,ue(t,"leaflet-container"+(Ot.touch?" leaflet-touch":"")+(Ot.retina?" leaflet-retina":"")+(Ot.ielt9?" leaflet-oldie":"")+(Ot.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=se(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ve(this._mapPane,new T(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ue(t.markerPane,"leaflet-zoom-hide"),ue(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){ve(this._mapPane,new T(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var s=this._zoom!==e;this._moveStart(s,n)._move(t,e)._moveEnd(s),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,i){void 0===e&&(e=this._zoom);var s=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),i?n&&n.pinch&&this.fire("zoom",n):((s||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ve(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[r(this._container)]=this;var e=t?Te:Ce;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Ot.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],s="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((n=this._targets[r(o)])&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(s&&!$e(o,t))break;if(i.push(n),s)break}if(o===this._container)break;o=o.parentNode}return i.length||a||s||!this.listens(e,!0)||(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var n=t.type;"mousedown"===n&&Se(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var s=e({},t);s.type="preclick",this._fireDOMEvent(s,s.type,i)}var r=this._findEventTargets(t,n);if(i){for(var o=[],a=0;a<i.length;a++)i[a].listens(n,!0)&&o.push(i[a]);r=o.concat(r)}if(r.length){"contextmenu"===n&&Be(t);var l=r[0],h={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var c=l.getLatLng&&(!l._radius||l._radius<=10);h.containerPoint=c?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),h.layerPoint=this.containerPointToLayerPoint(h.containerPoint),h.latlng=c?l.getLatLng():this.layerPointToLatLng(h.layerPoint)}for(a=0;a<r.length;a++)if(r[a].fire(n,h,!0),h.originalEvent._stopped||!1===r[a].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return _e(this._mapPane)||new T(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return O([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),s=this.getSize().divideBy(2),r=new D(i.subtract(s),i.add(s)),o=this._getBoundsOffset(r,n,e);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?t:this.unproject(i.add(o),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new D(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=O(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),s=i.min.subtract(t.min),r=i.max.subtract(t.max);return new T(this._rebound(s.x,-r.x),this._rebound(s.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=Ot.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=te,n=this._proxy.style[e];ye(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ye(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),s=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(s)||(A(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,s){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Ze=E.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return ue(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ke=function(t){return new Ze(t)};Ge.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=re("div",e+"control-container",this._container);function i(i,s){var r=e+i+" "+e+s;t[i+s]=re("div",r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)oe(this._controlCorners[t]);oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Xe=Ze.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in d(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ze.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(r(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):de(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=re("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Fe(e),Ne(e);var i=this._section=re("section",t+"-list");n&&(this._map.on("click",this.collapse,this),Ce(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var s=this._layersLink=re("a",t+"-toggle",e);s.href="#",s.title="Layers",s.setAttribute("role","button"),Ce(s,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){Be(t),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=re("div",t+"-base",i),this._separator=re("div",t+"-separator",i),this._overlaysList=re("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&r(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ae(this._baseLayersList),ae(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,s=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,s+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&s>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(r(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+r(this),i),this._layerControlInputs.push(e),e.layerId=r(t.layer),Ce(e,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+t.name;var o=document.createElement("span");return n.appendChild(o),o.appendChild(e),o.appendChild(s),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t,e,n=this._layerControlInputs,i=[],s=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||s.push(e);for(r=0;r<s.length;r++)this._map.hasLayer(s[r])&&this._map.removeLayer(s[r]);for(r=0;r<i.length;r++)this._map.hasLayer(i[r])||this._map.addLayer(i[r]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),s=n.length-1;s>=0;s--)t=n[s],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Ce(t,"click",Be),this.expand();var e=this;setTimeout(function(){Te(t,"click",Be),e._preventClick=!1})}}),Ye=Ze.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=re("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,s){var r=re("a",n,i);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),Fe(r),Ce(r,"click",ze),Ce(r,"click",s,this),Ce(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ue(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ue(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ge.mergeOptions({zoomControl:!0}),Ge.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ye,this.addControl(this.zoomControl))});var Qe=Ze.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=re("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=re("div",e,n)),t.imperial&&(this._iScale=re("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,s=3.2808399*t;s>5280?(e=s/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(s),this._updateScale(this._iScale,i+" ft",i/s))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Je=Ze.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ot.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=re("div","leaflet-control-attribution"),Fe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});Ge.mergeOptions({attributionControl:!0}),Ge.addInitHook(function(){this.options.attributionControl&&(new Je).addTo(this)});Ze.Layers=Xe,Ze.Zoom=Ye,Ze.Scale=Qe,Ze.Attribution=Je,Ke.layers=function(t,e,n){return new Xe(t,e,n)},Ke.zoom=function(t){return new Ye(t)},Ke.scale=function(t){return new Qe(t)},Ke.attribution=function(t){return new Je(t)};var tn=E.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(t,e){return t.addHandler(e,this),this};var en={Events:C},nn=Ot.touch?"touchstart mousedown":"mousedown",sn=M.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){d(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ce(this._dragStartTarget,nn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sn._dragging===this&&this.finishDrag(!0),Te(this._dragStartTarget,nn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ce(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)sn._dragging===this&&this.finishDrag();else if(!(sn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(sn._dragging=this,this._preventOutline&&Se(this._element),we(),Kt(),this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,n=ke(this._element);this._startPoint=new T(e.clientX,e.clientY),this._startPos=_e(this._element),this._parentScale=Pe(n);var i="mousedown"===t.type;Ce(document,i?"mousemove":"touchmove",this._onMove,this),Ce(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new T(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Be(t),this._moved||(this.fire("dragstart"),this._moved=!0,ue(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ve(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Te(document,"mousemove touchmove",this._onMove,this),Te(document,"mouseup touchend touchcancel",this._onUp,this),xe(),Xt();var e=this._moved&&this._moving;this._moving=!1,sn._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function rn(t,e,n){var i,s,r,o,a,l,h,c,u,d=[1,4,2,8];for(s=0,h=t.length;s<h;s++)t[s]._code=mn(t[s],e);for(o=0;o<4;o++){for(c=d[o],i=[],s=0,r=(h=t.length)-1;s<h;r=s++)a=t[s],l=t[r],a._code&c?l._code&c||((u=fn(l,a,c,e,n))._code=mn(u,e),i.push(u)):(l._code&c&&((u=fn(l,a,c,e,n))._code=mn(u,e),i.push(u)),i.push(a));t=i}return t}function on(t,e){var n,i,s,r,o,a,l,h,c;if(!t||0===t.length)throw new Error("latlngs not passed");vn(t)||(t=t[0]);var u=z([0,0]),d=F(t);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=an(t));var p=t.length,f=[];for(n=0;n<p;n++){var m=z(t[n]);f.push(e.project(z([m.lat-u.lat,m.lng-u.lng])))}for(a=l=h=0,n=0,i=p-1;n<p;i=n++)s=f[n],r=f[i],o=s.y*r.x-r.y*s.x,l+=(s.x+r.x)*o,h+=(s.y+r.y)*o,a+=3*o;c=0===a?f[0]:[l/a,h/a];var g=e.unproject(I(c));return z([g.lat+u.lat,g.lng+u.lng])}function an(t){for(var e=0,n=0,i=0,s=0;s<t.length;s++){var r=z(t[s]);e+=r.lat,n+=r.lng,i++}return z([e/i,n/i])}var ln,hn={__proto__:null,clipPolygon:rn,polygonCenter:on,centroid:an};function cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,i=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(n);i[0]=i[n-1]=1,dn(t,i,e,0,n-1);var s,r=[];for(s=0;s<n;s++)i[s]&&r.push(t[s]);return r}(t=function(t,e){for(var n=[t[0]],i=1,s=0,r=t.length;i<r;i++)gn(t[i],t[s])>e&&(n.push(t[i]),s=i);return s<r-1&&n.push(t[r-1]),n}(t,n),n)}function un(t,e,n){return Math.sqrt(yn(t,e,n,!0))}function dn(t,e,n,i,s){var r,o,a,l=0;for(o=i+1;o<=s-1;o++)(a=yn(t[o],t[i],t[s],!0))>l&&(r=o,l=a);l>n&&(e[r]=1,dn(t,e,n,i,r),dn(t,e,n,r,s))}function pn(t,e,n,i,s){var r,o,a,l=i?ln:mn(t,n),h=mn(e,n);for(ln=h;;){if(!(l|h))return[t,e];if(l&h)return!1;a=mn(o=fn(t,e,r=l||h,n,s),n),r===l?(t=o,l=a):(e=o,h=a)}}function fn(t,e,n,i,s){var r,o,a=e.x-t.x,l=e.y-t.y,h=i.min,c=i.max;return 8&n?(r=t.x+a*(c.y-t.y)/l,o=c.y):4&n?(r=t.x+a*(h.y-t.y)/l,o=h.y):2&n?(r=c.x,o=t.y+l*(c.x-t.x)/a):1&n&&(r=h.x,o=t.y+l*(h.x-t.x)/a),new T(r,o,s)}function mn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function gn(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function yn(t,e,n,i){var s,r=e.x,o=e.y,a=n.x-r,l=n.y-o,h=a*a+l*l;return h>0&&((s=((t.x-r)*a+(t.y-o)*l)/h)>1?(r=n.x,o=n.y):s>0&&(r+=a*s,o+=l*s)),a=t.x-r,l=t.y-o,i?a*a+l*l:new T(r,o)}function vn(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function _n(t){return vn(t)}function bn(t,e){var n,i,s,r,o,a,l,h;if(!t||0===t.length)throw new Error("latlngs not passed");vn(t)||(t=t[0]);var c=z([0,0]),u=F(t);u.getNorthWest().distanceTo(u.getSouthWest())*u.getNorthEast().distanceTo(u.getNorthWest())<1700&&(c=an(t));var d=t.length,p=[];for(n=0;n<d;n++){var f=z(t[n]);p.push(e.project(z([f.lat-c.lat,f.lng-c.lng])))}for(n=0,i=0;n<d-1;n++)i+=p[n].distanceTo(p[n+1])/2;if(0===i)h=p[0];else for(n=0,r=0;n<d-1;n++)if(o=p[n],a=p[n+1],(r+=s=o.distanceTo(a))>i){l=(r-i)/s,h=[a.x-l*(a.x-o.x),a.y-l*(a.y-o.y)];break}var m=e.unproject(I(h));return z([m.lat+c.lat,m.lng+c.lng])}var wn={__proto__:null,simplify:cn,pointToSegmentDistance:un,closestPointOnSegment:function(t,e,n){return yn(t,e,n)},clipSegment:pn,_getEdgeIntersection:fn,_getBitCode:mn,_sqClosestPointOnSegment:yn,isFlat:vn,_flat:_n,polylineCenter:bn},xn={project:function(t){return new T(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new D([-180,-90],[180,90])},Sn={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,s=this.R_MINOR/n,r=Math.sqrt(1-s*s),o=r*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-o)/(1+o),r/2);return i=-n*Math.log(Math.max(a,1e-10)),new T(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,s=this.R_MINOR/i,r=Math.sqrt(1-s*s),o=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(o),l=0,h=.1;l<15&&Math.abs(h)>1e-7;l++)e=r*Math.sin(a),e=Math.pow((1-e)/(1+e),r/2),a+=h=Math.PI/2-2*Math.atan(o*e)-a;return new B(a*n,t.x*n/i)}},An={__proto__:null,LonLat:xn,Mercator:Sn,SphericalMercator:$},kn=e({},U,{code:"EPSG:3395",projection:Sn,transformation:function(){var t=.5/(Math.PI*Sn.R);return q(t,.5,-t,.5)}()}),Pn=e({},U,{code:"EPSG:4326",projection:xn,transformation:q(1/180,1,-1/180,.5)}),En=e({},j,{projection:xn,transformation:q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});j.Earth=U,j.EPSG3395=kn,j.EPSG3857=Z,j.EPSG900913=K,j.EPSG4326=Pn,j.Simple=En;var Cn=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[r(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[r(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ge.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=r(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=r(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return r(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?g(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[r(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=r(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var s=this._zoomBoundLayers[i].options;t=void 0===s.minZoom?t:Math.min(t,s.minZoom),e=void 0===s.maxZoom?e:Math.max(e,s.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mn=Cn.extend({initialize:function(t,e){var n,i;if(d(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return r(t)}}),Tn=Mn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Mn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Mn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new N;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Ln=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var s=I(i),r=I("shadow"===e&&n.shadowAnchor||n.iconAnchor||s&&s.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Ot.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Rn=Ln.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof Rn.imagePath&&(Rn.imagePath=this._detectIconPath()),(this.options.imagePath||Rn.imagePath)+Ln.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,n){var i=e.exec(t);return i&&i[n]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=re("div","leaflet-default-icon-path",document.body),e=se(t,"background-image")||se(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),In=tn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new sn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ue(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,r=_e(e._icon),o=n.getPixelBounds(),a=n.getPixelOrigin(),l=O(o.min._subtract(a).add(s),o.max._subtract(a).subtract(s));if(!l.contains(r)){var h=I((Math.max(l.max.x,r.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(i);n.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),ve(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=A(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=_e(e._icon),s=e._map.layerPointToLatLng(i);n&&ve(n,i),e._latlng=s,t.latlng=s,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Dn=Cn.extend({options:{icon:new Rn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ue(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ce(n,"focus",this._panOnFocus,this);var s=t.icon.createShadow(this._shadow),r=!1;s!==this._shadow&&(this._removeShadow(),r=!0),s&&(ue(s,e),s.alt=""),this._shadow=s,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&r&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Te(this._icon,"focus",this._panOnFocus,this),oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&oe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ve(this._icon,t),this._shadow&&ve(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),In)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new In(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?I(e.iconSize):I(0,0),i=e.iconAnchor?I(e.iconAnchor):I(0,0);t.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var On=Cn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nn=On.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=z(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=z(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return On.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new D(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Fn=Nn.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),d(this,n),this._latlng=z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new N(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:On.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===U.distance){var s=Math.PI/180,r=this._mRadius/U.R/s,o=n.project([e+r,t]),a=n.project([e-r,t]),l=o.add(a).divideBy(2),h=n.unproject(l).lat,c=Math.acos((Math.cos(r*s)-Math.sin(e*s)*Math.sin(h*s))/(Math.cos(e*s)*Math.cos(h*s)))/s;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([h,t-c]).x,this._radiusY=l.y-o.y}else{var u=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(u).x}this._updateBounds()}});var Bn=On.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,s=null,r=yn,o=0,a=this._parts.length;o<a;o++)for(var l=this._parts[o],h=1,c=l.length;h<c;h++){var u=r(t,e=l[h-1],n=l[h],!0);u<i&&(i=u,s=r(t,e,n))}return s&&(s.distance=Math.sqrt(i)),s},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new N,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return vn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=vn(t),i=0,s=t.length;i<s;i++)n?(e[i]=z(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new T(t,t);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var i,s,r=t[0]instanceof B,o=t.length;if(r){for(s=[],i=0;i<o;i++)s[i]=this._map.latLngToLayerPoint(t[i]),n.extend(s[i]);e.push(s)}else for(i=0;i<o;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,s,r,o,a,l=this._parts;for(e=0,i=0,s=this._rings.length;e<s;e++)for(n=0,r=(a=this._rings[e]).length;n<r-1;n++)(o=pn(a[n],a[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(o[0]),o[1]===a[n+1]&&n!==r-2||(l[i].push(o[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,s,r,o,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(i=0,s=(o=(a=this._parts[n]).length)-1;i<o;s=i++)if((e||0!==i)&&un(t,a[s],a[i])<=l)return!0;return!1}});Bn._flat=_n;var zn=Bn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return on(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Bn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof B&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Bn.prototype._setLatLngs.call(this,t),vn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new T(e,e);if(t=new D(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,s=0,r=this._rings.length;s<r;s++)(i=rn(this._rings[s],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,s,r,o,a,l,h=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(s=0,a=this._parts.length;s<a;s++)for(r=0,o=(l=(e=this._parts[s]).length)-1;r<l;o=r++)n=e[r],i=e[o],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(h=!h);return h||Bn.prototype._containsPoint.call(this,t,!0)}});var Wn=Tn.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,s=g(t)?t:t.features;if(s){for(e=0,n=s.length;e<n;e++)((i=s[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var o=jn(t,r);return o?(o.feature=Zn(t),o.defaultOptions=o.options,this.resetStyle(o),r.onEachFeature&&r.onEachFeature(t,o),this.addLayer(o)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function jn(t,e){var n,i,s,r,o="Feature"===t.type?t.geometry:t,a=o?o.coordinates:null,l=[],h=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Hn;if(!a&&!o)return null;switch(o.type){case"Point":return Un(h,t,n=c(a),e);case"MultiPoint":for(s=0,r=a.length;s<r;s++)n=c(a[s]),l.push(Un(h,t,n,e));return new Tn(l);case"LineString":case"MultiLineString":return i=$n(a,"LineString"===o.type?0:1,c),new Bn(i,e);case"Polygon":case"MultiPolygon":return i=$n(a,"Polygon"===o.type?1:2,c),new zn(i,e);case"GeometryCollection":for(s=0,r=o.geometries.length;s<r;s++){var u=jn({geometry:o.geometries[s],type:"Feature",properties:t.properties},e);u&&l.push(u)}return new Tn(l);case"FeatureCollection":for(s=0,r=o.features.length;s<r;s++){var d=jn(o.features[s],e);d&&l.push(d)}return new Tn(l);default:throw new Error("Invalid GeoJSON object.")}}function Un(t,e,n,i){return t?t(e,n):new Dn(n,i&&i.markersInheritOptions&&i)}function Hn(t){return new B(t[1],t[0],t[2])}function $n(t,e,n){for(var i,s=[],r=0,o=t.length;r<o;r++)i=e?$n(t[r],e-1,n):(n||Hn)(t[r]),s.push(i);return s}function Vn(t,e){return void 0!==(t=z(t)).alt?[h(t.lng,e),h(t.lat,e),h(t.alt,e)]:[h(t.lng,e),h(t.lat,e)]}function qn(t,e,n,i){for(var s=[],r=0,o=t.length;r<o;r++)s.push(e?qn(t[r],vn(t[r])?0:e-1,n,i):Vn(t[r],i));return!e&&n&&s.length>0&&s.push(s[0].slice()),s}function Gn(t,n){return t.feature?e({},t.feature,{geometry:n}):Zn(n)}function Zn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Kn={toGeoJSON:function(t){return Gn(this,{type:"Point",coordinates:Vn(this.getLatLng(),t)})}};function Xn(t,e){return new Wn(t,e)}Dn.include(Kn),Fn.include(Kn),Nn.include(Kn),Bn.include({toGeoJSON:function(t){var e=!vn(this._latlngs);return Gn(this,{type:(e?"Multi":"")+"LineString",coordinates:qn(this._latlngs,e?1:0,!1,t)})}}),zn.include({toGeoJSON:function(t){var e=!vn(this._latlngs),n=e&&!vn(this._latlngs[0]),i=qn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Gn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Mn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Gn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var s=e.toGeoJSON(t);if(n)i.push(s.geometry);else{var r=Zn(s);"FeatureCollection"===r.type?i.push.apply(i,r.features):i.push(r)}}}),n?Gn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Yn=Xn,Qn=Cn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=F(e),d(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&he(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=F(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:re("img");ue(e,"leaflet-image-layer"),this._zoomAnimated&&ue(e,"leaflet-zoom-animated"),this.options.className&&ue(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ye(this._image,n,e)},_reset:function(){var t=this._image,e=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ve(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Jn=Qn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:re("video");if(ue(e,"leaflet-image-layer"),this._zoomAnimated&&ue(e,"leaflet-zoom-animated"),this.options.className&&ue(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),s=[],r=0;r<n.length;r++)s.push(n[r].src);this._url=n.length>0?s:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var a=re("source");a.src=this._url[o],e.appendChild(a)}}}});var ti=Qn.extend({_initImage:function(){var t=this._image=this._url;ue(t,"leaflet-image-layer"),this._zoomAnimated&&ue(t,"leaflet-zoom-animated"),this.options.className&&ue(t,this.options.className),t.onselectstart=l,t.onmousemove=l}});var ei=Cn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof B||g(t))?(this._latlng=z(t),d(this,e)):(d(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&me(this._container,1),this.bringToFront(),this.options.interactive&&(ue(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(me(this._container,0),this._removeTimeout=setTimeout(i(oe,void 0,this._container),200)):oe(this._container),this.options.interactive&&(de(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&he(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Tn){e=null;var n=this._source._layers;for(var i in n)if(n[i]._map){e=n[i];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=I(this.options.offset),n=this._getAnchor();this._zoomAnimated?ve(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}});Ge.include({_initOverlay:function(t,e,n,i){var s=e;return s instanceof t||(s=new t(i).setContent(e)),n&&s.setLatLng(n),s}}),Cn.include({_initOverlay:function(t,e,n,i){var s=n;return s instanceof t?(d(s,i),s._source=this):(s=e&&!i?e:new t(i,this)).setContent(n),s}});var ni=ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ei.prototype.openOn.call(this,t)},onAdd:function(t){ei.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof On||this._source.on("preclick",Oe))},onRemove:function(t){ei.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof On||this._source.off("preclick",Oe))},getEvents:function(){var t=ei.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=re("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=re("div",t+"-content-wrapper",e);if(this._contentNode=re("div",t+"-content",n),Fe(e),Ne(this._contentNode),Ce(e,"contextmenu",Oe),this._tipContainer=re("div",t+"-tip-container",e),this._tip=re("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=re("a",t+"-close-button",e);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',Ce(i,"click",function(t){Be(t),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,s=this.options.maxHeight,r="leaflet-popup-scrolled";s&&i>s?(e.height=s+"px",ue(t,r)):de(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ve(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var t=this._map,e=parseInt(se(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,s=new T(this._containerLeft,-n-this._containerBottom);s._add(_e(this._container));var r=t.layerPointToContainerPoint(s),o=I(this.options.autoPanPadding),a=I(this.options.autoPanPaddingTopLeft||o),l=I(this.options.autoPanPaddingBottomRight||o),h=t.getSize(),c=0,u=0;r.x+i+l.x>h.x&&(c=r.x+i-h.x+l.x),r.x-c-a.x<0&&(c=r.x-a.x),r.y+n+l.y>h.y&&(u=r.y+n-h.y+l.y),r.y-u-a.y<0&&(u=r.y-a.y),(c||u)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([c,u]))}},_getAnchor:function(){return I(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ge.mergeOptions({closePopupOnClick:!0}),Ge.include({openPopup:function(t,e,n){return this._initOverlay(ni,t,e,n).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),Cn.include({bindPopup:function(t,e){return this._popup=this._initOverlay(ni,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Tn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){ze(t);var e=t.layer||t.target;this._popup._source!==e||e instanceof On?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ii=ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ei.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ei.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ei.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=re("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+r(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,s=this._container,r=i.latLngToContainerPoint(i.getCenter()),o=i.layerPointToContainerPoint(t),a=this.options.direction,l=s.offsetWidth,h=s.offsetHeight,c=I(this.options.offset),u=this._getAnchor();"top"===a?(e=l/2,n=h):"bottom"===a?(e=l/2,n=0):"center"===a?(e=l/2,n=h/2):"right"===a?(e=0,n=h/2):"left"===a?(e=l,n=h/2):o.x<r.x?(a="right",e=0,n=h/2):(a="left",e=l+2*(c.x+u.x),n=h/2),t=t.subtract(I(e,n,!0)).add(c).add(u),de(s,"leaflet-tooltip-right"),de(s,"leaflet-tooltip-left"),de(s,"leaflet-tooltip-top"),de(s,"leaflet-tooltip-bottom"),ue(s,"leaflet-tooltip-"+a),ve(s,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return I(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ge.include({openTooltip:function(t,e,n){return this._initOverlay(ii,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Cn.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ii,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Tn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&(Ce(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Ce(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)})}else this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var si=Ln.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ae(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=I(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Ln.Default=Rn;var ri=Cn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ot.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),oe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(he(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof T?t:new T(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),s=0,r=n.length;s<r;s++)e=n[s].style.zIndex,n[s]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ot.ielt9){me(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var s=this._tiles[i];if(s.current&&s.loaded){var r=Math.min(1,(t-s.loaded)/200);me(s.el,r),r<1?e=!0:(s.active?n=!0:this._onOpaqueTile(s),s.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(k(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(oe(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],s=this._map;return i||((i=this._levels[t]={}).el=re("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=s.project(s.unproject(s.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,s.getCenter(),s.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)oe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var s=Math.floor(t/2),r=Math.floor(e/2),o=n-1,a=new T(+s,+r);a.z=+o;var l=this._tileCoordsToKey(a),h=this._tiles[l];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),o>i&&this._retainParent(s,r,o,i))},_retainChildren:function(t,e,n,i){for(var s=2*t;s<2*t+2;s++)for(var r=2*e;r<2*e+2;r++){var o=new T(s,r);o.z=n+1;var a=this._tileCoordsToKey(o),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(s,r,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var s=Math.round(e);s=void 0!==this.options.maxZoom&&s>this.options.maxZoom||void 0!==this.options.minZoom&&s<this.options.minZoom?void 0:this._clampZoom(s);var r=this.options.updateWhenZooming&&s!==this._tileZoom;i&&!r||(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==s&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),s=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();Ot.any3d?ye(t.el,s,i):ve(t.el,s)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,s=this._map.getPixelWorldBounds(this._tileZoom);s&&(this._globalTileRange=this._pxBoundsToTileRange(s)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),s=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*i);return new D(s.subtract(r),s.add(r))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),s=this._pxBoundsToTileRange(i),r=s.getCenter(),o=[],a=this.options.keepBuffer,l=new D(s.getBottomLeft().subtract([a,-a]),s.getTopRight().add([a,-a]));if(!(isFinite(s.min.x)&&isFinite(s.min.y)&&isFinite(s.max.x)&&isFinite(s.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var c=this._tiles[h].coords;c.z===this._tileZoom&&l.contains(new T(c.x,c.y))||(this._tiles[h].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var u=s.min.y;u<=s.max.y;u++)for(var d=s.min.x;d<=s.max.x;d++){var p=new T(d,u);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:o.push(p)}}if(o.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<o.length;d++)this._addTile(o[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return F(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),s=i.add(n);return[e.unproject(i,t.z),e.unproject(s,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new N(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new T(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(oe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ue(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Ot.ielt9&&this.options.opacity<1&&me(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),s=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&A(i(this._tileReady,this,t,null,r)),ve(r,n),this._tiles[s]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var s=this._tileCoordsToKey(t);(n=this._tiles[s])&&(n.loaded=+new Date,this._map._fadeAnimated?(me(n.el,0),k(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(ue(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ot.ielt9||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new T(this._wrapX?a(t.x,this._wrapX):t.x,this._wrapY?a(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new D(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var oi=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&Ot.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ce(n,"load",i(this._tileOnLoad,this,e,n)),Ce(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:Ot.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return m(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Ot.ielt9?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,!e.complete)){e.src=v;var n=this._tiles[t].coords;oe(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",v),ri.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==v))return ri.prototype._tileReady.call(this,t,e,n)}});function ai(t,e){return new oi(t,e)}var li=oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var s in n)s in this.options||(i[s]=n[s]);var r=(n=d(this,n)).detectRetina&&Ot.retina?2:1,o=this.getTileSize();i.width=o.x*r,i.height=o.y*r,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,oi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=O(n.project(e[0]),n.project(e[1])),s=i.min,r=i.max,o=(this._wmsVersion>=1.3&&this._crs===Pn?[s.y,s.x,r.y,r.x]:[s.x,s.y,r.x,r.y]).join(","),a=oi.prototype.getTileUrl.call(this,t);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});oi.WMS=li,ai.wms=function(t,e){return new li(t,e)};var hi=Cn.extend({options:{padding:.1},initialize:function(t){d(this,t),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),r=i.multiplyBy(-n).add(s).subtract(this._map._getNewPixelOrigin(t,e));Ot.any3d?ye(this._container,r,n):ve(this._container,r)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new D(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ci=hi.extend({options:{tolerance:0},getEvents:function(){var t=hi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){hi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ce(t,"mousemove",this._onMouseMove,this),Ce(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ce(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,oe(this._container),Te(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){hi.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=Ot.retina?2:1;ve(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Ot.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){hi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[r(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[r(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),s=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;s.push(e)}t.options._dashArray=s}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,s,r,o=t._parts,a=o.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(i=0,s=o[n].length;i<s;i++)r=o[n][i],l[i?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),s=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==s&&(n.save(),n.scale(1,s)),n.beginPath(),n.arc(e.x,e.y/s,i,0,2*Math.PI,!1),1!==s&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),s=this._drawFirst;s;s=s.next)(e=s.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(n=e);this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,s,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(s=n);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(ue(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ui(t){return Ot.canvas?new ci(t):null}var di=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(iG){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),pi={_initContainer:function(){this._container=re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(hi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=di("shape");ue(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=di("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;oe(e),t.removeInteractiveTarget(e),delete this._layers[r(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,s=t._container;s.stroked=!!i.stroke,s.filled=!!i.fill,i.stroke?(e||(e=t._stroke=di("stroke")),s.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=g(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(s.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=di("fill")),s.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(s.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){he(t._container)}},fi=Ot.vml?di:X,mi=hi.extend({_initContainer:function(){this._container=fi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){oe(this._container),Te(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){hi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ve(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=fi("path");t.options.className&&ue(e,t.options.className),t.options.interactive&&ue(e,"leaflet-interactive"),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){oe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[r(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Y(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",s=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,s)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){he(t._path)}});function gi(t){return Ot.svg||Ot.vml?new mi(t):null}Ot.vml&&mi.include(pi),Ge.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ui(t)||gi(t)}});var yi=zn.extend({initialize:function(t,e){zn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=F(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});mi.create=fi,mi.pointsToPath=Y,Wn.geometryToLayer=jn,Wn.coordsToLatLng=Hn,Wn.coordsToLatLngs=$n,Wn.latLngToCoords=Vn,Wn.latLngsToCoords=qn,Wn.getFeature=Gn,Wn.asFeature=Zn,Ge.mergeOptions({boxZoom:!0});var vi=tn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Kt(),we(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ce(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=re("div","leaflet-zoom-box",this._container),ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new D(this._point,this._startPoint),n=e.getSize();ve(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(oe(this._box),de(this._container,"leaflet-crosshair")),Xt(),xe(),Te(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new N(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ge.addInitHook("addHandler","boxZoom",vi),Ge.mergeOptions({doubleClickZoom:!0});var _i=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,s=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(s):e.setZoomAround(t.containerPoint,s)}});Ge.addInitHook("addHandler","doubleClickZoom",_i),Ge.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var bi=tn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new sn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=F(this._map.options.maxBounds);this._offsetLimit=O(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,s=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,o=Math.abs(s+n)<Math.abs(r+n)?s:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,o=n.easeLinearity,a=s.multiplyBy(o/r),l=a.distanceTo([0,0]),h=Math.min(n.inertiaMaxSpeed,l),c=a.multiplyBy(h/l),u=h/(n.inertiaDeceleration*o),d=c.multiplyBy(-u/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),A(function(){e.panBy(d,{duration:u,easeLinearity:o,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Ge.addInitHook("addHandler","dragging",bi),Ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wi=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ce(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Te(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},s=this.keyCodes;for(e=0,n=s.left.length;e<n;e++)i[s.left[e]]=[-1*t,0];for(e=0,n=s.right.length;e<n;e++)i[s.right[e]]=[t,0];for(e=0,n=s.down.length;e<n;e++)i[s.down[e]]=[0,t];for(e=0,n=s.up.length;e<n;e++)i[s.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},s=this.keyCodes;for(e=0,n=s.zoomIn.length;e<n;e++)i[s.zoomIn[e]]=t;for(e=0,n=s.zoomOut.length;e<n;e++)i[s.zoomOut[e]]=-t},_addHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(e=this._panKeys[n],t.shiftKey&&(e=I(e).multiplyBy(3)),i.options.maxBounds&&(e=i._limitOffset(I(e),i.options.maxBounds)),i.options.worldCopyJump){var s=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(e)));i.panTo(s)}else i.panBy(e)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}ze(t)}}});Ge.addInitHook("addHandler","keyboard",wi),Ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xi=tn.extend({addHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=He(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),s),ze(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),s=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(s/n)*n:s,o=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}});Ge.addInitHook("addHandler","scrollWheelZoom",xi);Ge.mergeOptions({tapHold:Ot.touchNative&&Ot.safari&&Ot.mobile,tapTolerance:15});var Si=tn.extend({addHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new T(e.clientX,e.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(Ce(document,"touchend",Be),Ce(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),600),Ce(document,"touchend touchcancel contextmenu",this._cancel,this),Ce(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Te(document,"touchend",Be),Te(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Te(document,"touchend touchcancel contextmenu",this._cancel,this),Te(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new T(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});Ge.addInitHook("addHandler","tapHold",Si),Ge.mergeOptions({touchZoom:Ot.touch,bounceAtZoomLimits:!0});var Ai=tn.extend({addHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend touchcancel",this._onTouchEnd,this),Be(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(s)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var o=n._add(s)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var a=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=A(a,this,!0),Be(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,k(this._animRequest),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ge.addInitHook("addHandler","touchZoom",Ai),Ge.BoxZoom=vi,Ge.DoubleClickZoom=_i,Ge.Drag=bi,Ge.Keyboard=wi,Ge.ScrollWheelZoom=xi,Ge.TapHold=Si,Ge.TouchZoom=Ai,t.Bounds=D,t.Browser=Ot,t.CRS=j,t.Canvas=ci,t.Circle=Fn,t.CircleMarker=Nn,t.Class=E,t.Control=Ze,t.DivIcon=si,t.DivOverlay=ei,t.DomEvent=Ve,t.DomUtil=Ee,t.Draggable=sn,t.Evented=M,t.FeatureGroup=Tn,t.GeoJSON=Wn,t.GridLayer=ri,t.Handler=tn,t.Icon=Ln,t.ImageOverlay=Qn,t.LatLng=B,t.LatLngBounds=N,t.Layer=Cn,t.LayerGroup=Mn,t.LineUtil=wn,t.Map=Ge,t.Marker=Dn,t.Mixin=en,t.Path=On,t.Point=T,t.PolyUtil=hn,t.Polygon=zn,t.Polyline=Bn,t.Popup=ni,t.PosAnimation=qe,t.Projection=An,t.Rectangle=yi,t.Renderer=hi,t.SVG=mi,t.SVGOverlay=ti,t.TileLayer=oi,t.Tooltip=ii,t.Transformation=V,t.Util=P,t.VideoOverlay=Jn,t.bind=i,t.bounds=O,t.canvas=ui,t.circle=function(t,e,n){return new Fn(t,e,n)},t.circleMarker=function(t,e){return new Nn(t,e)},t.control=Ke,t.divIcon=function(t){return new si(t)},t.extend=e,t.featureGroup=function(t,e){return new Tn(t,e)},t.geoJSON=Xn,t.geoJson=Yn,t.gridLayer=function(t){return new ri(t)},t.icon=function(t){return new Ln(t)},t.imageOverlay=function(t,e,n){return new Qn(t,e,n)},t.latLng=z,t.latLngBounds=F,t.layerGroup=function(t,e){return new Mn(t,e)},t.map=function(t,e){return new Ge(t,e)},t.marker=function(t,e){return new Dn(t,e)},t.point=I,t.polygon=function(t,e){return new zn(t,e)},t.polyline=function(t,e){return new Bn(t,e)},t.popup=function(t,e){return new ni(t,e)},t.rectangle=function(t,e){return new yi(t,e)},t.setOptions=d,t.stamp=r,t.svg=gi,t.svgOverlay=function(t,e,n){return new ti(t,e,n)},t.tileLayer=ai,t.tooltip=function(t,e){return new ii(t,e)},t.transformation=q,t.version="1.9.4",t.videoOverlay=function(t,e,n){return new Jn(t,e,n)};var ki=window.L;t.noConflict=function(){return window.L=ki,this},window.L=t}(e$);var n$=e$;const i$=Ku(n$);function s$(t,e){const n=Od.useRef(e);Od.useEffect(function(){e!==n.current&&null!=t.attributionControl&&(null!=n.current&&t.attributionControl.removeAttribution(n.current),null!=e&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function r$(t,e){return Object.freeze({...t,...e})}const o$=Od.createContext(null),a$=o$.Provider;function l$(){const t=Od.useContext(o$);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function h$(t){function e(e,n){const{instance:i,context:s}=t(e).current;return Od.useImperativeHandle(n,()=>i),null==e.children?null:Nd.createElement(a$,{value:s},e.children)}return Od.forwardRef(e)}function c$(t,e){const n=Od.useRef();Od.useEffect(function(){return null!=e&&t.instance.on(e),n.current=e,function(){null!=n.current&&t.instance.off(n.current),n.current=null}},[t,e])}function u$(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function d$(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function p$(t,e){return null==e?function(e,n){const i=Od.useRef();return i.current||(i.current=t(e,n)),i}:function(n,i){const s=Od.useRef();s.current||(s.current=t(n,i));const r=Od.useRef(n),{instance:o}=s.current;return Od.useEffect(function(){r.current!==n&&(e(o,n,r.current),r.current=n)},[o,n,i]),s}}function f$(t,e){Od.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function m$(t){return function(e){const n=l$(),i=t(u$(e,n),n);return s$(n.map,e.attribution),c$(i.current,e.eventHandlers),f$(i.current,n),i}}function g$(){return l$().map}function y$(){return y$=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},y$.apply(this,arguments)}function v$({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:r,placeholder:o,style:a,whenReady:l,zoom:h,...c},u){const[d]=Od.useState({className:s,id:r,style:a}),[p,f]=Od.useState(null);Od.useImperativeHandle(u,()=>p?.map??null,[p]);const m=Od.useCallback(i=>{if(null!==i&&null===p){const s=new n$.Map(i,c);null!=n&&null!=h?s.setView(n,h):null!=t&&s.fitBounds(t,e),null!=l&&s.whenReady(l),f(function(t){return Object.freeze({__version:1,map:t})}(s))}},[]);Od.useEffect(()=>()=>{p?.map.remove()},[p]);const g=p?Nd.createElement(a$,{value:p},i):o??null;return Nd.createElement("div",y$({},d,{ref:m}),g)}const _$=Od.forwardRef(v$),b$=h$(m$(p$(function({position:t,...e},n){const i=new n$.Marker(t,e);return d$(i,r$(n,{overlayContainer:i}))},function(t,e,n){e.position!==n.position&&t.setLatLng(e.position),null!=e.icon&&e.icon!==n.icon&&t.setIcon(e.icon),null!=e.zIndexOffset&&e.zIndexOffset!==n.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),null!=e.opacity&&e.opacity!==n.opacity&&t.setOpacity(e.opacity),null!=t.dragging&&e.draggable!==n.draggable&&(!0===e.draggable?t.dragging.enable():t.dragging.disable())}))),w$=h$((A$=p$(function({positions:t,...e},n){const i=new n$.Polyline(t,e);return d$(i,r$(n,{overlayContainer:i}))},function(t,e,n){e.positions!==n.positions&&t.setLatLngs(e.positions)}),function(t){const e=l$(),n=A$(u$(t,e),e);return c$(n.current,t.eventHandlers),f$(n.current,e),function(t,e){const n=Od.useRef();Od.useEffect(function(){if(e.pathOptions!==n.current){const i=e.pathOptions??{};t.instance.setStyle(i),n.current=i}},[t,e])}(n.current,t),n})),x$=function(){const t=function(t,e){return function(n,i){const s=l$(),r=t(u$(n,s),s);return s$(s.map,n.attribution),c$(r.current,n.eventHandlers),e(r.current,s,n,i),r}}(p$(function(t,e){return d$(new n$.Popup(t,e.overlayContainer),e)}),function(t,e,{position:n},i){Od.useEffect(function(){const{instance:s}=t;function r(t){t.popup===s&&(s.update(),i(!0))}function o(t){t.popup===s&&i(!1)}return e.map.on({popupopen:r,popupclose:o}),null==e.overlayContainer?(null!=n&&s.setLatLng(n),s.openOn(e.map)):e.overlayContainer.bindPopup(s),function(){e.map.off({popupopen:r,popupclose:o}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(s)}},[t,e,i,n])});return function(t){function e(e,n){const[i,s]=Od.useState(!1),{instance:r}=t(e,s).current;Od.useImperativeHandle(n,()=>r),Od.useEffect(function(){i&&r.update()},[r,i,e.children]);const o=r._contentNode;return o?ET.createPortal(e.children,o):null}return Od.forwardRef(e)}(t)}(),S$=function(t){function e(e,n){const{instance:i}=t(e).current;return Od.useImperativeHandle(n,()=>i),null}return Od.forwardRef(e)}(m$(p$(function({url:t,...e},n){return d$(new n$.TileLayer(t,u$(e,n)),n)},function(t,e,n){!function(t,e,n){const{opacity:i,zIndex:s}=e;null!=i&&i!==n.opacity&&t.setOpacity(i),null!=s&&s!==n.zIndex&&t.setZIndex(s)}(t,e,n);const{url:i}=e;null!=i&&i!==n.url&&t.setUrl(i)})));var A$,k$={};!function(t){class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class n extends e{constructor(t,e,n){super(t,n),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),n=this.render.convertToGlobal(this.state.position),i=this.render.getRect().pageWidth,s=this.render.getRect().height;e.save(),e.translate(n.x,n.y),e.beginPath();for(let r of this.state.area)null!==r&&(r=this.render.convertToGlobal(r),e.lineTo(r.x-n.x,r.y-n.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,i,s):this.drawLoader(e,{x:0,y:0},i,s),e.restore()}simpleDraw(t){const e=this.render.getRect(),n=this.render.getContext(),i=e.pageWidth,s=e.height,r=1===t?e.left+e.pageWidth:e.left,o=e.top;this.isLoad?n.drawImage(this.image,r,o,i,s):this.drawLoader(n,{x:r,y:o},i,s)}drawLoader(t,e,n,i){t.beginPath(),t.strokeStyle="rgb(200, 200, 200)",t.fillStyle="rgb(255, 255, 255)",t.lineWidth=1,t.rect(e.x+1,e.y+1,n-1,i-1),t.stroke(),t.fill();const s={x:e.x+n/2,y:e.y+i/2};t.beginPath(),t.lineWidth=10,t.arc(s.x,s.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class i{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let e=0;e<this.pages.length;e++)this.portraitSpread.push([e]);let t=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity("hard"))}getSpread(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let n=0;n<e.length;n++)if(t===e[n][0]||t===e[n][1])return n;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error("Invalid page number")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const n=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===n.length||0===t?this.pages[n[0]]:this.pages[n[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const n=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===n.length?this.pages[n[0]]:0===t?this.pages[n[1]]:this.pages[n[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):"landscape"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class s extends i{constructor(t,e,n){super(t,e),this.imagesHref=n}load(){for(const t of this.imagesHref){const e=new n(this.render,t,"soft");e.load(),this.pages.push(e)}this.createSpread()}}class r{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return r.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const n=t[0].y-t[1].y,i=e[0].y-e[1].y,s=t[1].x-t[0].x,r=e[1].x-e[0].x;return Math.acos((n*i+s*r)/(Math.sqrt(n*n+s*s)*Math.sqrt(i*i+r*r)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,n){return{x:t.x*Math.cos(n)+t.y*Math.sin(n)+e.x,y:t.y*Math.cos(n)-t.x*Math.sin(n)+e.y}}static LimitPointToCircle(t,e,n){if(r.GetDistanceBetweenTwoPoint(t,n)<=e)return n;const i=t.x,s=t.y,o=n.x,a=n.y;let l=Math.sqrt(Math.pow(e,2)*Math.pow(i-o,2)/(Math.pow(i-o,2)+Math.pow(s-a,2)))+i;n.x<0&&(l*=-1);let h=(l-i)*(s-a)/(i-o)+s;return i-o+s===0&&(h=e),{x:l,y:h}}static GetIntersectBetweenTwoSegment(t,e,n){return r.PointInRect(t,r.GetIntersectBeetwenTwoLine(e,n))}static GetIntersectBeetwenTwoLine(t,e){const n=t[0].y-t[1].y,i=e[0].y-e[1].y,s=t[1].x-t[0].x,r=e[1].x-e[0].x,o=t[0].x*t[1].y-t[1].x*t[0].y,a=e[0].x*e[1].y-e[1].x*e[0].y,l=n*a-i*o,h=s*a-r*o,c=-(o*r-a*s)/(n*r-i*s),u=-(n*a-i*o)/(n*r-i*s);if(isFinite(c)&&isFinite(u))return{x:c,y:u};if(Math.abs(l-h)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(t,e){const n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y),s=Math.max(n,i),r=[t];function o(t,e,n,i,s){return e>t?t+s*(n/i):e<t?t-s*(n/i):t}for(let a=1;a<=s;a+=1)r.push({x:o(t.x,e.x,n,s,a),y:o(t.y,e.y,i,s,a)});return r}}class o extends e{constructor(t,e,n){super(t,n),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add("stf__item"),this.element.classList.add("--"+n)}newTemporaryCopy(){return"hard"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new o(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,n=this.render.convertToGlobal(this.state.position),i=this.render.getRect().pageWidth,s=this.render.getRect().height;this.element.classList.remove("--simple");const r=`\n            display: block;\n            z-index: ${this.element.style.zIndex};\n            left: 0;\n            top: 0;\n            width: ${i}px;\n            height: ${s}px;\n        `;"hard"===e?this.drawHard(r):this.drawSoft(n,r)}drawHard(t=""){const e=this.render.getRect().left+this.render.getRect().width/2,n=this.state.hardDrawingAngle,i=t+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \n                   transform: translate3d(0, 0, 0) rotateY(${n}deg);`:`transform-origin: 0 0; \n                   transform: translate3d(${e}px, 0, 0) rotateY(${n}deg);`);this.element.style.cssText=i}drawSoft(t,e=""){let n="polygon( ";for(const s of this.state.area)if(null!==s){let t=1===this.render.getDirection()?{x:-s.x+this.state.position.x,y:s.y-this.state.position.y}:{x:s.x-this.state.position.x,y:s.y-this.state.position.y};t=r.GetRotatedPoint(t,{x:0,y:0},this.state.angle),n+=t.x+"px "+t.y+"px, "}n=n.slice(0,-2),n+=")";const i=e+`transform-origin: 0 0; clip-path: ${n}; -webkit-clip-path: ${n};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=i}simpleDraw(t){const e=this.render.getRect(),n=e.pageWidth,i=e.height,s=1===t?e.left+e.pageWidth:e.left,r=e.top;this.element.classList.add("--simple"),this.element.style.cssText=`\n            position: absolute; \n            display: block; \n            height: ${i}px; \n            left: ${s}px; \n            top: ${r}px; \n            width: ${n}px; \n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove("--left","--right"),this.element.classList.add(1===t?"--right":"--left")}setDrawingDensity(t){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+t),super.setDrawingDensity(t)}}class a extends i{constructor(t,e,n,i){super(t,e),this.element=n,this.pagesElement=i}load(){for(const t of this.pagesElement){const e=new o(this.render,t,"hard"===t.dataset.density?"hard":"soft");e.load(),this.pages.push(e)}this.createSpread()}}class l{constructor(t,e,n,i){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(n,10),this.pageHeight=parseInt(i,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(e){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||"bottom"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),"top"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?r.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):"top"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=r.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e="top"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error("Point is too small");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,n="bottom"===this.corner?this.pageHeight-t.y:t.y;let i=2*Math.acos(e/Math.sqrt(n*n+e*e));n<0&&(i=-i);const s=Math.PI-i;if(!isFinite(i)||s>=0&&s<.003)throw new Error("The G point is too small");return"bottom"===this.corner&&(i=-i),i}getPageRect(t){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};"top"===this.corner?(this.topIntersectPoint=r.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=r.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=r.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=r.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=r.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=r.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,n){let i=t;const s=r.LimitPointToCircle(e,this.pageWidth,i);i!==s&&(i=s,this.updateAngleAndGeometry(i));const o=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let a=this.rect.bottomRight,l=this.rect.topLeft;if("bottom"===this.corner&&(a=this.rect.topRight,l=this.rect.bottomLeft),a.x<=0){const t=r.LimitPointToCircle(n,o,l);t!==i&&(i=t,this.updateAngleAndGeometry(i))}return i}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class h{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=t,this.app=e}fold(t){this.setState("user_fold"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState("flipping");const n=e.height/10,i="bottom"===this.calc.getCorner()?e.height-n:n,s="bottom"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-n,y:i}),this.animateFlippingTo({x:e.pageWidth-n,y:i},{x:-e.pageWidth,y:s},!0)}start(t){this.reset();const e=this.render.convertToBook(t),n=this.getBoundsRect(),i=this.getDirectionByPoint(e),s=e.y>=n.height/2?"bottom":"top";if(!this.checkDirection(i))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(i),this.bottomPage=this.app.getPageCollection().getBottomPage(i),"landscape"===this.render.getOrientation())if(1===i){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),t.setDrawingDensity("hard"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),t.setDrawingDensity("hard"))}return this.render.setDirection(i),this.calc=new l(i,s,n.pageWidth.toString(10),n.height.toString(10)),!0}catch(r){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const n=this.app.getPageCollection().getCurrentSpreadIndex(),i=this.app.getPageCollection().getSpreadIndexByPage(t);try{i>n&&(this.app.getPageCollection().setCurrentSpreadIndex(i-1),this.flipNext(e)),i<n&&(this.app.getPageCollection().setCurrentSpreadIndex(i+1),this.flipPrev(e))}catch(s){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:"top"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),n="bottom"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:n},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:n},!1)}showCorner(t){if(!this.checkState("read","fold_corner"))return;const e=this.getBoundsRect(),n=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState("fold_corner"),this.calc.calc({x:n-1,y:1});const i=50,s="bottom"===this.calc.getCorner()?e.height-1:1,r="bottom"===this.calc.getCorner()?e.height-i:i;this.animateFlippingTo({x:n-1,y:s},{x:n-i,y:r},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,n,i=!0){const s=r.GetCordsFromTwoPoint(t,e),o=[];for(const r of s)o.push(()=>this.do(r));const a=this.getAnimationDuration(s.length);this.render.startAnimation(o,a,()=>{this.calc&&(n&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),i&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),n=e.pageWidth,i=Math.sqrt(Math.pow(n,2)+Math.pow(e.height,2))/5,s=this.render.convertToBook(t);return s.x>0&&s.y>0&&s.x<e.width&&s.y<e.height&&(s.x<i||s.x>e.width-i)&&(s.y<i||s.y>e.height-i)}}class c{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const n=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==n.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,n){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:n,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t="landscape";const e=this.getBlockWidth(),n=e/2,i=this.getBlockHeight()/2,s=this.setting.width/this.setting.height;let r=this.setting.width,o=this.setting.height,a=n-r;return"stretch"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t="portrait"),r="portrait"===t?this.getBlockWidth():this.getBlockWidth()/2,r>this.setting.maxWidth&&(r=this.setting.maxWidth),o=r/s,o>this.getBlockHeight()&&(o=this.getBlockHeight(),r=o*s),a="portrait"===t?n-r/2-r:n-r):e<2*r&&this.app.getSettings().usePortrait&&(t="portrait",a=n-r/2-r),this.boundsRect={left:a,top:i-o/2,width:2*r,height:o,pageWidth:r},t}setShadowData(t,e,n,i){if(!this.app.getSettings().drawShadow)return;const s=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*n/100,opacity:(100-n)*s/100/100,direction:i,progress:2*n}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const n=this.getRect();return{x:0===e?t.x-n.left-n.width/2:n.width/2-t.x+n.left,y:t.y-n.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const n=this.getRect();return{x:0===e?t.x+n.left+n.width/2:n.width/2-t.x+n.left,y:t.y+n.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class u extends c{constructor(t,e,n){super(t,e),this.canvas=n,this.ctx=n.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();"portrait"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const n={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(n.x,n.y);const i=this.ctx.createLinearGradient(0,0,e,0);i.addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),i.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),i.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),i.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),i.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const n=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),n.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),n=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(n.topLeft.x,n.topLeft.y),this.ctx.lineTo(n.topRight.x,n.topRight.y),this.ctx.lineTo(n.bottomRight.x,n.bottomRight.y),this.ctx.lineTo(n.bottomLeft.x,n.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=3*this.shadow.width/4,s=this.ctx.createLinearGradient(0,0,i,0);0===this.shadow.direction?(this.ctx.translate(-i,-100),s.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),s.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),s.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),s.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),s.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),s.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),s.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),s.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,i,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class d{constructor(t,e,n){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],n=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:n,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(n)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],n=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-n.x)>10||"read"!==this.app.getState())&&t.cancelable&&this.app.userMove(n,!0),"read"!==this.app.getState()&&t.preventDefault()):this.app.userMove(n,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],n=this.getMousePos(e.clientX,e.clientY);let i=!1;if(null!==this.touchPoint){const t=n.x-this.touchPoint.point.x,e=Math.abs(n.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),i=!0),this.touchPoint=null}this.app.userStop(n,i)}},this.parentElement=t,t.classList.add("stf__parent"),t.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=t.querySelector(".stf__wrapper"),this.app=e;const i=this.app.getSettings().usePortrait?1:2;t.style.minWidth=n.minWidth*i+"px",t.style.minHeight=n.minHeight+"px","fixed"===n.size&&(t.style.minWidth=n.width*i+"px",t.style.minHeight=n.height+"px"),n.autoSize&&(t.style.width="100%",t.style.maxWidth=2*n.maxWidth+"px"),t.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=n.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove("--portrait","--landscape"),"portrait"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(t,e){const n=this.distElement.getBoundingClientRect();return{x:t-n.left,y:e-n.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||!["a","button"].includes(t.tagName.toLowerCase())}}class p extends d{constructor(t,e,n,i){super(t,e,n),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=t.querySelector(".stf__block"),this.items=i;for(const s of i)this.distElement.appendChild(s);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML="";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class f extends d{constructor(t,e,n){super(t,e,n),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=t.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue("width"),10),n=parseInt(t.getPropertyValue("height"),10);this.canvas.width=e,this.canvas.height=n}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class m extends c{constructor(t,e,n){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=n,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>'),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let n=(100-e)*(2.5*t.pageWidth)/100+20;n>t.pageWidth&&(n=t.pageWidth);let i=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\n            width: ${n}px;\n            height: ${t.height}px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ${t.left+t.width/2}px;\n            transform-origin: 0 0;\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=i}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let n=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\n            width: ${e}px;\n            height: ${t.height}px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\n            left: ${t.left+t.width/2}px;\n            transform-origin: 0 0;\n        `;n+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=n}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,n=0===this.getDirection()?e:0,i=0===this.getDirection()?"to left":"to right",s=this.convertToGlobal(this.shadow.pos),o=this.shadow.angle+3*Math.PI/2,a=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let l="polygon( ";for(const c of a){let t=1===this.getDirection()?{x:-c.x+this.shadow.pos.x,y:c.y-this.shadow.pos.y}:{x:c.x-this.shadow.pos.x,y:c.y-this.shadow.pos.y};t=r.GetRotatedPoint(t,{x:n,y:100},o),l+=t.x+"px "+t.y+"px, "}l=l.slice(0,-2),l+=")";const h=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\n            width: ${e}px;\n            height: ${2*t.height}px;\n            background: linear-gradient(${i},\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ${n}px 100px;\n            transform: translate3d(${s.x-n}px, ${s.y-100}px, 0) rotate(${o}rad);\n            clip-path: ${l};\n            -webkit-clip-path: ${l};\n        `;this.innerShadow.style.cssText=h}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),n=this.shadow.angle+3*Math.PI/2,i=1===this.getDirection()?this.shadow.width:0,s=0===this.getDirection()?"to right":"to left",o=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let a="polygon( ";for(const h of o)if(null!==h){let t=1===this.getDirection()?{x:-h.x+this.shadow.pos.x,y:h.y-this.shadow.pos.y}:{x:h.x-this.shadow.pos.x,y:h.y-this.shadow.pos.y};t=r.GetRotatedPoint(t,{x:i,y:100},n),a+=t.x+"px "+t.y+"px, "}a=a.slice(0,-2),a+=")";const l=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\n            width: ${this.shadow.width}px;\n            height: ${2*t.height}px;\n            background: linear-gradient(${s}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\n            transform-origin: ${i}px 100px;\n            transform: translate3d(${e.x-i}px, ${e.y-100}px, 0) rotate(${n}rad);\n            clip-path: ${a};\n            -webkit-clip-path: ${a};\n        `;this.outerShadow.style.cssText=l}drawLeftPage(){"portrait"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;"portrait"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&("soft"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText="display: none"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class g{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),"stretch"!==e.size&&"fixed"!==e.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(e.width<=0||e.height<=0)throw new Error("Invalid width or height");if(e.flippingTime<=0)throw new Error("Invalid flipping time");return"stretch"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}"),t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,n=null){if(this.events.has(t))for(const i of this.events.get(t))i({data:n,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new g).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new f(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new u(this,this.setting,e),this.flipController=new h(this.render,this),this.pages=new s(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new p(this.block,this,this.setting,t),this.render=new m(this,this.setting,this.ui.getDistElement()),this.flipController=new h(this.render,this),this.pages=new a(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new s(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new a(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t="top"){this.flipController.flipNext(t)}flipPrev(t="top"){this.flipController.flipPrev(t)}flip(t,e="top"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger("changeState",this,t)}updatePageIndex(t){this.trigger("flip",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger("changeOrientation",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&r.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,"__esModule",{value:!0})}(k$);var P$=k$;function E$(t,e){return(E$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function C$(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,E$(t,e)}function M$(){return M$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},M$.apply(null,arguments)}function T$(t){return(T$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L$(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=T$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if("object"!=T$(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==T$(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function I$(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R$(Object(n),!0).forEach(function(e){L$(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R$(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function D$(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var O$="function"==typeof Symbol&&Symbol.observable||"@@observable",N$=function(){return Math.random().toString(36).substring(7).split("").join(".")},F$={INIT:"@@redux/INIT"+N$(),REPLACE:"@@redux/REPLACE"+N$()};function B$(t,e,n){var i;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(D$(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(D$(1));return n(B$)(t,e)}if("function"!=typeof t)throw new Error(D$(2));var s=t,r=e,o=[],a=o,l=!1;function h(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(D$(3));return r}function u(t){if("function"!=typeof t)throw new Error(D$(4));if(l)throw new Error(D$(5));var e=!0;return h(),a.push(t),function(){if(e){if(l)throw new Error(D$(6));e=!1,h();var n=a.indexOf(t);a.splice(n,1),o=null}}}function d(t){if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw new Error(D$(7));if(void 0===t.type)throw new Error(D$(8));if(l)throw new Error(D$(9));try{l=!0,r=s(r,t)}finally{l=!1}for(var e=o=a,n=0;n<e.length;n++)(0,e[n])();return t}return d({type:F$.INIT}),(i={dispatch:d,subscribe:u,getState:c,replaceReducer:function(t){if("function"!=typeof t)throw new Error(D$(10));s=t,d({type:F$.REPLACE})}})[O$]=function(){var t,e=u;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(D$(11));function n(){t.next&&t.next(c())}return n(),{unsubscribe:e(n)}}})[O$]=function(){return this},t},i}function z$(t,e){return function(){return e(t.apply(this,arguments))}}function W$(t,e){if("function"==typeof t)return z$(t,e);if("object"!=typeof t||null===t)throw new Error(D$(16));var n={};for(var i in t){var s=t[i];"function"==typeof s&&(n[i]=z$(s,e))}return n}function j$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function U$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),i=function(){throw new Error(D$(15))},s={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},r=e.map(function(t){return t(s)});return i=j$.apply(void 0,r)(n.dispatch),I$(I$({},n),{},{dispatch:i})}}}var H$=Nd.createContext(null),$$=function(t){t()};var V$={notify:function(){},get:function(){return[]}};function q$(t,e){var n,i=V$;function s(){o.onStateChange&&o.onStateChange()}function r(){var r,o,a;n||(n=e?e.addNestedSub(s):t.subscribe(s),r=$$,o=null,a=null,i={clear:function(){o=null,a=null},notify:function(){r(function(){for(var t=o;t;)t.callback(),t=t.next})},get:function(){for(var t=[],e=o;e;)t.push(e),e=e.next;return t},subscribe:function(t){var e=!0,n=a={callback:t,next:null,prev:a};return n.prev?n.prev.next=n:o=n,function(){e&&null!==o&&(e=!1,n.next?n.next.prev=n.prev:a=n.prev,n.prev?n.prev.next=n.next:o=n.next)}}})}var o={addNestedSub:function(t){return r(),i.subscribe(t)},notifyNestedSubs:function(){i.notify()},handleChangeWrapper:s,isSubscribed:function(){return Boolean(n)},trySubscribe:r,tryUnsubscribe:function(){n&&(n(),n=void 0,i.clear(),i=V$)},getListeners:function(){return i}};return o}var G$="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Od.useLayoutEffect:Od.useEffect;function Z$(t){var e=t.store,n=t.context,i=t.children,s=Od.useMemo(function(){var t=q$(e);return{store:e,subscription:t}},[e]),r=Od.useMemo(function(){return e.getState()},[e]);G$(function(){var t=s.subscription;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),r!==e.getState()&&t.notifyNestedSubs(),function(){t.tryUnsubscribe(),t.onStateChange=null}},[s,r]);var o=n||H$;return Nd.createElement(o.Provider,{value:s},i)}function K$(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}var X$={exports:{}},Y$={},Q$="function"==typeof Symbol&&Symbol.for,J$=Q$?Symbol.for("react.element"):60103,tV=Q$?Symbol.for("react.portal"):60106,eV=Q$?Symbol.for("react.fragment"):60107,nV=Q$?Symbol.for("react.strict_mode"):60108,iV=Q$?Symbol.for("react.profiler"):60114,sV=Q$?Symbol.for("react.provider"):60109,rV=Q$?Symbol.for("react.context"):60110,oV=Q$?Symbol.for("react.async_mode"):60111,aV=Q$?Symbol.for("react.concurrent_mode"):60111,lV=Q$?Symbol.for("react.forward_ref"):60112,hV=Q$?Symbol.for("react.suspense"):60113,cV=Q$?Symbol.for("react.suspense_list"):60120,uV=Q$?Symbol.for("react.memo"):60115,dV=Q$?Symbol.for("react.lazy"):60116,pV=Q$?Symbol.for("react.block"):60121,fV=Q$?Symbol.for("react.fundamental"):60117,mV=Q$?Symbol.for("react.responder"):60118,gV=Q$?Symbol.for("react.scope"):60119;function yV(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case J$:switch(t=t.type){case oV:case aV:case eV:case iV:case nV:case hV:return t;default:switch(t=t&&t.$$typeof){case rV:case lV:case dV:case uV:case sV:return t;default:return e}}case tV:return e}}}function vV(t){return yV(t)===aV}Y$.AsyncMode=oV,Y$.ConcurrentMode=aV,Y$.ContextConsumer=rV,Y$.ContextProvider=sV,Y$.Element=J$,Y$.ForwardRef=lV,Y$.Fragment=eV,Y$.Lazy=dV,Y$.Memo=uV,Y$.Portal=tV,Y$.Profiler=iV,Y$.StrictMode=nV,Y$.Suspense=hV,Y$.isAsyncMode=function(t){return vV(t)||yV(t)===oV},Y$.isConcurrentMode=vV,Y$.isContextConsumer=function(t){return yV(t)===rV},Y$.isContextProvider=function(t){return yV(t)===sV},Y$.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===J$},Y$.isForwardRef=function(t){return yV(t)===lV},Y$.isFragment=function(t){return yV(t)===eV},Y$.isLazy=function(t){return yV(t)===dV},Y$.isMemo=function(t){return yV(t)===uV},Y$.isPortal=function(t){return yV(t)===tV},Y$.isProfiler=function(t){return yV(t)===iV},Y$.isStrictMode=function(t){return yV(t)===nV},Y$.isSuspense=function(t){return yV(t)===hV},Y$.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===eV||t===aV||t===iV||t===nV||t===hV||t===cV||"object"==typeof t&&null!==t&&(t.$$typeof===dV||t.$$typeof===uV||t.$$typeof===sV||t.$$typeof===rV||t.$$typeof===lV||t.$$typeof===fV||t.$$typeof===mV||t.$$typeof===gV||t.$$typeof===pV)},Y$.typeOf=yV,X$.exports=Y$;var _V=X$.exports,bV={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},wV={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},xV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},SV={};function AV(t){return _V.isMemo(t)?xV:SV[t.$$typeof]||bV}SV[_V.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},SV[_V.Memo]=xV;var kV=Object.defineProperty,PV=Object.getOwnPropertyNames,EV=Object.getOwnPropertySymbols,CV=Object.getOwnPropertyDescriptor,MV=Object.getPrototypeOf,TV=Object.prototype;const LV=Ku(function t(e,n,i){if("string"!=typeof n){if(TV){var s=MV(n);s&&s!==TV&&t(e,s,i)}var r=PV(n);EV&&(r=r.concat(EV(n)));for(var o=AV(e),a=AV(n),l=0;l<r.length;++l){var h=r[l];if(!(wV[h]||i&&i[h]||a&&a[h]||o&&o[h])){var c=CV(n,h);try{kV(e,h,c)}catch(iG){}}}}return e});var RV={exports:{}},IV={},DV=60103,OV=60106,NV=60107,FV=60108,BV=60114,zV=60109,WV=60110,jV=60112,UV=60113,HV=60120,$V=60115,VV=60116,qV=60121,GV=60122,ZV=60117,KV=60129,XV=60131;if("function"==typeof Symbol&&Symbol.for){var YV=Symbol.for;DV=YV("react.element"),OV=YV("react.portal"),NV=YV("react.fragment"),FV=YV("react.strict_mode"),BV=YV("react.profiler"),zV=YV("react.provider"),WV=YV("react.context"),jV=YV("react.forward_ref"),UV=YV("react.suspense"),HV=YV("react.suspense_list"),$V=YV("react.memo"),VV=YV("react.lazy"),qV=YV("react.block"),GV=YV("react.server.block"),ZV=YV("react.fundamental"),KV=YV("react.debug_trace_mode"),XV=YV("react.legacy_hidden")}function QV(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case DV:switch(t=t.type){case NV:case BV:case FV:case UV:case HV:return t;default:switch(t=t&&t.$$typeof){case WV:case jV:case VV:case $V:case zV:return t;default:return e}}case OV:return e}}}var JV=zV,tq=DV,eq=jV,nq=NV,iq=VV,sq=$V,rq=OV,oq=BV,aq=FV,lq=UV;IV.ContextConsumer=WV,IV.ContextProvider=JV,IV.Element=tq,IV.ForwardRef=eq,IV.Fragment=nq,IV.Lazy=iq,IV.Memo=sq,IV.Portal=rq,IV.Profiler=oq,IV.StrictMode=aq,IV.Suspense=lq,IV.isAsyncMode=function(){return!1},IV.isConcurrentMode=function(){return!1},IV.isContextConsumer=function(t){return QV(t)===WV},IV.isContextProvider=function(t){return QV(t)===zV},IV.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===DV},IV.isForwardRef=function(t){return QV(t)===jV},IV.isFragment=function(t){return QV(t)===NV},IV.isLazy=function(t){return QV(t)===VV},IV.isMemo=function(t){return QV(t)===$V},IV.isPortal=function(t){return QV(t)===OV},IV.isProfiler=function(t){return QV(t)===BV},IV.isStrictMode=function(t){return QV(t)===FV},IV.isSuspense=function(t){return QV(t)===UV},IV.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===NV||t===BV||t===KV||t===FV||t===UV||t===HV||t===XV||"object"==typeof t&&null!==t&&(t.$$typeof===VV||t.$$typeof===$V||t.$$typeof===zV||t.$$typeof===WV||t.$$typeof===jV||t.$$typeof===ZV||t.$$typeof===qV||t[0]===GV)},IV.typeOf=QV,RV.exports=IV;var hq=RV.exports,cq=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],uq=["reactReduxForwardedRef"],dq=[],pq=[null,null];function fq(t,e){var n=t[1];return[e.payload,n+1]}function mq(t,e,n){G$(function(){return t.apply(void 0,e)},n)}function gq(t,e,n,i,s,r,o){t.current=i,e.current=s,n.current=!1,r.current&&(r.current=null,o())}function yq(t,e,n,i,s,r,o,a,l,h){if(t){var c=!1,u=null,d=function(){if(!c){var t,n,d=e.getState();try{t=i(d,s.current)}catch(iG){n=iG,u=iG}n||(u=null),t===r.current?o.current||l():(r.current=t,a.current=t,o.current=!0,h({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=d,n.trySubscribe(),d(),function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,u)throw u}}}var vq=function(){return[null,0]};function _q(t,e){void 0===e&&(e={});var n=e,i=n.getDisplayName,s=void 0===i?function(t){return"ConnectAdvanced("+t+")"}:i,r=n.methodName,o=void 0===r?"connectAdvanced":r,a=n.renderCountProp,l=void 0===a?void 0:a,h=n.shouldHandleStateChanges,c=void 0===h||h,u=n.storeKey,d=void 0===u?"store":u;n.withRef;var p=n.forwardRef,f=void 0!==p&&p,m=n.context,g=void 0===m?H$:m,y=K$(n,cq),v=g;return function(e){var n=e.displayName||e.name||"Component",i=s(n),r=M$({},y,{getDisplayName:s,methodName:o,renderCountProp:l,shouldHandleStateChanges:c,storeKey:d,displayName:i,wrappedComponentName:n,WrappedComponent:e}),a=y.pure,h=a?Od.useMemo:function(t){return t()};function u(n){var i=Od.useMemo(function(){var t=n.reactReduxForwardedRef,e=K$(n,uq);return[n.context,t,e]},[n]),s=i[0],o=i[1],a=i[2],l=Od.useMemo(function(){return s&&s.Consumer&&hq.isContextConsumer(Nd.createElement(s.Consumer,null))?s:v},[s,v]),u=Od.useContext(l),d=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(u)&&Boolean(u.store);var p=d?n.store:u.store,f=Od.useMemo(function(){return function(e){return t(e.dispatch,r)}(p)},[p]),m=Od.useMemo(function(){if(!c)return pq;var t=q$(p,d?null:u.subscription),e=t.notifyNestedSubs.bind(t);return[t,e]},[p,d,u]),g=m[0],y=m[1],_=Od.useMemo(function(){return d?u:M$({},u,{subscription:g})},[d,u,g]),b=Od.useReducer(fq,dq,vq),w=b[0][0],x=b[1];if(w&&w.error)throw w.error;var S=Od.useRef(),A=Od.useRef(a),k=Od.useRef(),P=Od.useRef(!1),E=h(function(){return k.current&&a===A.current?k.current:f(p.getState(),a)},[p,w,a]);mq(gq,[A,S,P,a,E,k,y]),mq(yq,[c,p,g,f,A,S,P,k,y,x],[p,g,f]);var C=Od.useMemo(function(){return Nd.createElement(e,M$({},E,{ref:o}))},[o,e,E]);return Od.useMemo(function(){return c?Nd.createElement(l.Provider,{value:_},C):C},[l,C,_])}var p=a?Nd.memo(u):u;if(p.WrappedComponent=e,p.displayName=u.displayName=i,f){var m=Nd.forwardRef(function(t,e){return Nd.createElement(p,M$({},t,{reactReduxForwardedRef:e}))});return m.displayName=i,m.WrappedComponent=e,LV(m,e)}return LV(p,e)}}function bq(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function wq(t,e){if(bq(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(e,n[s])||!bq(t[n[s]],e[n[s]]))return!1;return!0}function xq(t){return function(e,n){var i=t(e,n);function s(){return i}return s.dependsOnOwnProps=!1,s}}function Sq(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function Aq(t,e){return function(e,n){n.displayName;var i=function(t,e){return i.dependsOnOwnProps?i.mapToProps(t,e):i.mapToProps(t)};return i.dependsOnOwnProps=!0,i.mapToProps=function(e,n){i.mapToProps=t,i.dependsOnOwnProps=Sq(t);var s=i(e,n);return"function"==typeof s&&(i.mapToProps=s,i.dependsOnOwnProps=Sq(s),s=i(e,n)),s},i}}const kq=[function(t){return"function"==typeof t?Aq(t):void 0},function(t){return t?void 0:xq(function(t){return{dispatch:t}})},function(t){return t&&"object"==typeof t?xq(function(e){return function(t,e){var n={},i=function(i){var s=t[i];"function"==typeof s&&(n[i]=function(){return e(s.apply(void 0,arguments))})};for(var s in t)i(s);return n}(t,e)}):void 0}],Pq=[function(t){return"function"==typeof t?Aq(t):void 0},function(t){return t?void 0:xq(function(){return{}})}];function Eq(t,e,n){return M$({},n,t,e)}const Cq=[function(t){return"function"==typeof t?function(t){return function(e,n){n.displayName;var i,s=n.pure,r=n.areMergedPropsEqual,o=!1;return function(e,n,a){var l=t(e,n,a);return o?s&&r(l,i)||(i=l):(o=!0,i=l),i}}}(t):void 0},function(t){return t?void 0:function(){return Eq}}];var Mq=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Tq(t,e,n,i){return function(s,r){return n(t(s,r),e(i,r),r)}}function Lq(t,e,n,i,s){var r,o,a,l,h,c=s.areStatesEqual,u=s.areOwnPropsEqual,d=s.areStatePropsEqual,p=!1;return function(s,f){return p?function(s,p){var f,m,g=!u(p,o),y=!c(s,r,p,o);return r=s,o=p,g&&y?(a=t(r,o),e.dependsOnOwnProps&&(l=e(i,o)),h=n(a,l,o)):g?(t.dependsOnOwnProps&&(a=t(r,o)),e.dependsOnOwnProps&&(l=e(i,o)),h=n(a,l,o)):y?(f=t(r,o),m=!d(f,a),a=f,m&&(h=n(a,l,o)),h):h}(s,f):(a=t(r=s,o=f),l=e(i,o),h=n(a,l,o),p=!0,h)}}function Rq(t,e){var n=e.initMapStateToProps,i=e.initMapDispatchToProps,s=e.initMergeProps,r=K$(e,Mq),o=n(t,r),a=i(t,r),l=s(t,r);return(r.pure?Lq:Tq)(o,a,l,t,r)}var Iq=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Dq(t,e,n){for(var i=e.length-1;i>=0;i--){var s=e[i](t);if(s)return s}return function(e,i){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+i.wrappedComponentName+".")}}function Oq(t,e){return t===e}function Nq(t){var e=void 0===t?{}:t,n=e.connectHOC,i=void 0===n?_q:n,s=e.mapStateToPropsFactories,r=void 0===s?Pq:s,o=e.mapDispatchToPropsFactories,a=void 0===o?kq:o,l=e.mergePropsFactories,h=void 0===l?Cq:l,c=e.selectorFactory,u=void 0===c?Rq:c;return function(t,e,n,s){void 0===s&&(s={});var o=s,l=o.pure,c=void 0===l||l,d=o.areStatesEqual,p=void 0===d?Oq:d,f=o.areOwnPropsEqual,m=void 0===f?wq:f,g=o.areStatePropsEqual,y=void 0===g?wq:g,v=o.areMergedPropsEqual,_=void 0===v?wq:v,b=K$(o,Iq),w=Dq(t,r,"mapStateToProps"),x=Dq(e,a,"mapDispatchToProps"),S=Dq(n,h,"mergeProps");return i(u,M$({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:w,initMapDispatchToProps:x,initMergeProps:S,pure:c,areStatesEqual:p,areOwnPropsEqual:m,areStatePropsEqual:y,areMergedPropsEqual:_},b))}}const Fq=Nq();var Bq;function zq(t,e){var n=Od.useState(function(){return{inputs:e,result:t()}})[0],i=Od.useRef(!0),s=Od.useRef(n),r=i.current||Boolean(e&&s.current.inputs&&function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(e,s.current.inputs))?s.current:{inputs:e,result:t()};return Od.useEffect(function(){i.current=!1,s.current=r},[r]),r.result}Bq=ET.unstable_batchedUpdates,$$=Bq;var Wq=zq,jq=function(t,e){return zq(function(){return t},e)},Uq=function(t){var e=t.top,n=t.right,i=t.bottom,s=t.left;return{top:e,right:n,bottom:i,left:s,width:n-s,height:i-e,x:s,y:e,center:{x:(n+s)/2,y:(i+e)/2}}},Hq=function(t,e){return{top:t.top-e.top,left:t.left-e.left,bottom:t.bottom+e.bottom,right:t.right+e.right}},$q=function(t,e){return{top:t.top+e.top,left:t.left+e.left,bottom:t.bottom-e.bottom,right:t.right-e.right}},Vq={top:0,right:0,bottom:0,left:0},qq=function(t){var e=t.borderBox,n=t.margin,i=void 0===n?Vq:n,s=t.border,r=void 0===s?Vq:s,o=t.padding,a=void 0===o?Vq:o,l=Uq(Hq(e,i)),h=Uq($q(e,r)),c=Uq($q(h,a));return{marginBox:l,borderBox:Uq(e),paddingBox:h,contentBox:c,margin:i,border:r,padding:a}},Gq=function(t){var e=t.slice(0,-2);if("px"!==t.slice(-2))return 0;var n=Number(e);return isNaN(n)&&QH(!1),n},Zq=function(t,e){var n=t.borderBox,i=t.border,s=t.margin,r=t.padding,o=function(t,e){return{top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}}(n,e);return qq({borderBox:o,border:i,margin:s,padding:r})},Kq=function(t,e){return void 0===e&&(e={x:window.pageXOffset,y:window.pageYOffset}),Zq(t,e)},Xq=function(t,e){var n={top:Gq(e.marginTop),right:Gq(e.marginRight),bottom:Gq(e.marginBottom),left:Gq(e.marginLeft)},i={top:Gq(e.paddingTop),right:Gq(e.paddingRight),bottom:Gq(e.paddingBottom),left:Gq(e.paddingLeft)},s={top:Gq(e.borderTopWidth),right:Gq(e.borderRightWidth),bottom:Gq(e.borderBottomWidth),left:Gq(e.borderLeftWidth)};return qq({borderBox:t,margin:n,padding:i,border:s})},Yq=function(t){var e=t.getBoundingClientRect(),n=window.getComputedStyle(t);return Xq(e,n)},Qq=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function Jq(t,e){return t===e||!(!Qq(t)||!Qq(e))}function tG(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Jq(t[n],e[n]))return!1;return!0}function eG(t,e){var n;void 0===e&&(e=tG);var i,s=[],r=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return r&&n===this&&e(o,s)||(i=t.apply(this,o),r=!0,n=this,s=o),i}}var nG=function(t){var e=[],n=null,i=function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];e=s,n||(n=requestAnimationFrame(function(){n=null,t.apply(void 0,e)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i};export{Nd as $,wI as A,AI as B,CI as C,HI as D,iD as E,fL as F,jT as G,VT as H,UT as I,FR as J,aI as K,IT as L,DT as M,QI as N,FL as O,zT as P,LT as Q,RT as R,HT as S,nL as T,cD as U,uD as V,mL as W,eD as X,hD as Y,qI as Z,dD as _,KR as a,Fq as a0,M$ as a1,Wq as a2,C$ as a3,jq as a4,W$ as a5,Z$ as a6,eG as a7,nG as a8,CT as a9,t$ as aA,cU as aB,Dj as aC,Fd as aD,ET as aE,S_ as aF,MT as aG,xF as aH,zF as aI,gB as aJ,SU as aK,_$ as aL,S$ as aM,b$ as aN,i$ as aO,x$ as aP,w$ as aQ,g$ as aR,B$ as aa,j$ as ab,U$ as ac,Kq as ad,Yq as ae,Hq as af,qq as ag,Uq as ah,Xq as ai,Zq as aj,P$ as ak,Xf as al,__ as am,bm as an,b_ as ao,x_ as ap,QH as aq,JH as ar,ZH as as,HH as at,KH as au,uU as av,YH as aw,VH as ax,cH as ay,bB as az,bL as b,QL as c,pD as d,ZI as e,vL as f,$I as g,dL as h,VI as i,Vd as j,pL as k,OT as l,eR as m,BI as n,FT as o,BL as p,mD as q,Od as r,jI as s,XR as t,KI as u,VR as v,GR as w,WI as x,EI as y,$T as z};
