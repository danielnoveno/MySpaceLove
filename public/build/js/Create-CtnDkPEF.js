import{G as e,r as s,j as a,S as t,x as r}from"./react-core-DkDn4djD.js";import{a as l}from"./games-DpW3R6Xv.js";import{u as i}from"./useCurrentSpace-B-ijKysZ.js";import{U as o,T as d,A as n}from"./ui-libs-OX6CH3yX.js";import"./inertia-BBHw8PYu.js";import"./vendor-D-GzWRLi.js";import"./maps-CVSyMViq.js";import"./animation-Dcgp7Est.js";const m=["image/jpeg","image/jpg","image/png","image/gif","video/mp4","video/quicktime"];function c(){const c=i();if(!c)return null;const x=c.slug,p=c.title,{data:u,setData:h,post:g,processing:f,errors:b,reset:j}=e({title:"",files:[]}),[v,N]=s.useState([]),[y,k]=s.useState(null),w=s.useRef([]),U=s.useMemo(()=>{const e=Object.entries(b).find(([e])=>e.startsWith("files."));return e?e[1]:void 0},[b]),F=e=>{w.current.forEach(e=>URL.revokeObjectURL(e)),w.current=[];const s=e.map(e=>{const s=URL.createObjectURL(e);return w.current.push(s),s});N(s)};return a.jsxs(l,{loveCursor:{color:"#10b981",heartCount:32,className:"opacity-60"},header:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(r,{href:route("gallery.index",{space:x}),className:"rounded-lg p-2 transition hover:bg-gray-100",children:a.jsx(n,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Galeri"}),a.jsxs("p",{className:"text-gray-600",children:["Tambahkan foto atau video ke galeri ",p]})]})]}),children:[a.jsx(t,{title:`Upload Galeri - ${p}`}),a.jsx("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-emerald-50 via-white to-green-50 py-10 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"relative mx-auto max-w-3xl",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault(),k(null),g(route("gallery.store",{space:x}),{forceFormData:!0,onSuccess:()=>{w.current.forEach(e=>URL.revokeObjectURL(e)),w.current=[],N([]),j()},onError:e=>{}})},className:"relative z-10 space-y-8 rounded-3xl border border-emerald-100 bg-white/85 p-8 shadow-lg backdrop-blur-sm md:p-10",children:[a.jsxs("div",{children:[a.jsx("label",{className:"mb-2 block text-base font-semibold text-gray-800",children:"Judul Koleksi (opsional)"}),a.jsx("input",{type:"text",value:u.title,onChange:e=>h("title",e.target.value),className:"w-full rounded-2xl border border-gray-300 px-5 py-4 text-gray-800 transition focus:border-transparent focus:ring-2 focus:ring-emerald-500",placeholder:"Contoh: Foto Liburan"}),b.title&&a.jsx("p",{className:"mt-2 text-sm text-red-500",children:b.title})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"block text-base font-semibold text-gray-800",children:"File (Foto/Video)"}),a.jsxs("div",{className:"rounded-2xl border-2 border-dashed border-emerald-200 bg-white/80 p-8 text-center transition hover:border-emerald-400",children:[a.jsx(o,{className:"mx-auto mb-4 h-14 w-14 text-emerald-500"}),a.jsxs("p",{className:"mb-4 text-sm text-gray-600",children:["Tarik dan letakkan file di sini atau pilih manual (maks. ",12," file sekaligus)"]}),a.jsx("p",{className:"mb-4 text-xs text-emerald-500",children:"Semua file yang dipilih sekaligus akan tersimpan sebagai satu koleksi."}),a.jsx("input",{type:"file",id:"file-upload",className:"hidden",name:"files",multiple:!0,onChange:async e=>{const s=Array.from(e.target.files??[]);if(0===s.length)return;if(u.files.length+s.length>12)return void k("Maksimal 12 file yang dapat diunggah.");k(null);const a=[];for(const r of s)m.includes(r.type)?a.push(r):k(`Format ${r.name} tidak didukung. Gunakan jpg, jpeg, png, gif, mp4, atau mov.`);const t=[...u.files,...a];h("files",t),F(t),e.target.value=""},accept:"image/*,video/mp4,video/quicktime"}),a.jsx("label",{htmlFor:"file-upload",className:"inline-flex cursor-pointer items-center justify-center gap-2 rounded-xl bg-emerald-500 px-8 py-3 font-semibold text-white transition hover:bg-emerald-600",children:"Pilih File"}),u.files.length>0&&a.jsxs("p",{className:"mt-4 text-sm text-gray-600",children:[u.files.length," file dipilih"]})]}),y&&a.jsx("p",{className:"text-sm text-red-500 mt-2",children:y}),b.files&&a.jsx("p",{className:"text-sm text-red-500 mt-2",children:b.files}),U&&a.jsx("p",{className:"text-sm text-red-500 mt-2",children:"validation.uploaded"===U?"Ukuran salah satu file terlalu besar (maks. 30MB).":U})]}),a.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-white/75 p-6 shadow-sm",children:[a.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-emerald-600",children:"Preview"}),v.length>0?a.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3",children:v.map((e,s)=>a.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-emerald-100 shadow-sm",children:[a.jsx("img",{src:e,alt:`preview-${s}`,className:"h-40 w-full object-cover"}),a.jsxs("button",{type:"button",onClick:()=>(e=>{const s=[...u.files];s.splice(e,1),h("files",s),F(s)})(s),className:"absolute right-2 top-2 inline-flex items-center gap-1 rounded-full bg-black/60 px-2 py-1 text-xs font-semibold text-white transition hover:bg-black",children:[a.jsx(d,{className:"h-3 w-3"}),"Hapus"]}),a.jsxs("span",{className:"absolute bottom-2 left-2 rounded-full bg-emerald-500/90 px-2 text-xs font-semibold text-white",children:["#",s+1]})]},`${e}-${s}`))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No files selected yet."})]}),a.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-white/70 p-6 shadow-sm",children:[a.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-emerald-600",children:"Tips Upload"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[a.jsx("li",{children:"Format foto: JPG, JPEG, PNG, GIF (maks. 30MB per file)."}),a.jsx("li",{children:"Format video: MP4 atau MOV (maks. 30MB per file)."}),a.jsx("li",{children:"Berikan judul agar memori mudah ditemukan kembali."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4 pt-4 sm:flex-row",children:[a.jsx(r,{href:route("gallery.index",{space:x}),className:"flex-1 rounded-xl border border-gray-300 px-6 py-4 text-center font-medium text-gray-700 transition hover:bg-gray-50",children:"Batal"}),a.jsx("button",{type:"submit",disabled:f||0===u.files.length,className:"flex-1 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 px-6 py-4 font-semibold text-white shadow transition hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-60",children:f?"Mengunggah...":"Upload"})]})]})})})]})}export{c as default};
