import{r as e,j as a,ak as t}from"./vendor-DtplsvIg.js";import{X as s,S as r,A as i}from"./inertia-BRtPwdNN.js";import{J as l}from"./video-BI6xErDX.js";function c({spaceId:c,space:n,user:o}){const{props:d}=s(),u=d.currentSpace,f=n?.slug??u?.slug??`space-${c}`,[m,p]=e.useState(null),[h,x]=e.useState(null),[j,g]=e.useState(!0),[v,S]=e.useState(null);if(e.useEffect(()=>{(async()=>{try{const e=await t.get(`/api/spaces/${f}/jaas/token`);p(e.data.token),x(e.data.appId),g(!1)}catch(e){S("Failed to load video call service."),g(!1)}})()},[f]),j)return a.jsx("div",{className:"h-screen w-full bg-gray-900 flex items-center justify-center text-white",children:"Memuat Video Call..."});if(v)return a.jsx("div",{className:"h-screen w-full bg-gray-900 flex items-center justify-center text-red-500",children:v});const I=`LoveSpace-${f}`;return a.jsxs("div",{className:"h-screen w-full bg-gray-900 flex flex-col",children:[a.jsx(r,{title:"Video Call"}),a.jsx("div",{className:"flex-1 w-full relative",children:h&&m?a.jsx(l,{appId:h,roomName:I,jwt:m,configOverwrite:{startWithAudioMuted:!0,disableModeratorIndicator:!0,startScreenSharing:!0,enableEmailInStats:!1},interfaceConfigOverwrite:{DISABLE_JOIN_LEAVE_NOTIFICATIONS:!0},userInfo:{displayName:o,email:""},getIFrameRef:e=>{e.style.height="100%"},onReadyToClose:()=>{i.visit(`/spaces/${f}/dashboard`)}}):a.jsx("div",{className:"flex items-center justify-center h-full text-white",children:"Konfigurasi JaaS tidak valid."})})]})}export{c as default};
