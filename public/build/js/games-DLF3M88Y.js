import{j as e,X as t,r,x as s,A as n,S as a}from"./react-core-DkDn4djD.js";import{g as o}from"./animation-Dcgp7Est.js";import{B as l,I as i,M as c,C as d,T as u,G as p}from"./ui-libs--z-UAavT.js";function x(t){return e.jsxs("svg",{...t,viewBox:"0 0 316 316",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"heartGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ff6b6b"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8e8e"})]})}),e.jsx("path",{fill:"url(#heartGradient)",d:"M158 280C158 280 40 210 40 100C40 60 70 30 110 30C135 30 158 50 158 50C158 50 181 30 206 30C246 30 276 60 276 100C276 210 158 280 158 280Z"}),e.jsx("path",{fill:"rgba(255,255,255,0.3)",d:"M140 80C120 70 90 60 80 90C70 120 110 150 140 170C170 150 210 120 200 90C190 60 160 70 140 80Z"})]})}const m=(e,t)=>{if(!e)return;if(!t)return e;const r=t.split(".");let s=e;for(const n of r){if(!s||"object"!=typeof s||!(n in s))return;s=s[n]}return s},f=e=>{const{props:s}=t(),n=s.translations??{},a=r.useMemo(()=>{if(!e)return n;const t=m(n,e);return t&&"object"==typeof t?t:{}},[e,n]);return{t:r.useCallback((t,r)=>{const s=m(a,t);if("string"==typeof s)return s;if(void 0!==r)return r;const o=m(n,e?`${e}.${t}`:t);return"string"==typeof o?o:t},[e,a,n]),translations:a,raw:n}},h=({logo:t,logoAlt:n="Logo",items:a,activeHref:l,className:i="",ease:c="power3.easeOut",baseColor:d="#fff",pillColor:u="#060010",hoveredPillTextColor:p="#060010",pillTextColor:x,onMobileMenuClick:m,initialLoadAnimation:f=!0,rightContent:h,dimmed:g=!1})=>{const b=x??d,[y,v]=r.useState(!1),w=r.useRef([]),j=r.useRef([]),N=r.useRef([]),k=r.useRef(null),S=r.useRef(null),C=r.useRef(null),M=r.useRef(null),R=r.useRef(null),_=r.useRef(null),E=r.useRef(null),[T,O]=r.useState(null),A=r.useRef(null);r.useEffect(()=>{const e=()=>{w.current.forEach(e=>{if(!e?.parentElement)return;const t=e.parentElement,r=t.getBoundingClientRect(),{width:s,height:n}=r,a=(s*s/4+n*n)/(2*n),l=Math.ceil(2*a)+2,i=Math.ceil(a-Math.sqrt(Math.max(0,a*a-s*s/4)))+1,d=l-i;e.style.width=`${l}px`,e.style.height=`${l}px`,e.style.bottom=`-${i}px`,o.set(e,{xPercent:-50,scale:0,transformOrigin:`50% ${d}px`});const u=t.querySelector(".pill-label"),p=t.querySelector(".pill-label-hover");u&&o.set(u,{y:0}),p&&o.set(p,{y:n+12,opacity:0});const x=w.current.indexOf(e);if(-1===x)return;j.current[x]?.kill();const m=o.timeline({paused:!0});m.to(e,{scale:1.2,xPercent:-50,duration:2,ease:c,overwrite:"auto"},0),u&&m.to(u,{y:-(n+8),duration:2,ease:c,overwrite:"auto"},0),p&&(o.set(p,{y:Math.ceil(n+100),opacity:0}),m.to(p,{y:0,opacity:1,duration:2,ease:c,overwrite:"auto"},0)),j.current[x]=m})};e();const t=()=>e();window.addEventListener("resize",t),document.fonts&&document.fonts.ready.then(e).catch(()=>{});const r=M.current;if(r&&o.set(r,{visibility:"hidden",opacity:0,scaleY:1,y:0}),f){const e=_.current,t=R.current,r=E.current;e&&(o.set(e,{scale:0}),o.to(e,{scale:1,duration:.6,ease:c})),t&&(o.set(t,{width:0,overflow:"hidden"}),o.to(t,{width:"auto",duration:.6,ease:c,onComplete:()=>{o.set(t,{overflow:"visible"})}})),r&&(o.set(r,{opacity:0,x:-10}),o.to(r,{opacity:1,x:0,duration:.6,delay:.3,ease:c}))}return()=>window.removeEventListener("resize",t)},[a,c,f]);const P=e=>{A.current=setTimeout(()=>{O(null)},150);const t=j.current[e];t&&(N.current[e]?.kill(),N.current[e]=t.tweenTo(0,{duration:.2,ease:c,overwrite:"auto"}))},L=(e,t,r)=>{r&&(e.preventDefault(),O(T===t?null:t))},z=()=>{const e=k.current;e&&(S.current?.kill(),o.set(e,{rotate:0}),S.current=o.to(e,{rotate:360,duration:.2,ease:c,overwrite:"auto"}))},I=e=>e&&!(e=>e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")||e.startsWith("mailto:")||e.startsWith("tel:")||e.startsWith("#"))(e),G={"--base":d,"--pill-bg":u,"--hover-text":p,"--pill-text":b,"--nav-h":"48px","--logo":"36px","--pill-pad-x":"18px","--pill-gap":"3px"};return e.jsxs("div",{className:"fixed top-4 z-[1000] w-full left-0 px-4 md:px-0 md:w-auto md:left-1/2 md:-translate-x-1/2 "+(g?"opacity-20 hover:opacity-100 transition-all duration-500 hover:grayscale-0":""),children:[e.jsxs("nav",{className:`w-full md:w-max flex items-center justify-between md:justify-start box-border ${i}`,"aria-label":"Primary",style:G,children:[I(a?.[0]?.href)?e.jsx(s,{href:a[0].href,"aria-label":"Home",onMouseEnter:z,role:"menuitem",ref:e=>{e&&(_.current=e)},className:"rounded-full p-2 inline-flex items-center justify-center overflow-hidden mr-2 shadow-lg",style:{width:"var(--nav-h)",height:"var(--nav-h)",background:"var(--base, #000)"},children:"string"==typeof t?e.jsx("img",{src:t,alt:n,ref:k,className:"w-full h-full object-cover block"}):e.jsx("div",{ref:k,className:"w-full h-full flex items-center justify-center",children:t})}):e.jsx("a",{href:a?.[0]?.href||"#","aria-label":"Home",onMouseEnter:z,ref:e=>{e&&(_.current=e)},className:"rounded-full p-2 inline-flex items-center justify-center overflow-hidden mr-2 shadow-lg",style:{width:"var(--nav-h)",height:"var(--nav-h)",background:"var(--base, #000)"},children:"string"==typeof t?e.jsx("img",{src:t,alt:n,ref:k,className:"w-full h-full object-cover block"}):e.jsx("div",{ref:k,className:"w-full h-full flex items-center justify-center",children:t})}),e.jsx("div",{ref:R,className:"relative items-center rounded-full hidden md:flex shadow-lg",style:{height:"var(--nav-h)",background:"var(--base, #000)"},children:e.jsx("ul",{role:"menubar",className:"list-none flex items-stretch m-0 p-[4px] h-full",style:{gap:"var(--pill-gap)"},children:a.map((t,r)=>{const n=l===t.href,a={background:"var(--pill-bg, #fff)",color:"var(--pill-text, var(--base, #000))",paddingLeft:"var(--pill-pad-x)",paddingRight:"var(--pill-pad-x)"},o=e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hover-circle absolute left-1/2 bottom-0 rounded-full z-[1] block pointer-events-none",style:{background:"var(--base, #000)",willChange:"transform"},"aria-hidden":"true",ref:e=>{w.current[r]=e}}),e.jsxs("span",{className:"label-stack relative inline-flex items-center gap-2 leading-[1] z-[2]",children:[e.jsx("span",{className:"pill-label relative z-[2] inline-block leading-[1] transition-opacity",style:{willChange:"transform"},children:t.label}),t.badge?e.jsx("span",{className:"inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-[10px] font-bold text-white bg-pink-500 rounded-full animate-pulse",children:t.badge}):null,e.jsxs("span",{className:"pill-label-hover absolute left-0 top-0 z-[3] inline-flex items-center gap-2",style:{color:"var(--hover-text, #fff)",willChange:"transform, opacity"},"aria-hidden":"true",children:[e.jsx("span",{children:t.label}),t.badge?e.jsx("span",{className:"inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-[10px] font-bold text-pink-500 bg-white rounded-full",children:t.badge}):null]})]}),n&&e.jsx("span",{className:"absolute left-1/2 -bottom-[6px] -translate-x-1/2 w-3 h-3 rounded-full z-[4]",style:{background:"var(--base, #000)"},"aria-hidden":"true"})]}),i="relative overflow-hidden inline-flex items-center justify-center h-full no-underline rounded-full box-border font-semibold text-[14px] leading-[0] uppercase tracking-[0.2px] whitespace-nowrap cursor-pointer px-0",d=!!t.dropdownContent;return e.jsxs("li",{id:t.id,role:"none",className:"flex h-full relative",onMouseEnter:()=>(e=>{A.current&&clearTimeout(A.current),O(e);const t=j.current[e];t&&(N.current[e]?.kill(),N.current[e]=t.tweenTo(t.duration(),{duration:.3,ease:c,overwrite:"auto"}))})(r),onMouseLeave:()=>P(r),children:[I(t.href)?e.jsx(s,{role:"menuitem",href:d?"#":t.href,className:i,style:a,"aria-label":t.ariaLabel||t.label,onClick:e=>L(e,r,d),children:o}):e.jsx("a",{role:"menuitem",href:d?"#":t.href,className:i,style:a,"aria-label":t.ariaLabel||t.label,onClick:e=>L(e,r,d),children:o}),d&&T===r&&e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 pt-3 z-[1001]",onMouseEnter:()=>{A.current&&clearTimeout(A.current)},onMouseLeave:()=>P(r),children:t.dropdownContent})]},t.href)})})}),h&&e.jsx("div",{ref:E,className:"hidden md:block ml-2 rounded-full shadow-lg bg-white overflow-hidden",style:{height:"var(--nav-h)"},children:h}),e.jsxs("button",{ref:C,onClick:()=>{const e=!y;v(e);const t=C.current,r=M.current;if(t){const r=t.querySelectorAll(".hamburger-line");e?(o.to(r[0],{rotation:45,y:3,duration:.3,ease:c}),o.to(r[1],{rotation:-45,y:-3,duration:.3,ease:c})):(o.to(r[0],{rotation:0,y:0,duration:.3,ease:c}),o.to(r[1],{rotation:0,y:0,duration:.3,ease:c}))}r&&(e?(o.set(r,{visibility:"visible"}),o.fromTo(r,{opacity:0,y:10,scaleY:1},{opacity:1,y:0,scaleY:1,duration:.3,ease:c,transformOrigin:"top center"})):o.to(r,{opacity:0,y:10,scaleY:1,duration:.2,ease:c,transformOrigin:"top center",onComplete:()=>{o.set(r,{visibility:"hidden"})}})),m?.()},"aria-label":"Toggle menu","aria-expanded":y,className:"md:hidden rounded-full border-0 flex flex-col items-center justify-center gap-1 cursor-pointer p-0 relative shadow-lg",style:{width:"var(--nav-h)",height:"var(--nav-h)",background:"var(--base, #000)"},children:[e.jsx("span",{className:"hamburger-line w-4 h-0.5 rounded origin-center transition-all duration-[10ms] ease-[cubic-bezier(0.25,0.1,0.25,1)]",style:{background:"var(--pill-bg, #fff)"}}),e.jsx("span",{className:"hamburger-line w-4 h-0.5 rounded origin-center transition-all duration-[10ms] ease-[cubic-bezier(0.25,0.1,0.25,1)]",style:{background:"var(--pill-bg, #fff)"}})]})]}),e.jsxs("div",{ref:M,className:"md:hidden absolute top-[calc(var(--nav-h)+1em)] left-0 right-0 mx-4 rounded-[27px] shadow-[0_8px_32px_rgba(0,0,0,0.12)] z-[998] origin-top",style:{...G,background:"var(--base, #f0f0f0)"},children:[e.jsx("ul",{className:"list-none m-0 p-[3px] flex flex-col gap-[3px]",children:a.map(t=>{const r={background:"var(--pill-bg, #fff)",color:"var(--pill-text, #fff)"},n=e=>{e.currentTarget.style.background="var(--pill-text, #000)",e.currentTarget.style.color="var(--hover-text, #fff)"},a=e=>{e.currentTarget.style.background="var(--pill-bg, #fff)",e.currentTarget.style.color="var(--pill-text, #000)"},o="block py-3 px-4 text-[16px] font-medium rounded-[50px] transition-all duration-200 ease-[cubic-bezier(0.25,0.1,0.25,1)]";return e.jsx("li",{children:I(t.href)?e.jsx(s,{href:t.href,className:o,style:r,onMouseEnter:n,onMouseLeave:a,onClick:()=>v(!1),children:t.label}):e.jsx("a",{href:t.href,className:o,style:r,onMouseEnter:n,onMouseLeave:a,onClick:()=>v(!1),children:t.label})},t.href)})}),h&&e.jsx("div",{className:"p-3 border-t border-gray-200 mt-2",children:h})]})]})};function g({spaceSlug:t,unreadCount:a=0,translations:o={}}){const[p,x]=r.useState([]),[m,f]=r.useState(!1),h={viewAll:o?.actions?.view_all??"View All Notifications",markAllRead:o?.actions?.mark_all_read??"Mark all as read",markRead:o?.actions?.mark_read??"Mark as read",delete:o?.actions?.delete??"Delete notification",noNotifications:o?.dropdown?.no_notifications??"No notifications",noNotificationsDesc:o?.dropdown?.no_notifications_desc??"You're all caught up!"};r.useEffect(()=>{t&&(f(!0),fetch(route("spaces.notifications.recent",{space:t})).then(e=>e.json()).then(e=>{x(e.notifications||[])}).catch(e=>{}).finally(()=>{f(!1)}))},[t]);const g=e=>{if(!e)return"";const t=new Date(e),r=(new Date).getTime()-t.getTime(),s=Math.floor(r/6e4),n=Math.floor(r/36e5),a=Math.floor(r/864e5);return s<1?"Just now":s<60?`${s}m ago`:n<24?`${n}h ago`:a<7?`${a}d ago`:new Intl.DateTimeFormat("en",{month:"short",day:"numeric"}).format(t)},b=(e,t=60)=>e?e.length<=t?e:e.substring(0,t)+"...":"";return e.jsxs("div",{className:"w-80 sm:w-96 max-h-[calc(100vh-100px)] flex flex-col bg-white rounded-2xl shadow-xl ring-1 ring-black ring-opacity-5 overflow-hidden",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-pink-50 to-purple-50 px-4 py-3 border-b border-pink-100 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4 text-pink-500"}),"Notifications"]}),a>0&&e.jsxs("span",{className:"text-xs font-medium text-pink-600 bg-pink-100 px-2 py-1 rounded-full",children:[a," new"]})]})}),e.jsx("div",{className:"overflow-y-auto flex-1 overscroll-contain",children:m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500"})}):0===p.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[e.jsx(i,{className:"h-12 w-12 text-gray-300 mb-3"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:h.noNotifications}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.noNotificationsDesc})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:p.map(r=>{const s=!r.read_at,a=(e=>{const t=e.data||{};return t.title||t.event?.replace(/[_-]/g," ").replace(/\b\w/g,e=>e.toUpperCase())||"Notification"})(r),o=(e=>{const t=e.data||{};return t.body||t.message||""})(r),l=r.data?.action_url;return e.jsx("div",{role:"button",tabIndex:0,onClick:()=>((e,r)=>{e.read_at?r&&n.visit(r):(x(t=>t.map(t=>t.id===e.id?{...t,read_at:(new Date).toISOString()}:t)),n.post(route("spaces.notifications.read",{space:t,notification:e.id}),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{r&&n.visit(r)},onError:()=>{x(t=>t.map(t=>t.id===e.id?{...t,read_at:null}:t))}}))})(r,l),className:"group relative px-4 py-3 transition-colors duration-150 cursor-pointer "+(s?"bg-pink-50/50 hover:bg-pink-100/50":"bg-white hover:bg-gray-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 "+(s?"text-pink-500":"text-gray-300"),children:e.jsx(c,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0 pr-8",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:"text-sm font-medium "+(s?"text-gray-900":"text-gray-600"),children:b(a,35)}),s&&e.jsx("span",{className:"flex-shrink-0 w-2 h-2 bg-pink-500 rounded-full mt-1.5"})]}),o&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:b(o,80)}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:g(r.created_at)})]}),e.jsxs("div",{className:"flex flex-col gap-1 items-end pl-2",children:[s&&e.jsx("button",{onClick:e=>((e,r)=>{e.preventDefault(),e.stopPropagation(),r.read_at||(x(e=>e.map(e=>e.id===r.id?{...e,read_at:(new Date).toISOString()}:e)),n.post(route("spaces.notifications.read",{space:t,notification:r.id}),{},{preserveState:!0,preserveScroll:!0,onError:()=>{x(e=>e.map(e=>e.id===r.id?{...e,read_at:null}:e))}}))})(e,r),className:"p-1 rounded-full text-gray-400 hover:text-pink-600 hover:bg-pink-100 transition-colors",title:h.markRead,children:e.jsx(d,{className:"h-4 w-4"})}),e.jsx("button",{onClick:e=>((e,r)=>{e.preventDefault(),e.stopPropagation();const s=[...p];x(e=>e.filter(e=>e.id!==r.id)),n.delete(route("spaces.notifications.destroy",{space:t,notification:r.id}),{preserveState:!0,preserveScroll:!0,onError:()=>{x(s)}})})(e,r),className:"p-1 rounded-full text-gray-400 hover:text-red-600 hover:bg-red-100 transition-colors",title:h.delete,children:e.jsx(u,{className:"h-4 w-4"})})]})]})},r.id)})})}),p.length>0&&e.jsx("div",{className:"sticky bottom-0 z-10 bg-white border-t border-gray-100 px-4 py-3 flex-shrink-0",children:e.jsx(s,{href:route("spaces.notifications.index",{space:t}),className:"block w-full text-center text-sm font-medium text-pink-600 hover:text-pink-700 py-2 rounded-lg hover:bg-pink-50 transition-colors duration-150",children:h.viewAll})})]})}function b({header:n,children:a,showSplashCursor:o=!1,dimNav:l=!1}){const{props:i}=t(),{spaces:c,currentSpace:d,locale:u,availableLocales:m,unreadNotificationsCount:b=0}=i,y=d||(c&&c.length>0?c[0]:null),{translations:v}=f("layout"),w=(v.language??{}).options??{},j=u??"en",N=m.find(e=>e!==j)||j,k=w[j]??j.toUpperCase(),S=w[N]??N.toUpperCase(),[C,M]=r.useState(!1),R=r.useMemo(()=>{const t=[];return y&&(t.push({id:"dashboard-menu",label:"Dashboard",href:route("spaces.dashboard",{space:y.slug})}),t.push({id:"timeline-menu",label:"Timeline",href:route("timeline.index",{space:y.slug})}),t.push({id:"daily-menu",label:"Daily",href:route("daily.index",{space:y.slug})}),t.push({id:"gallery-menu",label:"Gallery",href:route("gallery.index",{space:y.slug})}),t.push({id:"spotify-menu",label:"Spotify",href:route("spotify.companion",{space:y.slug})}),t.push({id:"games-menu",label:"Games",href:route("games.index",{space:y.slug})}),t.push({id:"notifications-button",label:"Notifications",href:route("spaces.notifications.index",{space:y.slug}),badge:b>0?b:void 0,dropdownContent:e.jsx(g,{spaceSlug:y.slug,unreadCount:b,translations:v})})),t.push({id:"spaces-menu",label:"Spaces",href:route("spaces.index")}),t.push({id:"profile-menu",label:"Profile",href:route("profile.edit"),dropdownContent:e.jsxs("div",{className:"w-48 bg-white rounded-xl shadow-xl ring-1 ring-black ring-opacity-5 py-1 overflow-hidden",children:[e.jsx(s,{href:route("profile.edit"),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-pink-50 hover:text-pink-600 transition-colors",children:"Profile"}),e.jsx(s,{href:route("logout"),method:"post",as:"button",className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:"Log Out"})]})}),t},[y,b,v]),_=m&&m.length>1?e.jsx("div",{className:"flex items-center h-full px-2",children:e.jsxs(s,{href:route("locale.switch"),method:"post",as:"button",data:{locale:N},className:"inline-flex items-center gap-2 px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-full text-pink-600 hover:text-pink-800 bg-pink-50 hover:bg-pink-100 focus:outline-none transition-all ease-in-out duration-300 min-w-[100px] justify-center",onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),preserveScroll:!0,children:[e.jsx(p,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{className:"hidden sm:inline transition-opacity duration-300",children:C?S:k})]})}):null,E="undefined"!=typeof window?window.location.href:"";return e.jsxs("div",{className:"h-screen w-full bg-gradient-to-br from-pink-50 via-white to-purple-50 flex flex-col overflow-hidden relative",children:[e.jsx(h,{logo:e.jsx(x,{className:"w-3/4 h-3/4 text-pink-500 fill-current"}),items:R,activeHref:E,baseColor:"#ffffff",pillColor:"#fdf2f8",pillTextColor:"#db2777",hoveredPillTextColor:"#be185d",className:"shadow-sm z-50",rightContent:_,dimmed:l}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden w-full pt-28",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden scroll-smooth custom-scrollbar",children:[n&&e.jsx("header",{className:"bg-white/60 backdrop-blur-md shadow-sm sticky top-0 z-30 transition-all duration-300",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:n})}),e.jsx("main",{className:"py-8 px-4 sm:px-6 lg:px-8 min-h-[calc(100vh-12rem)]",children:a})]}),e.jsxs("footer",{className:"flex-none w-full border-t border-pink-100 bg-white/80 backdrop-blur py-4 text-center text-sm text-gray-600 z-40 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:[e.jsx("span",{className:"font-medium text-pink-500",children:"MySpaceLove"})," ©"," ",(new Date).getFullYear()," • Made with ❤️ by Peng for Winnie"]})]})]})}const y=({targetSelector:t=".cursor-target",spinDuration:s=2,hideDefaultCursor:n=!0,hoverDuration:a=.2,parallaxOn:l=!0})=>{const i=r.useRef(null),c=r.useRef(null),d=r.useRef(null),u=r.useRef(null),p=r.useRef(!1),x=r.useRef(null),m=r.useRef(null),f=r.useRef({current:0}),h=r.useMemo(()=>{const e="ontouchstart"in window||navigator.maxTouchPoints>0,t=window.innerWidth<=768,r=navigator.userAgent||navigator.vendor||window.opera,s=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(r.toLowerCase());return e&&t||s},[]),g=r.useMemo(()=>({borderWidth:3,cornerSize:12}),[]),b=r.useCallback((e,t)=>{i.current&&o.to(i.current,{x:e,y:t,duration:.1,ease:"power3.out"})},[]);return r.useEffect(()=>{if(h||!i.current)return;const e=document.body.style.cursor;n&&(document.body.style.cursor="none");const r=i.current;c.current=r.querySelectorAll(".target-cursor-corner");let y=null,v=null,w=null;const j=e=>{v&&e.removeEventListener("mouseleave",v),v=null};o.set(r,{xPercent:-50,yPercent:-50,x:window.innerWidth/2,y:window.innerHeight/2}),d.current&&d.current.kill(),d.current=o.timeline({repeat:-1}).to(r,{rotation:"+=360",duration:s,ease:"none"}),m.current=()=>{if(!x.current||!i.current||!c.current)return;const e=f.current.current;if(0===e)return;const t=o.getProperty(i.current,"x"),r=o.getProperty(i.current,"y");Array.from(c.current).forEach((s,n)=>{const a=o.getProperty(s,"x"),i=o.getProperty(s,"y"),c=x.current[n].x-t,d=x.current[n].y-r,u=a+(c-a)*e,p=i+(d-i)*e,m=e>=.99?l?.2:0:.05;o.to(s,{x:u,y:p,duration:m,ease:0===m?"none":"power1.out",overwrite:"auto"})})};const N=e=>b(e.clientX,e.clientY);window.addEventListener("mousemove",N);const k=()=>{if(!y||!i.current)return;const e=o.getProperty(i.current,"x"),r=o.getProperty(i.current,"y"),s=document.elementFromPoint(e,r);s&&(s===y||s.closest(t)===y)||v?.()};window.addEventListener("scroll",k,{passive:!0});const S=()=>{u.current&&(o.to(u.current,{scale:.7,duration:.3}),o.to(i.current,{scale:.9,duration:.2}))},C=()=>{u.current&&(o.to(u.current,{scale:1,duration:.3}),o.to(i.current,{scale:1,duration:.2}))};window.addEventListener("mousedown",S),window.addEventListener("mouseup",C);const M=e=>{const r=[];let n=e.target;for(;n&&n!==document.body;)n.matches(t)&&r.push(n),n=n.parentElement;const l=r[0]||null;if(!l||!i.current||!c.current)return;if(y===l)return;y&&j(y),w&&(clearTimeout(w),w=null),y=l;const u=Array.from(c.current);u.forEach(e=>o.killTweensOf(e)),o.killTweensOf(i.current,"rotation"),d.current?.pause(),o.set(i.current,{rotation:0});const h=l.getBoundingClientRect(),{borderWidth:b,cornerSize:N}=g,k=o.getProperty(i.current,"x"),S=o.getProperty(i.current,"y");x.current=[{x:h.left-b,y:h.top-b},{x:h.right+b-N,y:h.top-b},{x:h.right+b-N,y:h.bottom+b-N},{x:h.left-b,y:h.bottom+b-N}],p.current=!0,o.ticker.add(m.current),o.to(f.current,{current:1,duration:a,ease:"power2.out"}),u.forEach((e,t)=>{o.to(e,{x:x.current[t].x-k,y:x.current[t].y-S,duration:.2,ease:"power2.out"})});const C=()=>{if(o.ticker.remove(m.current),p.current=!1,x.current=null,o.set(f.current,{current:0,overwrite:!0}),y=null,c.current){const e=Array.from(c.current);o.killTweensOf(e);const{cornerSize:t}=g,r=[{x:1.5*-t,y:1.5*-t},{x:.5*t,y:1.5*-t},{x:.5*t,y:.5*t},{x:1.5*-t,y:.5*t}],s=o.timeline();e.forEach((e,t)=>{s.to(e,{x:r[t].x,y:r[t].y,duration:.3,ease:"power3.out"},0)})}w=setTimeout(()=>{if(!y&&i.current&&d.current){const e=o.getProperty(i.current,"rotation")%360;d.current.kill(),d.current=o.timeline({repeat:-1}).to(i.current,{rotation:"+=360",duration:s,ease:"none"}),o.to(i.current,{rotation:e+360,duration:s*(1-e/360),ease:"none",onComplete:()=>{d.current?.restart()}})}w=null},50),j(l)};v=C,l.addEventListener("mouseleave",C)};return window.addEventListener("mouseover",M),()=>{m.current&&o.ticker.remove(m.current),window.removeEventListener("mousemove",N),window.removeEventListener("mouseover",M),window.removeEventListener("scroll",k),window.removeEventListener("mousedown",S),window.removeEventListener("mouseup",C),y&&j(y),d.current?.kill(),document.body.style.cursor=e,p.current=!1,x.current=null,f.current.current=0}},[t,s,b,g,n,h,a,l]),r.useEffect(()=>{!h&&i.current&&d.current&&d.current.isActive()&&(d.current.kill(),d.current=o.timeline({repeat:-1}).to(i.current,{rotation:"+=360",duration:s,ease:"none"}))},[s,h]),h?null:e.jsxs("div",{ref:i,className:"fixed top-0 left-0 w-0 h-0 pointer-events-none z-[9999]",style:{willChange:"transform"},children:[e.jsx("div",{ref:u,className:"absolute top-1/2 left-1/2 w-1 h-1 bg-pink-500 rounded-full -translate-x-1/2 -translate-y-1/2 shadow-sm",style:{willChange:"transform"}}),e.jsx("div",{className:"target-cursor-corner absolute top-1/2 left-1/2 w-3 h-3 border-[3px] border-pink-500/90 shadow-sm -translate-x-[150%] -translate-y-[150%] border-r-0 border-b-0",style:{willChange:"transform"}}),e.jsx("div",{className:"target-cursor-corner absolute top-1/2 left-1/2 w-3 h-3 border-[3px] border-pink-500/90 shadow-sm translate-x-1/2 -translate-y-[150%] border-l-0 border-b-0",style:{willChange:"transform"}}),e.jsx("div",{className:"target-cursor-corner absolute top-1/2 left-1/2 w-3 h-3 border-[3px] border-pink-500/90 shadow-sm translate-x-1/2 translate-y-1/2 border-l-0 border-t-0",style:{willChange:"transform"}}),e.jsx("div",{className:"target-cursor-corner absolute top-1/2 left-1/2 w-3 h-3 border-[3px] border-pink-500/90 shadow-sm -translate-x-[150%] translate-y-1/2 border-r-0 border-t-0",style:{willChange:"transform"}})]})},v=Object.freeze(Object.defineProperty({__proto__:null,default:function({games:t,spaceSlug:n,spaceGoalsRoute:o,spaceGoalsStoreRoute:l}){const i=n?`?space=${n}`:"",[c,d]=r.useState([]),[u,p]=r.useState(""),[x,m]=r.useState(""),[f,h]=r.useState(500),[g,v]=r.useState("idle"),w=r.useMemo(()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",[]),j=r.useCallback(async()=>{const e=await fetch(o,{headers:{Accept:"application/json"}});if(e.ok){const t=await e.json();d(t.goals??[])}},[o]);r.useEffect(()=>{j()},[j]);const N=r.useCallback(async e=>{e.preventDefault(),v("saving");try{if(!(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":w,Accept:"application/json"},body:JSON.stringify({title:u,description:x,target_points:f})})).ok)throw new Error("Unable to save goal");p(""),m(""),h(500),v("saved"),await j()}catch(t){v("error")}},[w,j,x,f,u,l]),k=r.useCallback(async e=>{(await fetch(`${route("space.goals.update",{goal:e.id})}${i}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":w,Accept:"application/json"},body:JSON.stringify({title:e.title,description:e.description??"",target_points:e.target_points,is_active:e.is_active})})).ok&&await j()},[w,j,i]),S=r.useCallback(async e=>{(await fetch(`${route("space.goals.complete",{goal:e})}${i}`,{method:"POST",headers:{"X-CSRF-TOKEN":w,Accept:"application/json"}})).ok&&await j()},[w,j,i]);return e.jsxs(b,{showSplashCursor:!1,children:[e.jsx(a,{title:"Games"}),e.jsx(y,{targetSelector:"a, button, input, textarea, .cursor-target",hideDefaultCursor:!0,spinDuration:2,parallaxOn:!0}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Games Hub"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Pick a quick match, earn a score, and compare with your partner in your private space."})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr,1fr]",children:[e.jsx("div",{children:0===t.length?e.jsx("div",{className:"rounded-2xl border border-dashed border-purple-200 bg-white/70 p-8 text-center text-gray-500",children:"No games available yet. Check back soon!"}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:t.map(t=>e.jsxs("div",{className:"rounded-3xl border border-pink-100 bg-white/90 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:t.description})]}),e.jsx("span",{className:"rounded-full bg-pink-100 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-pink-600",children:t.supports_multiplayer?"Multiplayer":"Solo"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Space Scores only"}),e.jsx(s,{href:`${route("games.show",{slug:t.slug})}${i}`,className:"inline-flex items-center rounded-full bg-pink-500 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-pink-600",children:"Play now"})]})]},t.id))})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-3xl border border-purple-100 bg-white/90 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Space Goals"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Set milestones together and track progress from every game score."}),e.jsx("div",{className:"mt-4 space-y-4",children:c.length?c.map(t=>{const r=Math.min(100,Math.round(t.current_points/t.target_points*100)),s=t.is_completed||r>=100||!t.is_active;return e.jsxs("div",{className:"rounded-2xl border border-pink-100 bg-pink-50/70 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("input",{value:t.title,onChange:e=>d(r=>r.map(r=>r.id===t.id?{...r,title:e.target.value}:r)),className:"w-full rounded-lg border border-transparent bg-transparent text-sm font-semibold text-gray-900 focus:border-pink-200 focus:ring-2 focus:ring-pink-200 "+(s?"line-through text-gray-400":"")}),e.jsx("textarea",{value:t.description??"",onChange:e=>d(r=>r.map(r=>r.id===t.id?{...r,description:e.target.value}:r)),rows:2,className:"mt-2 w-full rounded-lg border border-transparent bg-transparent text-xs text-gray-600 focus:border-purple-200 focus:ring-2 focus:ring-purple-200 "+(s?"line-through text-gray-400":"")})]}),e.jsx("button",{type:"button",onClick:()=>k(t),className:"rounded-full bg-purple-500 px-3 py-1 text-xs font-semibold text-white shadow-sm transition hover:bg-purple-600",children:"Update"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[t.current_points," ","/ ",t.target_points," ","pts"]}),e.jsxs("span",{children:[r,"%"]})]}),e.jsx("div",{className:"mt-2 h-2 rounded-full bg-white",children:e.jsx("div",{className:"h-2 rounded-full bg-pink-400",style:{width:`${r}%`}})})]}),e.jsx("div",{className:"mt-3 flex items-center gap-2 text-xs font-semibold",children:s?e.jsx("span",{className:"inline-flex items-center rounded-full bg-emerald-100 px-3 py-1 text-emerald-700",children:"Done"}):e.jsx("button",{type:"button",onClick:()=>S(t.id),className:"text-pink-500 hover:text-pink-600",children:"Mark complete"})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-[10px] uppercase tracking-wide text-gray-500",children:"Target points"}),e.jsx("input",{type:"number",min:1,max:1e6,value:t.target_points,onChange:e=>d(r=>r.map(r=>r.id===t.id?{...r,target_points:Number(e.target.value)}:r)),className:"mt-1 w-full rounded-2xl border border-purple-100 bg-white px-3 py-1 text-xs shadow-sm focus:border-purple-300 focus:ring-2 focus:ring-purple-200"})]})]},t.id)}):e.jsx("div",{className:"rounded-2xl border border-dashed border-purple-200 bg-purple-50 px-4 py-6 text-center text-sm text-gray-500",children:"No goals yet. Add one to motivate your next game night."})})]}),e.jsxs("div",{className:"rounded-3xl border border-pink-100 bg-white/90 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add a goal"}),e.jsxs("form",{onSubmit:N,className:"mt-4 space-y-3",children:[e.jsx("input",{value:u,onChange:e=>p(e.target.value),placeholder:"Goal title",className:"w-full rounded-2xl border border-pink-100 px-4 py-2 text-sm shadow-sm focus:border-pink-300 focus:ring-2 focus:ring-pink-200",required:!0}),e.jsx("textarea",{value:x,onChange:e=>m(e.target.value),placeholder:"What are you celebrating?",rows:3,className:"w-full rounded-2xl border border-purple-100 px-4 py-2 text-sm shadow-sm focus:border-purple-300 focus:ring-2 focus:ring-purple-200"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Target points"}),e.jsx("input",{type:"number",min:1,max:1e6,value:f,onChange:e=>h(Number(e.target.value)),className:"mt-1 w-full rounded-2xl border border-pink-100 px-4 py-2 text-sm shadow-sm focus:border-pink-300 focus:ring-2 focus:ring-pink-200",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full rounded-full bg-pink-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-pink-600",children:"Save goal"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["saving"===g&&"Saving your goal...","saved"===g&&"Goal saved for your space.","error"===g&&"Unable to save goal. Try again."]})]})]})]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),w=e=>({x:e.x+Math.cos(Math.random()*Math.PI*2)*Math.sqrt(Math.random())*340,y:e.y+Math.sin(Math.random()*Math.PI*2)*Math.sqrt(Math.random())*340,r:6+5*Math.random()});function j({onGameOver:t}){const s=r.useRef(null),n=r.useRef(null),[a,o]=r.useState("ready"),[l,i]=r.useState(0),[c,d]=r.useState(20),u=r.useRef(0),p=r.useRef(20),x=r.useRef(Math.PI/2),m=r.useRef(Math.PI/2),f=r.useRef([]),h=r.useRef([]),g=r.useRef({x:0,y:0}),b=r.useRef(1),y=r.useCallback(()=>8+Math.min(6,Math.floor(p.current/60)),[]),v=r.useCallback(()=>{f.current=Array.from({length:p.current},(e,t)=>({x:0-8*t,y:0})),g.current={x:0,y:0},h.current=Array.from({length:18},()=>w({x:0,y:0})),u.current=0,i(0),d(p.current),x.current=Math.PI/2,m.current=Math.PI/2},[]),j=r.useCallback(()=>{o("over"),n.current&&cancelAnimationFrame(n.current),t(u.current,{length:p.current})},[t]),N=r.useCallback(()=>{0===f.current.length&&v();const e=x.current,t=m.current,r=Math.atan2(Math.sin(t-e),Math.cos(t-e));x.current=e+.12*r;const s=f.current[0],o=y(),l={x:s.x+2.4*Math.cos(x.current),y:s.y+2.4*Math.sin(x.current)};for(f.current.unshift(l);f.current.length>p.current;)f.current.pop();for(let n=10;n<f.current.length;n+=1){const e=f.current[n],t=e.x-l.x,r=e.y-l.y;if(Math.hypot(t,r)<.9*o)return void j()}for(h.current=h.current.filter(e=>{const t=e.x-l.x,r=e.y-l.y;return!(Math.hypot(t,r)<e.r+o&&(p.current+=4,u.current+=10,i(u.current),d(p.current),1))});h.current.length<18;)h.current.push(w(l));k(),"playing"===a&&(n.current=requestAnimationFrame(N))},[j,y,a]),k=()=>{const e=s.current?.getContext("2d");if(!e)return;const t=f.current[0]??{x:0,y:0};g.current={x:g.current.x+.15*(t.x-g.current.x),y:g.current.y+.15*(t.y-g.current.y)};const r=y(),n=Math.max(.6,Math.min(1.4,1.2-p.current/300-r/80));b.current=n,e.save(),e.clearRect(0,0,560,360),e.translate(280,180),e.scale(n,n),e.translate(-g.current.x,-g.current.y),e.fillStyle="#fdf2f8",e.fillRect(g.current.x-560,g.current.y-360,1120,720),h.current.forEach(t=>{e.beginPath(),e.fillStyle="rgba(244, 114, 182, 0.9)",e.arc(t.x,t.y,t.r,0,2*Math.PI),e.fill()}),f.current.forEach((t,s)=>{e.beginPath(),e.fillStyle=0===s?"#9333ea":"#c084fc",e.arc(t.x,t.y,r,0,2*Math.PI),e.fill()}),e.restore()};return r.useEffect(()=>("playing"===a&&(n.current=requestAnimationFrame(N)),()=>{n.current&&cancelAnimationFrame(n.current)}),[a,N]),r.useEffect(()=>{const e=e=>{const t=s.current?.getBoundingClientRect();if(!t||0===f.current.length)return;const r=e.clientX-t.left,n=e.clientY-t.top,a=b.current||1,o=(r-280)/a+g.current.x,l=(n-180)/a+g.current.y,i=f.current[0],c=Math.atan2(l-i.y,o-i.x);m.current+=.18*(c-m.current)},t=e=>{"ArrowLeft"===e.key&&(m.current-=.14),"ArrowRight"===e.key&&(m.current+=.14)},r=s.current;return r?.addEventListener("mousemove",e),window.addEventListener("keydown",t),()=>{r?.removeEventListener("mousemove",e),window.removeEventListener("keydown",t)}},[]),e.jsxs("div",{className:"rounded-3xl border border-pink-100 bg-white/90 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Slither Sprint"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Guide with your mouse or arrow keys. Avoid walls and your tail."})]}),e.jsx("button",{type:"button",onClick:()=>{p.current=20,v(),o("playing")},className:"rounded-full bg-pink-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-pink-600",children:"playing"===a?"Restart":"Start"})]}),e.jsxs("div",{className:"mt-5 grid gap-4 md:grid-cols-[auto,1fr]",children:[e.jsx("canvas",{ref:s,width:560,height:360,className:"rounded-2xl border border-pink-100 bg-pink-50"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-pink-100 bg-pink-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-pink-500",children:"Score"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:l})]}),e.jsxs("div",{className:"rounded-2xl border border-purple-100 bg-purple-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-purple-500",children:"Length"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:c})]}),"over"===a&&e.jsx("div",{className:"rounded-2xl border border-red-100 bg-red-50 px-4 py-3 text-sm text-red-600",children:"Oops! Your snake bumped into something."})]})]})]})}const N=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"})),k=["#f8fafc","#f472b6","#60a5fa","#fbbf24","#34d399","#f87171","#a78bfa","#f97316"],S=(e,t)=>Array.from({length:t},()=>Array(e).fill(0)),C=e=>{switch(e){case"T":return[[0,1,0],[1,1,1],[0,0,0]];case"O":return[[2,2],[2,2]];case"L":return[[0,0,3],[3,3,3],[0,0,0]];case"J":return[[4,0,0],[4,4,4],[0,0,0]];case"I":return[[0,5,0,0],[0,5,0,0],[0,5,0,0],[0,5,0,0]];case"S":return[[0,6,6],[6,6,0],[0,0,0]];case"Z":return[[7,7,0],[0,7,7],[0,0,0]];default:return[[0]]}},M=(e,t)=>{const r=e.map(e=>e.slice());for(let s=0;s<r.length;s+=1)for(let e=0;e<s;e+=1)[r[e][s],r[s][e]]=[r[s][e],r[e][s]];return t>0?r.forEach(e=>e.reverse()):r.reverse(),r};function R({onGameOver:t}){const s=r.useRef(null),n=r.useRef(null),a=r.useRef(0),o=r.useRef(0),l=r.useRef(S(10,20)),i=r.useRef({pos:{x:0,y:0},matrix:C("T")}),[c,d]=r.useState("ready"),[u,p]=r.useState(0),[x,m]=r.useState(0),f=r.useRef(0),h=r.useRef(0),g=r.useCallback(()=>{const e=C("TJLOSZI"[7*Math.random()|0]);i.current.matrix=e,i.current.pos.y=0,i.current.pos.x=5-(e[0].length/2|0),_(l.current,i.current)&&(d("over"),n.current&&cancelAnimationFrame(n.current),t(f.current,{lines:h.current}))},[t]),b=r.useCallback(()=>{l.current=S(10,20),f.current=0,h.current=0,p(0),m(0),g()},[g]),y=(e,t)=>{const r=s.current?.getContext("2d");r&&e.forEach((e,s)=>{e.forEach((e,n)=>{0!==e&&(r.fillStyle=k[e],r.fillRect(24*(n+t.x),24*(s+t.y),23,23))})})},v=r.useCallback(()=>{let e=0;e:for(let t=l.current.length-1;t>=0;t-=1){for(let e=0;e<l.current[t].length;e+=1)if(0===l.current[t][e])continue e;const r=l.current.splice(t,1)[0].fill(0);l.current.unshift(r),t+=1,e+=1}if(e>0){const t=[0,40,100,300,1200];f.current+=5*t[e],h.current+=e,p(f.current),m(h.current)}},[]),w=r.useCallback(()=>{i.current.matrix.forEach((e,t)=>{e.forEach((e,r)=>{0!==e&&(l.current[t+i.current.pos.y][r+i.current.pos.x]=e)})})},[]),j=r.useCallback(()=>{i.current.pos.y+=1,_(l.current,i.current)&&(i.current.pos.y-=1,w(),v(),g()),a.current=0},[w,g,v]),N=r.useCallback((e=0)=>{const t=e-o.current;o.current=e,a.current+=t,a.current>600&&j();const r=s.current?.getContext("2d");r&&(r.fillStyle="#fdf2f8",r.fillRect(0,0,240,480),y(l.current,{x:0,y:0}),y(i.current.matrix,i.current.pos)),"playing"===c&&(n.current=requestAnimationFrame(N))},[j,c]),R=r.useCallback(e=>{if("playing"===c){if("ArrowLeft"===e.key&&(i.current.pos.x-=1,_(l.current,i.current)&&(i.current.pos.x+=1)),"ArrowRight"===e.key&&(i.current.pos.x+=1,_(l.current,i.current)&&(i.current.pos.x-=1)),"ArrowDown"===e.key&&j(),"ArrowUp"===e.key){const e=M(i.current.matrix,1),t=i.current.pos.x;let r=1;for(i.current.matrix=e;_(l.current,i.current);)if(i.current.pos.x+=r,r=-(r+(r>0?1:-1)),r>e[0].length){i.current.matrix=M(e,-1),i.current.pos.x=t;break}}if(" "===e.key){for(;!_(l.current,i.current);)i.current.pos.y+=1;i.current.pos.y-=1,w(),v(),g()}}},[j,w,g,c,v]);return r.useEffect(()=>("playing"===c&&(n.current=requestAnimationFrame(N)),()=>{n.current&&cancelAnimationFrame(n.current)}),[c,N]),r.useEffect(()=>(window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)),[R]),e.jsxs("div",{className:"rounded-3xl border border-purple-100 bg-white/90 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tetris"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Use arrow keys to move and rotate. Spacebar drops fast."})]}),e.jsx("button",{type:"button",onClick:()=>{b(),d("playing")},className:"rounded-full bg-purple-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-purple-600",children:"playing"===c?"Restart":"Start"})]}),e.jsxs("div",{className:"mt-5 grid gap-4 md:grid-cols-[auto,1fr]",children:[e.jsx("canvas",{ref:s,width:240,height:480,className:"rounded-2xl border border-purple-100 bg-pink-50"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-pink-100 bg-pink-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-pink-500",children:"Score"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u})]}),e.jsxs("div",{className:"rounded-2xl border border-purple-100 bg-purple-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-purple-500",children:"Lines Cleared"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:x})]}),"over"===c&&e.jsx("div",{className:"rounded-2xl border border-red-100 bg-red-50 px-4 py-3 text-sm text-red-600",children:"Game over! Hit restart to play again."})]})]})]})}const _=(e,t)=>{for(let r=0;r<t.matrix.length;r+=1)for(let s=0;s<t.matrix[r].length;s+=1)if(0!==t.matrix[r][s]&&0!==(e[r+t.pos.y]&&e[r+t.pos.y][s+t.pos.x]))return!0;return!1},E=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"}));function T({onGameOver:t}){const s=r.useRef(null),n=r.useRef(null),[a,o]=r.useState("ready"),[l,i]=r.useState(0),c=r.useRef(0),d=r.useRef({x:320,y:180,vx:3,vy:2}),u=r.useRef({y:140}),p=r.useRef({y:140}),x=r.useRef({}),m=r.useCallback(()=>{d.current={x:320,y:180,vx:3,vy:2},u.current={y:140},p.current={y:140},c.current=0,i(0)},[]),f=r.useCallback(()=>{o("over"),n.current&&cancelAnimationFrame(n.current),t(c.current,{rallies:c.current})},[t]),h=r.useCallback(()=>{const e=d.current;x.current.w&&(u.current.y-=5),x.current.s&&(u.current.y+=5),x.current.ArrowUp&&(p.current.y-=5),x.current.ArrowDown&&(p.current.y+=5),u.current.y=Math.max(0,Math.min(280,u.current.y)),p.current.y=Math.max(0,Math.min(280,p.current.y)),e.x+=e.vx,e.y+=e.vy,(e.y<=0||e.y>=350)&&(e.vy*=-1);const t=e.x<=22&&e.y+10>=u.current.y&&e.y<=u.current.y+80,r=e.x+10>=618&&e.y+10>=p.current.y&&e.y<=p.current.y+80;t&&e.vx<0&&(e.vx*=-1,c.current+=1,i(c.current)),r&&e.vx>0&&(e.vx*=-1,c.current+=1,i(c.current)),e.x<-10||e.x>650?f():(g(),"playing"===a&&(n.current=requestAnimationFrame(h)))},[f,a]),g=()=>{const e=s.current?.getContext("2d");e&&(e.fillStyle="#fdf2f8",e.fillRect(0,0,640,360),e.fillStyle="#f472b6",e.fillRect(10,u.current.y,12,80),e.fillStyle="#a855f7",e.fillRect(618,p.current.y,12,80),e.fillStyle="#f97316",e.fillRect(d.current.x,d.current.y,10,10))};return r.useEffect(()=>("playing"===a&&(n.current=requestAnimationFrame(h)),()=>{n.current&&cancelAnimationFrame(n.current)}),[a,h]),r.useEffect(()=>{const e=e=>{x.current[e.key]=!0},t=e=>{x.current[e.key]=!1};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),e.jsxs("div",{className:"rounded-3xl border border-purple-100 bg-white/90 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pong Duet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Player 1: W/S • Player 2: ↑/↓. Keep the rally alive."})]}),e.jsx("button",{type:"button",onClick:()=>{m(),o("playing")},className:"rounded-full bg-purple-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-purple-600",children:"playing"===a?"Restart":"Start"})]}),e.jsxs("div",{className:"mt-5 grid gap-4 md:grid-cols-[auto,1fr]",children:[e.jsx("canvas",{ref:s,width:640,height:360,className:"rounded-2xl border border-purple-100 bg-pink-50"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-pink-100 bg-pink-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-pink-500",children:"Rally Score"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:l})]}),"over"===a&&e.jsx("div",{className:"rounded-2xl border border-red-100 bg-red-50 px-4 py-3 text-sm text-red-600",children:"Missed it! Start again to set a new record."})]})]})]})}const O=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"})),A=60;function P({onGameOver:s,sessionRoute:n,sessionMoveRoute:a}){const{props:o}=t(),l=o?.auth?.user?.id,i=r.useRef(null),[c,d]=r.useState(()=>localStorage.getItem("connect-four-session")||""),[u,p]=r.useState(null),[x,m]=r.useState("idle"),f=r.useRef(!1),h=r.useMemo(()=>c?n.replace("SESSION",c):"",[c,n]),g=r.useMemo(()=>c?a.replace("SESSION",c):"",[c,a]),b=r.useCallback(async()=>{if(!h)return;m("loading");const e=await fetch(h,{headers:{Accept:"application/json"}});if(e.ok){const t=await e.json();p(t.session.state),m("ready")}},[h]);r.useEffect(()=>{if(!h)return;b();const e=window.setInterval(b,4e3);return()=>window.clearInterval(e)},[b,h]);const y=r.useCallback(()=>{const e=i.current?.getContext("2d");if(e&&u){e.fillStyle="#fdf2f8",e.fillRect(0,0,420,360);for(let t=0;t<6;t+=1)for(let r=0;r<7;r+=1){e.fillStyle="#fbcfe8",e.fillRect(r*A,t*A,A,A);const s=u.board?.[t]?.[r]??0;e.beginPath(),e.arc(r*A+30,t*A+30,A/2.6,0,2*Math.PI),e.fillStyle=1===s?"#f472b6":2===s?"#a855f7":"#fff7ed",e.fill()}}},[u]);return r.useEffect(()=>{y()},[y]),r.useEffect(()=>{if(!u?.winner||f.current||!l)return;const e=u.winner===l?120:60;f.current=!0,s(e,{winner_id:u.winner??0,moves:u.moves??0,session_id:c})},[l,s,c,u]),e.jsxs("div",{className:"rounded-3xl border border-purple-100 bg-white/90 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Connect Four"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Take turns dropping discs. First to four wins."})]}),e.jsx("button",{type:"button",onClick:()=>{const e=Math.random().toString(36).slice(2,8);localStorage.setItem("connect-four-session",e),f.current=!1,d(e)},className:"rounded-full bg-purple-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-purple-600",children:"New Session"})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),c&&(localStorage.setItem("connect-four-session",c),f.current=!1,b())},className:"mt-4 flex flex-wrap gap-3",children:[e.jsx("input",{value:c,onChange:e=>d(e.target.value),placeholder:"Session code",className:"flex-1 rounded-full border border-pink-100 px-4 py-2 text-sm shadow-sm focus:border-pink-300 focus:ring-2 focus:ring-pink-200"}),e.jsx("button",{type:"submit",className:"rounded-full bg-pink-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-pink-600",children:"Join"})]}),e.jsxs("div",{className:"mt-5 grid gap-4 md:grid-cols-[auto,1fr]",children:[e.jsx("canvas",{ref:i,width:420,height:360,onClick:e=>{if(!u)return;const t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left;(async e=>{g&&u&&(u.winner||l&&u.current_turn_user_id!==l||(await fetch(g,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??""},body:JSON.stringify({action:"drop",column:e})}),await b()))})(Math.floor(r/A))},className:"rounded-2xl border border-purple-100 bg-pink-50"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-pink-100 bg-pink-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-pink-500",children:"Session"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:c||"—"})]}),e.jsxs("div",{className:"rounded-2xl border border-purple-100 bg-purple-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-purple-500",children:"Status"}),e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"loading"===x?"Syncing...":u?.winner?"Game complete":l&&u?.current_turn_user_id===l?"Your turn":"Your space match is live"})]}),u?.winner&&e.jsx("div",{className:"rounded-2xl border border-green-100 bg-green-50 px-4 py-3 text-sm text-green-700",children:"Match finished! Save the score and start a new round."})]})]})]})}const L=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"})),z=420,I=["#f472b6","#a855f7","#f97316","#34d399","#60a5fa","#fbbf24","#f87171","#22c55e"];function G({onGameOver:t}){const s=r.useRef(null),[n,a]=r.useState("ready"),[o,l]=r.useState([]),[i,c]=r.useState(0),[d,u]=r.useState(0),p=r.useRef(null),x=r.useRef([]),m=r.useCallback(()=>{a("over"),p.current&&window.clearInterval(p.current);const e=Math.max(0,1e3-10*d)+20*(8-i);t(Math.max(0,Math.round(e)),{moves:i,time_seconds:d})},[i,t,d]);r.useEffect(()=>("playing"===n&&(p.current=window.setInterval(()=>{u(e=>e+1)},1e3)),()=>{p.current&&window.clearInterval(p.current)}),[n]);const f=r.useCallback(()=>{const e=s.current?.getContext("2d");e&&(e.fillStyle="#fdf2f8",e.fillRect(0,0,z,z),o.forEach((t,r)=>{const s=12+r%4*102,n=12+102*Math.floor(r/4);e.fillStyle=t.faceUp||t.matched?t.color:"#fbcfe8",e.fillRect(s,n,90,90),t.faceUp||t.matched||(e.strokeStyle="#f472b6",e.strokeRect(s,n,90,90))}))},[o]);return r.useEffect(()=>{f()},[f]),r.useEffect(()=>{"playing"===n&&o.length>0&&o.every(e=>e.matched)&&m()},[o,m,n]),e.jsxs("div",{className:"rounded-3xl border border-purple-100 bg-white/90 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Memory Match"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Flip cards, find pairs, and clear the board together."})]}),e.jsx("button",{type:"button",onClick:()=>{l(I.flatMap((e,t)=>[{id:2*t,color:e},{id:2*t+1,color:e}]).sort(()=>Math.random()-.5).map(e=>({...e,matched:!1,faceUp:!1}))),c(0),u(0),x.current=[],a("playing")},className:"rounded-full bg-purple-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-purple-600",children:"playing"===n?"Restart":"Start"})]}),e.jsxs("div",{className:"mt-5 grid gap-4 md:grid-cols-[auto,1fr]",children:[e.jsx("canvas",{ref:s,width:z,height:z,onClick:e=>{if("playing"!==n)return;if(2===x.current.length)return;const t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,s=e.clientY-t.top,a=Math.floor(r/102),i=4*Math.floor(s/102)+a,d=o[i];if(!d||d.matched||d.faceUp)return;const u=o.map((e,t)=>t===i?{...e,faceUp:!0}:e);if(x.current.push(i),l(u),2===x.current.length){c(e=>e+1);const[e,t]=x.current,r=u[e],s=u[t];r.color===s.color?setTimeout(()=>{l(r=>r.map((r,s)=>s===e||s===t?{...r,matched:!0}:r)),x.current=[]},300):setTimeout(()=>{l(r=>r.map((r,s)=>s===e||s===t?{...r,faceUp:!1}:r)),x.current=[]},600)}},className:"rounded-2xl border border-purple-100 bg-pink-50"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-pink-100 bg-pink-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-pink-500",children:"Moves"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:i})]}),e.jsxs("div",{className:"rounded-2xl border border-purple-100 bg-purple-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-purple-500",children:"Time"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[d,"s"]})]}),"over"===n&&e.jsx("div",{className:"rounded-2xl border border-red-100 bg-red-50 px-4 py-3 text-sm text-red-600",children:"Nice teamwork! Match again to beat the clock."})]})]})]})}const q=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"})),D=40,F=["############","#....#.....#","#.#.##.###.#","#.#....#...#","#.####.#.#.#","#....#...#.#","###.#.###..#","#....#.....#","############"];function U({onGameOver:t}){const s=r.useRef(null),[n,a]=r.useState("ready"),[o,l]=r.useState(0),[i,c]=r.useState(0),d=r.useRef([{x:1,y:1,color:"#f472b6"},{x:10,y:7,color:"#a855f7"}]),u=r.useRef(null),p=(e,t)=>"#"===F[t]?.[e],x=r.useCallback(()=>{const e=s.current?.getContext("2d");if(e){e.fillStyle="#fdf2f8",e.fillRect(0,0,480,360);for(let t=0;t<9;t+=1)for(let r=0;r<12;r+=1)p(r,t)&&(e.fillStyle="#fbcfe8",e.fillRect(r*D,t*D,D,D));e.fillStyle="#34d399",e.fillRect(200,140,80,80),d.current.forEach(t=>{e.fillStyle=t.color,e.beginPath(),e.arc(t.x*D+20,t.y*D+20,D/3,0,2*Math.PI),e.fill()})}},[]),m=r.useCallback(()=>{a("over"),u.current&&window.clearInterval(u.current);const e=Math.max(0,800-5*o-2*i);t(Math.round(e),{time_seconds:o,steps:i})},[t,i,o]);r.useEffect(()=>{x()},[x,n,o]),r.useEffect(()=>("playing"===n&&(u.current=window.setInterval(()=>{l(e=>e+1)},1e3)),()=>{u.current&&window.clearInterval(u.current)}),[n]);const f=r.useCallback((e,t,r)=>{c(e=>e+1),d.current=d.current.map((s,n)=>{if(n!==e)return s;const a=s.x+t,o=s.y+r;return p(a,o)?s:{...s,x:a,y:o}}),x();d.current.every(e=>e.x>=5&&e.x<=6&&e.y>=3.5&&e.y<=4.5)&&m()},[x,m]);return r.useEffect(()=>{const e=e=>{if("playing"===n)switch(e.key){case"w":case"W":f(0,0,-1);break;case"s":case"S":f(0,0,1);break;case"a":case"A":f(0,-1,0);break;case"d":case"D":f(0,1,0);break;case"ArrowUp":f(1,0,-1);break;case"ArrowDown":f(1,0,1);break;case"ArrowLeft":f(1,-1,0);break;case"ArrowRight":f(1,1,0)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,n]),e.jsxs("div",{className:"rounded-3xl border border-purple-100 bg-white/90 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Co-op Maze Escape"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Guide both avatars to the glowing exit together."})]}),e.jsx("button",{type:"button",onClick:()=>{d.current=[{x:1,y:1,color:"#f472b6"},{x:10,y:7,color:"#a855f7"}],l(0),c(0),a("playing")},className:"rounded-full bg-purple-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-purple-600",children:"playing"===n?"Restart":"Start"})]}),e.jsxs("div",{className:"mt-5 grid gap-4 md:grid-cols-[auto,1fr]",children:[e.jsx("canvas",{ref:s,width:480,height:360,className:"rounded-2xl border border-purple-100 bg-pink-50"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-pink-100 bg-pink-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-pink-500",children:"Time"}),e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:[o,"s"]})]}),e.jsxs("div",{className:"rounded-2xl border border-purple-100 bg-purple-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-purple-500",children:"Steps"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:i})]}),"over"===n&&e.jsx("div",{className:"rounded-2xl border border-green-100 bg-green-50 px-4 py-3 text-sm text-green-700",children:"You escaped together! Try for a faster time."})]})]})]})}const $=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));function Y({onGameOver:s,sessionRoute:n,sessionMoveRoute:a}){const{props:o}=t(),l=o?.auth?.user?.id,[i,c]=r.useState(()=>localStorage.getItem("couple-quiz-session")||""),[d,u]=r.useState(null),[p,x]=r.useState(""),[m,f]=r.useState(""),[h,g]=r.useState(""),b=r.useRef(0),y=r.useMemo(()=>i?n.replace("SESSION",i):"",[i,n]),v=r.useMemo(()=>i?a.replace("SESSION",i):"",[i,a]),w=r.useCallback(async()=>{if(!y)return;const e=await fetch(y,{headers:{Accept:"application/json"}});if(e.ok){const t=await e.json();u(t.session.state)}},[y]);r.useEffect(()=>{if(!y)return;w();const e=window.setInterval(w,4e3);return()=>window.clearInterval(e)},[w,y]),r.useEffect(()=>{if(!d?.rounds||d.rounds<=b.current)return;if("result"!==d.phase)return;b.current=d.rounds;const e=d.is_match?80:40;s(e,{session_id:i,round:d.rounds,is_match:d.is_match?1:0})},[s,i,d]);const j=async e=>{v&&(await fetch(v,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??""},body:JSON.stringify(e)}),await w())},N=l&&d?.current_turn_user_id===l;return e.jsxs("div",{className:"rounded-3xl border border-purple-100 bg-white/90 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Couple Quiz"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ask a sweet question, then let your partner answer."})]}),e.jsx("button",{type:"button",onClick:()=>{const e=Math.random().toString(36).slice(2,8);localStorage.setItem("couple-quiz-session",e),b.current=0,c(e)},className:"rounded-full bg-purple-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-purple-600",children:"New Session"})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),i&&(localStorage.setItem("couple-quiz-session",i),b.current=0,w())},className:"mt-4 flex flex-wrap gap-3",children:[e.jsx("input",{value:i,onChange:e=>c(e.target.value),placeholder:"Session code",className:"flex-1 rounded-full border border-pink-100 px-4 py-2 text-sm shadow-sm focus:border-pink-300 focus:ring-2 focus:ring-pink-200"}),e.jsx("button",{type:"submit",className:"rounded-full bg-pink-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-pink-600",children:"Join"})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-pink-100 bg-pink-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-pink-500",children:"Session"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i||"—"})]}),"ask"===d?.phase&&e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),await j({action:"ask",prompt:p,answer:m}),x(""),f("")},className:"space-y-3",children:[e.jsx("input",{value:p,onChange:e=>x(e.target.value),placeholder:"Ask something fun",className:"w-full rounded-2xl border border-pink-100 px-4 py-2 text-sm shadow-sm focus:border-pink-300 focus:ring-2 focus:ring-pink-200",required:!0,disabled:!N}),e.jsx("input",{value:m,onChange:e=>f(e.target.value),placeholder:"Your answer",className:"w-full rounded-2xl border border-purple-100 px-4 py-2 text-sm shadow-sm focus:border-purple-300 focus:ring-2 focus:ring-purple-200",required:!0,disabled:!N}),e.jsx("button",{type:"submit",disabled:!N,className:"rounded-full bg-purple-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-purple-600 disabled:opacity-50",children:"Share with partner"})]}),"guess"===d?.phase&&e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),await j({action:"guess",guess:h}),g("")},className:"space-y-3",children:[e.jsx("div",{className:"rounded-2xl border border-purple-100 bg-white/80 px-4 py-3 text-sm text-gray-700",children:d.prompt||"Waiting for a question..."}),e.jsx("input",{value:h,onChange:e=>g(e.target.value),placeholder:"Your guess",className:"w-full rounded-2xl border border-pink-100 px-4 py-2 text-sm shadow-sm focus:border-pink-300 focus:ring-2 focus:ring-pink-200",required:!0,disabled:!N}),e.jsx("button",{type:"submit",disabled:!N,className:"rounded-full bg-pink-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-pink-600 disabled:opacity-50",children:"Submit guess"})]}),"result"===d?.phase&&e.jsxs("div",{className:"rounded-2xl border border-green-100 bg-green-50 px-4 py-4 text-sm text-green-700 space-y-2",children:[e.jsx("div",{children:d.is_match?"Perfect match!":"Close! Try another question."}),e.jsxs("div",{className:"text-xs text-green-600",children:["Answer: ",d.answer]}),e.jsx("button",{type:"button",onClick:async()=>{await j({action:"reset"})},className:"rounded-full bg-green-500 px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-green-600",children:"Next round"})]})]})]})}const W=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"})),J=Object.freeze(Object.defineProperty({__proto__:null,default:function({game:t,scoreRoute:n,leaderboardRoute:o,sessionRoute:l,sessionMoveRoute:i}){const[c,d]=r.useState(null),[u,p]=r.useState(null),[x,m]=r.useState("idle"),f=r.useCallback(async()=>{const e=await fetch(o,{headers:{Accept:"application/json"}});if(e.ok){const t=await e.json();d(t)}},[o]);r.useEffect(()=>{f()},[f]);const h=r.useMemo(()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",[]),g=r.useCallback(async(e,t)=>{p(e),m("saving");try{if(!(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":h,Accept:"application/json"},body:JSON.stringify({score:e,meta:t})})).ok)throw new Error("Score save failed");m("saved"),await f()}catch(r){m("error")}},[h,f,n]),y=c?.partner_best?.score??"—",v=c?.personal_best??"—",w=["connect-four","couple-quiz"].includes(t.slug),N=r.useMemo(()=>{switch(t.slug){case"tetris":return e.jsx(R,{onGameOver:g});case"slither":return e.jsx(j,{onGameOver:g});case"pong-duet":return e.jsx(T,{onGameOver:g});case"connect-four":return e.jsx(P,{onGameOver:g,sessionRoute:l,sessionMoveRoute:i});case"memory-match":return e.jsx(G,{onGameOver:g});case"maze-escape":return e.jsx(U,{onGameOver:g});case"couple-quiz":return e.jsx(Y,{onGameOver:g,sessionRoute:l,sessionMoveRoute:i});default:return e.jsx("div",{className:"rounded-3xl border border-dashed border-purple-200 bg-white/70 p-8 text-center text-sm text-gray-500",children:"This game is coming soon. Check back for new updates!"})}},[t.slug,i,l,g]);return e.jsxs(b,{children:[e.jsx(a,{title:t.name}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{href:route("games.index"),className:"text-sm font-semibold text-pink-500 hover:text-pink-600",children:"← Back to Games Hub"}),e.jsx("h1",{className:"mt-2 text-3xl font-semibold text-gray-900",children:t.name}),t.description&&e.jsx("p",{className:"mt-2 text-gray-600",children:t.description})]}),e.jsxs("div",{className:"rounded-2xl border border-purple-100 bg-white/90 px-4 py-3 text-sm text-gray-600 shadow-sm",children:["Our Records are private to your Space.",t.supports_multiplayer&&e.jsx("div",{className:"mt-1 text-xs text-purple-500",children:"Multiplayer mode is ready for your partner."}),w&&e.jsx("div",{className:"mt-1 text-xs text-purple-500",children:"Share a session code to take turns together."})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr,1fr]",children:[e.jsxs("div",{className:"space-y-6",children:[N,e.jsxs("div",{className:"rounded-3xl border border-pink-100 bg-white/90 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Game Recap"}),e.jsxs("div",{className:"mt-4 grid gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-pink-100 bg-pink-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-pink-500",children:"Latest Score"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u??"—"})]}),e.jsxs("div",{className:"rounded-2xl border border-purple-100 bg-purple-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-purple-500",children:"Your Best"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:v})]}),e.jsxs("div",{className:"rounded-2xl border border-indigo-100 bg-indigo-50 px-4 py-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-indigo-500",children:"Partner High"}),e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:y})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["saving"===x&&"Saving your score...","saved"===x&&"Score saved to your space leaderboard.","error"===x&&"Unable to save your score. Try again after your next round."]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-3xl border border-purple-100 bg-white/90 p-6 shadow-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Our Records"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Space Scores between you and your partner."}),e.jsx("div",{className:"mt-4 space-y-3",children:c?.scores?.length?c.scores.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-pink-100 bg-pink-50 px-4 py-3 text-sm",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:["#",r+1," ",t.user_name]}),e.jsx("div",{className:"text-xs text-gray-500",children:t.created_at?new Date(t.created_at).toLocaleString():""})]}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:t.score})]},t.id)):e.jsx("div",{className:"rounded-2xl border border-dashed border-purple-200 bg-purple-50 px-4 py-6 text-center text-sm text-gray-500",children:"No scores yet. Start a match to set the first record."})})]}),c?.partner_best?.user_name&&e.jsxs("div",{className:"rounded-3xl border border-indigo-100 bg-indigo-50/70 p-6 text-sm text-indigo-700",children:[c.partner_best.user_name,"'s"," best score is ",y,". Can you beat it?"]})]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));export{x as A,L as C,v as I,q as M,O as P,N as S,E as T,b as a,$ as b,W as c,J as d,f as u};
