import{ag as e,ah as t,ai as i,aj as n}from"./vendor-CMS1sWg9.js";function r(e,t){let i;return function(...n){clearTimeout(i),i=setTimeout(()=>e.apply(this,n),t)}}function s(e,t){return document.dispatchEvent(new CustomEvent(`inertia:${e}`,t))}var o=e=>s("finish",{detail:{visit:e}}),a=e=>s("navigate",{detail:{page:e}});function l(e){return e instanceof File||e instanceof Blob||e instanceof FileList&&e.length>0||e instanceof FormData&&Array.from(e.values()).some(e=>l(e))||"object"==typeof e&&null!==e&&Object.values(e).some(e=>l(e))}function c(e,t=new FormData,i=null){e=e||{};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&h(t,d(i,n),e[n]);return t}function d(e,t){return e?e+"["+t+"]":t}function h(e,t,i){return Array.isArray(i)?Array.from(i.keys()).forEach(n=>h(e,d(t,n.toString()),i[n])):i instanceof Date?e.append(t,i.toISOString()):i instanceof File?e.append(t,i,i.name):i instanceof Blob?e.append(t,i):"boolean"==typeof i?e.append(t,i?"1":"0"):"string"==typeof i?e.append(t,i):"number"==typeof i?e.append(t,`${i}`):null==i?e.append(t,""):void c(i,e,t)}var p={modal:null,listener:null,show(e){"object"==typeof e&&(e=`All Inertia requests must receive a valid Inertia response, however a plain JSON response was received.<hr>${JSON.stringify(e)}`);let t=document.createElement("html");t.innerHTML=e,t.querySelectorAll("a").forEach(e=>e.setAttribute("target","_top")),this.modal=document.createElement("div"),this.modal.style.position="fixed",this.modal.style.width="100vw",this.modal.style.height="100vh",this.modal.style.padding="50px",this.modal.style.boxSizing="border-box",this.modal.style.backgroundColor="rgba(0, 0, 0, .6)",this.modal.style.zIndex=2e5,this.modal.addEventListener("click",()=>this.hide());let i=document.createElement("iframe");if(i.style.backgroundColor="white",i.style.borderRadius="5px",i.style.width="100%",i.style.height="100%",this.modal.appendChild(i),document.body.prepend(this.modal),document.body.style.overflow="hidden",!i.contentWindow)throw new Error("iframe not yet ready.");i.contentWindow.document.open(),i.contentWindow.document.write(t.outerHTML),i.contentWindow.document.close(),this.listener=this.hideOnEscape.bind(this),document.addEventListener("keydown",this.listener)},hide(){this.modal.outerHTML="",this.modal=null,document.body.style.overflow="visible",document.removeEventListener("keydown",this.listener)},hideOnEscape(e){27===e.keyCode&&this.hide()}};function u(e){return new URL(e.toString(),window.location.toString())}function m(e,n,r,s="brackets"){let o=/^https?:\/\//.test(n.toString()),a=o||n.toString().startsWith("/"),l=!a&&!n.toString().startsWith("#")&&!n.toString().startsWith("?"),c=n.toString().includes("?")||"get"===e&&Object.keys(r).length,d=n.toString().includes("#"),h=new URL(n.toString(),"http://localhost");return"get"===e&&Object.keys(r).length&&(h.search=t.stringify(i(t.parse(h.search,{ignoreQueryPrefix:!0}),r),{encodeValuesOnly:!0,arrayFormat:s}),r={}),[[o?`${h.protocol}//${h.host}`:"",a?h.pathname:"",l?h.pathname.substring(1):"",c?h.search:"",d?h.hash:""].join(""),r]}function g(e){return(e=new URL(e.href)).hash="",e}var f=typeof window>"u",v=!f&&/CriOS/.test(window.navigator.userAgent),w=e=>{requestAnimationFrame(()=>{requestAnimationFrame(e)})},y={buildDOMElement(e){let t=document.createElement("template");t.innerHTML=e;let i=t.content.firstChild;if(!e.startsWith("<script "))return i;let n=document.createElement("script");return n.innerHTML=i.innerHTML,i.getAttributeNames().forEach(e=>{n.setAttribute(e,i.getAttribute(e)||"")}),n},isInertiaManagedElement:e=>e.nodeType===Node.ELEMENT_NODE&&null!==e.getAttribute("inertia"),findMatchingElementIndex(e,t){let i=e.getAttribute("inertia");return null!==i?t.findIndex(e=>e.getAttribute("inertia")===i):-1},update:r(function(e){let t=e.map(e=>this.buildDOMElement(e));Array.from(document.head.childNodes).filter(e=>this.isInertiaManagedElement(e)).forEach(e=>{let i=this.findMatchingElementIndex(e,t);if(-1===i)return void e?.parentNode?.removeChild(e);let n=t.splice(i,1)[0];n&&!e.isEqualNode(n)&&e?.parentNode?.replaceChild(n,e)}),t.forEach(e=>document.head.appendChild(e))},1)};function S(e,t,i){let n={},r=0;function s(){let e=t(""),i={...e?{title:`<title inertia="">${e}</title>`}:{}},r=Object.values(n).reduce((e,t)=>e.concat(t),[]).reduce((e,i)=>{if(-1===i.indexOf("<"))return e;if(0===i.indexOf("<title ")){let n=i.match(/(<title [^>]+>)(.*?)(<\/title>)/);return e.title=n?`${n[1]}${t(n[2])}${n[3]}`:i,e}let n=i.match(/ inertia="[^"]+"/);return n?e[n[0]]=i:e[Object.keys(e).length]=i,e},i);return Object.values(r)}function o(){e?i(s()):y.update(s())}return o(),{forceUpdate:o,createProvider:function(){let e=function(){let e=r+=1;return n[e]=[],e.toString()}();return{update:t=>function(e,t=[]){null!==e&&Object.keys(n).indexOf(e)>-1&&(n[e]=t),o()}(e,t),disconnect:()=>function(e){null===e||-1===Object.keys(n).indexOf(e)||(delete n[e],o())}(e)}}}}var b=null;function E(e){document.addEventListener("inertia:start",x.bind(null,e)),document.addEventListener("inertia:progress",V),document.addEventListener("inertia:finish",P)}function x(e){b=setTimeout(()=>n.start(),e)}function V(e){n.isStarted()&&e.detail.progress?.percentage&&n.set(Math.max(n.status,e.detail.progress.percentage/100*.9))}function P(e){clearTimeout(b),n.isStarted()&&(e.detail.visit.completed?n.done():e.detail.visit.interrupted?n.set(0):e.detail.visit.cancelled&&(n.done(),n.remove()))}function I({delay:e=250,color:t="#29d",includeCSS:i=!0,showSpinner:r=!1}={}){E(e),n.configure({showSpinner:r}),i&&function(e){let t=document.createElement("style");t.type="text/css",t.textContent=`\n    #nprogress {\n      pointer-events: none;\n    }\n\n    #nprogress .bar {\n      background: ${e};\n\n      position: fixed;\n      z-index: 1031;\n      top: 0;\n      left: 0;\n\n      width: 100%;\n      height: 2px;\n    }\n\n    #nprogress .peg {\n      display: block;\n      position: absolute;\n      right: 0px;\n      width: 100px;\n      height: 100%;\n      box-shadow: 0 0 10px ${e}, 0 0 5px ${e};\n      opacity: 1.0;\n\n      -webkit-transform: rotate(3deg) translate(0px, -4px);\n          -ms-transform: rotate(3deg) translate(0px, -4px);\n              transform: rotate(3deg) translate(0px, -4px);\n    }\n\n    #nprogress .spinner {\n      display: block;\n      position: fixed;\n      z-index: 1031;\n      top: 15px;\n      right: 15px;\n    }\n\n    #nprogress .spinner-icon {\n      width: 18px;\n      height: 18px;\n      box-sizing: border-box;\n\n      border: solid 2px transparent;\n      border-top-color: ${e};\n      border-left-color: ${e};\n      border-radius: 50%;\n\n      -webkit-animation: nprogress-spinner 400ms linear infinite;\n              animation: nprogress-spinner 400ms linear infinite;\n    }\n\n    .nprogress-custom-parent {\n      overflow: hidden;\n      position: relative;\n    }\n\n    .nprogress-custom-parent #nprogress .spinner,\n    .nprogress-custom-parent #nprogress .bar {\n      position: absolute;\n    }\n\n    @-webkit-keyframes nprogress-spinner {\n      0%   { -webkit-transform: rotate(0deg); }\n      100% { -webkit-transform: rotate(360deg); }\n    }\n    @keyframes nprogress-spinner {\n      0%   { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  `,document.head.appendChild(t)}(t)}function L(e){let t="a"===e.currentTarget.tagName.toLowerCase();return!(e.target&&(e?.target).isContentEditable||e.defaultPrevented||t&&e.altKey||t&&e.ctrlKey||t&&e.metaKey||t&&e.shiftKey||t&&"button"in e&&0!==e.button)}var k=new class{constructor(){this.visitId=null}init({initialPage:e,resolveComponent:t,swapComponent:i}){this.page=e,this.resolveComponent=t,this.swapComponent=i,this.setNavigationType(),this.clearRememberedStateOnReload(),this.isBackForwardVisit()?this.handleBackForwardVisit(this.page):this.isLocationVisit()?this.handleLocationVisit(this.page):this.handleInitialPageVisit(this.page),this.setupEventListeners()}setNavigationType(){this.navigationType=window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("navigation").length>0?window.performance.getEntriesByType("navigation")[0].type:"navigate"}clearRememberedStateOnReload(){"reload"===this.navigationType&&window.history.state?.rememberedState&&delete window.history.state.rememberedState}handleInitialPageVisit(e){let t=window.location.hash;this.page.url.includes(t)||(this.page.url+=t),this.setPage(e,{preserveScroll:!0,preserveState:!0}).then(()=>a(e))}setupEventListeners(){window.addEventListener("popstate",this.handlePopstateEvent.bind(this)),document.addEventListener("scroll",r(this.handleScrollEvent.bind(this),100),!0)}scrollRegions(){return document.querySelectorAll("[scroll-region]")}handleScrollEvent(e){"function"==typeof e.target.hasAttribute&&e.target.hasAttribute("scroll-region")&&this.saveScrollPositions()}saveScrollPositions(){this.replaceState({...this.page,scrollRegions:Array.from(this.scrollRegions()).map(e=>({top:e.scrollTop,left:e.scrollLeft}))})}resetScrollPositions(){w(()=>{window.scrollTo(0,0),this.scrollRegions().forEach(e=>{"function"==typeof e.scrollTo?e.scrollTo(0,0):(e.scrollTop=0,e.scrollLeft=0)}),this.saveScrollPositions(),window.location.hash&&document.getElementById(window.location.hash.slice(1))?.scrollIntoView()})}restoreScrollPositions(){w(()=>{this.page.scrollRegions&&this.scrollRegions().forEach((e,t)=>{let i=this.page.scrollRegions[t];i&&("function"==typeof e.scrollTo?e.scrollTo(i.left,i.top):(e.scrollTop=i.top,e.scrollLeft=i.left))})})}isBackForwardVisit(){return window.history.state&&"back_forward"===this.navigationType}handleBackForwardVisit(e){window.history.state.version=e.version,this.setPage(window.history.state,{preserveScroll:!0,preserveState:!0}).then(()=>{this.restoreScrollPositions(),a(e)})}locationVisit(e,t){try{let i={preserveScroll:t};window.sessionStorage.setItem("inertiaLocationVisit",JSON.stringify(i)),window.location.href=e.href,g(window.location).href===g(e).href&&window.location.reload()}catch{return!1}}isLocationVisit(){try{return null!==window.sessionStorage.getItem("inertiaLocationVisit")}catch{return!1}}handleLocationVisit(e){let t=JSON.parse(window.sessionStorage.getItem("inertiaLocationVisit")||"");window.sessionStorage.removeItem("inertiaLocationVisit"),e.url+=window.location.hash,e.rememberedState=window.history.state?.rememberedState??{},e.scrollRegions=window.history.state?.scrollRegions??[],this.setPage(e,{preserveScroll:t.preserveScroll,preserveState:!0}).then(()=>{t.preserveScroll&&this.restoreScrollPositions(),a(e)})}isLocationVisitResponse(e){return!(!e||409!==e.status||!e.headers["x-inertia-location"])}isInertiaResponse(e){return!!e?.headers["x-inertia"]}createVisitId(){return this.visitId={},this.visitId}cancelVisit(e,{cancelled:t=!1,interrupted:i=!1}){e&&!e.completed&&!e.cancelled&&!e.interrupted&&(e.cancelToken.abort(),e.onCancel(),e.completed=!1,e.cancelled=t,e.interrupted=i,o(e),e.onFinish(e))}finishVisit(e){!e.cancelled&&!e.interrupted&&(e.completed=!0,e.cancelled=!1,e.interrupted=!1,o(e),e.onFinish(e))}resolvePreserveOption(e,t){return"function"==typeof e?e(t):"errors"===e?Object.keys(t.props.errors||{}).length>0:e}cancel(){this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}visit(t,{method:i="get",data:n={},replace:r=!1,preserveScroll:o=!1,preserveState:a=!1,only:d=[],except:h=[],headers:f={},errorBag:v="",forceFormData:w=!1,onCancelToken:y=()=>{},onBefore:S=()=>{},onStart:b=()=>{},onProgress:E=()=>{},onFinish:x=()=>{},onCancel:V=()=>{},onSuccess:P=()=>{},onError:I=()=>{},queryStringArrayFormat:L="brackets"}={}){let k="string"==typeof t?u(t):t;if((l(n)||w)&&!(n instanceof FormData)&&(n=c(n)),!(n instanceof FormData)){let[e,t]=m(i,k,n,L);k=u(e),n=t}let T={url:k,method:i,data:n,replace:r,preserveScroll:o,preserveState:a,only:d,except:h,headers:f,errorBag:v,forceFormData:w,queryStringArrayFormat:L,cancelled:!1,completed:!1,interrupted:!1};if(!1===S(T)||!s("before",{cancelable:!0,detail:{visit:T}}))return;this.activeVisit&&this.cancelVisit(this.activeVisit,{interrupted:!0}),this.saveScrollPositions();let O=this.createVisitId();this.activeVisit={...T,onCancelToken:y,onBefore:S,onStart:b,onProgress:E,onFinish:x,onCancel:V,onSuccess:P,onError:I,queryStringArrayFormat:L,cancelToken:new AbortController},y({cancel:()=>{this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}}),s("start",{detail:{visit:T}}),b(T);let C=!(!d.length&&!h.length);e({method:i,url:g(k).href,data:"get"===i?{}:n,params:"get"===i?n:{},signal:this.activeVisit.cancelToken.signal,headers:{...f,Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Inertia":!0,...C?{"X-Inertia-Partial-Component":this.page.component}:{},...d.length?{"X-Inertia-Partial-Data":d.join(",")}:{},...h.length?{"X-Inertia-Partial-Except":h.join(",")}:{},...v&&v.length?{"X-Inertia-Error-Bag":v}:{},...this.page.version?{"X-Inertia-Version":this.page.version}:{}},onUploadProgress:e=>{n instanceof FormData&&(e.percentage=e.progress?Math.round(100*e.progress):0,(e=>{s("progress",{detail:{progress:e}})})(e),E(e))}}).then(e=>{if(!this.isInertiaResponse(e))return Promise.reject({response:e});let t=e.data;C&&t.component===this.page.component&&(t.props={...this.page.props,...t.props}),o=this.resolvePreserveOption(o,t),(a=this.resolvePreserveOption(a,t))&&window.history.state?.rememberedState&&t.component===this.page.component&&(t.rememberedState=window.history.state.rememberedState);let i=k,n=u(t.url);return i.hash&&!n.hash&&g(i).href===n.href&&(n.hash=i.hash,t.url=n.href),this.setPage(t,{visitId:O,replace:r,preserveScroll:o,preserveState:a})}).then(()=>{let e=this.page.props.errors||{};if(Object.keys(e).length>0){let t=v?e[v]?e[v]:{}:e;return(e=>{s("error",{detail:{errors:e}})})(t),I(t)}return(()=>{s("success",{detail:{page:this.page}})})(),P(this.page)}).catch(e=>{if(this.isInertiaResponse(e.response))return this.setPage(e.response.data,{visitId:O});if(this.isLocationVisitResponse(e.response)){let t=u(e.response.headers["x-inertia-location"]),i=k;i.hash&&!t.hash&&g(i).href===t.href&&(t.hash=i.hash),this.locationVisit(t,!0===o)}else{if(!e.response)return Promise.reject(e);(e=>s("invalid",{cancelable:!0,detail:{response:e}}))(e.response)&&p.show(e.response.data)}}).then(()=>{this.activeVisit&&this.finishVisit(this.activeVisit)}).catch(t=>{if(!e.isCancel(t)){let e=(e=>s("exception",{cancelable:!0,detail:{exception:e}}))(t);if(this.activeVisit&&this.finishVisit(this.activeVisit),e)return Promise.reject(t)}})}setPage(e,{visitId:t=this.createVisitId(),replace:i=!1,preserveScroll:n=!1,preserveState:r=!1}={}){return Promise.resolve(this.resolveComponent(e.component)).then(s=>{t===this.visitId&&(e.scrollRegions=this.page.scrollRegions||[],e.rememberedState=e.rememberedState||{},(i=i||u(e.url).href===window.location.href)?this.replaceState(e):this.pushState(e),this.swapComponent({component:s,page:e,preserveState:r}).then(()=>{n?this.restoreScrollPositions():this.resetScrollPositions(),i||a(e)}))})}pushState(e){this.page=e,v?setTimeout(()=>window.history.pushState(e,"",e.url)):window.history.pushState(e,"",e.url)}replaceState(e){this.page=e,v?setTimeout(()=>window.history.replaceState(e,"",e.url)):window.history.replaceState(e,"",e.url)}handlePopstateEvent(e){if(null!==e.state){let t=e.state,i=this.createVisitId();Promise.resolve(this.resolveComponent(t.component)).then(e=>{i===this.visitId&&(this.page=t,this.swapComponent({component:e,page:t,preserveState:!1}).then(()=>{this.restoreScrollPositions(),a(t)}))})}else{let e=u(this.page.url);e.hash=window.location.hash,this.replaceState({...this.page,url:e.href}),this.resetScrollPositions()}}get(e,t={},i={}){return this.visit(e,{...i,method:"get",data:t})}reload(e={}){return this.visit(window.location.href,{...e,preserveScroll:!0,preserveState:!0})}replace(e,t={}){return this.visit(e,{preserveState:!0,...t,replace:!0})}post(e,t={},i={}){return this.visit(e,{preserveState:!0,...i,method:"post",data:t})}put(e,t={},i={}){return this.visit(e,{preserveState:!0,...i,method:"put",data:t})}patch(e,t={},i={}){return this.visit(e,{preserveState:!0,...i,method:"patch",data:t})}delete(e,t={}){return this.visit(e,{preserveState:!0,...t,method:"delete"})}remember(e,t="default"){f||this.replaceState({...this.page,rememberedState:{...this.page?.rememberedState,[t]:e}})}restore(e="default"){if(!f)return window.history.state?.rememberedState?.[e]}on(e,t){if(f)return()=>{};let i=e=>{let i=t(e);e.cancelable&&!e.defaultPrevented&&!1===i&&e.preventDefault()};return document.addEventListener(`inertia:${e}`,i),()=>document.removeEventListener(`inertia:${e}`,i)}};export{m as D,k as N,S as e,I as i,L as r};
