import{r as e,j as t}from"./vendor-DXr22Lef.js";import{b as s}from"./games-RZpJ1ixc.js";import{G as a,S as i,x as l}from"./inertia-2axaVlnj.js";import{u as o}from"./useCurrentSpace-CdnheA8Y.js";import{S as r,e as n,P as d,d as c,X as x,U as m,A as v}from"./ui-libs-D5k9l7B7.js";import"./animation-H0tefZHq.js";function p({countdown:p}){const u=o();if(!u)return null;const h=u.slug,b=u.title,f=e.useMemo(()=>Array.isArray(p?.activities)?p.activities.filter(e=>"string"==typeof e):[],[p?.activities]),g=a({event_name:p?.event_name??"",event_date:p?.event_date?new Date(p.event_date).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],description:p?.description??"",activities:f,image:null,_method:"PUT"}),{data:j,setData:N,post:y,processing:w,errors:k,clearErrors:_}=g,[C,U]=e.useState(null);e.useEffect(()=>()=>{C&&URL.revokeObjectURL(C)},[C]);const S=p?.image?`/storage/${p.image}`:null,A=C??S,P={"--love-hover-color":"#6b7280"},E={"--love-hover-color":"#ef4444"},L=e.useMemo(()=>j.activities.length>0,[j.activities.length]);return t.jsxs(s,{loveCursor:{color:"#8b5cf6",heartCount:38,className:"opacity-55"},header:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(l,{href:route("countdown.index",{space:h}),className:"rounded-lg p-2 transition hover:bg-gray-100",children:t.jsx(v,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-violet-900",children:"Edit Event Spesial"}),t.jsxs("p",{className:"text-sm text-violet-500",children:["Perbarui countdown romantis untuk space ",b]})]})]}),children:[t.jsx(i,{title:`Edit Countdown - ${b}`}),t.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-violet-50 via-white to-fuchsia-50 py-10 px-4 sm:px-6 lg:px-8",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_#ede9fe_0,_transparent_45%)] opacity-50"}),t.jsx("div",{className:"relative mx-auto w-full max-w-4xl",children:t.jsxs("form",{onSubmit:e=>{e.preventDefault(),_(),g.transform(e=>{const t=e.activities.map(e=>e.trim()).filter(e=>e.length>0),s={...e,activities:t};return e.image instanceof File||delete s.image,s}),y(route("countdown.update",{space:h,id:p.id}),{forceFormData:!0})},className:"relative z-10 space-y-10 rounded-[30px] border border-violet-100 bg-white/85 p-8 shadow-xl backdrop-blur-sm md:p-10",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-violet-200 bg-violet-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.32em] text-violet-500",children:[t.jsx(r,{className:"h-3 w-3"}),"Detail Event"]}),t.jsx("h2",{className:"text-2xl font-semibold text-violet-900",children:"Update informasi utama"}),t.jsx("p",{className:"text-sm text-violet-500",children:"Perbaiki nama event, tanggal spesial, dan deskripsi biar kalian tetap excited nunggu momennya."})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold text-violet-900",children:"Nama Event"}),t.jsx("input",{type:"text",value:j.event_name,onChange:e=>N("event_name",e.target.value),className:"w-full rounded-2xl border border-violet-200 bg-white px-4 py-3 text-sm text-violet-900 shadow-sm transition focus:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-200",placeholder:"Contoh: Anniversary ke-3"}),k.event_name&&t.jsx("p",{className:"text-xs text-rose-500",children:k.event_name})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold text-violet-900",children:"Tanggal Event"}),t.jsxs("div",{className:"relative",children:[t.jsx(n,{className:"pointer-events-none absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-violet-400"}),t.jsx("input",{type:"date",value:j.event_date,onChange:e=>N("event_date",e.target.value),className:"w-full rounded-2xl border border-violet-200 bg-white px-10 py-3 text-sm text-violet-900 shadow-sm transition focus:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-200"})]}),k.event_date&&t.jsx("p",{className:"text-xs text-rose-500",children:k.event_date})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold text-violet-900",children:"Deskripsi Singkat"}),t.jsx("textarea",{value:j.description,onChange:e=>N("description",e.target.value),rows:4,className:"w-full rounded-2xl border border-violet-200 bg-white px-4 py-3 text-sm text-violet-900 shadow-sm transition focus:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-200",placeholder:"Ceritakan sedikit tentang event ini dan kenapa kamu excited."}),k.description&&t.jsx("p",{className:"text-xs text-rose-500",children:k.description})]}),t.jsxs("div",{className:"space-y-4 rounded-3xl border border-violet-100 bg-violet-50/60 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-violet-900",children:"Agenda Aktivitas"}),t.jsx("p",{className:"text-sm text-violet-500",children:"Tambahkan atau edit rencana kecil biar countdown semakin bermakna."})]}),t.jsxs("button",{type:"button",onClick:()=>{N("activities",[...j.activities,""])},"data-love-hover":!0,style:{"--love-hover-color":"#a855f7"},className:"inline-flex items-center gap-2 rounded-full border border-violet-200 bg-white px-4 py-2 text-sm font-medium text-violet-600 transition hover:bg-violet-500 hover:text-white",children:[t.jsx(d,{className:"h-4 w-4"}),"Tambah Agenda"]})]}),L?t.jsx("div",{className:"space-y-3",children:j.activities.map((e,s)=>t.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-violet-100 bg-white px-4 py-3 text-sm text-violet-900 shadow-sm sm:flex-row sm:items-center",children:[t.jsx("input",{type:"text",value:e,onChange:e=>((e,t)=>{const s=[...j.activities];s[e]=t,N("activities",s)})(s,e.target.value),className:"flex-1 rounded-xl border border-transparent bg-violet-50 px-3 py-2 text-sm text-violet-900 transition focus:border-violet-300 focus:outline-none focus:ring-2 focus:ring-violet-200",placeholder:`Agenda #${s+1}`}),t.jsxs("button",{type:"button",onClick:()=>(e=>{const t=j.activities.filter((t,s)=>s!==e);N("activities",t)})(s),"data-love-hover":!0,style:E,className:"inline-flex items-center justify-center gap-2 rounded-full border border-rose-200 px-3 py-2 text-xs font-semibold text-rose-600 transition hover:bg-rose-500 hover:text-white",children:[t.jsx(c,{className:"h-3.5 w-3.5"}),"Hapus"]})]},`activity-${s}`))}):t.jsx("p",{className:"rounded-2xl border border-dashed border-violet-200 bg-white/70 px-4 py-6 text-center text-sm text-violet-500",children:'No agenda yet. Click "Add Agenda" to start planning your romantic activities.'})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-violet-900",children:"Poster / Thumbnail"}),t.jsx("p",{className:"text-sm text-violet-500",children:"Unggah poster baru untuk event ini. Jika tidak, poster lama akan tetap digunakan."})]}),C&&t.jsxs("button",{type:"button",onClick:()=>{C&&URL.revokeObjectURL(C),U(null),N("image",null)},"data-love-hover":!0,style:P,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:bg-slate-600 hover:text-white",children:[t.jsx(x,{className:"h-4 w-4"}),"Batalkan poster baru"]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr,3fr]",children:[t.jsxs("label",{className:"flex flex-col items-center justify-center rounded-3xl border-2 border-dashed border-violet-200 bg-white/90 px-6 py-10 text-center text-sm text-violet-500 transition hover:border-violet-400 hover:bg-violet-50",children:[t.jsx(m,{className:"h-10 w-10 text-violet-400"}),t.jsx("span",{className:"mt-3 font-semibold text-violet-700",children:"Pilih Poster Baru"}),t.jsx("span",{className:"mt-1 text-xs text-violet-400",children:"Format JPG, PNG, atau GIF (maks 2 MB)"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{const t=e.target.files?.[0]??null;N("image",t),C&&URL.revokeObjectURL(C),U(t?URL.createObjectURL(t):null)}})]}),t.jsx("div",{className:"flex items-center justify-center rounded-3xl border border-violet-100 bg-violet-50/60 p-4",children:A?t.jsx("img",{src:A,alt:"Preview poster event",className:"h-48 w-full rounded-2xl object-cover shadow-lg"}):t.jsx("p",{className:"text-center text-sm text-violet-500",children:"No poster displayed yet. Upload a new poster to replace it."})})]}),k.image&&t.jsx("p",{className:"text-xs text-rose-500",children:k.image})]}),t.jsxs("div",{className:"flex flex-col gap-3 pt-2 sm:flex-row",children:[t.jsx(l,{href:route("countdown.index",{space:h}),"data-love-hover":!0,style:P,className:"flex-1 rounded-full border border-slate-200 px-6 py-3 text-center text-sm font-semibold text-slate-600 transition hover:bg-slate-600 hover:text-white",children:"Batal"}),t.jsx("button",{type:"submit",disabled:w,"data-love-hover":!0,style:{"--love-hover-color":"#8b5cf6"},className:"flex-1 rounded-full bg-gradient-to-r from-violet-500 to-fuchsia-500 px-6 py-3 text-sm font-semibold text-white shadow-lg transition hover:shadow-xl disabled:cursor-not-allowed disabled:opacity-60",children:w?"Menyimpan...":"Update Event"})]})]})})]})]})}export{p as default};
