import{r as e,j as t}from"./vendor-DXr22Lef.js";import{C as s}from"./ConfirmDialog-CcaUaQi1.js";import{b as a}from"./games-RZpJ1ixc.js";import{u as l}from"./useCurrentSpace-CdnheA8Y.js";import{S as i,x as n,A as r}from"./inertia-2axaVlnj.js";import{S as o,e as d,f as c,d as m}from"./ui-libs-D5k9l7B7.js";import"./Modal-zylAUIAi.js";import"./animation-H0tefZHq.js";const x={future:"border-emerald-200 bg-emerald-50 text-emerald-600",present:"border-amber-200 bg-amber-50 text-amber-700",past:"border-slate-200 bg-slate-100 text-slate-600",unset:"border-violet-200 bg-violet-50 text-violet-600"},p=e=>{if(!e)return null;const t=e.includes("T")?e:`${e}T00:00:00`,s=new Date(t);return Number.isNaN(s.getTime())?null:s};function u({items:u}){const h=l();if(!h)return null;const v=h.slug,g=h.title,[f,b]=e.useState(null),[j,N]=e.useState(!1),y=e.useCallback(e=>{const t=p(e);return t?t.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):e??"-"},[]),w=e.useCallback(e=>{const t=p(e);if(!t)return{label:"Not scheduled",tone:"unset",daysUntil:null,timestamp:Number.MAX_SAFE_INTEGER};const s=new Date;s.setHours(0,0,0,0),t.setHours(0,0,0,0);const a=Math.round((t.getTime()-s.getTime())/864e5);return a>1?{label:`${a} days left`,tone:"future",daysUntil:a,timestamp:t.getTime()}:1===a?{label:"Tomorrow",tone:"future",daysUntil:a,timestamp:t.getTime()}:0===a?{label:"Today!",tone:"present",daysUntil:a,timestamp:t.getTime()}:{label:`${Math.abs(a)} days ago`,tone:"past",daysUntil:a,timestamp:t.getTime()}},[]),k=e.useMemo(()=>u.map(e=>{const t=w(e.event_date),s=e.image?`/storage/${e.image}`:null,a=Array.isArray(e.activities)?e.activities.filter(e=>"string"==typeof e&&e.trim().length>0):[];return{...e,formattedDate:y(e.event_date),countdownLabel:t.label,countdownTone:t.tone,daysUntil:t.daysUntil,timestamp:t.timestamp,imageUrl:s,activities:a}}).sort((e,t)=>e.timestamp-t.timestamp),[u,w,y]),T=e.useMemo(()=>k.filter(e=>"number"==typeof e.daysUntil&&e.daysUntil>=0),[k]),U=e.useMemo(()=>k.filter(e=>"number"==typeof e.daysUntil&&e.daysUntil<0),[k]),E=e.useMemo(()=>k.filter(e=>null===e.daysUntil),[k]),S=T[0]??E[0]??k[0]??null,C=T.length,$=U.length,M=E.length,D=k.length,_={"--love-hover-color":"#8b5cf6"},L={"--love-hover-color":"#ef4444"},A=e.useCallback(e=>{b(e)},[]),H=e=>{const s=x[e.countdownTone]??x.unset;return t.jsxs("article",{className:"group relative overflow-hidden rounded-[26px] border border-violet-100/80 bg-white shadow-sm transition duration-300 hover:-translate-y-1 hover:shadow-xl",children:[t.jsxs("div",{className:"relative h-56 w-full overflow-hidden",children:[e.imageUrl?t.jsx("img",{src:e.imageUrl,alt:e.event_name,className:"h-full w-full object-cover transition duration-500 group-hover:scale-105"}):t.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-3 bg-gradient-to-br from-violet-100 via-white to-fuchsia-100 text-violet-600",children:[t.jsx(o,{className:"h-10 w-10"}),t.jsx("span",{className:"text-sm font-medium",children:"No event poster yet"})]}),t.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/60 via-black/0 to-transparent px-6 py-4 text-white",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.35em] text-white/70",children:[t.jsx(d,{className:"h-4 w-4 text-white/70"}),e.formattedDate]}),t.jsx("h3",{className:"mt-1 text-lg font-semibold",children:e.event_name})]})]}),t.jsxs("div",{className:"space-y-4 p-6",children:[t.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[t.jsx("p",{className:"text-sm leading-relaxed text-violet-600/80",children:e.description?.trim().length?e.description:"No description yet. Write a little story to make this event more special."}),t.jsx("span",{className:`inline-flex min-w-[130px] items-center justify-center rounded-full border px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.26em] ${s}`,children:e.countdownLabel})]}),e.activities.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:e.activities.map((s,a)=>t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-violet-200 bg-violet-50 px-3 py-1 text-xs font-medium text-violet-600",children:[t.jsx(o,{className:"h-3 w-3"}),s]},`${e.id}-activity-${a}`))}),t.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[t.jsxs(n,{href:route("countdown.edit",{space:v,id:e.id}),"data-love-hover":!0,style:_,className:"inline-flex items-center gap-2 rounded-full border border-violet-200 px-4 py-2 text-sm font-medium text-violet-600 transition hover:bg-violet-500 hover:text-white",children:[t.jsx(c,{className:"h-4 w-4"}),"Edit"]}),t.jsxs("button",{type:"button",onClick:()=>A(e),"data-love-hover":!0,style:L,className:"inline-flex items-center gap-2 rounded-full border border-rose-200 px-4 py-2 text-sm font-medium text-rose-600 transition hover:bg-rose-500 hover:text-white",children:[t.jsx(m,{className:"h-4 w-4"}),"Hapus"]})]})]})]},e.id)};return t.jsxs(a,{loveCursor:{color:"#8b5cf6",heartCount:38,className:"opacity-55"},header:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-violet-400",children:"Rencana spesial"}),t.jsxs("h2",{className:"text-3xl font-semibold text-violet-900",children:["Upcoming Events - ",g]})]}),children:[t.jsx(i,{title:`Upcoming Events - ${g}`}),t.jsxs("div",{className:"relative mx-auto max-w-6xl space-y-10 px-6 pb-16",children:[t.jsxs("section",{className:"rounded-[28px] border border-violet-100/80 bg-white/85 p-8 shadow-sm backdrop-blur",children:[t.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-violet-400",children:"Countdown romantis"}),t.jsx("h3",{className:"text-2xl font-semibold text-violet-900",children:"Simpan semua agenda spesial kalian"}),t.jsx("p",{className:"mt-2 text-sm text-violet-500",children:"Tandai tanggal penting supaya selalu siap kasih kejutan terbaik buat pasanganmu."})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3 rounded-2xl border border-violet-100/70 bg-gradient-to-br from-violet-50 via-white to-fuchsia-50 p-4 text-sm text-violet-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-violet-400",children:"Mendatang"}),t.jsx("p",{className:"mt-1 text-2xl font-semibold",children:C})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-violet-400",children:"Selesai"}),t.jsx("p",{className:"mt-1 text-2xl font-semibold",children:$})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-violet-400",children:"Tanpa tanggal"}),t.jsx("p",{className:"mt-1 text-2xl font-semibold",children:M})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-violet-400",children:"Total"}),t.jsx("p",{className:"mt-1 text-2xl font-semibold",children:D})]})]}),t.jsxs(n,{href:route("countdown.create",{space:v}),"data-love-hover":!0,style:{"--love-hover-color":"#a855f7"},className:"inline-flex items-center justify-center gap-2 rounded-full bg-gradient-to-r from-violet-500 to-fuchsia-500 px-6 py-3 text-sm font-semibold text-white shadow-lg transition hover:shadow-xl focus:outline-none focus-visible:ring-2 focus-visible:ring-fuchsia-200",children:[t.jsx(o,{className:"h-4 w-4"}),"Tambah Event"]})]})]}),S?t.jsxs("div",{className:"mt-6 rounded-2xl border border-violet-100/70 bg-violet-50/70 p-6 text-sm text-violet-700",children:[t.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-violet-400",children:"Event terdekat"}),t.jsxs("div",{className:"mt-3 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-violet-900",children:S.event_name}),t.jsx("div",{className:"mt-1 flex flex-wrap items-center gap-3 text-sm",children:t.jsxs("span",{className:"inline-flex items-center gap-2 text-violet-600",children:[t.jsx(d,{className:"h-4 w-4"}),S.formattedDate]})})]}),t.jsx("span",{className:`inline-flex items-center justify-center rounded-full border px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.28em] ${x[S.countdownTone]}`,children:S.countdownLabel})]})]}):k.length?null:t.jsx("div",{className:"mt-6 rounded-2xl border border-dashed border-violet-200 bg-violet-50/60 p-6 text-sm text-violet-500",children:"No special events recorded yet. Start filling your romantic event list!"})]}),0===k.length?t.jsxs("section",{className:"rounded-[28px] border border-dashed border-violet-200 bg-white/70 p-12 text-center text-sm text-violet-500 shadow-sm",children:[t.jsx("p",{children:"Tambahkan tanggal penting seperti anniversary, video call jarak jauh, atau quality time berikutnya."}),t.jsx("p",{className:"mt-1",children:"Kami bantu hitung mundurnya supaya kamu selalu siap kasih kejutan terbaik."})]}):t.jsxs(t.Fragment,{children:[T.length>0&&t.jsxs("section",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-violet-900",children:"Event Mendatang"}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:T.map(H)})]}),E.length>0&&t.jsxs("section",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-violet-900",children:"Draft & Perlu Jadwal"}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:E.map(H)})]}),U.length>0&&t.jsxs("section",{className:"space-y-6 border-t border-violet-100 pt-10",children:[t.jsx("h3",{className:"text-xl font-semibold text-violet-900",children:"Event Selesai"}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:U.map(H)})]})]})]}),t.jsx(s,{open:null!==f,title:f?`Hapus "${f.event_name}"?`:"Hapus event?",description:f?`Event countdown "${f.event_name}" akan dihapus dari daftar dan tidak bisa dipulihkan.`:"Event countdown akan dihapus dari daftar.",confirmLabel:"Ya, hapus event",cancelLabel:"Batal",tone:"danger",loading:j,onCancel:()=>{j||b(null)},onConfirm:()=>{f&&(N(!0),r.delete(route("countdown.destroy",{space:v,id:f.id}),{preserveScroll:!0,onSuccess:()=>{b(null)},onError:()=>{b(null)},onFinish:()=>N(!1)}))}})]})}export{u as default};
