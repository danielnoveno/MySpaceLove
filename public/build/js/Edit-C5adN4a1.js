import{r as e,j as r,aK as s,aC as a}from"./vendor-DXr22Lef.js";import{b as t}from"./games-RZpJ1ixc.js";import{X as o,G as i,S as l,x as n,A as d}from"./inertia-2axaVlnj.js";import{D as c,P as u}from"./pdf-BlE7eWJd.js";import{E as m,A as x}from"./ui-libs-D5k9l7B7.js";import"./animation-H0tefZHq.js";function p(){const{doc:s}=o().props,[a,p]=e.useState(!1),[g,h]=e.useState(null);if(!s)return r.jsx("div",{children:"Dokumen tidak ditemukan."});const{data:b,setData:f,post:j,processing:w}=i({title:s.title||"",file:null,notes:s.notes||"",_method:"put"}),v=(e=>{const r=e.split(".").pop()?.toLowerCase()||"";return["jpg","jpeg","png","gif","webp"].includes(r)?"image":["pdf"].includes(r)?"pdf":["doc","docx","ppt","pptx","xls","xlsx"].includes(r)?"document":["mp4","webm"].includes(r)?"video":"other"})(s.file_path),y=`/storage/${s.file_path}`;return r.jsxs(t,{header:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(n,{href:route("docs.index"),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:r.jsx(x,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Dokumen"}),r.jsx("p",{className:"text-gray-600",children:"Perbarui informasi atau ganti file"})]})]}),children:[r.jsx(l,{title:"Edit Document"}),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-amber-50 py-10 px-6",children:r.jsx("div",{className:"max-w-4xl mx-auto bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg border border-gray-100 p-8 md:p-10 space-y-8",children:r.jsxs("form",{onSubmit:e=>{e.preventDefault(),j(route("docs.update",{id:s.id}),{forceFormData:!0,onSuccess:()=>d.visit(route("docs.index"))})},className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block font-semibold text-gray-800 mb-2",children:"Judul"}),r.jsx("input",{type:"text",value:b.title,onChange:e=>f("title",e.target.value),className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-orange-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block font-semibold text-gray-800 mb-2",children:"Ganti File (opsional)"}),r.jsx("input",{type:"file",onChange:e=>f("file",e.target.files?.[0]||null),className:"block w-full border border-gray-300 rounded-2xl p-3 bg-white"}),r.jsxs("button",{type:"button",onClick:()=>p(!a),className:"flex items-center gap-2 mt-3 text-blue-600 hover:text-blue-700 text-sm",children:[r.jsx(m,{className:"w-4 h-4"}),a?"Tutup Preview":"Lihat File Saat Ini"]}),a&&r.jsx("div",{className:"mt-4 border rounded-xl overflow-hidden shadow",children:(()=>{switch(v){case"image":return r.jsx("img",{src:y,alt:"Preview",className:"w-full h-auto object-contain rounded-lg shadow"});case"pdf":const e=`${window.location.origin}/storage/${s.file_path.replace(/^public\//,"")}`;return r.jsx("div",{className:"border rounded-xl bg-gray-100 p-4 flex flex-col items-center",children:r.jsx(c,{file:{url:e},onLoadSuccess:({numPages:e})=>h(e),loading:r.jsx("p",{children:"Memuat PDF..."}),onLoadError:e=>{},children:Array.from(new Array(g||0),(e,s)=>r.jsx(u,{pageNumber:s+1,width:700,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-md my-3 rounded-lg"},`page_${s+1}`))})});case"document":return r.jsx("iframe",{src:`https://docs.google.com/gview?url=${window.location.origin}${y}&embedded=true`,className:"w-full h-[600px] border rounded-lg shadow",title:"Document Preview"});case"video":return r.jsx("video",{src:y,controls:!0,className:"w-full h-auto rounded-lg shadow"});default:return r.jsx("div",{className:"text-center text-gray-600 py-10",children:"Preview tidak tersedia untuk format ini."})}})()})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block font-semibold text-gray-800 mb-2",children:"Catatan"}),r.jsx("textarea",{value:b.notes,onChange:e=>f("notes",e.target.value),rows:4,className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-orange-500"})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:w,className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all",children:w?"Memperbarui...":"Perbarui Dokumen"})})]})})})]})}a.workerSrc=`//unpkg.com/pdfjs-dist@${s}/build/pdf.worker.min.js`;export{p as default};
