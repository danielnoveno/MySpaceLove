import{X as e,r,j as s,G as a,S as t,x as o,A as i}from"./react-core-DkDn4djD.js";import{a as l}from"./games-DLF3M88Y.js";import{D as n,P as d}from"./pdf-CmBq2Vph.js";import{E as c,A as u}from"./ui-libs--z-UAavT.js";import{aN as m,aH as x}from"./vendor-D-GzWRLi.js";import"./inertia-BBHw8PYu.js";import"./maps-CVSyMViq.js";import"./animation-Dcgp7Est.js";function p(){const{doc:m}=e().props,[x,p]=r.useState(!1),[g,h]=r.useState(null);if(!m)return s.jsx("div",{children:"Dokumen tidak ditemukan."});const{data:b,setData:f,post:j,processing:w}=a({title:m.title||"",file:null,notes:m.notes||"",_method:"put"}),v=(e=>{const r=e.split(".").pop()?.toLowerCase()||"";return["jpg","jpeg","png","gif","webp"].includes(r)?"image":["pdf"].includes(r)?"pdf":["doc","docx","ppt","pptx","xls","xlsx"].includes(r)?"document":["mp4","webm"].includes(r)?"video":"other"})(m.file_path),y=`/storage/${m.file_path}`;return s.jsxs(l,{header:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(o,{href:route("docs.index"),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:s.jsx(u,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Dokumen"}),s.jsx("p",{className:"text-gray-600",children:"Perbarui informasi atau ganti file"})]})]}),children:[s.jsx(t,{title:"Edit Document"}),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-amber-50 py-10 px-6",children:s.jsx("div",{className:"max-w-4xl mx-auto bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg border border-gray-100 p-8 md:p-10 space-y-8",children:s.jsxs("form",{onSubmit:e=>{e.preventDefault(),j(route("docs.update",{id:m.id}),{forceFormData:!0,onSuccess:()=>i.visit(route("docs.index"))})},className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block font-semibold text-gray-800 mb-2",children:"Judul"}),s.jsx("input",{type:"text",value:b.title,onChange:e=>f("title",e.target.value),className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-semibold text-gray-800 mb-2",children:"Ganti File (opsional)"}),s.jsx("input",{type:"file",onChange:e=>f("file",e.target.files?.[0]||null),className:"block w-full border border-gray-300 rounded-2xl p-3 bg-white"}),s.jsxs("button",{type:"button",onClick:()=>p(!x),className:"flex items-center gap-2 mt-3 text-blue-600 hover:text-blue-700 text-sm",children:[s.jsx(c,{className:"w-4 h-4"}),x?"Tutup Preview":"Lihat File Saat Ini"]}),x&&s.jsx("div",{className:"mt-4 border rounded-xl overflow-hidden shadow",children:(()=>{switch(v){case"image":return s.jsx("img",{src:y,alt:"Preview",className:"w-full h-auto object-contain rounded-lg shadow"});case"pdf":const e=`${window.location.origin}/storage/${m.file_path.replace(/^public\//,"")}`;return s.jsx("div",{className:"border rounded-xl bg-gray-100 p-4 flex flex-col items-center",children:s.jsx(n,{file:{url:e},onLoadSuccess:({numPages:e})=>h(e),loading:s.jsx("p",{children:"Memuat PDF..."}),onLoadError:e=>{},children:Array.from(new Array(g||0),(e,r)=>s.jsx(d,{pageNumber:r+1,width:700,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-md my-3 rounded-lg"},`page_${r+1}`))})});case"document":return s.jsx("iframe",{src:`https://docs.google.com/gview?url=${window.location.origin}${y}&embedded=true`,className:"w-full h-[600px] border rounded-lg shadow",title:"Document Preview"});case"video":return s.jsx("video",{src:y,controls:!0,className:"w-full h-auto rounded-lg shadow"});default:return s.jsx("div",{className:"text-center text-gray-600 py-10",children:"Preview tidak tersedia untuk format ini."})}})()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-semibold text-gray-800 mb-2",children:"Catatan"}),s.jsx("textarea",{value:b.notes,onChange:e=>f("notes",e.target.value),rows:4,className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-orange-500"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:w,className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all",children:w?"Memperbarui...":"Perbarui Dokumen"})})]})})})]})}x.workerSrc=`//unpkg.com/pdfjs-dist@${m}/build/pdf.worker.min.js`;export{p as default};
