import{r as e,j as t,S as r}from"./react-core-DkDn4djD.js";import{V as a,Z as n,_ as s}from"./ui-libs-OX6CH3yX.js";import"./inertia-BBHw8PYu.js";import"./vendor-D-GzWRLi.js";import"./maps-CVSyMViq.js";function i({spaceId:i,user:o}){const l=e.useRef(null),[c,d]=e.useState(!1),[m,u]=e.useState("");e.useEffect(()=>()=>{const e=document.querySelector("#jitsi-script");e&&!document.querySelector("[data-keep-jitsi]")&&e.remove()},[]);const p=()=>{if(!l.current)return;const e=`MySpaceLove-${i}-${Math.floor(9999*Math.random())}`;u(`https://meet.jit.si/${e}`);const t={roomName:e,parentNode:l.current,width:"100%",height:"100%",userInfo:{displayName:o},interfaceConfigOverwrite:{TOOLBAR_BUTTONS:["microphone","camera","desktop","fullscreen","fodeviceselection","hangup","chat","raisehand","participants-pane"],SHOW_JITSI_WATERMARK:!1,SHOW_BRAND_WATERMARK:!1,SHOW_POWERED_BY:!1,SHOW_WATERMARK_FOR_GUESTS:!1,DEFAULT_LOGO_URL:""},configOverwrite:{prejoinPageEnabled:!0,disableDeepLinking:!0}},r=new window.JitsiMeetExternalAPI("meet.jit.si",t),a=()=>{const e=r.getIFrame();if(!e)return;const t=e.contentDocument||e.contentWindow?.document;t&&t.querySelectorAll(".watermark, .leftwatermark, .rightwatermark, .branding, .branding-link, .poweredby").forEach(e=>e.remove())};r.addEventListener("videoConferenceJoined",()=>{const e=r.getIFrame();if(!e)return;const t=e.contentDocument||e.contentWindow?.document;t&&(a(),new MutationObserver(()=>{a()}).observe(t.body,{childList:!0,subtree:!0}))})};return t.jsxs(t.Fragment,{children:[t.jsx(r,{title:`Nobar Space #${i}`}),t.jsxs("div",{className:"relative flex h-screen bg-neutral-900 text-white overflow-hidden",children:[t.jsx("div",{ref:l,className:"absolute inset-0 w-full h-full transition-all duration-500 "+(c?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none")}),!c&&t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center z-10",children:[t.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Siap untuk Nobar?"}),t.jsx("p",{className:"text-neutral-400 mb-6",children:"Klik tombol di bawah untuk memulai ruang nobar bersama."}),t.jsxs("button",{onClick:()=>{if(d(!0),document.querySelector("#jitsi-script"))p();else{const e=document.createElement("script");e.id="jitsi-script",e.src="https://meet.jit.si/external_api.js",e.async=!0,e.onload=()=>p(),document.body.appendChild(e)}},className:"bg-emerald-500 hover:bg-emerald-600 px-8 py-3 rounded-xl text-lg flex items-center gap-2 transition-all shadow-lg hover:shadow-emerald-500/30 active:scale-95",children:[t.jsx(a,{size:22})," Mulai Nobar"]})]}),c&&m&&t.jsxs("div",{className:"absolute top-4 right-8 flex gap-2 z-30",children:[t.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(m),alert("Link room telah disalin ke clipboard!")},className:"bg-emerald-500 hover:bg-emerald-600 px-3 py-2 rounded-lg text-sm flex items-center gap-1",children:[t.jsx(n,{size:14})," Copy Link"]}),t.jsxs("a",{href:m,target:"_blank",rel:"noreferrer",className:"bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-sm flex items-center gap-1",children:[t.jsx(s,{size:14})," Buka di Tab"]})]})]})]})}export{i as default};
