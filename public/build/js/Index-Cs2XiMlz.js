import{r as e,j as a,ak as s}from"./vendor-DtplsvIg.js";import{a as t}from"./games-C9PD58Ia.js";import{I as r}from"./InputError-BJRbyT1P.js";import{I as n}from"./InputLabel-BFdN2Rbn.js";import{P as i}from"./PrimaryButton-1sS2IGpm.js";import{T as l}from"./TextInput-D3Ba-a58.js";import{G as o,S as d,A as c,x as m}from"./inertia-BRtPwdNN.js";import{a1 as p}from"./ui-libs-CxG7ASKr.js";import"./animation-BDJwZp_N.js";function u({spaces:u,pendingInvitations:x,status:g,canCreate:h,pendingSeparationRequests:b,separationConfirmationPhrase:f}){const{data:y,setData:j,post:v,processing:k,errors:N,reset:w}=o({title:"",bio:""}),[_,S]=e.useState(null),[C,P]=e.useState(null),[D,q]=e.useState(""),[A,F]=e.useState(!1),[$,M]=e.useState(null),[U,T]=e.useState(null),[E,B]=e.useState(null),[Y,I]=e.useState({}),[K,R]=e.useState({}),[G,H]=e.useState({}),[L,V]=e.useState(null),[W,z]=e.useState(null),[J,O]=e.useState({}),[Q,X]=e.useState({}),[Z,ee]=e.useState(null),[ae,se]=e.useState(null),[te,re]=e.useState(null),[ne,ie]=e.useState(null),[le,oe]=e.useState(null),de=u.length>0,ce=x.length>0,me=e.useMemo(()=>b.filter(e=>e.requires_your_confirmation),[b]);e.useEffect(()=>{if(null===le)return;if("undefined"==typeof window)return;const e=document.getElementById(`space-separation-${le}`);e?.scrollIntoView({behavior:"smooth",block:"start"})},[le]);const pe=e.useCallback(e=>Y[e]??{name:"",email:""},[Y]),ue=e.useCallback((e,a,s)=>{I(t=>{const r=t[e]??{name:"",email:""};return{...t,[e]:{...r,[a]:s}}})},[]),xe=e=>{switch(e){case"accepted":return"border border-emerald-200 bg-emerald-50 text-emerald-700";case"pending":return"border border-amber-200 bg-amber-50 text-amber-700";case"declined":case"rejected":return"border border-red-200 bg-red-50 text-red-700";default:return"border border-gray-200 bg-gray-50 text-gray-600"}},ge=e=>{const a=e.split(" ").filter(e=>e.length>0);return 0===a.length?"":1===a.length?a[0].charAt(0).toUpperCase():a[0].charAt(0).toUpperCase()+a[a.length-1].charAt(0).toUpperCase()},he=e=>{const a=["bg-pink-100 text-pink-800","bg-purple-100 text-purple-800","bg-indigo-100 text-indigo-800","bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-yellow-100 text-yellow-800","bg-red-100 text-red-800"];return a[e%a.length]},be=e.useCallback(e=>"success"===e?"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700":"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",[]),fe=e.useCallback((e,a)=>{O(s=>{const t=s[e]??{phrase:"",reason:""};return{...s,[e]:{phrase:a.phrase??t.phrase,reason:a.reason??t.reason}}})},[]),ye=e.useCallback((e,a)=>{X(s=>{const t=s[e]??{phrase:"",reason:""};return{...s,[e]:{phrase:a.phrase??t.phrase,reason:a.reason??t.reason}}})},[]),je=e.useCallback(e=>J[e]??{phrase:"",reason:""},[J]),ve=e.useCallback(e=>Q[e]??{phrase:"",reason:""},[Q]),ke=e=>{e.preventDefault(),h&&v(route("spaces.store"),{onSuccess:()=>{w()}})},Ne=async e=>{if(e.preventDefault(),A)return;M(null),T(null);const a=D.trim().toUpperCase();if(a){F(!0);try{const e=await s.post(route("api.spaces.request-join"),{partner_code:a});M({type:"success",message:e.data?.message??"Successfully joined your partner's Space."}),q("");const t=e.data?.space?.slug;t?setTimeout(()=>{c.visit(route("spaces.dashboard",{space:t}))},200):c.reload()}catch(t){if(s.isAxiosError(t)){const e=t.response?.data,a=e?.errors?.partner_code;a&&T(a.join(", ")),M({type:"error",message:e?.message??(a?a.join(", "):void 0)??"Failed to submit join request."})}else M({type:"error",message:"An error occurred while submitting the join request."})}finally{F(!1)}}else T("Partner code is required.")},we=e.useCallback(e=>{B(a=>a===e?null:e),H(a=>({...a,[e]:null})),R(a=>({...a,[e]:{}}))},[]),_e=e.useCallback(e=>{oe(a=>a===e?null:e)},[]),Se=async(e,a)=>{const t=ve(e.id),r=t.phrase.trim(),n=t.reason.trim();if(r)if(r.toUpperCase()===f.toUpperCase()){re(e.id),ee(null);try{const t=await s.post(route("api.spaces.separation.respond",{space:e.slug}),{decision:a,confirmation_phrase:r,reason:""===n?void 0:n});ee({type:"success",message:t.data?.message??("approve"===a?"Space ended successfully.":"Dissolution request rejected.")}),X(a=>({...a,[e.id]:{phrase:"",reason:""}})),c.reload()}catch(i){let e="Failed to process dissolution confirmation.";s.isAxiosError(i)&&(e=i.response?.data?.message??e),ee({type:"error",message:e})}finally{re(null)}}else ee({type:"error",message:`Confirmation phrase must be exactly "${f}".`});else ee({type:"error",message:"Please type the confirmation phrase first."})},Ce=()=>a.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gabung ke Space Pasangan"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Masukkan kode pasangan (Partner Code) yang dibagikan pasanganmu untuk langsung bergabung."}),a.jsxs("form",{onSubmit:Ne,className:"mt-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx(n,{htmlFor:"partner_code",value:"Kode Pasangan"}),a.jsx(l,{id:"partner_code",name:"partner_code",value:D,className:"mt-1 block w-full uppercase tracking-widest",onChange:e=>q(e.target.value.toUpperCase()),placeholder:"Contoh: ABCD1234"}),a.jsx(r,{message:U??void 0,className:"mt-2"})]}),a.jsx(i,{type:"submit",className:"w-full justify-center",disabled:A,children:A?"Menghubungkan...":"Gabung ke Space"})]})]});return a.jsxs(t,{header:a.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Daftar Space"}),children:[a.jsx(d,{title:"Spaces"}),a.jsx("div",{className:"py-12",children:a.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:gap-8",children:[a.jsxs("div",{className:"flex-1 space-y-6",children:[de&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6 space-y-5",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"You already have a Space"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Each account can only have one Space. If you want to create a new Space, release the old Space first."})]}),a.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Spaces"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Manage your Space, invite your partner, or end the Space relationship from this page."})]}),a.jsx("div",{className:"space-y-4",children:u.map(e=>{const t=pe(e.id),o=G[e.id],d=K[e.id]??{},p=E===e.id,u=e.pending_separation,x=e.pending_invitation;return a.jsxs("div",{className:"rounded-lg border border-gray-100 bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-base font-semibold text-gray-900",children:e.title}),a.jsx("p",{className:"text-sm text-gray-500",children:e.has_partner?"Partner already connected. Enjoy all features together.":"No partner yet. You can invite a partner anytime."}),a.jsx("div",{className:"mt-2 flex flex-wrap items-center gap-4",children:e.users.filter(e=>null!==e).map(e=>a.jsxs("div",{className:"flex items-center gap-2",children:[e.profile_photo_url?a.jsx("img",{className:"h-8 w-8 rounded-full object-cover flex-shrink-0",src:e.profile_photo_url,alt:e.name}):a.jsx("div",{className:`h-8 w-8 rounded-full flex-shrink-0 flex items-center justify-center text-sm font-semibold ${he(e.id)}`,title:e.name,children:ge(e.name)}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.name})]},e.id))}),x&&a.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:[x.status_label," ",a.jsx("span",{className:"font-semibold",children:x.email}),x.sent_at?` â€¢ Dikirim ${x.sent_at}`:""]})]}),a.jsx("div",{className:"flex flex-wrap items-center gap-2",children:a.jsx(m,{href:route("spaces.dashboard",{space:e.slug}),className:"inline-flex items-center justify-center rounded-full bg-pink-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-pink-700",children:"Masuk Space"})})]}),u&&a.jsx("div",{className:"mt-3 rounded-md border border-red-100 bg-red-50 px-3 py-2 text-sm text-red-700",children:u.initiated_by_you?"Dissolution request sent. Waiting for your partner's confirmation.":u.requires_your_confirmation?"Dissolution request awaiting your decision.":"Dissolution request is being processed."}),!e.has_partner&&a.jsxs("div",{className:"mt-4 space-y-3",children:[o&&a.jsx("div",{className:be(o.type),children:o.message}),x?a.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 text-sm text-amber-800",children:[a.jsxs("p",{children:["Undangan sedang menunggu konfirmasi dari"," ",a.jsx("span",{className:"font-semibold",children:x.email}),". Batalkan undangan ini jika ingin mengundang akun lain."]}),a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:a.jsx(i,{type:"button",disabled:W===x.id,onClick:()=>{(async(e,a)=>{if("undefined"==typeof window||window.confirm("Cancel this invitation? You can invite another account afterwards.")){H(a=>({...a,[e.id]:null})),z(a);try{const t=await s.delete(route("api.spaces.invitations.cancel",{space:e.slug,invitation:a}));H(a=>({...a,[e.id]:{type:"success",message:t.data?.message??"Invitation cancelled successfully."}})),B(null),c.reload()}catch(t){let a="Failed to cancel invitation. Please try again later.";if(s.isAxiosError(t)){const e=t.response?.data;"string"==typeof e?.message&&(a=e.message)}H(s=>({...s,[e.id]:{type:"error",message:a}}))}finally{z(null)}}})(e,x.id)},className:"bg-amber-500 hover:bg-amber-600 disabled:opacity-70",children:W===x.id?"Membatalkan...":"Batalkan Undangan"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>we(e.id),className:"inline-flex items-center justify-center rounded-full border border-pink-200 px-4 py-2 text-sm font-semibold text-pink-600 transition hover:bg-pink-50",children:p?"Tutup Form Tambah Pasangan":"Tambahkan Pasangan"}),p&&a.jsxs("form",{className:"space-y-4 rounded-lg border border-pink-100 bg-pink-50 p-4",onSubmit:a=>{a.preventDefault(),(async e=>{const a=pe(e.id),t=a.name.trim(),r=a.email.trim();if(H(a=>({...a,[e.id]:null})),R(a=>({...a,[e.id]:{}})),""===t||""===r)return R(a=>({...a,[e.id]:{partner_name:""===t?"Partner name is required.":void 0,partner_email:""===r?"Partner email is required.":void 0}})),void H(a=>({...a,[e.id]:{type:"error",message:"Please complete partner name and email first."}}));V(e.id);try{const a=await s.post(route("api.spaces.connect-partner",{space:e.slug}),{partner_name:t,partner_email:r});H(s=>({...s,[e.id]:{type:"success",message:a.data?.message??"Invitation sent successfully. Your partner just needs to join."}})),I(a=>({...a,[e.id]:{name:"",email:""}})),B(null),c.reload()}catch(n){if(s.isAxiosError(n)){const a=n.response?.data,s=a?.errors??{};R(a=>({...a,[e.id]:{partner_name:s.partner_name?.join(", "),partner_email:s.partner_email?.join(", ")}})),H(t=>({...t,[e.id]:{type:"error",message:a?.message??s.partner_name?.join(", ")??s.partner_email?.join(", ")??"Failed to send invitation. Please try again."}}))}else H(a=>({...a,[e.id]:{type:"error",message:"An error occurred while sending the invitation."}}))}finally{V(null)}})(e)},children:[a.jsxs("div",{children:[a.jsx(n,{htmlFor:`partner_name_${e.id}`,value:"Nama Pasangan"}),a.jsx(l,{id:`partner_name_${e.id}`,value:t.name,className:"mt-1 block w-full",onChange:a=>ue(e.id,"name",a.target.value),placeholder:"Contoh: Aulia Rahma",autoComplete:"off"}),a.jsx(r,{message:d.partner_name,className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(n,{htmlFor:`partner_email_${e.id}`,value:"Email Pasangan"}),a.jsx(l,{id:`partner_email_${e.id}`,type:"email",value:t.email,className:"mt-1 block w-full",onChange:a=>ue(e.id,"email",a.target.value),placeholder:"nama@email.com",autoComplete:"off"}),a.jsx(r,{message:d.partner_email,className:"mt-1"})]}),a.jsx(i,{type:"submit",className:"w-full justify-center",disabled:L===e.id,children:L===e.id?"Mengirim undangan...":"Kirim Undangan"}),a.jsx("p",{className:"text-xs text-pink-600",children:"Your partner will see this invitation when they log in using the email above."})]})]})]}),e.invitations.length>0&&a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Riwayat undangan"}),a.jsx("div",{className:"space-y-2",children:e.invitations.map(e=>a.jsx("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.email}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Dikirim"," ",e.sent_at??"waktu tidak diketahui"]}),e.responded_at&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Ditanggapi"," ",e.responded_at]}),e.cancelled_at&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Dibatalkan"," ",e.cancelled_at]})]}),a.jsx("div",{className:"flex items-start sm:flex-col sm:items-end",children:a.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold "+xe(e.status),children:e.status_label})})]})},e.id))})]})]},e.id)})})]})]}),de&&u.map(e=>(e=>{const t=e.pending_separation,r=je(e.id),o=ve(e.id),d=le===e.id;return t?a.jsxs("div",{id:`space-separation-${e.id}`,className:"bg-white shadow-sm rounded-xl p-6 space-y-5",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:a.jsx(p,{className:"h-6 w-6 text-red-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Permintaan Pembubaran Sedang Berjalan"}),a.jsx("p",{children:t?.initiated_by_you?"You have submitted a request to end this Space. Your partner must type the confirmation phrase to complete the process.":t?.requires_your_confirmation?"Your partner requested to end this Space. Make sure you consider carefully before making a decision.":"Dissolution request is being processed."}),t?.created_at&&a.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Diajukan pada"," ",new Date(t.created_at).toLocaleString()]})]})]}),t?.reason&&(t.reason.initiator||t.reason.partner)&&a.jsxs("div",{className:"rounded-xl border border-red-100 bg-red-50 p-4 text-sm text-red-700 space-y-1",children:[t.reason.initiator&&a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Alasan pengaju:"})," ",t.reason.initiator]}),t.reason.partner&&a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Catatan pasangan:"})," ",t.reason.partner]})]}),t?.initiated_by_you&&a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between rounded-xl border border-dashed border-red-200 bg-red-50 p-4",children:[a.jsx("div",{className:"text-sm text-red-700",children:"You can still cancel this request if you change your mind."}),a.jsx("button",{type:"button",onClick:()=>(async e=>{ee(null),ie(e.id);try{const a=await s.post(route("api.spaces.separation.cancel",{space:e.slug}));ee({type:"success",message:a.data?.message??"Dissolution request cancelled."}),c.reload()}catch(a){let e="Failed to cancel dissolution request.";s.isAxiosError(a)&&(e=a.response?.data?.message??e),ee({type:"error",message:e})}finally{ie(null)}})(e),disabled:ne===e.id,className:"inline-flex items-center justify-center rounded-full bg-white px-4 py-2 text-sm font-semibold text-red-600 ring-1 ring-inset ring-red-200 transition hover:bg-red-100 disabled:pointer-events-none disabled:opacity-60",children:ne===e.id?"Membatalkan...":"Batalkan Permintaan"})]}),t?.requires_your_confirmation&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(n,{htmlFor:`respond_reason_${e.id}`,value:"Berikan catatan (opsional)"}),a.jsx("textarea",{id:`respond_reason_${e.id}`,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring focus:ring-red-200 focus:ring-opacity-50",rows:3,value:o.reason,onChange:a=>ye(e.id,{reason:a.target.value}),placeholder:"Bagikan alasanmu atau harapan setelah keputusan ini."})]}),a.jsxs("div",{children:[a.jsx(n,{htmlFor:`respond_phrase_${e.id}`,value:"Frasa Konfirmasi"}),a.jsx(l,{id:`respond_phrase_${e.id}`,value:o.phrase,className:"mt-1 block w-full uppercase tracking-widest",onChange:a=>ye(e.id,{phrase:a.target.value.toUpperCase()}),placeholder:f}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Ketik persis ",'"',f,'"'," untuk mengonfirmasi keputusanmu."]})]}),a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[a.jsx("button",{type:"button",onClick:()=>Se(e,"reject"),disabled:te===e.id,className:"inline-flex items-center justify-center rounded-full bg-white px-4 py-2 text-sm font-semibold text-gray-600 ring-1 ring-inset ring-gray-200 transition hover:bg-gray-100 disabled:pointer-events-none disabled:opacity-60",children:te===e.id?"Memproses...":"Tolak & Pertahankan Space"}),a.jsx(i,{type:"button",disabled:te===e.id,className:"justify-center",onClick:()=>Se(e,"approve"),children:te===e.id?"Mengonfirmasi...":"Setujui & Akhiri Space"})]})]})]},`separation-${e.id}`):a.jsxs("div",{id:`space-separation-${e.id}`,className:"bg-white shadow-sm rounded-xl p-6 space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Akhiri atau Hapus Space"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Proses ini memerlukan frasa konfirmasi khusus. Setelah disetujui kedua pihak, seluruh data Space akan ditutup dan kamu bisa memulai perjalanan baru."})]}),d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>_e(e.id),className:"inline-flex items-center justify-center rounded-full border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-50",children:"Tutup Form Akhiri Space"})}),a.jsxs("form",{onSubmit:a=>{a.preventDefault(),(async e=>{const a=je(e.id),t=a.phrase.trim(),r=a.reason.trim();if(t)if(t.toUpperCase()===f.toUpperCase()){se(e.id),ee(null);try{const a=await s.post(route("api.spaces.separation.request",{space:e.slug}),{confirmation_phrase:t,reason:""===r?void 0:r});ee({type:"success",message:a.data?.message??"Dissolution request sent successfully."}),O(a=>({...a,[e.id]:{phrase:"",reason:""}})),c.reload()}catch(n){let e="Failed to send dissolution request.";s.isAxiosError(n)&&(e=n.response?.data?.message??e),ee({type:"error",message:e})}finally{se(null)}}else ee({type:"error",message:`Confirmation phrase must be exactly "${f}".`});else ee({type:"error",message:"Please type the confirmation phrase first."})})(e)},className:"space-y-4",children:[e.has_partner?a.jsx("div",{className:"rounded-xl border border-purple-100 bg-purple-50 p-4 text-sm text-purple-700",children:"Diskusikan dulu dengan pasanganmu. Permintaan ini tidak bisa dipulihkan setelah keduanya menyetujui."}):a.jsx("div",{className:"rounded-xl border border-indigo-100 bg-indigo-50 p-4 text-sm text-indigo-700",children:"Space ini belum punya pasangan. Setelah kamu mengetik frasa konfirmasi, Space akan langsung dihapus."}),a.jsxs("div",{children:[a.jsx(n,{htmlFor:`separation_reason_${e.id}`,value:"Alasanmu (opsional)"}),a.jsx("textarea",{id:`separation_reason_${e.id}`,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring focus:ring-pink-200 focus:ring-opacity-50",rows:3,value:r.reason,onChange:a=>fe(e.id,{reason:a.target.value}),placeholder:"Tulis alasanmu agar pasangan memahami keputusan ini."})]}),a.jsxs("div",{children:[a.jsx(n,{htmlFor:`separation_phrase_${e.id}`,value:"Frasa Konfirmasi"}),a.jsx(l,{id:`separation_phrase_${e.id}`,value:r.phrase,className:"mt-1 block w-full uppercase tracking-widest",onChange:a=>fe(e.id,{phrase:a.target.value.toUpperCase()}),placeholder:f}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Ketik persis ",'"',f,'"'," untuk mengirim permintaan."]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{type:"submit",className:"w-full justify-center",disabled:ae===e.id,children:ae===e.id?"Mengirim...":e.has_partner?"Ajukan Permintaan Pembubaran":"Hapus Space Sekarang"}),a.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Setelah kamu mengajukan, pasanganmu akan menerima notifikasi untuk menyetujui atau menolak."})]})]})]}):a.jsx("div",{className:"flex justify-start",children:a.jsx("button",{type:"button",onClick:()=>_e(e.id),className:"inline-flex items-center justify-center rounded-full border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-50",children:"Kelola / Akhiri Space"})})]},`separation-${e.id}`)})(e)),!de&&a.jsxs("div",{className:"space-y-6",children:[h&&((e=!0)=>{const s=h?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Buat Space Baru"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You can invite your partner after the Space is created."}),a.jsxs("form",{onSubmit:ke,className:"mt-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx(n,{htmlFor:"title",value:"Nama Space"}),a.jsx(l,{id:"title",name:"title",value:y.title,className:"mt-1 block w-full",onChange:e=>j("title",e.target.value),placeholder:"Contoh: Ruang Cerita Dinda",required:!0}),a.jsx(r,{message:N.title,className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(n,{htmlFor:"bio",value:"Deskripsi (opsional)"}),a.jsx("textarea",{id:"bio",name:"bio",value:y.bio,onChange:e=>j("bio",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring focus:ring-pink-200 focus:ring-opacity-50",rows:4,placeholder:"Ceritakan secara singkat tentang hubungan kalian."}),a.jsx(r,{message:N.bio,className:"mt-2"})]}),a.jsx(i,{className:"w-full justify-center",disabled:k,children:k?"Membuat...":"Buat Space"})]})]}):null;return null===s?null:e?a.jsx("div",{className:"bg-white shadow-sm rounded-xl p-6",children:s}):s})(),!h&&Ce()]})]}),a.jsxs("div",{className:"lg:w-80 space-y-6",children:[!de&&h&&Ce(),ce&&a.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6 space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Undangan Menunggu"}),a.jsx("p",{className:"text-sm text-gray-500",children:"You received an invitation to join ke Space berikut."}),a.jsx("div",{className:"space-y-3",children:x.map(e=>a.jsxs("div",{className:"rounded-lg border border-pink-100 bg-pink-50 p-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.space.title}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Dari: ",e.email]}),a.jsx("div",{className:"mt-2 flex gap-2",children:a.jsx(i,{type:"button",onClick:()=>(async e=>{P(null),S(e.id);try{const a=await s.post(route("api.spaces.confirm-partner",{space:e.space.slug}));c.visit(route("spaces.dashboard",{space:a.data.space.slug}))}catch(a){if(s.isAxiosError(a)){const e=a.response?.data?.message??"Failed to confirm invitation. Please try again later.";P(e)}else P("An error occurred while confirming the invitation.")}finally{S(null)}})(e),disabled:_===e.id,className:"flex-1 justify-center bg-pink-600 hover:bg-pink-700",children:_===e.id?"Menerima...":"Terima"})}),C&&a.jsx("p",{className:"mt-2 text-xs text-red-600",children:C})]},e.id))})]}),me.length>0&&a.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6 space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tunggu Keputusanmu"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Ada permintaan pembubaran Space yang membutuhkan persetujuanmu."}),a.jsx("div",{className:"space-y-3",children:me.map(e=>a.jsxs("div",{className:"rounded-lg border border-red-100 bg-red-50 p-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.space?.title??"Space Tidak Ditemukan"}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Diajukan oleh:"," ",e.initiator?.name??"Tidak Diketahui"]}),a.jsx("div",{className:"mt-2 flex gap-2",children:a.jsx("button",{type:"button",onClick:()=>{_e(e.id),oe(e.id)},className:"flex-1 justify-center rounded-full bg-white px-4 py-2 text-sm font-semibold text-gray-600 ring-1 ring-inset ring-gray-200 transition hover:bg-gray-100",children:"Tinjau & Putuskan"})})]},e.id))})]}),Z&&a.jsx("div",{className:be(Z.type),children:Z.message})]})]})})})]})}export{u as default};
