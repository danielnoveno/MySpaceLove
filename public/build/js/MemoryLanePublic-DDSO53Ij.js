import{r as e,j as t}from"./vendor-DXr22Lef.js";import{A as a,S as r}from"./inertia-2axaVlnj.js";import{S as o}from"./SecretCodeGate-DJRCgPku.js";import{S as s,p as i,H as l,ae as n,af as c,ag as d,J as h,K as m}from"./ui-libs-D5k9l7B7.js";const p=({color:a="#f43f5e",trailColor:r,heartCount:o=30,className:s=""})=>{const i=e.useRef(null);return e.useEffect(()=>{const e=i.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s;const l=[],n=Math.max(o,20),c=()=>{e.width=window.innerWidth,e.height=window.innerHeight},d=(e,t)=>{l.push({x:e,y:t,size:12*Math.random()+10,dx:1.8*(Math.random()-.5),dy:1.8*(Math.random()-.5)-.3,life:1})},h=()=>{t.clearRect(0,0,e.width,e.height),r&&(t.fillStyle=r,t.fillRect(0,0,e.width,e.height),t.globalAlpha=1),l.forEach((r,o)=>{r.x+=r.dx,r.y+=r.dy,r.life-=.005,((e,r,o,s=.6)=>{t.save(),t.translate(e,r),t.scale(o/20,o/20),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(0,-3,-5,-15,-20,-15),t.bezierCurveTo(-55,-15,-55,22.5,-55,22.5),t.bezierCurveTo(-55,40,-35,62,0,80),t.bezierCurveTo(35,62,55,40,55,22.5),t.bezierCurveTo(55,22.5,55,-15,20,-15),t.bezierCurveTo(5,-15,0,-3,0,0),t.closePath(),t.fillStyle=`rgba(${(e=>{let t=e.replace("#","");3===t.length&&(t=t.split("").map(e=>e+e).join(""));const a=parseInt(t,16);return`${a>>16&255},${a>>8&255},${255&a}`})(a)},${s})`,t.fill(),t.restore()})(r.x,r.y,r.size,Math.max(r.life,0)),(r.life<=0||r.x<-50||r.y<-50||r.x>e.width+50||r.y>e.height+50)&&l.splice(o,1)}),s=requestAnimationFrame(h)},m=e=>{for(let t=0;t<3;t++)d(e.clientX,e.clientY);for(;l.length>2*n;)l.shift()},p=()=>{c()};return c(),(()=>{for(let t=0;t<n;t++)d(Math.random()*e.width,Math.random()*e.height)})(),h(),window.addEventListener("mousemove",m),window.addEventListener("resize",p),()=>{cancelAnimationFrame(s),window.removeEventListener("mousemove",m),window.removeEventListener("resize",p)}},[a,o,r]),t.jsx("canvas",{ref:i,className:`pointer-events-none fixed inset-0 z-10 h-full w-full mix-blend-screen ${s??""}`})},u=()=>Math.random()>.5?1:-1,x=(e,t,a,r)=>a+((e,t)=>{const a=(e=>{let t=0;for(let a=0;a<e.length;a+=1)t=(t<<5)-t+e.charCodeAt(a),t|=0;return t})(`${e}:${t}`),r=1e4*Math.sin(a);return r-Math.floor(r)})(e,t)*(r-a),f=(e,t,a)=>Math.min(a,Math.max(t,e)),b=(e,t,a,r)=>{const o=r,s=r,i=r+t,l=r+t,n=t/3,c=.6*a;return[`M ${o} ${s}`,(e=>{if(0===e)return`L ${i} ${s}`;const t=o+n,r=o+2*n;return[`L ${t} ${s}`,`C ${t+c} ${s-e*a} ${r-c} ${s-e*a} ${r} ${s}`,`L ${i} ${s}`].join(" ")})(e.top),(e=>{if(0===e)return`L ${i} ${l}`;const t=s+n,r=s+2*n;return[`L ${i} ${t}`,`C ${i+e*a} ${t+c} ${i+e*a} ${r-c} ${i} ${r}`,`L ${i} ${l}`].join(" ")})(e.right),(e=>{if(0===e)return`L ${o} ${l}`;const t=o+2*n,r=o+n;return[`L ${t} ${l}`,`C ${t-c} ${l+e*a} ${r+c} ${l+e*a} ${r} ${l}`,`L ${o} ${l}`].join(" ")})(e.bottom),(e=>{if(0===e)return`L ${o} ${s}`;const t=s+2*n,r=s+n;return[`L ${o} ${t}`,`C ${o-e*a} ${t-c} ${o-e*a} ${r+c} ${o} ${r}`,`L ${o} ${s}`].join(" ")})(e.left),"Z"].join(" ")},g=(e,t)=>`cell-${e}-${t}`,w=(e,t)=>{const a={};for(let r=0;r<e;r+=1)for(let e=0;e<t;e+=1)a[g(r,e)]=null;return a};function v({children:a,imageUrl:r,rows:o=3,cols:s=3,missingCount:i=5,title:l="Assemble our secret puzzle",description:n="Slide the missing pieces onto the board until the picture is whole.",solvedTitle:c="Puzzle complete!",solvedDescription:d="Ready for the next surprise.",onSolved:h,resetLabel:m="Shuffle puzzle pieces",controls:p,pretitle:v="Mini game",dragLabel:y="Drag each piece to the correct slot.",movesLabel:j="Moves"}){const k=e.useMemo(()=>((e,t)=>{const a=Math.floor(720/(1.5*t)),r=Math.min(160,Math.max(60,a)),o=r/4,s=o,i=r+2*s,l=r*t,n=r*e,c=[],d=Array.from({length:e},()=>Array.from({length:t},()=>({top:0,right:0,bottom:0,left:0})));for(let h=0;h<e;h+=1)for(let a=0;a<t;a+=1){const i=0===h?0:-1*d[h-1][a].bottom,l=0===a?0:-1*d[h][a-1].right,n={top:i,right:a===t-1?0:u(),bottom:h===e-1?0:u(),left:l};d[h][a]=n,c.push({id:`${h}-${a}`,row:h,col:a,connectors:n,path:b(n,r,o,s)})}return{pieces:c,base:r,knob:o,offset:s,dimension:i,rows:e,cols:t,boardWidth:l,boardHeight:n}})(o,s),[o,s]),[N,$]=e.useState(()=>w(o,s)),[z,C]=e.useState([]),[M,S]=e.useState(null),[L,T]=e.useState(0),[P,D]=e.useState(null),[E,I]=e.useState(!1),H=r??"/images/example-image-tajen.jpg",A=`${e.useId().replace(/:/g,"")}-outline`,[B,F]=e.useState(()=>`${Date.now()}`),W=e.useCallback(()=>{const{placements:e,missingPieces:t}=((e,t)=>{const a=e.pieces.length,r=Math.min(Math.max(t,1),a),o=(e=>{const t=[...e];for(let a=t.length-1;a>0;a-=1){const e=Math.floor(Math.random()*(a+1));[t[a],t[e]]=[t[e],t[a]]}return t})(e.pieces.map(e=>e.id)).slice(0,r),s=w(e.rows,e.cols);return e.pieces.forEach(e=>{const t=g(e.row,e.col);s[t]=o.includes(e.id)?null:e.id}),{placements:s,missingPieces:o}})(k,i);$(e),C(t),S(null),T(0),D(null),I(!1),re.current.clear(),F(`${Date.now()}-${Math.random()}`)},[k,i]);e.useEffect(()=>{W()},[W,r]);const G=e.useMemo(()=>{const e=new Map;return k.pieces.forEach(t=>e.set(t.id,t)),e},[k.pieces]),R=e.useMemo(()=>z.map(e=>G.get(e)).filter(e=>Boolean(e)).filter(e=>!Object.values(N).some(t=>t===e.id)),[z,G,N]),Y=Math.min(k.boardWidth+96,960),_=e.useMemo(()=>Math.max(Math.round(.1*k.base),8),[k.base]),X=e.useMemo(()=>k.dimension+2*_,[k.dimension,_]),O=2.4*X+48,K=Math.max(4,Math.ceil(k.pieces.length/4)),U=X*Math.min(K,12),q=e.useRef(1),J=e.useCallback(e=>({topFactor:x(`${B}-${e.id}`,"top",.05,.95),leftFactor:x(`${B}-${e.id}`,"left",.05,.95),zIndex:q.current++}),[B]),V=e.useMemo(()=>{const e=new Map;return k.pieces.forEach(t=>{e.set(t.id,J(t))}),e},[k.pieces,J]),[Z,Q]=e.useState(V);e.useEffect(()=>{Q(new Map(V))},[V]),e.useEffect(()=>{let e=0;V.forEach(t=>{t.zIndex>e&&(e=t.zIndex)}),e>=q.current&&(q.current=e+1)},[V]);const ee=e.useMemo(()=>{const e=new Set;return Object.values(N).forEach(t=>{t&&e.add(t)}),e},[N]),te=e.useRef(null),ae=e.useRef({}),re=e.useRef(new Set),oe=e.useCallback(e=>{Q(t=>{const a=t.get(e);if(!a)return t;if(a.zIndex===q.current-1)return t;const r=new Map(t);return r.set(e,{...a,zIndex:q.current++}),r})},[]),se=e.useCallback((e,t)=>{const a=G.get(e);if(!a||!z.includes(e))return;const r=t.match(/cell-(\d+)-(\d+)/);if(!r)return;const[,o,s]=r;if(a.row!==Number(o)||a.col!==Number(s))return D(t),void setTimeout(()=>{D(e=>e===t?null:e)},500);re.current.add(e),delete ae.current[e],$(a=>({...a,[t]:e})),S(null),T(e=>e+1)},[z,G]),ie=e.useCallback((e,t)=>{e.preventDefault();const a=e.dataTransfer.getData("text/plain");a&&se(a,t)},[se]),le=e.useCallback(e=>{M&&se(M,e)},[se,M]),ne=e.useCallback((e,t)=>{e.dataTransfer.setData("text/plain",t),e.dataTransfer.effectAllowed="move",ae.current[t]={x:e.clientX||e.pageX||0,y:e.clientY||e.pageY||0},S(t)},[]),ce=e.useCallback((e,t)=>{const a=e.clientX||e.pageX||0,r=e.clientY||e.pageY||0;0===a&&0===r&&ae.current[t]||(ae.current[t]={x:a,y:r})},[]),de=e.useCallback((e,t)=>{const a=ae.current[t];if(delete ae.current[t],re.current.has(t)||ee.has(t))return void re.current.delete(t);const r=te.current;if(!r)return;const o=r.getBoundingClientRect();let s=e.clientX||e.pageX||a?.x||0,i=e.clientY||e.pageY||a?.y||0;0===s&&0===i&&(s=o.left+o.width*x(`${B}-${t}`,"fallback-x",.1,.9),i=o.top+o.height*x(`${B}-${t}`,"fallback-y",.1,.9));const l=Math.max(o.width,O),n=Math.max(o.height,U),c=Math.max(l-X,0),d=Math.max(n-X,0),h=f(s-o.left-X/2,0,c),m=f(i-o.top-X/2,0,d),p=c>0?h/c:.5,u=d>0?m/d:.5;Q(e=>{const a=new Map(e);return a.set(t,{topFactor:u,leftFactor:p,zIndex:Math.round(x(`${B}-${t}`,"z-adjust",60,140))}),a}),S(e=>e===t?null:e)},[ee,X,B,O,U,S]);return e.useEffect(()=>{Object.values(N).every(e=>null!==e)&&z.length>0&&(I(!0),h?.())},[z.length,h,N]),E?t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"rounded-3xl border border-white/25 bg-white/10 p-6 text-center text-white backdrop-blur",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-white/60",children:"Stage unlocked"}),t.jsx("h2",{className:"mt-3 text-2xl font-bold",children:c}),t.jsx("p",{className:"mt-4 text-sm text-white/70",children:d}),t.jsxs("p",{className:"mt-4 text-xs uppercase tracking-[0.28em] text-white/50",children:["Total langkah: ",L]})]}),p?t.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:p}):null,a]}):t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"space-y-3 text-center",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-white/60",children:v}),t.jsx("h2",{className:"text-2xl font-bold text-white",children:l}),t.jsx("p",{className:"text-sm text-white/70",children:n})]}),p?t.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:p}):null,t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.28em] text-white/60 text-center lg:text-left",children:y}),t.jsxs("div",{className:"flex flex-col items-center gap-8 lg:flex-row lg:items-start lg:justify-start lg:gap-16 lg:pl-6",children:[t.jsxs("div",{className:"flex flex-col items-center gap-6 lg:-ml-8 lg:-mr-6",children:[t.jsxs("div",{className:"relative w-full rounded-[2.5rem] border border-white/15 bg-white/10 p-6 shadow-[0_24px_45px_rgba(15,23,42,0.25)] backdrop-blur",style:{maxWidth:`min(90vw, ${Y}px)`},children:[t.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[2.5rem] border border-white/20"}),t.jsxs("div",{className:"relative mx-auto overflow-visible rounded-[2rem] bg-slate-900 shadow-inner shadow-black/35",style:{padding:24,width:k.boardWidth+48,height:k.boardHeight+48},children:[t.jsxs("svg",{width:k.boardWidth,height:k.boardHeight,viewBox:`0 0 ${k.boardWidth} ${k.boardHeight}`,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:A,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"rgba(99,102,241,0.6)"}),t.jsx("stop",{offset:"100%",stopColor:"rgba(244,114,182,0.6)"})]}),k.pieces.map(e=>t.jsx("clipPath",{id:`clip-${e.id}`,children:t.jsx("path",{d:e.path,transform:`translate(${e.col*k.base-k.offset} ${e.row*k.base-k.offset})`})},e.id))]}),t.jsx("image",{href:H,x:0,y:0,width:k.boardWidth,height:k.boardHeight,preserveAspectRatio:"xMidYMid slice"}),k.pieces.map(e=>t.jsx("path",{d:e.path,transform:`translate(${e.col*k.base-k.offset} ${e.row*k.base-k.offset})`,fill:"none",stroke:`url(#${A})`,strokeWidth:2.4,opacity:.85},`outline-${e.id}`)),k.pieces.map(e=>{const a=g(e.row,e.col);return N[a]?null:t.jsx("path",{d:e.path,transform:`translate(${e.col*k.base-k.offset} ${e.row*k.base-k.offset})`,fill:"rgba(15,23,42,0.72)"},`mask-${e.id}`)})]}),t.jsx("div",{className:"absolute left-1/2 top-1/2 grid -translate-x-1/2 -translate-y-1/2",style:{width:k.boardWidth,height:k.boardHeight,gridTemplateColumns:`repeat(${s}, ${k.base}px)`,gridTemplateRows:`repeat(${o}, ${k.base}px)`},children:k.pieces.map(e=>{const a=g(e.row,e.col),r=N[a]===e.id;return t.jsx("div",{onDragOver:e=>e.preventDefault(),onDrop:e=>ie(e,a),onClick:()=>le(a),className:"relative flex h-full w-full items-center justify-center rounded-[1.85rem] transition "+(r?"":P===a?"ring-2 ring-rose-400/80":M?"ring-1 ring-white/40":"")},a)})})]})]}),t.jsxs("div",{className:"flex w-full max-w-sm flex-col items-center gap-3 rounded-[1.8rem] border border-white/15 bg-white/6 px-4 py-5 text-xs uppercase tracking-[0.28em] text-white/75",children:[t.jsxs("span",{children:[j,": ",L]}),t.jsx("button",{type:"button",onClick:W,className:"rounded-full border border-white/30 px-5 py-2 text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-white transition hover:border-white/55 hover:bg-white/15",children:m})]})]}),t.jsxs("div",{ref:te,className:"relative w-full overflow-visible rounded-[2.5rem] border border-white/15 bg-white/12 text-white shadow-[0_18px_30px_rgba(15,23,42,0.2)] backdrop-blur lg:w-auto lg:flex-shrink-0",style:{maxWidth:`${O}px`,height:U},children:[t.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[2.5rem] border border-white/15"}),R.map(e=>(e=>{const a=Z.get(e.id),r=Math.max(U-X,0),i=Math.max(O-X,0),l=(a?f(a.topFactor,0,1):.5)*r,n=(a?f(a.leftFactor,0,1):.5)*i,c=M===e.id?250:a?.zIndex??30,d={width:X,height:X,padding:_,position:"absolute",top:l,left:n,transform:M===e.id?"scale(1.05)":"scale(1)",transformOrigin:"50% 50%",zIndex:c,boxShadow:M===e.id?"0 16px 32px rgba(15,23,42,0.45)":"0 10px 24px rgba(15,23,42,0.35)",transition:"transform 220ms ease, box-shadow 220ms ease"};return t.jsx("button",{type:"button",draggable:!0,onDragStart:t=>ne(t,e.id),onDrag:t=>ce(t,e.id),onDragEnd:t=>de(t,e.id),onPointerDown:()=>oe(e.id),onFocus:()=>oe(e.id),onClick:()=>S(e.id),className:"group absolute cursor-grab overflow-hidden rounded-[1.6rem] border border-white/25 bg-white/10 transition-shadow duration-200 ease-out active:cursor-grabbing",style:d,children:t.jsxs("svg",{width:k.dimension,height:k.dimension,viewBox:`0 0 ${k.dimension} ${k.dimension}`,style:{width:k.dimension,height:k.dimension},children:[t.jsx("defs",{children:t.jsx("clipPath",{id:`pool-${e.id}`,children:t.jsx("path",{d:e.path})})}),t.jsx("image",{clipPath:`url(#pool-${e.id})`,href:H,x:k.offset-e.col*k.base,y:k.offset-e.row*k.base,width:k.base*s+2*k.offset,height:k.base*o+2*k.offset}),t.jsx("path",{d:e.path,fill:"none",stroke:"rgba(255,255,255,0.85)",strokeWidth:1.5})]})},e.id)})(e))]})]})]})}const y={rose:"from-rose-400 to-rose-600",pink:"from-pink-400 to-pink-600",amber:"from-amber-400 to-amber-600",blue:"from-blue-400 to-blue-600",purple:"from-purple-400 to-purple-600",indigo:"from-indigo-400 to-indigo-600",teal:"from-teal-400 to-teal-600"};function j({rewards:a,maxSelections:r=2,onComplete:o,title:l="ðŸŽ Lucky Box",description:n="Pilih kotak hadiah dan dapatkan kejutan spesial!",selectLabel:c="Pilih",confirmLabel:d="Lanjutkan"}){const[h,m]=e.useState([]),[p,u]=e.useState(new Map),[x,f]=e.useState(null),b=Array.from({length:5},(e,t)=>t),g=h.length===r;return t.jsxs("div",{className:"flex min-h-[600px] flex-col items-center justify-center space-y-8 px-4 py-12",children:[t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:l}),t.jsx("p",{className:"text-white/80 max-w-md",children:n}),t.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-4 py-2 text-sm font-semibold text-white backdrop-blur",children:[t.jsx(s,{className:"h-4 w-4"}),h.length," / ",r," dipilih"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-3 md:grid-cols-5 md:gap-8",children:b.map(e=>{const o=h.includes(e),l=p.get(e),n=x===e,d=h.length>=r&&!o;return t.jsxs("button",{onClick:()=>(e=>{h.length>=r&&!h.includes(e)||p.has(e)||(f(e),setTimeout(()=>{const t=Array.from(p.values()).map(e=>e.id),r=a.filter(e=>!t.includes(e.id)),o=r[Math.floor(Math.random()*r.length)];u(t=>new Map(t).set(e,o)),m(t=>[...t,e]),f(null)},800))})(e),disabled:d||o,className:`group relative flex h-32 w-32 flex-col items-center justify-center rounded-3xl border-2 transition-all duration-300 ${o?"border-white/60 bg-white/20 scale-105":d?"border-white/10 bg-white/5 opacity-40 cursor-not-allowed":"border-white/30 bg-white/10 hover:border-white/50 hover:bg-white/15 hover:scale-110 cursor-pointer"} ${n?"animate-bounce":""}`,children:[l?t.jsxs("div",{className:"flex flex-col items-center gap-2 text-center p-2",children:[t.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br ${y[l.color]||y.rose} text-2xl shadow-lg`,children:l.icon}),t.jsx("div",{className:"space-y-1",children:t.jsx("p",{className:"text-xs font-bold text-white line-clamp-2",children:l.title})})]}):t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(i,{className:"h-12 w-12 transition-transform "+(d||o?"":"group-hover:rotate-12"),strokeWidth:1.5}),t.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-white/70",children:c})]}),n&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-3xl bg-white/20 backdrop-blur",children:t.jsx(s,{className:"h-8 w-8 animate-spin text-yellow-300"})})]},e)})}),g&&t.jsxs("div",{className:"space-y-4 text-center animate-fade-in",children:[t.jsxs("div",{className:"rounded-3xl border border-white/30 bg-white/10 p-6 backdrop-blur max-w-2xl",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ðŸŽ‰ Hadiah yang kamu dapatkan:"}),t.jsx("div",{className:"space-y-3",children:Array.from(p.values()).map((e,a)=>t.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-white/20 bg-white/5 p-4 text-left",children:[t.jsx("div",{className:`flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-gradient-to-br ${y[e.color]||y.rose} text-xl shadow-lg`,children:e.icon}),t.jsxs("div",{className:"flex-1 space-y-1",children:[t.jsx("h4",{className:"font-semibold text-white",children:e.title}),t.jsx("p",{className:"text-sm text-white/70",children:e.description})]})]},a))})]}),t.jsxs("button",{onClick:()=>{const e=Array.from(p.values());o(e)},className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-rose-500 to-purple-600 px-8 py-3 text-sm font-semibold text-white shadow-lg transition hover:from-rose-600 hover:to-purple-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:[d,t.jsx(s,{className:"h-4 w-4"})]})]})]})}const k=[{background:"linear-gradient(135deg, #ffeef8 0%, #ffe0f0 50%, #ffd4e8 100%)",pattern:"radial-gradient(circle at 20% 30%, rgba(255, 105, 180, 0.15) 0%, transparent 50%), radial-gradient(circle at 80% 70%, rgba(255, 182, 193, 0.15) 0%, transparent 50%)",decorations:[{icon:l,color:"#ff69b4",size:40,top:"10%",left:"5%",rotation:-15,opacity:.3},{icon:l,color:"#ff1493",size:30,top:"15%",right:"8%",rotation:20,opacity:.25},{icon:l,color:"#ffb6c1",size:25,bottom:"12%",left:"10%",rotation:10,opacity:.2},{icon:l,color:"#ff69b4",size:35,bottom:"8%",right:"6%",rotation:-25,opacity:.3}],textColor:"#8b0045",titleColor:"#c71585",borderColor:"rgba(255, 105, 180, 0.3)"},{background:"linear-gradient(135deg, #f3e7ff 0%, #e9d5ff 50%, #dcc3ff 100%)",pattern:"radial-gradient(circle at 30% 20%, rgba(147, 51, 234, 0.12) 0%, transparent 50%), radial-gradient(circle at 70% 80%, rgba(168, 85, 247, 0.12) 0%, transparent 50%)",decorations:[{icon:n,color:"#9333ea",size:35,top:"8%",left:"7%",rotation:0,opacity:.35},{icon:n,color:"#a855f7",size:28,top:"12%",right:"10%",rotation:45,opacity:.3},{icon:s,color:"#c084fc",size:32,bottom:"10%",left:"8%",rotation:-20,opacity:.25},{icon:n,color:"#9333ea",size:30,bottom:"15%",right:"7%",rotation:15,opacity:.3}],textColor:"#581c87",titleColor:"#7c3aed",borderColor:"rgba(147, 51, 234, 0.3)"},{background:"linear-gradient(135deg, #fff5f0 0%, #ffe8dc 50%, #ffdcc8 100%)",pattern:"radial-gradient(circle at 25% 25%, rgba(251, 146, 60, 0.1) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(253, 186, 116, 0.1) 0%, transparent 50%)",decorations:[{icon:c,color:"#fb923c",size:38,top:"12%",left:"6%",rotation:-10,opacity:.3},{icon:c,color:"#fdba74",size:32,top:"10%",right:"9%",rotation:25,opacity:.25},{icon:c,color:"#fb923c",size:28,bottom:"14%",left:"9%",rotation:15,opacity:.28},{icon:s,color:"#fdba74",size:30,bottom:"10%",right:"8%",rotation:-15,opacity:.25}],textColor:"#7c2d12",titleColor:"#ea580c",borderColor:"rgba(251, 146, 60, 0.3)"},{background:"linear-gradient(135deg, #f0fdf9 0%, #d1fae5 50%, #a7f3d0 100%)",pattern:"radial-gradient(circle at 35% 30%, rgba(16, 185, 129, 0.12) 0%, transparent 50%), radial-gradient(circle at 65% 70%, rgba(52, 211, 153, 0.12) 0%, transparent 50%)",decorations:[{icon:s,color:"#10b981",size:36,top:"9%",left:"8%",rotation:10,opacity:.32},{icon:l,color:"#34d399",size:30,top:"14%",right:"7%",rotation:-20,opacity:.28},{icon:s,color:"#10b981",size:32,bottom:"11%",left:"7%",rotation:20,opacity:.3},{icon:l,color:"#34d399",size:28,bottom:"13%",right:"9%",rotation:-10,opacity:.25}],textColor:"#064e3b",titleColor:"#059669",borderColor:"rgba(16, 185, 129, 0.3)"},{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #bae6fd 100%)",pattern:"radial-gradient(circle at 40% 20%, rgba(14, 165, 233, 0.1) 0%, transparent 50%), radial-gradient(circle at 60% 80%, rgba(56, 189, 248, 0.1) 0%, transparent 50%)",decorations:[{icon:n,color:"#0ea5e9",size:34,top:"11%",left:"9%",rotation:-5,opacity:.3},{icon:s,color:"#38bdf8",size:30,top:"13%",right:"8%",rotation:30,opacity:.28},{icon:n,color:"#0ea5e9",size:28,bottom:"12%",left:"10%",rotation:12,opacity:.25},{icon:s,color:"#38bdf8",size:32,bottom:"9%",right:"7%",rotation:-18,opacity:.3}],textColor:"#0c4a6e",titleColor:"#0284c7",borderColor:"rgba(14, 165, 233, 0.3)"},{background:"linear-gradient(135deg, #faf5ff 0%, #f3e8ff 50%, #e9d5ff 100%)",pattern:"radial-gradient(circle at 28% 35%, rgba(192, 132, 252, 0.15) 0%, transparent 50%), radial-gradient(circle at 72% 65%, rgba(216, 180, 254, 0.15) 0%, transparent 50%)",decorations:[{icon:l,color:"#c084fc",size:36,top:"10%",left:"7%",rotation:-12,opacity:.32},{icon:n,color:"#d8b4fe",size:30,top:"12%",right:"9%",rotation:22,opacity:.28},{icon:s,color:"#c084fc",size:32,bottom:"13%",left:"8%",rotation:8,opacity:.3},{icon:l,color:"#d8b4fe",size:28,bottom:"11%",right:"10%",rotation:-20,opacity:.25}],textColor:"#581c87",titleColor:"#9333ea",borderColor:"rgba(192, 132, 252, 0.3)"}],N=e.memo(({deco:e,idx:a})=>{const r=e.icon;return t.jsx("div",{className:"absolute animate-float",style:{top:e.top,bottom:e.bottom,left:e.left,right:e.right,transform:`rotate(${e.rotation}deg)`,opacity:e.opacity,animationDelay:.5*a+"s"},children:t.jsx(r,{size:e.size,color:e.color,fill:e.color,strokeWidth:1.5})})});N.displayName="DecorationIcon";const $=e.memo(function({pages:a,onComplete:r,title:o="ðŸ“– Scrapbook Kenangan",description:s="Balik tiap halaman untuk melihat kenangan manis kita",nextLabel:i="Halaman Berikutnya",prevLabel:l="Halaman Sebelumnya",finishLabel:n="Selesai"}){const[c,p]=e.useState(0),[u,x]=e.useState(!1);e.useEffect(()=>{const e=document.createElement("link");return e.href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Pacifico&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@400;500;600;700&display=swap",e.rel="stylesheet",document.head.appendChild(e),()=>{document.head.contains(e)&&document.head.removeChild(e)}},[]);const f=()=>{r()},b=c===a.length-1,g=0===c,w=a[c],v=e.useMemo(()=>k[c%k.length],[c]);return w?t.jsxs("div",{className:"flex min-h-[600px] flex-col items-center justify-center space-y-8 px-4 py-12",children:[t.jsxs("div",{className:"text-center space-y-3 max-w-2xl",children:[t.jsx("h2",{className:"text-3xl font-bold text-white drop-shadow-lg",children:o}),t.jsx("p",{className:"text-white/90 drop-shadow",children:s}),t.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/25 px-4 py-2 text-sm font-semibold text-white backdrop-blur-md shadow-lg border border-white/30",children:[t.jsx(d,{className:"h-4 w-4"}),"Halaman ",c+1," dari ",a.length]})]}),t.jsx("div",{className:"relative w-full max-w-4xl perspective-1000",children:t.jsxs("div",{className:"transform-style-3d transition-all duration-500 "+(u?"scale-95 opacity-70 rotate-y-12":"scale-100 opacity-100"),children:[t.jsx("div",{className:"absolute -inset-2 rounded-[2rem] bg-black/10 blur-xl"}),t.jsxs("div",{className:"relative rounded-[2rem] border-4 shadow-2xl overflow-hidden min-h-[500px] md:min-h-[600px]",style:{background:"canvas"===w.type?w.bg_color||"#fff5f5":v.background,borderColor:"canvas"===w.type?"rgba(0,0,0,0.1)":v.borderColor},children:[t.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:v.pattern}}),t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40",style:{backgroundImage:`\n                                    repeating-linear-gradient(\n                                        transparent,\n                                        transparent 29px,\n                                        ${v.borderColor} 29px,\n                                        ${v.borderColor} 30px\n                                    ),\n                                    linear-gradient(\n                                        to right,\n                                        transparent 0,\n                                        transparent 40px,\n                                        rgba(255, 182, 193, 0.3) 40px,\n                                        rgba(255, 182, 193, 0.3) 42px,\n                                        transparent 42px\n                                    )\n                                `,backgroundSize:"100% 30px, 100% 100%"}}),t.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:v.decorations.map((e,a)=>t.jsx(N,{deco:e,idx:a},a))}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 border-l-4 border-t-4 rounded-tl-[2rem] opacity-30",style:{borderColor:v.borderColor}}),t.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 border-r-4 border-t-4 rounded-tr-[2rem] opacity-30",style:{borderColor:v.borderColor}}),t.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 border-l-4 border-b-4 rounded-bl-[2rem] opacity-30",style:{borderColor:v.borderColor}}),t.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 border-r-4 border-b-4 rounded-br-[2rem] opacity-30",style:{borderColor:v.borderColor}})]}),t.jsxs("div",{className:"relative z-10 w-full h-full",children:["canvas"===w.type?t.jsxs("div",{className:"relative w-full h-[500px] md:h-[600px] overflow-hidden",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 w-1 bg-black/5 z-50"}),w.canvas_elements?.map(e=>t.jsxs("div",{className:"absolute select-none",style:{left:`${e.x}%`,top:`${e.y}%`,width:e.width?`${e.width}%`:"auto",transform:`translate(-50%, -50%) rotate(${e.rotate||0}deg)`,zIndex:e.zIndex},children:["image"===e.type&&e.image_url&&t.jsx("img",{src:e.image_url,alt:"Canvas Content",className:"w-full h-auto block rounded-sm shadow-md"}),"text"===e.type&&t.jsx("div",{className:"whitespace-pre-wrap break-words px-2 leading-relaxed",style:{fontFamily:e.fontFamily,fontSize:`${e.fontSize}px`,color:e.color||"#333"},children:e.content}),"sticker"===e.type&&t.jsx("div",{style:{fontSize:`${e.fontSize||40}px`},children:e.content})]},e.id))]}):t.jsxs("div",{className:"p-8 md:p-12 space-y-6",children:[w.image&&t.jsx("div",{className:"overflow-hidden rounded-2xl border-4 border-white shadow-xl transform hover:scale-[1.02] transition-transform duration-300",children:t.jsx("img",{src:w.image,alt:w.title,className:"h-64 w-full object-cover md:h-80",loading:"lazy",decoding:"async"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-2xl md:text-4xl font-bold drop-shadow-sm",style:{color:v.titleColor},children:w.title}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[w.label&&t.jsx("span",{className:"text-sm md:text-lg font-bold opacity-60 uppercase tracking-widest",style:{color:v.textColor},children:w.label}),w.types&&w.types.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:w.types.map((e,a)=>t.jsx("span",{className:"px-3 py-1 rounded-full text-[10px] md:text-xs font-black uppercase tracking-tighter shadow-sm",style:{backgroundColor:v.borderColor,color:v.titleColor},children:e},a))})]})]}),w.body&&t.jsx("div",{className:"prose prose-lg max-w-none",children:t.jsx("p",{className:"text-base md:text-lg leading-relaxed whitespace-pre-wrap font-medium",style:{color:v.textColor},children:w.body})})]}),t.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center gap-2 z-50 "+("canvas"===w.type?"bg-black/5 py-2 backdrop-blur-sm":""),children:a.map((e,a)=>t.jsx("button",{onClick:()=>(e=>{u||e===c||(x(!0),setTimeout(()=>{p(e),x(!1)},300))})(a),className:"h-2.5 rounded-full transition-all duration-300 "+(a===c?"w-10 shadow-md":"w-2.5 hover:w-4"),style:{backgroundColor:a===c?"canvas"===w.type?"#f43f5e":v.titleColor:"canvas"===w.type?"rgba(0,0,0,0.2)":`${v.titleColor}40`},"aria-label":`Go to page ${a+1}`},a))})]})]})]})}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[t.jsxs("button",{onClick:()=>{c>0&&!u&&(x(!0),setTimeout(()=>{p(e=>e-1),x(!1)},300))},disabled:g||u,className:"inline-flex items-center gap-2 rounded-full border-2 border-white/40 bg-white/20 px-6 py-3 text-sm font-semibold text-white transition hover:border-white/60 hover:bg-white/30 hover:scale-105 disabled:cursor-not-allowed disabled:opacity-40 disabled:hover:border-white/40 disabled:hover:bg-white/20 disabled:hover:scale-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60 backdrop-blur-md shadow-lg",children:[t.jsx(h,{className:"h-4 w-4"}),l]}),b?t.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 px-8 py-3 text-sm font-semibold text-white shadow-xl transition hover:from-emerald-600 hover:to-teal-700 hover:scale-105 hover:shadow-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:[n,t.jsx(m,{className:"h-4 w-4"})]}):t.jsxs("button",{onClick:()=>{c<a.length-1&&!u&&(x(!0),setTimeout(()=>{p(e=>e+1),x(!1)},300))},disabled:u,className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-rose-500 to-purple-600 px-8 py-3 text-sm font-semibold text-white shadow-xl transition hover:from-rose-600 hover:to-purple-700 hover:scale-105 hover:shadow-2xl disabled:cursor-not-allowed disabled:opacity-40 disabled:hover:scale-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:[i,t.jsx(m,{className:"h-4 w-4"})]})]}),t.jsx("style",{children:"\n                @keyframes float {\n                    0%, 100% {\n                        transform: translateY(0px) rotate(var(--rotation));\n                    }\n                    50% {\n                        transform: translateY(-10px) rotate(var(--rotation));\n                    }\n                }\n                .animate-float {\n                    animation: float 3s ease-in-out infinite;\n                }\n            "})]}):t.jsxs("div",{className:"flex min-h-[600px] flex-col items-center justify-center space-y-6 px-4 py-12",children:[t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx(d,{className:"h-16 w-16 mx-auto text-white/60"}),t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Belum ada halaman"}),t.jsx("p",{className:"text-white/70",children:"Scrapbook masih kosong. Tambahkan kenangan di halaman konfigurasi."})]}),t.jsx("button",{onClick:f,className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-6 py-3 text-sm font-semibold text-white transition hover:bg-white/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:n})]})});function z({memoryLane:s,space:l,skipPuzzle:n=!1,isVerified:c=!1}){const d=l?.slug?route("surprise.story.space",{space:l.slug}):route("surprise.story"),h=s.puzzle.grid.rows??4,m=s.puzzle.grid.cols??4,u=h*m,x=s.puzzle.levels??[],[f,b]=e.useState(0),[g,w]=e.useState([]),[y,k]=e.useState(new Map),[N,z]=e.useState(!1),[C,M]=e.useState(n||0===x.length),[S,L]=e.useState(new Map),T=x[f]??null,P=y.get(f)||"puzzle",D=x.length>0&&f>=x.length-1&&"completed"===P||x.length>0&&C,E=(0===x.length||D)&&!c;e.useEffect(()=>{c&&(0===x.length||D)&&a.visit(d)},[c,D,x.length,d]);const I=()=>{f<x.length-1?b(e=>e+1):c&&a.visit(d)},H=e.useMemo(()=>D?x.map((e,t)=>t):g,[g,D,x]),A=t.jsxs("div",{className:"relative mx-auto flex min-h-screen w-full max-w-6xl flex-col px-4 py-16 sm:px-8 md:px-12",children:[x.length>0&&!D&&t.jsx("div",{className:"mb-8 flex flex-wrap justify-center gap-3 text-[0.65rem] font-semibold uppercase tracking-[0.32em]",children:x.map((e,a)=>{const r=H.includes(a),o=r?"border-emerald-300 bg-emerald-500/20 text-emerald-100":D||a!==f||r?"border-white/20 text-white/50":"border-white/60 bg-white/15 text-white";return t.jsx("div",{className:`rounded-full border px-4 py-2 transition ${o}`,children:e.label},e.id)})}),!D&&T?t.jsxs(t.Fragment,{children:["puzzle"===P&&t.jsx(v,{rows:h,cols:m,missingCount:u,imageUrl:T.image??x[f]?.image??"/images/puzzle/defaultimage.png",title:T.label??s.puzzle.title,description:s.puzzle.description,solvedTitle:T.summaryTitle,solvedDescription:T.summaryBody,resetLabel:s.puzzle.resetLabel,pretitle:s.puzzle.pretitle,dragLabel:s.puzzle.dragLabel,movesLabel:s.puzzle.movesLabel,onSolved:()=>{g.includes(f)||w(e=>[...e,f]);const e=x[f];e?.rewards&&e.rewards.length>0?k(e=>new Map(e).set(f,"reward")):e?.flipbook&&e.flipbook.length>0?k(e=>new Map(e).set(f,"flipbook")):k(e=>new Map(e).set(f,"completed"))},children:t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{type:"button",onClick:I,className:"rounded-full bg-white/20 px-6 py-2 text-sm font-semibold uppercase tracking-[0.32em] text-white transition hover:bg-white/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:f<x.length-1?"Lanjut Level":"Selesaikan Semua Puzzle"})})},T.id),"reward"===P&&T.rewards&&t.jsx(j,{rewards:T.rewards,maxSelections:2,onComplete:e=>{L(t=>new Map(t).set(f,e)),k(e=>new Map(e).set(f,"completed"))},title:"ðŸŽ Lucky Box",description:"Pilih 2 kotak hadiah dan dapatkan kejutan spesial!",selectLabel:"Pilih",confirmLabel:"Lanjutkan"}),"flipbook"===P&&T.flipbook&&t.jsx($,{pages:T.flipbook,onComplete:()=>{k(e=>new Map(e).set(f,"completed"))},title:"ðŸ“– Scrapbook Kenangan",description:"Balik tiap halaman untuk melihat kenangan manis kita",nextLabel:"Halaman Berikutnya",prevLabel:"Halaman Sebelumnya",finishLabel:"Selesai"}),"completed"===P&&t.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:t.jsx("button",{type:"button",onClick:I,className:"rounded-full bg-gradient-to-r from-rose-500 to-purple-600 px-8 py-4 text-lg font-semibold text-white shadow-lg transition hover:from-rose-600 hover:to-purple-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60",children:f<x.length-1?"Lanjut ke Level Berikutnya":"Buka Hadiah Terakhir"})})]}):null,D&&!c&&t.jsx("div",{className:"mt-12 flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"inline-flex h-16 w-16 items-center justify-center rounded-full bg-rose-500/20 text-rose-500 animate-bounce",children:t.jsx(i,{className:"h-8 w-8"})}),t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Semua Puzzle Terkumpul!"}),t.jsx("p",{className:"text-white/70",children:"Masukkan PIN spesial kita untuk membuka hadiah utama."})]})})]});return t.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-slate-900 text-white",children:[t.jsx(r,{title:s.headTitle}),t.jsx("div",{className:"absolute inset-0 -z-20 bg-gradient-to-br from-rose-500/30 via-slate-900 to-amber-500/40"}),t.jsx("div",{className:"absolute left-[-120px] top-[-160px] -z-10 h-[500px] w-[500px] rounded-full bg-rose-400/30 blur-3xl"}),t.jsx("div",{className:"absolute right-[-160px] bottom-[-200px] -z-10 h-[560px] w-[560px] rounded-full bg-purple-500/30 blur-3xl"}),t.jsx(p,{color:"#f97316",heartCount:34,className:"opacity-55"}),E?t.jsx(o,{code:s.secretGate.code,title:s.secretGate.title,description:s.secretGate.description,placeholder:s.secretGate.placeholder,buttonLabel:s.secretGate.buttonLabel,errorMessage:s.secretGate.errorMessage,hint:s.secretGate.hint,hintLabel:s.secretGate.hintLabel,accessLabel:s.secretGate.accessLabel,inputLabel:s.secretGate.inputLabel,onSubmit:e=>{l?.slug&&(z(!0),a.post(route("surprise.memory.verifyPin",{space:l.slug}),{pin:e},{preserveScroll:!0,onFinish:()=>z(!1)}))},isSubmitting:N,isUnlocked:c,children:A}):A]})}export{z as default};
