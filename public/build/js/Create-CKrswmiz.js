import{r as e,j as t}from"./vendor-DXr22Lef.js";import{a as s,b as a}from"./games-RZpJ1ixc.js";import{G as i,S as o,x as l}from"./inertia-2axaVlnj.js";import{u as r}from"./useCurrentSpace-CdnheA8Y.js";import{S as n,e as c,P as d,d as m,X as x,U as v,A as h}from"./ui-libs-D5k9l7B7.js";import"./animation-H0tefZHq.js";const u=2097152;function p(){const p=r(),{showSuccess:b,showError:g}=s();if(!p)return null;const f=p.slug,j=p.title,w=i({event_name:"",event_date:(new Date).toISOString().split("T")[0],description:"",activities:[],image:null}),{data:N,setData:y,post:k,processing:C,errors:U,clearErrors:_}=w,[E,S]=e.useState(null),[L,R]=e.useState(null);e.useEffect(()=>()=>{E&&URL.revokeObjectURL(E)},[E]);const M={"--love-hover-color":"#6b7280"},P={"--love-hover-color":"#ef4444"},A=e.useMemo(()=>N.activities.length>0,[N.activities.length]);return t.jsxs(a,{loveCursor:{color:"#8b5cf6",heartCount:40,className:"opacity-55"},header:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(l,{href:route("countdown.index",{space:f}),className:"rounded-lg p-2 transition hover:bg-gray-100",children:t.jsx(h,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-violet-900",children:"Tambah Event Spesial"}),t.jsxs("p",{className:"text-sm text-violet-500",children:["Susun countdown romantis untuk space ",j]})]})]}),children:[t.jsx(o,{title:`Tambah Countdown - ${j}`}),t.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-violet-50 via-white to-fuchsia-50 py-10 px-4 sm:px-6 lg:px-8",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_#ede9fe_0,_transparent_45%)] opacity-50"}),t.jsx("div",{className:"relative mx-auto w-full max-w-4xl",children:t.jsxs("form",{onSubmit:e=>{e.preventDefault(),_(),w.transform(e=>{const t=e.activities.map(e=>e.trim()).filter(e=>e.length>0),s={...e,activities:t};return e.image instanceof File||delete s.image,s}),k(route("countdown.store",{space:f}),{forceFormData:!0,onSuccess:()=>{b("Event countdown berhasil dibuat!")},onError:e=>{g("Gagal membuat countdown. Silakan periksa kembali input Anda.")}})},className:"relative z-10 space-y-10 rounded-[30px] border border-violet-100 bg-white/85 p-8 shadow-xl backdrop-blur-sm md:p-10",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-violet-200 bg-violet-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.32em] text-violet-500",children:[t.jsx(n,{className:"h-3 w-3"}),"Detail Event"]}),t.jsx("h2",{className:"text-2xl font-semibold text-violet-900",children:"Apa acaranya?"}),t.jsx("p",{className:"text-sm text-violet-500",children:"Tulis nama event, tanggal penting, dan sedikit cerita biar kalian sama-sama menantikan momennya."})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold text-violet-900",children:"Nama Event"}),t.jsx("input",{type:"text",value:N.event_name,onChange:e=>y("event_name",e.target.value),className:"w-full rounded-2xl border border-violet-200 bg-white px-4 py-3 text-sm text-violet-900 shadow-sm transition focus:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-200",placeholder:"Contoh: Anniversary ke-3"}),U.event_name&&t.jsx("p",{className:"text-xs text-rose-500",children:U.event_name})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold text-violet-900",children:"Tanggal Event"}),t.jsxs("div",{className:"relative",children:[t.jsx(c,{className:"pointer-events-none absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-violet-400"}),t.jsx("input",{type:"date",value:N.event_date,onChange:e=>y("event_date",e.target.value),className:"w-full rounded-2xl border border-violet-200 bg-white px-10 py-3 text-sm text-violet-900 shadow-sm transition focus:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-200"})]}),U.event_date&&t.jsx("p",{className:"text-xs text-rose-500",children:U.event_date})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold text-violet-900",children:"Deskripsi Singkat"}),t.jsx("textarea",{value:N.description,onChange:e=>y("description",e.target.value),rows:4,className:"w-full rounded-2xl border border-violet-200 bg-white px-4 py-3 text-sm text-violet-900 shadow-sm transition focus:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-200",placeholder:"Ceritakan sedikit tentang event ini dan kenapa kamu excited."}),U.description&&t.jsx("p",{className:"text-xs text-rose-500",children:U.description})]}),t.jsxs("div",{className:"space-y-4 rounded-3xl border border-violet-100 bg-violet-50/60 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-violet-900",children:"Agenda Aktivitas"}),t.jsx("p",{className:"text-sm text-violet-500",children:"Tambahkan rencana kecil biar countdown-nya makin bermakna."})]}),t.jsxs("button",{type:"button",onClick:()=>{y("activities",[...N.activities,""])},"data-love-hover":!0,style:{"--love-hover-color":"#a855f7"},className:"inline-flex items-center gap-2 rounded-full border border-violet-200 bg-white px-4 py-2 text-sm font-medium text-violet-600 transition hover:bg-violet-500 hover:text-white",children:[t.jsx(d,{className:"h-4 w-4"}),"Tambah Agenda"]})]}),A?t.jsx("div",{className:"space-y-3",children:N.activities.map((e,s)=>t.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-violet-100 bg-white px-4 py-3 text-sm text-violet-900 shadow-sm sm:flex-row sm:items-center",children:[t.jsx("input",{type:"text",value:e,onChange:e=>((e,t)=>{const s=[...N.activities];s[e]=t,y("activities",s)})(s,e.target.value),className:"flex-1 rounded-xl border border-transparent bg-violet-50 px-3 py-2 text-sm text-violet-900 transition focus:border-violet-300 focus:outline-none focus:ring-2 focus:ring-violet-200",placeholder:`Agenda #${s+1}`}),t.jsxs("button",{type:"button",onClick:()=>(e=>{const t=N.activities.filter((t,s)=>s!==e);y("activities",t)})(s),"data-love-hover":!0,style:P,className:"inline-flex items-center justify-center gap-2 rounded-full border border-rose-200 px-3 py-2 text-xs font-semibold text-rose-600 transition hover:bg-rose-500 hover:text-white",children:[t.jsx(m,{className:"h-3.5 w-3.5"}),"Hapus"]})]},`activity-${s}`))}):t.jsx("p",{className:"rounded-2xl border border-dashed border-violet-200 bg-white/70 px-4 py-6 text-center text-sm text-violet-500",children:'No agenda yet. Click "Add Agenda" to start planning your romantic activities.'})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-violet-900",children:"Poster / Thumbnail"}),t.jsx("p",{className:"text-sm text-violet-500",children:"Upload foto yang menggambarkan event ini. Opsional tapi bikin countdown makin cantik."})]}),E&&t.jsxs("button",{type:"button",onClick:()=>{E&&URL.revokeObjectURL(E),S(null),y("image",null)},"data-love-hover":!0,style:M,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:bg-slate-600 hover:text-white",children:[t.jsx(x,{className:"h-4 w-4"}),"Hapus Poster"]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr,3fr]",children:[t.jsxs("label",{className:"flex flex-col items-center justify-center rounded-3xl border-2 border-dashed border-violet-200 bg-white/90 px-6 py-10 text-center text-sm text-violet-500 transition hover:border-violet-400 hover:bg-violet-50",children:[t.jsx(v,{className:"h-10 w-10 text-violet-400"}),t.jsx("span",{className:"mt-3 font-semibold text-violet-700",children:"Pilih Poster Event"}),t.jsx("span",{className:"mt-1 text-xs text-violet-400",children:"Format JPG, PNG, atau GIF (maks 2 MB)"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async e=>{const t=e.target.files?.[0];if(t){R(null);try{const e=await(async e=>{if(!e.type.startsWith("image/"))throw new Error("File is not an image.");if(e.size<=u||"image/svg+xml"===e.type||"image/gif"===e.type)return e;const t=await new Promise((t,s)=>{const a=new Image,i=URL.createObjectURL(e);a.onload=()=>{URL.revokeObjectURL(i),t(a)},a.onerror=()=>{URL.revokeObjectURL(i),s(new Error("Failed to load image."))},a.src=i}),s=Math.min(1,1600/Math.max(t.width,t.height)),a=Math.max(1,Math.round(t.width*s)),i=Math.max(1,Math.round(t.height*s)),o=document.createElement("canvas");o.width=a,o.height=i;const l=o.getContext("2d");if(!l)throw new Error("Canvas context unavailable.");l.drawImage(t,0,0,a,i);const r=await new Promise(e=>o.toBlob(t=>e(t),"image/jpeg",.78));if(!r)return e;const n=e.name.replace(/\.[^.]+$/,"")+".jpg";return new File([r],n,{type:"image/jpeg",lastModified:Date.now()})})(t);if(e.size>u)return R("Ukuran maksimal 2MB. Coba pilih/resize gambar lebih kecil."),y("image",null),void S(null);y("image",e),E&&URL.revokeObjectURL(E),S(URL.createObjectURL(e))}catch(s){R("Failed to process image. Make sure the file format is supported and try again."),y("image",null),S(null)}}}})]}),t.jsx("div",{className:"flex items-center justify-center rounded-3xl border border-violet-100 bg-violet-50/60 p-4",children:E?t.jsx("img",{src:E,alt:"Preview poster event",className:"h-48 w-full rounded-2xl object-cover shadow-lg"}):t.jsx("p",{className:"text-center text-sm text-violet-500",children:"Poster belum dipilih. Kamu boleh melewati langkah ini."})})]}),L&&t.jsx("p",{className:"text-xs text-rose-500 mt-2",children:L}),U.image&&t.jsx("p",{className:"text-xs text-rose-500 mt-2",children:"validation.uploaded"===U.image?"Ukuran poster terlalu besar. Coba unggah file di bawah 2MB.":U.image})]}),t.jsxs("div",{className:"flex flex-col gap-3 pt-2 sm:flex-row",children:[t.jsx(l,{href:route("countdown.index",{space:f}),"data-love-hover":!0,style:M,className:"flex-1 rounded-full border border-slate-200 px-6 py-3 text-center text-sm font-semibold text-slate-600 transition hover:bg-slate-600 hover:text-white",children:"Batal"}),t.jsx("button",{type:"submit",disabled:C,"data-love-hover":!0,style:{"--love-hover-color":"#8b5cf6"},className:"flex-1 rounded-full bg-gradient-to-r from-violet-500 to-fuchsia-500 px-6 py-3 text-sm font-semibold text-white shadow-lg transition hover:shadow-xl disabled:cursor-not-allowed disabled:opacity-60",children:C?"Menyimpan...":"Simpan Event"})]})]})})]})]})}export{p as default};
