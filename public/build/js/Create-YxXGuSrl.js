import{G as e,r as t,j as s,S as a,x as i}from"./react-core-DkDn4djD.js";import{a as l}from"./games-DLF3M88Y.js";import{u as o}from"./useCurrentSpace-B-ijKysZ.js";import{S as r,a as n,P as c,T as d,X as m,U as x,A as v}from"./ui-libs--z-UAavT.js";import"./inertia-BBHw8PYu.js";import"./vendor-D-GzWRLi.js";import"./maps-CVSyMViq.js";import"./animation-Dcgp7Est.js";const h=2097152;function p(){const p=o();if(!p)return null;const u=p.slug,b=p.title,g=e({event_name:"",event_date:(new Date).toISOString().split("T")[0],description:"",activities:[],image:null}),{data:f,setData:j,post:w,processing:N,errors:y,clearErrors:k}=g,[C,U]=t.useState(null),[_,L]=t.useState(null);t.useEffect(()=>()=>{C&&URL.revokeObjectURL(C)},[C]);const R={"--love-hover-color":"#6b7280"},M={"--love-hover-color":"#ef4444"},E=t.useMemo(()=>f.activities.length>0,[f.activities.length]);return s.jsxs(l,{loveCursor:{color:"#8b5cf6",heartCount:40,className:"opacity-55"},header:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(i,{href:route("countdown.index",{space:u}),className:"rounded-lg p-2 transition hover:bg-gray-100",children:s.jsx(v,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-violet-900",children:"Tambah Event Spesial"}),s.jsxs("p",{className:"text-sm text-violet-500",children:["Susun countdown romantis untuk space ",b]})]})]}),children:[s.jsx(a,{title:`Tambah Countdown - ${b}`}),s.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-violet-50 via-white to-fuchsia-50 py-10 px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_#ede9fe_0,_transparent_45%)] opacity-50"}),s.jsx("div",{className:"relative mx-auto w-full max-w-4xl",children:s.jsxs("form",{onSubmit:e=>{e.preventDefault(),k(),g.transform(e=>{const t=e.activities.map(e=>e.trim()).filter(e=>e.length>0),s={...e,activities:t};return e.image instanceof File||delete s.image,s}),w(route("countdown.store",{space:u}),{forceFormData:!0})},className:"relative z-10 space-y-10 rounded-[30px] border border-violet-100 bg-white/85 p-8 shadow-xl backdrop-blur-sm md:p-10",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-violet-200 bg-violet-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.32em] text-violet-500",children:[s.jsx(r,{className:"h-3 w-3"}),"Detail Event"]}),s.jsx("h2",{className:"text-2xl font-semibold text-violet-900",children:"Apa acaranya?"}),s.jsx("p",{className:"text-sm text-violet-500",children:"Tulis nama event, tanggal penting, dan sedikit cerita biar kalian sama-sama menantikan momennya."})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-semibold text-violet-900",children:"Nama Event"}),s.jsx("input",{type:"text",value:f.event_name,onChange:e=>j("event_name",e.target.value),className:"w-full rounded-2xl border border-violet-200 bg-white px-4 py-3 text-sm text-violet-900 shadow-sm transition focus:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-200",placeholder:"Contoh: Anniversary ke-3"}),y.event_name&&s.jsx("p",{className:"text-xs text-rose-500",children:y.event_name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-semibold text-violet-900",children:"Tanggal Event"}),s.jsxs("div",{className:"relative",children:[s.jsx(n,{className:"pointer-events-none absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-violet-400"}),s.jsx("input",{type:"date",value:f.event_date,onChange:e=>j("event_date",e.target.value),className:"w-full rounded-2xl border border-violet-200 bg-white px-10 py-3 text-sm text-violet-900 shadow-sm transition focus:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-200"})]}),y.event_date&&s.jsx("p",{className:"text-xs text-rose-500",children:y.event_date})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-semibold text-violet-900",children:"Deskripsi Singkat"}),s.jsx("textarea",{value:f.description,onChange:e=>j("description",e.target.value),rows:4,className:"w-full rounded-2xl border border-violet-200 bg-white px-4 py-3 text-sm text-violet-900 shadow-sm transition focus:border-violet-400 focus:outline-none focus:ring-2 focus:ring-violet-200",placeholder:"Ceritakan sedikit tentang event ini dan kenapa kamu excited."}),y.description&&s.jsx("p",{className:"text-xs text-rose-500",children:y.description})]}),s.jsxs("div",{className:"space-y-4 rounded-3xl border border-violet-100 bg-violet-50/60 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-violet-900",children:"Agenda Aktivitas"}),s.jsx("p",{className:"text-sm text-violet-500",children:"Tambahkan rencana kecil biar countdown-nya makin bermakna."})]}),s.jsxs("button",{type:"button",onClick:()=>{j("activities",[...f.activities,""])},"data-love-hover":!0,style:{"--love-hover-color":"#a855f7"},className:"inline-flex items-center gap-2 rounded-full border border-violet-200 bg-white px-4 py-2 text-sm font-medium text-violet-600 transition hover:bg-violet-500 hover:text-white",children:[s.jsx(c,{className:"h-4 w-4"}),"Tambah Agenda"]})]}),E?s.jsx("div",{className:"space-y-3",children:f.activities.map((e,t)=>s.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-violet-100 bg-white px-4 py-3 text-sm text-violet-900 shadow-sm sm:flex-row sm:items-center",children:[s.jsx("input",{type:"text",value:e,onChange:e=>((e,t)=>{const s=[...f.activities];s[e]=t,j("activities",s)})(t,e.target.value),className:"flex-1 rounded-xl border border-transparent bg-violet-50 px-3 py-2 text-sm text-violet-900 transition focus:border-violet-300 focus:outline-none focus:ring-2 focus:ring-violet-200",placeholder:`Agenda #${t+1}`}),s.jsxs("button",{type:"button",onClick:()=>(e=>{const t=f.activities.filter((t,s)=>s!==e);j("activities",t)})(t),"data-love-hover":!0,style:M,className:"inline-flex items-center justify-center gap-2 rounded-full border border-rose-200 px-3 py-2 text-xs font-semibold text-rose-600 transition hover:bg-rose-500 hover:text-white",children:[s.jsx(d,{className:"h-3.5 w-3.5"}),"Hapus"]})]},`activity-${t}`))}):s.jsx("p",{className:"rounded-2xl border border-dashed border-violet-200 bg-white/70 px-4 py-6 text-center text-sm text-violet-500",children:'No agenda yet. Click "Add Agenda" to start planning your romantic activities.'})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-violet-900",children:"Poster / Thumbnail"}),s.jsx("p",{className:"text-sm text-violet-500",children:"Upload foto yang menggambarkan event ini. Opsional tapi bikin countdown makin cantik."})]}),C&&s.jsxs("button",{type:"button",onClick:()=>{C&&URL.revokeObjectURL(C),U(null),j("image",null)},"data-love-hover":!0,style:R,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:bg-slate-600 hover:text-white",children:[s.jsx(m,{className:"h-4 w-4"}),"Hapus Poster"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr,3fr]",children:[s.jsxs("label",{className:"flex flex-col items-center justify-center rounded-3xl border-2 border-dashed border-violet-200 bg-white/90 px-6 py-10 text-center text-sm text-violet-500 transition hover:border-violet-400 hover:bg-violet-50",children:[s.jsx(x,{className:"h-10 w-10 text-violet-400"}),s.jsx("span",{className:"mt-3 font-semibold text-violet-700",children:"Pilih Poster Event"}),s.jsx("span",{className:"mt-1 text-xs text-violet-400",children:"Format JPG, PNG, atau GIF (maks 2 MB)"}),s.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async e=>{const t=e.target.files?.[0];if(t){L(null);try{const e=await(async e=>{if(!e.type.startsWith("image/"))throw new Error("File is not an image.");if(e.size<=h||"image/svg+xml"===e.type||"image/gif"===e.type)return e;const t=await new Promise((t,s)=>{const a=new Image,i=URL.createObjectURL(e);a.onload=()=>{URL.revokeObjectURL(i),t(a)},a.onerror=()=>{URL.revokeObjectURL(i),s(new Error("Failed to load image."))},a.src=i}),s=Math.min(1,1600/Math.max(t.width,t.height)),a=Math.max(1,Math.round(t.width*s)),i=Math.max(1,Math.round(t.height*s)),l=document.createElement("canvas");l.width=a,l.height=i;const o=l.getContext("2d");if(!o)throw new Error("Canvas context unavailable.");o.drawImage(t,0,0,a,i);const r=await new Promise(e=>l.toBlob(t=>e(t),"image/jpeg",.78));if(!r)return e;const n=e.name.replace(/\.[^.]+$/,"")+".jpg";return new File([r],n,{type:"image/jpeg",lastModified:Date.now()})})(t);if(e.size>h)return L("Ukuran maksimal 2MB. Coba pilih/resize gambar lebih kecil."),j("image",null),void U(null);j("image",e),C&&URL.revokeObjectURL(C),U(URL.createObjectURL(e))}catch(s){L("Failed to process image. Make sure the file format is supported and try again."),j("image",null),U(null)}}}})]}),s.jsx("div",{className:"flex items-center justify-center rounded-3xl border border-violet-100 bg-violet-50/60 p-4",children:C?s.jsx("img",{src:C,alt:"Preview poster event",className:"h-48 w-full rounded-2xl object-cover shadow-lg"}):s.jsx("p",{className:"text-center text-sm text-violet-500",children:"Poster belum dipilih. Kamu boleh melewati langkah ini."})})]}),_&&s.jsx("p",{className:"text-xs text-rose-500 mt-2",children:_}),y.image&&s.jsx("p",{className:"text-xs text-rose-500 mt-2",children:"validation.uploaded"===y.image?"Ukuran poster terlalu besar. Coba unggah file di bawah 2MB.":y.image})]}),s.jsxs("div",{className:"flex flex-col gap-3 pt-2 sm:flex-row",children:[s.jsx(i,{href:route("countdown.index",{space:u}),"data-love-hover":!0,style:R,className:"flex-1 rounded-full border border-slate-200 px-6 py-3 text-center text-sm font-semibold text-slate-600 transition hover:bg-slate-600 hover:text-white",children:"Batal"}),s.jsx("button",{type:"submit",disabled:N,"data-love-hover":!0,style:{"--love-hover-color":"#8b5cf6"},className:"flex-1 rounded-full bg-gradient-to-r from-violet-500 to-fuchsia-500 px-6 py-3 text-sm font-semibold text-white shadow-lg transition hover:shadow-xl disabled:cursor-not-allowed disabled:opacity-60",children:N?"Menyimpan...":"Simpan Event"})]})]})})]})]})}export{p as default};
