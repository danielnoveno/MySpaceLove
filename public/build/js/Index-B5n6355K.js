import{G as e,r as a,j as s,S as t,A as r,x as n}from"./react-core-DkDn4djD.js";import{a as i}from"./games-DLF3M88Y.js";import{I as l}from"./InputError-GRMu2n3K.js";import{I as o}from"./InputLabel-noL9HGU3.js";import{P as d}from"./PrimaryButton-kcDWg3Y2.js";import{T as c}from"./TextInput-f5Z7GFl-.js";import{ag as m}from"./vendor-D-GzWRLi.js";import{$ as p}from"./ui-libs--z-UAavT.js";import"./inertia-BBHw8PYu.js";import"./maps-CVSyMViq.js";import"./animation-Dcgp7Est.js";function u({spaces:u,pendingInvitations:x,status:g,canCreate:h,pendingSeparationRequests:b,separationConfirmationPhrase:f}){const{data:y,setData:j,post:v,processing:k,errors:N,reset:w}=e({title:"",bio:""}),[_,S]=a.useState(null),[C,P]=a.useState(null),[D,q]=a.useState(""),[A,F]=a.useState(!1),[$,M]=a.useState(null),[U,T]=a.useState(null),[E,B]=a.useState(null),[Y,I]=a.useState({}),[K,R]=a.useState({}),[G,H]=a.useState({}),[L,V]=a.useState(null),[W,z]=a.useState(null),[J,O]=a.useState({}),[Q,X]=a.useState({}),[Z,ee]=a.useState(null),[ae,se]=a.useState(null),[te,re]=a.useState(null),[ne,ie]=a.useState(null),[le,oe]=a.useState(null),de=u.length>0,ce=x.length>0,me=a.useMemo(()=>b.filter(e=>e.requires_your_confirmation),[b]);a.useEffect(()=>{if(null===le)return;if("undefined"==typeof window)return;const e=document.getElementById(`space-separation-${le}`);e?.scrollIntoView({behavior:"smooth",block:"start"})},[le]);const pe=a.useCallback(e=>Y[e]??{name:"",email:""},[Y]),ue=a.useCallback((e,a,s)=>{I(t=>{const r=t[e]??{name:"",email:""};return{...t,[e]:{...r,[a]:s}}})},[]),xe=e=>{switch(e){case"accepted":return"border border-emerald-200 bg-emerald-50 text-emerald-700";case"pending":return"border border-amber-200 bg-amber-50 text-amber-700";case"declined":case"rejected":return"border border-red-200 bg-red-50 text-red-700";default:return"border border-gray-200 bg-gray-50 text-gray-600"}},ge=e=>{const a=e.split(" ").filter(e=>e.length>0);return 0===a.length?"":1===a.length?a[0].charAt(0).toUpperCase():a[0].charAt(0).toUpperCase()+a[a.length-1].charAt(0).toUpperCase()},he=e=>{const a=["bg-pink-100 text-pink-800","bg-purple-100 text-purple-800","bg-indigo-100 text-indigo-800","bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-yellow-100 text-yellow-800","bg-red-100 text-red-800"];return a[e%a.length]},be=a.useCallback(e=>"success"===e?"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700":"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",[]),fe=a.useCallback((e,a)=>{O(s=>{const t=s[e]??{phrase:"",reason:""};return{...s,[e]:{phrase:a.phrase??t.phrase,reason:a.reason??t.reason}}})},[]),ye=a.useCallback((e,a)=>{X(s=>{const t=s[e]??{phrase:"",reason:""};return{...s,[e]:{phrase:a.phrase??t.phrase,reason:a.reason??t.reason}}})},[]),je=a.useCallback(e=>J[e]??{phrase:"",reason:""},[J]),ve=a.useCallback(e=>Q[e]??{phrase:"",reason:""},[Q]),ke=e=>{e.preventDefault(),h&&v(route("spaces.store"),{onSuccess:()=>{w()}})},Ne=async e=>{if(e.preventDefault(),A)return;M(null),T(null);const a=D.trim().toUpperCase();if(a){F(!0);try{const e=await m.post(route("api.spaces.request-join"),{partner_code:a});M({type:"success",message:e.data?.message??"Successfully joined your partner's Space."}),q("");const s=e.data?.space?.slug;s?setTimeout(()=>{r.visit(route("spaces.dashboard",{space:s}))},200):r.reload()}catch(s){if(m.isAxiosError(s)){const e=s.response?.data,a=e?.errors?.partner_code;a&&T(a.join(", ")),M({type:"error",message:e?.message??(a?a.join(", "):void 0)??"Failed to submit join request."})}else M({type:"error",message:"An error occurred while submitting the join request."})}finally{F(!1)}}else T("Partner code is required.")},we=a.useCallback(e=>{B(a=>a===e?null:e),H(a=>({...a,[e]:null})),R(a=>({...a,[e]:{}}))},[]),_e=a.useCallback(e=>{oe(a=>a===e?null:e)},[]),Se=async(e,a)=>{const s=ve(e.id),t=s.phrase.trim(),n=s.reason.trim();if(t)if(t.toUpperCase()===f.toUpperCase()){re(e.id),ee(null);try{const s=await m.post(route("api.spaces.separation.respond",{space:e.slug}),{decision:a,confirmation_phrase:t,reason:""===n?void 0:n});ee({type:"success",message:s.data?.message??("approve"===a?"Space ended successfully.":"Dissolution request rejected.")}),X(a=>({...a,[e.id]:{phrase:"",reason:""}})),r.reload()}catch(i){let e="Failed to process dissolution confirmation.";m.isAxiosError(i)&&(e=i.response?.data?.message??e),ee({type:"error",message:e})}finally{re(null)}}else ee({type:"error",message:`Confirmation phrase must be exactly "${f}".`});else ee({type:"error",message:"Please type the confirmation phrase first."})},Ce=()=>s.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gabung ke Space Pasangan"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Masukkan kode pasangan (Partner Code) yang dibagikan pasanganmu untuk langsung bergabung."}),s.jsxs("form",{onSubmit:Ne,className:"mt-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:"partner_code",value:"Kode Pasangan"}),s.jsx(c,{id:"partner_code",name:"partner_code",value:D,className:"mt-1 block w-full uppercase tracking-widest",onChange:e=>q(e.target.value.toUpperCase()),placeholder:"Contoh: ABCD1234"}),s.jsx(l,{message:U??void 0,className:"mt-2"})]}),s.jsx(d,{type:"submit",className:"w-full justify-center",disabled:A,children:A?"Menghubungkan...":"Gabung ke Space"})]})]});return s.jsxs(i,{header:s.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Daftar Space"}),children:[s.jsx(t,{title:"Spaces"}),s.jsx("div",{className:"py-12",children:s.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:gap-8",children:[s.jsxs("div",{className:"flex-1 space-y-6",children:[de&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6 space-y-5",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"You already have a Space"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Each account can only have one Space. If you want to create a new Space, release the old Space first."})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Spaces"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Manage your Space, invite your partner, or end the Space relationship from this page."})]}),s.jsx("div",{className:"space-y-4",children:u.map(e=>{const a=pe(e.id),t=G[e.id],i=K[e.id]??{},p=E===e.id,u=e.pending_separation,x=e.pending_invitation;return s.jsxs("div",{className:"rounded-lg border border-gray-100 bg-white p-4 shadow-sm",children:[s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-base font-semibold text-gray-900",children:e.title}),s.jsx("p",{className:"text-sm text-gray-500",children:e.has_partner?"Partner already connected. Enjoy all features together.":"No partner yet. You can invite a partner anytime."}),s.jsx("div",{className:"mt-2 flex flex-wrap items-center gap-4",children:e.users.filter(e=>null!==e).map(e=>s.jsxs("div",{className:"flex items-center gap-2",children:[e.profile_photo_url?s.jsx("img",{className:"h-8 w-8 rounded-full object-cover flex-shrink-0",src:e.profile_photo_url,alt:e.name}):s.jsx("div",{className:`h-8 w-8 rounded-full flex-shrink-0 flex items-center justify-center text-sm font-semibold ${he(e.id)}`,title:e.name,children:ge(e.name)}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.name})]},e.id))}),x&&s.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:[x.status_label," ",s.jsx("span",{className:"font-semibold",children:x.email}),x.sent_at?` â€¢ Dikirim ${x.sent_at}`:""]})]}),s.jsx("div",{className:"flex flex-wrap items-center gap-2",children:s.jsx(n,{href:route("spaces.dashboard",{space:e.slug}),className:"inline-flex items-center justify-center rounded-full bg-pink-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-pink-700",children:"Masuk Space"})})]}),u&&s.jsx("div",{className:"mt-3 rounded-md border border-red-100 bg-red-50 px-3 py-2 text-sm text-red-700",children:u.initiated_by_you?"Dissolution request sent. Waiting for your partner's confirmation.":u.requires_your_confirmation?"Dissolution request awaiting your decision.":"Dissolution request is being processed."}),!e.has_partner&&s.jsxs("div",{className:"mt-4 space-y-3",children:[t&&s.jsx("div",{className:be(t.type),children:t.message}),x?s.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 text-sm text-amber-800",children:[s.jsxs("p",{children:["Undangan sedang menunggu konfirmasi dari"," ",s.jsx("span",{className:"font-semibold",children:x.email}),". Batalkan undangan ini jika ingin mengundang akun lain."]}),s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:s.jsx(d,{type:"button",disabled:W===x.id,onClick:()=>{(async(e,a)=>{if("undefined"==typeof window||window.confirm("Cancel this invitation? You can invite another account afterwards.")){H(a=>({...a,[e.id]:null})),z(a);try{const s=await m.delete(route("api.spaces.invitations.cancel",{space:e.slug,invitation:a}));H(a=>({...a,[e.id]:{type:"success",message:s.data?.message??"Invitation cancelled successfully."}})),B(null),r.reload()}catch(s){let a="Failed to cancel invitation. Please try again later.";if(m.isAxiosError(s)){const e=s.response?.data;"string"==typeof e?.message&&(a=e.message)}H(s=>({...s,[e.id]:{type:"error",message:a}}))}finally{z(null)}}})(e,x.id)},className:"bg-amber-500 hover:bg-amber-600 disabled:opacity-70",children:W===x.id?"Membatalkan...":"Batalkan Undangan"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:()=>we(e.id),className:"inline-flex items-center justify-center rounded-full border border-pink-200 px-4 py-2 text-sm font-semibold text-pink-600 transition hover:bg-pink-50",children:p?"Tutup Form Tambah Pasangan":"Tambahkan Pasangan"}),p&&s.jsxs("form",{className:"space-y-4 rounded-lg border border-pink-100 bg-pink-50 p-4",onSubmit:a=>{a.preventDefault(),(async e=>{const a=pe(e.id),s=a.name.trim(),t=a.email.trim();if(H(a=>({...a,[e.id]:null})),R(a=>({...a,[e.id]:{}})),""===s||""===t)return R(a=>({...a,[e.id]:{partner_name:""===s?"Partner name is required.":void 0,partner_email:""===t?"Partner email is required.":void 0}})),void H(a=>({...a,[e.id]:{type:"error",message:"Please complete partner name and email first."}}));V(e.id);try{const a=await m.post(route("api.spaces.connect-partner",{space:e.slug}),{partner_name:s,partner_email:t});H(s=>({...s,[e.id]:{type:"success",message:a.data?.message??"Invitation sent successfully. Your partner just needs to join."}})),I(a=>({...a,[e.id]:{name:"",email:""}})),B(null),r.reload()}catch(n){if(m.isAxiosError(n)){const a=n.response?.data,s=a?.errors??{};R(a=>({...a,[e.id]:{partner_name:s.partner_name?.join(", "),partner_email:s.partner_email?.join(", ")}})),H(t=>({...t,[e.id]:{type:"error",message:a?.message??s.partner_name?.join(", ")??s.partner_email?.join(", ")??"Failed to send invitation. Please try again."}}))}else H(a=>({...a,[e.id]:{type:"error",message:"An error occurred while sending the invitation."}}))}finally{V(null)}})(e)},children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:`partner_name_${e.id}`,value:"Nama Pasangan"}),s.jsx(c,{id:`partner_name_${e.id}`,value:a.name,className:"mt-1 block w-full",onChange:a=>ue(e.id,"name",a.target.value),placeholder:"Contoh: Aulia Rahma",autoComplete:"off"}),s.jsx(l,{message:i.partner_name,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:`partner_email_${e.id}`,value:"Email Pasangan"}),s.jsx(c,{id:`partner_email_${e.id}`,type:"email",value:a.email,className:"mt-1 block w-full",onChange:a=>ue(e.id,"email",a.target.value),placeholder:"nama@email.com",autoComplete:"off"}),s.jsx(l,{message:i.partner_email,className:"mt-1"})]}),s.jsx(d,{type:"submit",className:"w-full justify-center",disabled:L===e.id,children:L===e.id?"Mengirim undangan...":"Kirim Undangan"}),s.jsx("p",{className:"text-xs text-pink-600",children:"Your partner will see this invitation when they log in using the email above."})]})]})]}),e.invitations.length>0&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Riwayat undangan"}),s.jsx("div",{className:"space-y-2",children:e.invitations.map(e=>s.jsx("div",{className:"rounded-lg border border-gray-100 bg-gray-50 p-3",children:s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.email}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Dikirim"," ",e.sent_at??"waktu tidak diketahui"]}),e.responded_at&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Ditanggapi"," ",e.responded_at]}),e.cancelled_at&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Dibatalkan"," ",e.cancelled_at]})]}),s.jsx("div",{className:"flex items-start sm:flex-col sm:items-end",children:s.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold "+xe(e.status),children:e.status_label})})]})},e.id))})]})]},e.id)})})]})]}),de&&u.map(e=>(e=>{const a=e.pending_separation,t=je(e.id),n=ve(e.id),i=le===e.id;return a?s.jsxs("div",{id:`space-separation-${e.id}`,className:"bg-white shadow-sm rounded-xl p-6 space-y-5",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:s.jsx(p,{className:"h-6 w-6 text-red-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Permintaan Pembubaran Sedang Berjalan"}),s.jsx("p",{children:a?.initiated_by_you?"You have submitted a request to end this Space. Your partner must type the confirmation phrase to complete the process.":a?.requires_your_confirmation?"Your partner requested to end this Space. Make sure you consider carefully before making a decision.":"Dissolution request is being processed."}),a?.created_at&&s.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Diajukan pada"," ",new Date(a.created_at).toLocaleString()]})]})]}),a?.reason&&(a.reason.initiator||a.reason.partner)&&s.jsxs("div",{className:"rounded-xl border border-red-100 bg-red-50 p-4 text-sm text-red-700 space-y-1",children:[a.reason.initiator&&s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Alasan pengaju:"})," ",a.reason.initiator]}),a.reason.partner&&s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Catatan pasangan:"})," ",a.reason.partner]})]}),a?.initiated_by_you&&s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between rounded-xl border border-dashed border-red-200 bg-red-50 p-4",children:[s.jsx("div",{className:"text-sm text-red-700",children:"You can still cancel this request if you change your mind."}),s.jsx("button",{type:"button",onClick:()=>(async e=>{ee(null),ie(e.id);try{const a=await m.post(route("api.spaces.separation.cancel",{space:e.slug}));ee({type:"success",message:a.data?.message??"Dissolution request cancelled."}),r.reload()}catch(a){let e="Failed to cancel dissolution request.";m.isAxiosError(a)&&(e=a.response?.data?.message??e),ee({type:"error",message:e})}finally{ie(null)}})(e),disabled:ne===e.id,className:"inline-flex items-center justify-center rounded-full bg-white px-4 py-2 text-sm font-semibold text-red-600 ring-1 ring-inset ring-red-200 transition hover:bg-red-100 disabled:pointer-events-none disabled:opacity-60",children:ne===e.id?"Membatalkan...":"Batalkan Permintaan"})]}),a?.requires_your_confirmation&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:`respond_reason_${e.id}`,value:"Berikan catatan (opsional)"}),s.jsx("textarea",{id:`respond_reason_${e.id}`,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring focus:ring-red-200 focus:ring-opacity-50",rows:3,value:n.reason,onChange:a=>ye(e.id,{reason:a.target.value}),placeholder:"Bagikan alasanmu atau harapan setelah keputusan ini."})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:`respond_phrase_${e.id}`,value:"Frasa Konfirmasi"}),s.jsx(c,{id:`respond_phrase_${e.id}`,value:n.phrase,className:"mt-1 block w-full uppercase tracking-widest",onChange:a=>ye(e.id,{phrase:a.target.value.toUpperCase()}),placeholder:f}),s.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Ketik persis ",'"',f,'"'," untuk mengonfirmasi keputusanmu."]})]}),s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[s.jsx("button",{type:"button",onClick:()=>Se(e,"reject"),disabled:te===e.id,className:"inline-flex items-center justify-center rounded-full bg-white px-4 py-2 text-sm font-semibold text-gray-600 ring-1 ring-inset ring-gray-200 transition hover:bg-gray-100 disabled:pointer-events-none disabled:opacity-60",children:te===e.id?"Memproses...":"Tolak & Pertahankan Space"}),s.jsx(d,{type:"button",disabled:te===e.id,className:"justify-center",onClick:()=>Se(e,"approve"),children:te===e.id?"Mengonfirmasi...":"Setujui & Akhiri Space"})]})]})]},`separation-${e.id}`):s.jsxs("div",{id:`space-separation-${e.id}`,className:"bg-white shadow-sm rounded-xl p-6 space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Akhiri atau Hapus Space"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Proses ini memerlukan frasa konfirmasi khusus. Setelah disetujui kedua pihak, seluruh data Space akan ditutup dan kamu bisa memulai perjalanan baru."})]}),i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",onClick:()=>_e(e.id),className:"inline-flex items-center justify-center rounded-full border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-50",children:"Tutup Form Akhiri Space"})}),s.jsxs("form",{onSubmit:a=>{a.preventDefault(),(async e=>{const a=je(e.id),s=a.phrase.trim(),t=a.reason.trim();if(s)if(s.toUpperCase()===f.toUpperCase()){se(e.id),ee(null);try{const a=await m.post(route("api.spaces.separation.request",{space:e.slug}),{confirmation_phrase:s,reason:""===t?void 0:t});ee({type:"success",message:a.data?.message??"Dissolution request sent successfully."}),O(a=>({...a,[e.id]:{phrase:"",reason:""}})),r.reload()}catch(n){let e="Failed to send dissolution request.";m.isAxiosError(n)&&(e=n.response?.data?.message??e),ee({type:"error",message:e})}finally{se(null)}}else ee({type:"error",message:`Confirmation phrase must be exactly "${f}".`});else ee({type:"error",message:"Please type the confirmation phrase first."})})(e)},className:"space-y-4",children:[e.has_partner?s.jsx("div",{className:"rounded-xl border border-purple-100 bg-purple-50 p-4 text-sm text-purple-700",children:"Diskusikan dulu dengan pasanganmu. Permintaan ini tidak bisa dipulihkan setelah keduanya menyetujui."}):s.jsx("div",{className:"rounded-xl border border-indigo-100 bg-indigo-50 p-4 text-sm text-indigo-700",children:"Space ini belum punya pasangan. Setelah kamu mengetik frasa konfirmasi, Space akan langsung dihapus."}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:`separation_reason_${e.id}`,value:"Alasanmu (opsional)"}),s.jsx("textarea",{id:`separation_reason_${e.id}`,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring focus:ring-pink-200 focus:ring-opacity-50",rows:3,value:t.reason,onChange:a=>fe(e.id,{reason:a.target.value}),placeholder:"Tulis alasanmu agar pasangan memahami keputusan ini."})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:`separation_phrase_${e.id}`,value:"Frasa Konfirmasi"}),s.jsx(c,{id:`separation_phrase_${e.id}`,value:t.phrase,className:"mt-1 block w-full uppercase tracking-widest",onChange:a=>fe(e.id,{phrase:a.target.value.toUpperCase()}),placeholder:f}),s.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Ketik persis ",'"',f,'"'," untuk mengirim permintaan."]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(d,{type:"submit",className:"w-full justify-center",disabled:ae===e.id,children:ae===e.id?"Mengirim...":e.has_partner?"Ajukan Permintaan Pembubaran":"Hapus Space Sekarang"}),s.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Setelah kamu mengajukan, pasanganmu akan menerima notifikasi untuk menyetujui atau menolak."})]})]})]}):s.jsx("div",{className:"flex justify-start",children:s.jsx("button",{type:"button",onClick:()=>_e(e.id),className:"inline-flex items-center justify-center rounded-full border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-600 transition hover:bg-gray-50",children:"Kelola / Akhiri Space"})})]},`separation-${e.id}`)})(e)),!de&&s.jsxs("div",{className:"space-y-6",children:[h&&((e=!0)=>{const a=h?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Buat Space Baru"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You can invite your partner after the Space is created."}),s.jsxs("form",{onSubmit:ke,className:"mt-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:"title",value:"Nama Space"}),s.jsx(c,{id:"title",name:"title",value:y.title,className:"mt-1 block w-full",onChange:e=>j("title",e.target.value),placeholder:"Contoh: Ruang Cerita Dinda",required:!0}),s.jsx(l,{message:N.title,className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"bio",value:"Deskripsi (opsional)"}),s.jsx("textarea",{id:"bio",name:"bio",value:y.bio,onChange:e=>j("bio",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring focus:ring-pink-200 focus:ring-opacity-50",rows:4,placeholder:"Ceritakan secara singkat tentang hubungan kalian."}),s.jsx(l,{message:N.bio,className:"mt-2"})]}),s.jsx(d,{className:"w-full justify-center",disabled:k,children:k?"Membuat...":"Buat Space"})]})]}):null;return null===a?null:e?s.jsx("div",{className:"bg-white shadow-sm rounded-xl p-6",children:a}):a})(),!h&&Ce()]})]}),s.jsxs("div",{className:"lg:w-80 space-y-6",children:[!de&&h&&Ce(),ce&&s.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Undangan Menunggu"}),s.jsx("p",{className:"text-sm text-gray-500",children:"You received an invitation to join ke Space berikut."}),s.jsx("div",{className:"space-y-3",children:x.map(e=>s.jsxs("div",{className:"rounded-lg border border-pink-100 bg-pink-50 p-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.space.title}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Dari: ",e.email]}),s.jsx("div",{className:"mt-2 flex gap-2",children:s.jsx(d,{type:"button",onClick:()=>(async e=>{P(null),S(e.id);try{const a=await m.post(route("api.spaces.confirm-partner",{space:e.space.slug}));r.visit(route("spaces.dashboard",{space:a.data.space.slug}))}catch(a){if(m.isAxiosError(a)){const e=a.response?.data?.message??"Failed to confirm invitation. Please try again later.";P(e)}else P("An error occurred while confirming the invitation.")}finally{S(null)}})(e),disabled:_===e.id,className:"flex-1 justify-center bg-pink-600 hover:bg-pink-700",children:_===e.id?"Menerima...":"Terima"})}),C&&s.jsx("p",{className:"mt-2 text-xs text-red-600",children:C})]},e.id))})]}),me.length>0&&s.jsxs("div",{className:"bg-white shadow-sm rounded-xl p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tunggu Keputusanmu"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Ada permintaan pembubaran Space yang membutuhkan persetujuanmu."}),s.jsx("div",{className:"space-y-3",children:me.map(e=>s.jsxs("div",{className:"rounded-lg border border-red-100 bg-red-50 p-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.space?.title??"Space Tidak Ditemukan"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Diajukan oleh:"," ",e.initiator?.name??"Tidak Diketahui"]}),s.jsx("div",{className:"mt-2 flex gap-2",children:s.jsx("button",{type:"button",onClick:()=>{_e(e.id),oe(e.id)},className:"flex-1 justify-center rounded-full bg-white px-4 py-2 text-sm font-semibold text-gray-600 ring-1 ring-inset ring-gray-200 transition hover:bg-gray-100",children:"Tinjau & Putuskan"})})]},e.id))})]}),Z&&s.jsx("div",{className:be(Z.type),children:Z.message})]})]})})})]})}export{u as default};
