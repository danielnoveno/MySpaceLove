import{r as e,j as s}from"./vendor-DtplsvIg.js";import{a}from"./games-C9PD58Ia.js";import{u as t}from"./useCurrentSpace--m3qXMVy.js";import{G as l,S as r,x as i}from"./inertia-BRtPwdNN.js";import{U as o,T as d,A as n}from"./ui-libs-CxG7ASKr.js";import"./animation-BDJwZp_N.js";const m=["image/jpeg","image/jpg","image/png","image/gif","video/mp4","video/quicktime"];function c(){const c=t();if(!c)return null;const x=c.slug,u=c.title,{data:p,setData:h,post:g,processing:f,errors:b,reset:j}=l({title:"",files:[]}),[v,N]=e.useState([]),[y,k]=e.useState(null),w=e.useRef([]),U=e.useMemo(()=>{const e=Object.entries(b).find(([e])=>e.startsWith("files."));return e?e[1]:void 0},[b]),F=e=>{w.current.forEach(e=>URL.revokeObjectURL(e)),w.current=[];const s=e.map(e=>{const s=URL.createObjectURL(e);return w.current.push(s),s});N(s)};return s.jsxs(a,{loveCursor:{color:"#10b981",heartCount:32,className:"opacity-60"},header:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(i,{href:route("gallery.index",{space:x}),className:"rounded-lg p-2 transition hover:bg-gray-100",children:s.jsx(n,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Galeri"}),s.jsxs("p",{className:"text-gray-600",children:["Tambahkan foto atau video ke galeri ",u]})]})]}),children:[s.jsx(r,{title:`Upload Galeri - ${u}`}),s.jsx("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-emerald-50 via-white to-green-50 py-10 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"relative mx-auto max-w-3xl",children:s.jsxs("form",{onSubmit:e=>{e.preventDefault(),k(null),g(route("gallery.store",{space:x}),{forceFormData:!0,onSuccess:()=>{w.current.forEach(e=>URL.revokeObjectURL(e)),w.current=[],N([]),j()},onError:e=>{}})},className:"relative z-10 space-y-8 rounded-3xl border border-emerald-100 bg-white/85 p-8 shadow-lg backdrop-blur-sm md:p-10",children:[s.jsxs("div",{children:[s.jsx("label",{className:"mb-2 block text-base font-semibold text-gray-800",children:"Judul Koleksi (opsional)"}),s.jsx("input",{type:"text",value:p.title,onChange:e=>h("title",e.target.value),className:"w-full rounded-2xl border border-gray-300 px-5 py-4 text-gray-800 transition focus:border-transparent focus:ring-2 focus:ring-emerald-500",placeholder:"Contoh: Foto Liburan"}),b.title&&s.jsx("p",{className:"mt-2 text-sm text-red-500",children:b.title})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("label",{className:"block text-base font-semibold text-gray-800",children:"File (Foto/Video)"}),s.jsxs("div",{className:"rounded-2xl border-2 border-dashed border-emerald-200 bg-white/80 p-8 text-center transition hover:border-emerald-400",children:[s.jsx(o,{className:"mx-auto mb-4 h-14 w-14 text-emerald-500"}),s.jsxs("p",{className:"mb-4 text-sm text-gray-600",children:["Tarik dan letakkan file di sini atau pilih manual (maks. ",12," file sekaligus)"]}),s.jsx("p",{className:"mb-4 text-xs text-emerald-500",children:"Semua file yang dipilih sekaligus akan tersimpan sebagai satu koleksi."}),s.jsx("input",{type:"file",id:"file-upload",className:"hidden",name:"files",multiple:!0,onChange:async e=>{const s=Array.from(e.target.files??[]);if(0===s.length)return;if(p.files.length+s.length>12)return void k("Maksimal 12 file yang dapat diunggah.");k(null);const a=[];for(const l of s)m.includes(l.type)?a.push(l):k(`Format ${l.name} tidak didukung. Gunakan jpg, jpeg, png, gif, mp4, atau mov.`);const t=[...p.files,...a];h("files",t),F(t),e.target.value=""},accept:"image/*,video/mp4,video/quicktime"}),s.jsx("label",{htmlFor:"file-upload",className:"inline-flex cursor-pointer items-center justify-center gap-2 rounded-xl bg-emerald-500 px-8 py-3 font-semibold text-white transition hover:bg-emerald-600",children:"Pilih File"}),p.files.length>0&&s.jsxs("p",{className:"mt-4 text-sm text-gray-600",children:[p.files.length," file dipilih"]})]}),y&&s.jsx("p",{className:"text-sm text-red-500 mt-2",children:y}),b.files&&s.jsx("p",{className:"text-sm text-red-500 mt-2",children:b.files}),U&&s.jsx("p",{className:"text-sm text-red-500 mt-2",children:"validation.uploaded"===U?"Ukuran salah satu file terlalu besar (maks. 30MB).":U})]}),s.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-white/75 p-6 shadow-sm",children:[s.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-emerald-600",children:"Preview"}),v.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3",children:v.map((e,a)=>s.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-emerald-100 shadow-sm",children:[s.jsx("img",{src:e,alt:`preview-${a}`,className:"h-40 w-full object-cover"}),s.jsxs("button",{type:"button",onClick:()=>(e=>{const s=[...p.files];s.splice(e,1),h("files",s),F(s)})(a),className:"absolute right-2 top-2 inline-flex items-center gap-1 rounded-full bg-black/60 px-2 py-1 text-xs font-semibold text-white transition hover:bg-black",children:[s.jsx(d,{className:"h-3 w-3"}),"Hapus"]}),s.jsxs("span",{className:"absolute bottom-2 left-2 rounded-full bg-emerald-500/90 px-2 text-xs font-semibold text-white",children:["#",a+1]})]},`${e}-${a}`))}):s.jsx("p",{className:"text-sm text-gray-500",children:"No files selected yet."})]}),s.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-white/70 p-6 shadow-sm",children:[s.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-emerald-600",children:"Tips Upload"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("li",{children:"Format foto: JPG, JPEG, PNG, GIF (maks. 30MB per file)."}),s.jsx("li",{children:"Format video: MP4 atau MOV (maks. 30MB per file)."}),s.jsx("li",{children:"Berikan judul agar memori mudah ditemukan kembali."})]})]}),s.jsxs("div",{className:"flex flex-col gap-4 pt-4 sm:flex-row",children:[s.jsx(i,{href:route("gallery.index",{space:x}),className:"flex-1 rounded-xl border border-gray-300 px-6 py-4 text-center font-medium text-gray-700 transition hover:bg-gray-50",children:"Batal"}),s.jsx("button",{type:"submit",disabled:f||0===p.files.length,className:"flex-1 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 px-6 py-4 font-semibold text-white shadow transition hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-60",children:f?"Mengunggah...":"Upload"})]})]})})})]})}export{c as default};
