import{G as e,r as t,j as r,S as a,x as i}from"./react-core-DkDn4djD.js";import{a as s}from"./games-DLF3M88Y.js";import{u as n}from"./useCurrentSpace-B-ijKysZ.js";import{U as l,A as o}from"./ui-libs--z-UAavT.js";import"./inertia-BBHw8PYu.js";import"./vendor-D-GzWRLi.js";import"./maps-CVSyMViq.js";import"./animation-Dcgp7Est.js";function d({item:d}){const c=n();if(!c)return null;const m=c.slug,x=c.title,{data:u,setData:h,post:f,processing:p,errors:g}=e({title:d.title||"",file:null,_method:"PUT"}),b=t.useRef(null),v=t.useRef(null),[y,j]=t.useState(d.file_path?`/storage/${d.file_path}`:""),[w,N]=t.useState({x:0,y:0}),[z]=t.useState(()=>Array.from({length:30},()=>({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,size:14*Math.random()+8,opacity:.5*Math.random()+.2}))),[k,C]=t.useState(!1),[M,S]=t.useState(null);return t.useEffect(()=>()=>{v.current&&(URL.revokeObjectURL(v.current),v.current=null)},[]),t.useEffect(()=>{const e=b.current;if(!e)return;const t=e.getContext("2d");if(!t)return;e.width=window.innerWidth,e.height=window.innerHeight;const r=[],a=(e,t)=>{r.push({x:e,y:t,size:8*Math.random()+10,dx:2*(Math.random()-.5),dy:2*(Math.random()-.5)})},i=()=>{t.clearRect(0,0,e.width,e.height),r.forEach((a,i)=>{a.x+=a.dx,a.y+=a.dy,((e,t,r,a,i=.6)=>{e.save(),e.translate(t,r),e.scale(a/20,a/20),e.beginPath(),e.moveTo(0,0),e.bezierCurveTo(0,-3,-5,-15,-20,-15),e.bezierCurveTo(-55,-15,-55,22.5,-55,22.5),e.bezierCurveTo(-55,40,-35,62,0,80),e.bezierCurveTo(35,62,55,40,55,22.5),e.bezierCurveTo(55,22.5,55,-15,20,-15),e.bezierCurveTo(5,-15,0,-3,0,0),e.fillStyle=`rgba(34,197,94,${i})`,e.fill(),e.restore()})(t,a.x,a.y,a.size),(a.x<0||a.y<0||a.x>e.width||a.y>e.height)&&r.splice(i,1)}),requestAnimationFrame(i)};i();const s=e=>{for(let i=0;i<2;i++)a(e.clientX,e.clientY);const t=window.innerWidth/2,r=window.innerHeight/2;N({x:.02*(e.clientX-t),y:.02*(e.clientY-r)})};return window.addEventListener("mousemove",s),window.addEventListener("resize",()=>{e.width=window.innerWidth,e.height=window.innerHeight}),()=>{window.removeEventListener("mousemove",s)}},[]),r.jsxs(s,{header:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(i,{href:route("gallery.index",{space:m}),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:r.jsx(o,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Galeri"}),r.jsxs("p",{className:"text-gray-600",children:["Perbarui foto atau video untuk ",x]})]})]}),children:[r.jsx(a,{title:`Edit Galeri - ${x}`}),r.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 py-10 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[r.jsx("canvas",{ref:b,className:"absolute inset-0 w-full h-full pointer-events-none"}),r.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:z.map((e,t)=>r.jsx("div",{className:"absolute text-green-400 select-none",style:{left:e.x,top:e.y,fontSize:e.size,opacity:e.opacity,transform:`translate3d(${.5*w.x}px, ${.5*w.y}px, 0)`,transition:"transform 0.2s ease-out"},children:"â™¥"},t))}),r.jsx("div",{className:"absolute inset-0 flex justify-center items-center pointer-events-none text-6xl opacity-20 select-none",style:{transform:`translate3d(${w.x}px, ${w.y}px, 0)`,transition:"transform 0.1s ease-out"},children:"ðŸ’š ðŸ’š ðŸ’š"}),r.jsx("div",{className:"relative max-w-3xl mx-auto",children:r.jsxs("form",{onSubmit:function(e){e.preventDefault(),f(route("gallery.update",{space:m,id:d.id}),{forceFormData:!0})},className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg border border-gray-100 p-8 md:p-10 relative z-10 space-y-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Pratinjau Foto"}),r.jsx("div",{className:"relative overflow-hidden rounded-3xl border border-gray-200 bg-white shadow-lg",children:y?r.jsx("img",{src:y,alt:"Preview media",className:"h-72 w-full cursor-pointer object-cover",onClick:()=>(S(y),void C(!0))}):r.jsx("div",{className:"flex h-72 items-center justify-center text-sm text-gray-400",children:"No preview available yet."})}),r.jsx("p",{className:"mt-3 text-center text-sm text-gray-500",children:u.file?"Menampilkan file baru yang akan disimpan.":"Menampilkan file saat ini."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Judul"}),r.jsx("input",{type:"text",value:u.title,onChange:e=>h("title",e.target.value),className:"w-full px-5 py-4 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition text-gray-800"}),g.title&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:g.title})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-base font-semibold text-gray-800 mb-2",children:"Ganti File (Foto/Video)"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-green-400 transition",children:[r.jsx(l,{className:"w-14 h-14 text-gray-400 mx-auto mb-4"}),r.jsx("input",{type:"file",onChange:e=>{const t=e.target.files?.[0]??null;if(h("file",t),v.current&&(URL.revokeObjectURL(v.current),v.current=null),t){const e=URL.createObjectURL(t);v.current=e,j(e)}else j(d.file_path?`/storage/${d.file_path}`:"")},className:"hidden",id:"file-upload"}),r.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer bg-green-500 text-white px-8 py-3 rounded-xl font-medium hover:bg-green-600 transition",children:"Pilih File Baru"}),u.file&&r.jsx("p",{className:"text-sm text-gray-600 mt-3",children:u.file.name})]}),g.file&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:g.file})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[r.jsx(i,{href:route("gallery.index",{space:m}),className:"flex-1 px-6 py-4 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition text-center font-medium",children:"Batal"}),r.jsx("button",{type:"submit",disabled:p,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-4 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50",children:p?"Memperbarui...":"Perbarui"})]})]})}),k&&M&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 transition-opacity duration-300",onClick:()=>{C(!1),S(null)},children:r.jsx("div",{className:"relative max-w-3xl max-h-full p-4",children:r.jsx("img",{src:M,alt:"Preview",className:"w-full h-auto rounded-xl shadow-lg transform transition-transform duration-300"})})})]})]})}export{d as default};
