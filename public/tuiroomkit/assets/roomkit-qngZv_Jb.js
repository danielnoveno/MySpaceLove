        `,t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(e)),document.head.appendChild(t)}addWatermark(e,t){if(!e)return;this.addStyles();let r=document.createElement("div");r.classList.add("watermark-container"),e.appendChild(r);const i=()=>{r.innerHTML="";const u=200+25;for(let f=-225;f<r.offsetHeight+u;f+=u)for(let v=-225;v<r.offsetWidth+u;v+=u){const b=document.createElement("div");b.classList.add("watermark"),b.textContent=t,b.style.left=`${v}px`,b.style.top=`${f}px`,r.appendChild(b)}};i(),new ResizeObserver(i).observe(r);const n=(l,u)=>{l.forEach(f=>{f.removedNodes.length>0&&Array.from(f.removedNodes).some(b=>{var y;return(y=b.classList)==null?void 0:y.contains("watermark-container")})&&(r=document.createElement("div"),r.classList.add("watermark-container"),e.appendChild(r),i(),u.disconnect(),s()),f.type==="attributes"&&f.attributeName==="style"&&(r.style.display="")})},s=()=>{const l=new MutationObserver(n);l.observe(e,{childList:!0}),l.observe(r,{attributes:!0,attributeFilter:["style"]})};s()}}var Wj=Object.defineProperty,qj=(o,e,t)=>e in o?Wj(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,xm=(o,e,t)=>qj(o,typeof e!="symbol"?e+"":e,t);let _j=class{constructor(e){xm(this,"service"),xm(this,"virtualBackgroundPluginReady",!1),xm(this,"handleUnmount",async()=>{await this.toggleVirtualBackground(!1),await this.toggleTestVirtualBackground(!1)}),this.service=e,!(Zr||ho)&&this.bindEvent()}get trtcCloud(){var e,t;return(t=(e=this.service.roomEngine)==null?void 0:e.instance)==null?void 0:t.getTRTCCloud()}bindEvent(){this.service.lifeCycleManager.on("unmount",this.handleUnmount)}dispose(){this.service.lifeCycleManager.off("unmount",this.handleUnmount)}async initVirtualBackground(){var e;!this.virtualBackgroundPluginReady&&((e=this.trtcCloud)!=null&&e.useVirtualBackground)&&(await this.trtcCloud.useVirtualBackground(),this.virtualBackgroundPluginReady=!0)}async toggleVirtualBackground(e){await this.initVirtualBackground();const{sdkAppId:t,userId:r,userSig:i}=this.service.basicStore,a={sdkAppId:t,userId:r,userSig:i,enable:e};await this.trtcCloud.callExperimentalAPI(JSON.stringify({api:"enableVirtualBackground",params:a}))}async toggleTestVirtualBackground(e){await this.initVirtualBackground();const{sdkAppId:t,userId:r,userSig:i}=this.service.basicStore,a={sdkAppId:t,userId:r,userSig:i,enable:e};await this.trtcCloud.callExperimentalAPI(JSON.stringify({api:"enableTestVirtualBackground",params:a}))}};var $j=Object.defineProperty,eN=(o,e,t)=>e in o?$j(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,wm=(o,e,t)=>eN(o,typeof e!="symbol"?e+"":e,t);let tN=class{constructor(e){wm(this,"service"),wm(this,"basicBeautyPluginReady",!1),wm(this,"handleUnmount",async()=>{await this.setBasicBeauty(Qn.TRTCBeautyStyleNature,0,0,0),await this.setTestBasicBeauty(Qn.TRTCBeautyStyleNature,0,0,0)}),this.service=e,!(Zr||ho)&&this.bindEvent()}dispose(){this.service.lifeCycleManager.off("unmount",this.handleUnmount)}async initBasicBeauty(){var e;!this.basicBeautyPluginReady&&((e=this.trtcCloud)!=null&&e.useBeautyStyle)&&(await this.trtcCloud.useBeautyStyle(),this.basicBeautyPluginReady=!0)}async setBasicBeauty(e,t,r,i){await this.initBasicBeauty(),await this.trtcCloud.setBeautyStyle(e,t,r,i)}async setTestBasicBeauty(e,t,r,i){await this.initBasicBeauty(),await this.trtcCloud.callExperimentalAPI(JSON.stringify({api:"enableTestBeautyStyle",params:{style:e,beautyLevel:t,whitenessLevel:r,ruddinessLevel:i}}))}get trtcCloud(){var e,t;return(t=(e=this.service.roomEngine)==null?void 0:e.instance)==null?void 0:t.getTRTCCloud()}bindEvent(){this.service.lifeCycleManager.on("unmount",this.handleUnmount)}};var oN=Object.defineProperty,rN=(o,e,t)=>e in o?oN(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,Cm=(o,e,t)=>rN(o,typeof e!="symbol"?e+"":e,t);const iN=5;class aN{constructor(e){Cm(this,"service"),Cm(this,"customFriendList"),Cm(this,"emitter",Ul()),this.service=e,this.bindEventContext(),this.service.on(We.SERVICE_READY,()=>{this.bindEvent()})}dispose(){this.unbindEvent()}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}emit(e,t){this.emitter.emit(e,t);try{if(typeof window!=='undefined'&&window.parent&&window.parent!==window&&e===mo.onConferenceScheduled){window.parent.postMessage({type:'tuiroom:schedule-created',payload:t},'*')}}catch(n){console.warn('Failed to relay schedule event',n)}}bindEventContext(){this.onConferenceScheduled=this.onConferenceScheduled.bind(this),this.onConferenceWillStart=this.onConferenceWillStart.bind(this),this.onConferenceCancelled=this.onConferenceCancelled.bind(this),this.onConferenceInfoChanged=this.onConferenceInfoChanged.bind(this),this.onScheduleAttendeesChanged=this.onScheduleAttendeesChanged.bind(this),this.onConferenceStatusChanged=this.onConferenceStatusChanged.bind(this)}bindEvent(){var e;const t=(e=this.service.roomEngine)==null?void 0:e.instance.getConferenceListManager();t.on(mo.onConferenceScheduled,this.onConferenceScheduled),t.on(mo.onConferenceWillStart,this.onConferenceWillStart),t.on(mo.onConferenceCancelled,this.onConferenceCancelled),t.on(mo.onConferenceInfoChanged,this.onConferenceInfoChanged),t.on(mo.onScheduleAttendeesChanged,this.onScheduleAttendeesChanged),t.on(mo.onConferenceStatusChanged,this.onConferenceStatusChanged)}unbindEvent(){var e;const t=(e=this.service.roomEngine)==null?void 0:e.instance.getConferenceListManager();t.off(mo.onConferenceScheduled,this.onConferenceScheduled),t.off(mo.onConferenceWillStart,this.onConferenceWillStart),t.off(mo.onConferenceCancelled,this.onConferenceCancelled),t.off(mo.onConferenceInfoChanged,this.onConferenceInfoChanged),t.off(mo.onScheduleAttendeesChanged,this.onScheduleAttendeesChanged),t.off(mo.onConferenceStatusChanged,this.onConferenceStatusChanged)}onConferenceScheduled(e){this.emit(mo.onConferenceScheduled,e)}onConferenceWillStart(e){this.emit(mo.onConferenceWillStart,e)}onConferenceCancelled(e){this.emit(mo.onConferenceCancelled,e)}onConferenceInfoChanged(e){this.emit(mo.onConferenceInfoChanged,e);const{roomId:t,roomName:r}=e.conferenceModifyInfo.basicRoomInfo;this.service.basicStore.roomId===t&&r!=null&&this.service.roomStore.setRoomInfo({roomName:r})}onScheduleAttendeesChanged(e){this.emit(mo.onScheduleAttendeesChanged,e)}onConferenceStatusChanged(e){this.emit(mo.onConferenceStatusChanged,e)}async fetchFriendList(){var e;if(this.customFriendList)return this.customFriendList;const t=(e=this.service.roomEngine.instance)==null?void 0:e.getTIM(),{data:r}=await t.getFriendList();return r}replaceFriendList(e){this.customFriendList=e}async generateRoomId(e=1){var t;if(e>iN)throw new Error("Failed to generate a unique room ID after maximum attempts.");const r=String(Math.ceil(Math.random()*1e6));try{return await((t=this.service.roomActionManager)==null?void 0:t.fetchRoomInfo({roomId:r,roomType:Rm.kConference})),await this.generateRoomId(e+1)}catch(i){if((i==null?void 0:i.code)===Vo.ERR_ROOM_ID_NOT_EXIST)return r;throw i}}async scheduleConference(e){var t;return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceListManager().scheduleConference(e))}async cancelConference(e){var t;return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceListManager().cancelConference(e))}async updateConferenceInfo(e){var t;return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceListManager().updateConferenceInfo(e))}async fetchScheduledConferenceList(e){var t;return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceListManager().fetchScheduledConferenceList(e))}async fetchAttendeeList(e){var t;return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceListManager().fetchAttendeeList(e))}async addAttendeesByAdmin(e){var t;return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceListManager().addAttendeesByAdmin(e))}async removeAttendeesByAdmin(e){var t;return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceListManager().removeAttendeesByAdmin(e))}}var nN=Object.defineProperty,sN=(o,e,t)=>e in o?nN(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,Sm=(o,e,t)=>sN(o,typeof e!="symbol"?e+"":e,t);class lN{constructor(e){Sm(this,"service"),Sm(this,"emitter",Ul()),Sm(this,"isBeingInvited",!1),this.service=e,this.bindEventContext(),this.service.on(We.SERVICE_READY,()=>{this.bindEvent()})}dispose(){this.unbindEvent()}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}emit(e,t){this.emitter.emit(e,t)}bindEventContext(){this.onReceiveInvitation=this.onReceiveInvitation.bind(this),this.onInvitationHandledByOtherDevice=this.onInvitationHandledByOtherDevice.bind(this),this.onInvitationAccepted=this.onInvitationAccepted.bind(this),this.onInvitationRejected=this.onInvitationRejected.bind(this),this.onInvitationTimeout=this.onInvitationTimeout.bind(this),this.onInvitationAdded=this.onInvitationAdded.bind(this),this.onInvitationStatusChanged=this.onInvitationStatusChanged.bind(this),this.onInvitationRevokedByAdmin=this.onInvitationRevokedByAdmin.bind(this)}bindEvent(){var e;const t=(e=this.service.roomEngine)==null?void 0:e.instance.getConferenceInvitationManager();t.on(To.onReceiveInvitation,this.onReceiveInvitation),t.on(To.onInvitationHandledByOtherDevice,this.onInvitationHandledByOtherDevice),t.on(To.onInvitationAccepted,this.onInvitationAccepted),t.on(To.onInvitationRejected,this.onInvitationRejected),t.on(To.onInvitationTimeout,this.onInvitationTimeout),t.on(To.onInvitationAdded,this.onInvitationAdded),t.on(To.onInvitationStatusChanged,this.onInvitationStatusChanged),t.on(To.onInvitationRevokedByAdmin,this.onInvitationRevokedByAdmin)}unbindEvent(){var e;const t=(e=this.service.roomEngine)==null?void 0:e.instance.getConferenceListManager();t.off(To.onReceiveInvitation,this.onReceiveInvitation),t.off(To.onInvitationHandledByOtherDevice,this.onInvitationHandledByOtherDevice),t.off(To.onInvitationAccepted,this.onInvitationAccepted),t.off(To.onInvitationRejected,this.onInvitationRejected),t.off(To.onInvitationTimeout,this.onInvitationTimeout),t.off(To.onInvitationAdded,this.onInvitationAdded),t.off(To.onInvitationStatusChanged,this.onInvitationStatusChanged),t.off(To.onInvitationRevokedByAdmin,this.onInvitationRevokedByAdmin)}onReceiveInvitation(e){var t;if(this.isBeingInvited||this.service.roomStore.localUser.isInRoom){const r=this.isBeingInvited?Wf.kRejectToEnter:Wf.kInOtherConference;this.reject({roomId:e.roomInfo.roomId,reason:r})}else{if(this.isBeingInvited=!0,ho){this.emit(To.onReceiveInvitation,e);return}const{roomInfo:r,invitation:i}=e,{roomName:a,roomMemberCount:n,roomOwner:s,roomId:l}=r||{},{userId:u,userName:f,avatarUrl:v}=(i==null?void 0:i.inviter)||{},b={userId:u,userName:f,avatarUrl:v,roomName:a,roomMemberCount:n,roomOwner:s,roomId:l};(t=this.service.widgetsManager.notification)==null||t.openInviteNotification({appendTo:"pre-conference-container",message:b,confirmButtonText:this.service.t("Enter Now"),cancelButtonText:this.service.t("Not joining for now"),onConfirm:()=>this.accept({roomId:r.roomId}),onCancel:()=>this.reject({roomId:r.roomId,reason:Wf.kRejectToEnter}),duration:6e4})}}onInvitationHandledByOtherDevice(e){this.isBeingInvited=!1,this.emit(To.onInvitationHandledByOtherDevice,e)}onInvitationAccepted(e){const{userId:t,userName:r,avatarUrl:i}=e.invitation.invitee,{status:a}=e.invitation,n={userId:t,userName:r,avatarUrl:i,status:a};this.service.roomStore.addRemoteUser(n),this.emit(To.onInvitationAccepted,e)}onInvitationRejected(e){const{userId:t,userName:r,avatarUrl:i}=e.invitation.invitee,{status:a}=e.invitation,n={userId:t,userName:r,avatarUrl:i,status:a};this.service.roomStore.updateInviteeList([n]),this.emit(To.onInvitationRejected,e)}onInvitationTimeout(e){const{userId:t,userName:r,avatarUrl:i}=e.invitation.invitee,{status:a}=e.invitation,n={userId:t,userName:r,avatarUrl:i,status:a};this.service.roomStore.updateInviteeList([n]),this.isBeingInvited=!1,this.emit(To.onInvitationTimeout,e)}onInvitationAdded(e){const{userId:t,userName:r,avatarUrl:i}=e.invitation.invitee,{status:a}=e.invitation,n={userId:t,userName:r,avatarUrl:i,status:a};this.service.roomStore.updateInviteeList([n]),this.emit(To.onInvitationAdded,e)}onInvitationStatusChanged(e){const{userId:t,userName:r,avatarUrl:i}=e.invitation.invitee,{status:a}=e.invitation,n={userId:t,userName:r,avatarUrl:i,status:a};this.service.roomStore.updateInviteeList([n]),this.emit(To.onInvitationStatusChanged,e)}onInvitationRevokedByAdmin(e){this.emit(To.onInvitationRevokedByAdmin,e)}async inviteUsers(e){var t;const{userIdList:r}=e,i={roomId:this.service.basicStore.roomId,timeout:60,userIdList:r,extensionInfo:""};return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceInvitationManager().inviteUsers(i))}async cancelInvitation(e){var t;return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceInvitationManager().cancelInvitation(e))}async accept(e){var t;return this.isBeingInvited=!1,this.service.emit(We.CONFERENCE_INVITATION_ACCEPTED,e.roomId),await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceInvitationManager().accept(e))}async reject(e){var t;return this.isBeingInvited=!1,await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceInvitationManager().reject(e))}async getInvitationList(e){var t;return await((t=this.service.roomEngine.instance)==null?void 0:t.getConferenceInvitationManager().getInvitationList(e))}}var cN=Object.defineProperty,uN=(o,e,t)=>e in o?cN(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,b4=(o,e,t)=>uN(o,typeof e!="symbol"?e+"":e,t);const dN="KeyMetricsStats";var oi=(o=>(o[o.startSharingWhiteboard=106e3]="startSharingWhiteboard",o[o.stopSharingWhiteboard=106001]="stopSharingWhiteboard",o[o.startAnnotating=106002]="startAnnotating",o[o.stopAnnotating=106003]="stopAnnotating",o[o.saveWhiteboard=106004]="saveWhiteboard",o[o.setLanguage=106050]="setLanguage",o[o.setTheme=106051]="setTheme",o[o.disableTextMessaging=106052]="disableTextMessaging",o[o.disableScreenSharing=106053]="disableScreenSharing",o[o.enableWatermark=106054]="enableWatermark",o[o.enableVirtualBackground=106055]="enableVirtualBackground",o[o.hideFeatureButton=106056]="hideFeatureButton",o[o.openChat=106057]="openChat",o[o.setBasicBeauty=106058]="setBasicBeauty",o[o.aiTask=106059]="aiTask",o))(oi||{});class pN{constructor(){b4(this,"taskQueue",[]),b4(this,"isReady",!1),this.bindEvent()}reportCount(e){const t=this.createReportCountTask(e);this.isReady?t():this.taskQueue.push(t)}bindEvent(){co.once("ready",()=>{this.isReady=!0,this.executePendingTasks()})}executePendingTasks(){this.taskQueue.forEach(e=>e()),this.taskQueue=[]}createReportCountTask(e){return()=>{co.callExperimentalAPI(JSON.stringify({api:dN,params:{key:e}}))}}}var hN=Object.defineProperty,gN=(o,e,t)=>e in o?hN(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ip=(o,e,t)=>gN(o,typeof e!="symbol"?e+"":e,t);class fN{constructor(e){ip(this,"service"),ip(this,"handlerMap",{createRoom:this.handleCreateRoomError.bind(this),enterRoom:this.handleEnterRoomError.bind(this),onError:this.handleOnError.bind(this)}),ip(this,"mediaDeviceErrorHandler",null),this.service=e}handleError(e,t){this.handlerMap[t]&&this.handlerMap[t](e)}handleEnterRoomError(e){if(e.code===Vo.ERR_NEED_PASSWORD){this.service.emit(We.ROOM_NEED_PASSWORD,e.code);return}if(e.code===Vo.ERR_WRONG_PASSWORD){this.service.emit(We.ROOM_NOTICE_MESSAGE,{type:"error",message:this.service.t("Wrong password")});return}let t="";switch(e.code){case Vo.ERR_ROOM_ID_NOT_EXIST:t="The room does not exist, please confirm the room number or create a room!";break;default:t="Failed to enter the meeting"}this.service.emit(We.ROOM_NOTICE_MESSAGE_BOX,{title:this.service.t("Note"),message:this.service.t(t),confirmButtonText:this.service.t("Sure"),callback:async()=>{this.service.emit(We.ROOM_ERROR,{code:e.code,message:e.message}),this.service.roomStore.reset()}})}handleCreateRoomError(e){this.service.emit(We.ROOM_NOTICE_MESSAGE_BOX,{title:this.service.t("Note"),message:this.service.t("Failed to initiate meeting"),confirmButtonText:this.service.t("Sure"),callback:async()=>{this.service.emit(We.ROOM_ERROR,{code:e.code,message:e.message}),this.service.resetStore()}})}handleOnError(e){e.message==="enter trtc room failed , error code : -1"&&this.service.emit(We.ROOM_NOTICE_MESSAGE_BOX,{type:"warning",message:this.service.t("Failed to enter the meeting"),callback:()=>{this.service.emit(We.ROOM_ERROR,{code:e.code,message:e.message}),this.service.resetStore()}}),e.code&&String(e.code).indexOf("-11")===0&&(this.mediaDeviceErrorHandler||(this.mediaDeviceErrorHandler=new mN(this.service)),this.mediaDeviceErrorHandler.handleError(e))}}class mN{constructor(e){ip(this,"service"),this.service=e}getMediaDeviceErrorTitle(e){return this.service.t("Unable to use the device",{deviceType:this.service.t(e)})}getMediaDeviceErrorMsg(e){return this.service.t("media device failed to open, please check the media device and try again",{deviceType:this.service.t(e)})}getMediaDeviceNotAuthorizedMsg(e){return this.service.t("The current device is not authorized, please allow access to the device permissions",{deviceType:this.service.t(e)})}getMediaDeviceOccupiedMsg(e){return this.service.t("The current device is occupied by other apps, try to close other apps or change the device",{deviceType:this.service.t(e)})}getTurnOnDevicePrivilegesTitle(e){return this.service.t("Turn on device privileges",{deviceType:this.service.t(e)})}getTurnOnDevicePrivilegesMsg(e){return this.service.t('You can go to "System Preferences - Security & Privacy - Device" to enable device permissions',{deviceType:this.service.t(e)})}handleError(e){let t,r="",i="",a="",n="",s=null;switch(e.code){case Vo.ERR_CAMERA_START_FAILED:case Vo.ERR_MICROPHONE_START_FAILED:t=e.code===Vo.ERR_CAMERA_START_FAILED?"camera":"microphone",r=this.getMediaDeviceErrorTitle(t),i=this.getMediaDeviceErrorMsg(t);break;case Vo.ERR_CAMERA_NOT_AUTHORIZED:case Vo.ERR_MICROPHONE_NOT_AUTHORIZED:t=e.code===Vo.ERR_CAMERA_NOT_AUTHORIZED?"camera":"microphone",Zr?(r=this.getTurnOnDevicePrivilegesTitle(t),i=this.getTurnOnDevicePrivilegesMsg(t),a=this.service.t("Cancel"),n=this.service.t("Go to Settings"),s=l=>{l==="confirm"&&this.goToPermissionSettings(t)}):(r=this.getMediaDeviceErrorTitle(t),i=this.getMediaDeviceNotAuthorizedMsg(t));break;case Vo.ERR_CAMERA_OCCUPIED:case Vo.ERR_MICROPHONE_OCCUPIED:t=e.code===Vo.ERR_CAMERA_OCCUPIED?"camera":"microphone",r=this.getMediaDeviceErrorTitle(t),i=this.getMediaDeviceOccupiedMsg(t);break}i&&this.service.emit(We.ROOM_NOTICE_MESSAGE_BOX,{type:"error",title:r,message:i,cancelButtonText:a,confirmButtonText:n||this.service.t("I got it"),callback:s})}goToPermissionSettings(e){const t={openExternal:Function},r={camera:"Privacy_Camera",microphone:"Privacy_Microphone",screenShare:"Privacy_ScreenCapture"};t.openExternal(`x-apple.systempreferences:com.apple.preference.security?${r[e]}`)}}const n0="data:image/png;base64,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";var vN=Object.defineProperty,bN=(o,e,t)=>e in o?vN(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,I3=(o,e,t)=>bN(o,typeof e!="symbol"?e+"":e,t);const E3=class zn{constructor(e){I3(this,"service"),this.service=e,this.bindEventContext(),this.bindEvent(),Do.registerEvent(gt.TUIChat.EVENT.CHAT_STATE_CHANGED,gt.TUIChat.EVENT_SUB_KEY.CHAT_OPENED,this)}static getInstance(e){return zn.instance||(zn.instance=new zn(e)),zn.instance}static destroyInstance(){zn.instance&&(zn.instance=void 0)}dispose(){this.unbindEvent()}reset(){Do.unregisterExtension(gt.TUIChat.EVENT.CHAT_STATE_CHANGED,this)}async onNotifyEvent(e,t,r){if(r.groupID===this.service.basicStore.roomId&&e===gt.TUIChat.EVENT.CHAT_STATE_CHANGED&&t===gt.TUIChat.EVENT_SUB_KEY.CHAT_OPENED){Do.notifyEvent(gt.TUIChat.EVENT.CHAT_TYPE_CHANGED,gt.TUIChat.EVENT_SUB_KEY.CHANGE_SUCCESS,{chatType:gt.TUIChat.TYPE.ROOM});const i=Object.fromEntries(this.service.roomStore.userList.map(a=>[a.userId,{nick:a.userName,nameCard:a.nameCard,avatar:a.avatarUrl||n0}]));Do.callService({serviceName:gt.TUIChat.SERVICE.NAME,method:gt.TUIChat.SERVICE.METHOD.UPDATE_MESSAGE_INFO,params:{userInfo:i}})}}onLanguageChanged(e){Do.notifyEvent(gt.TUITranslate.EVENT.LANGUAGE_CHANGED,gt.TUITranslate.EVENT_SUB_KEY.CHANGE_SUCCESS,{language:e})}onThemeChanged(e){Do.notifyEvent(gt.TUITheme.EVENT.THEME_CHANGED,gt.TUITheme.EVENT_SUB_KEY.CHANGE_SUCCESS,{theme:e})}onUserNameCardChanged(e){var t;const{userId:r,nameCard:i}=e.userInfo;if(((t=this.service.roomStore.userInfoObj[r])==null?void 0:t.nameCard)===i)return;const n={[r]:{nameCard:i}};Do.callService({serviceName:gt.TUIChat.SERVICE.NAME,method:gt.TUIChat.SERVICE.METHOD.UPDATE_MESSAGE_INFO,params:{userInfo:n}})}bindEventContext(){this.onLanguageChanged=this.onLanguageChanged.bind(this),this.onThemeChanged=this.onThemeChanged.bind(this),this.onUserNameCardChanged=this.onUserNameCardChanged.bind(this)}bindEvent(){this.service.on(We.LANGUAGE_CHANGED,this.onLanguageChanged),this.service.on(We.THEME_CHANGED,this.onThemeChanged),co.once("ready",()=>{var e;(e=this.service.roomEngine.instance)==null||e.on(_e.onUserInfoChanged,this.onUserNameCardChanged)})}unbindEvent(){var e;this.service.off(We.LANGUAGE_CHANGED,this.onLanguageChanged),this.service.off(We.THEME_CHANGED,this.onThemeChanged),(e=this.service.roomEngine.instance)==null||e.off(_e.onUserInfoChanged,this.onUserNameCardChanged)}};I3(E3,"instance");let yN=E3;var kN=Object.defineProperty,xN=(o,e,t)=>e in o?kN(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,s0=(o,e,t)=>xN(o,typeof e!="symbol"?e+"":e,t);const A3=class Yn{constructor(e){s0(this,"service"),s0(this,"notification",null),this.service=e}static getInstance(e){return Yn.instance||(Yn.instance=new Yn(e)),Yn.instance}static destroyInstance(){Yn.instance&&(Yn.instance=void 0)}registerNotificationProvider(e){this.notification=e.notification}};s0(A3,"instance");let wN=A3;var CN=Object.defineProperty,SN=(o,e,t)=>e in o?CN(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,Gn=(o,e,t)=>SN(o,typeof e!="symbol"?e+"":e,t),ku=(o=>(o.TRANSCRIPTION_TASK="transcription",o))(ku||{});const IN=1e4;class EN{constructor(e){Gn(this,"emitter",Ul()),Gn(this,"trtc"),Gn(this,"service"),Gn(this,"subtitleMessages",{}),Gn(this,"transcribedMessageList",[]),Gn(this,"subtitleTimeout",{}),Gn(this,"transcriptionTimeout",{}),this.service=e,!(Zr||dt)&&(this.bindCtx(),this.bindEvent())}bindCtx(){this.handleMount=this.handleMount.bind(this),this.handleUnmount=this.handleUnmount.bind(this),this.handleAIMessage=this.handleAIMessage.bind(this)}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}emit(e,t){this.emitter.emit(e,t)}dispose(){this.service.lifeCycleManager.off("mount",this.handleMount),this.service.lifeCycleManager.off("unmount",this.handleUnmount)}handleMount(){var e,t,r,i;typeof((e=this.service.roomEngine.instance)==null?void 0:e.getTRTCCloud)>"u"||typeof((r=(t=this.service.roomEngine.instance)==null?void 0:t.getTRTCCloud())==null?void 0:r._trtc)>"u"||(this.trtc=(i=this.service.roomEngine.instance)==null?void 0:i.getTRTCCloud()._trtc,this.trtc.on("custom-message",this.handleAIMessage))}handleUnmount(){var e;this.subtitleMessages={},this.transcribedMessageList=[],Object.values(this.subtitleTimeout).forEach(t=>clearTimeout(t)),Object.values(this.transcriptionTimeout).forEach(t=>clearTimeout(t)),this.subtitleTimeout={},this.transcriptionTimeout={},(e=this.trtc)==null||e.off("custom-message",this.handleAIMessage)}bindEvent(){this.service.lifeCycleManager.on("mount",this.handleMount),this.service.lifeCycleManager.on("unmount",this.handleUnmount)}resetSubtitleTimeout(e,t){this.subtitleTimeout[e]&&clearTimeout(this.subtitleTimeout[e]),this.subtitleTimeout[e]=setTimeout(t,3e3)}resetTranscriptionTimeout(e,t=3e3){this.transcriptionTimeout[e]&&clearTimeout(this.transcriptionTimeout[e]),this.transcriptionTimeout[e]=setTimeout(()=>{const r=o4(this.transcribedMessageList,i=>i.sender===e&&!i.end);r!==-1&&(this.transcribedMessageList[r].end=!0,this.emit("transcription",{subtitleMessages:this.subtitleMessages,transcribedMessageList:this.transcribedMessageList})),delete this.transcriptionTimeout[e]},t)}handleAIMessage(e){if(e.cmdId!==1)return;const t=new TextDecoder().decode(e.data),r=JSON.parse(t);this.handleMessage(r),this.emit("transcription",{subtitleMessages:this.subtitleMessages,transcribedMessageList:this.transcribedMessageList})}handleMessage(e){if(e.type!==IN)return;const{sender:t,payload:r}=e,{end:i}=r,a=()=>({sender:t,text:r.text,translationText:r.translation_text,startMsTs:e.start_ms_ts,end:i}),n=f=>{f.text=r.text,f.translationText=r.translation_text,f.end=i},s=(f,v)=>{if(Array.isArray(v))v.push(f);else if(typeof v=="object"){const b=v;b[f.sender]=f}else throw new Error("Invalid target type")},l=this.subtitleMessages[t];l?n(l):s(a(),this.subtitleMessages);const u=o4(this.transcribedMessageList,f=>f.sender===t&&!f.end);u!==-1?(n(this.transcribedMessageList[u]),i?this.transcriptionTimeout[t]&&(clearTimeout(this.transcriptionTimeout[t]),delete this.transcriptionTimeout[t]):this.resetTranscriptionTimeout(t)):(s(a(),this.transcribedMessageList),i||this.resetTranscriptionTimeout(t)),this.resetSubtitleTimeout(t,()=>{i&&(delete this.subtitleMessages[t],this.emit("transcription",{subtitleMessages:this.subtitleMessages,transcribedMessageList:this.transcribedMessageList}))})}}const AN={class:"avatar-container"},TN=["src"],MN=me({__name:"Avatar",props:{imgSrc:{}},setup(o){const e=o,t=ye(()=>r.value?n0:e.imgSrc||n0),r=ie(!1);function i(){r.value=!0}return(a,n)=>(x(),z("div",AN,[g("img",{class:"avatar",src:t.value,onerror:i},null,8,TN)]))}}),Er=Je(MN,[["__scopeId","data-v-460d4fdf"]]),RN={class:"tui-notification-message"},DN={class:"invitation-notification-inviter-container"},ON={class:"invitation-notification-inviter"},FN={class:"invitation-notification-title"},LN={class:"invitation-notification-room-name"},UN={class:"invitation-notification-room-info-container"},BN={class:"invitation-notification-room-text-container"},jN={class:"invitation-notification-room-text"},NN={class:"invitation-notification-room-text"},PN={class:"invitation-notification-room-text"},VN={class:"invitation-notification-room-text"},GN={class:"invitation-notification-bottom-container"},HN={class:"button-text"},zN=me({__name:"index",props:{appendTo:{default:""},customClass:{default:""},message:{default:{userId:"",userName:"",avatarUrl:"",roomName:"",roomMemberCount:0,roomOwner:"",roomId:""}},onConfirm:{type:[Function,null],default:null},onCancel:{type:[Function,null],default:null},close:{type:[Function,null],default:null},confirmButtonText:{default:""},cancelButtonText:{default:""}},setup(o){const{t:e}=wt(),t=ie(!1),r=ie({}),{nextZIndex:i}=jl(),a=o;$e(t,f=>{f&&(r.value={zIndex:i()})});function n(){t.value=!0}const s=()=>{u(a.onConfirm)},l=()=>{u(a.onCancel)},u=f=>{f&&f(),a.close&&a.close()};return Kt(()=>{n()}),(f,v)=>at((x(),z("div",{class:Ze(["tui-notification",f.customClass])},[g("div",{class:"tui-notification-container",style:uo(r.value)},[g("div",RN,[g("div",DN,[g("div",ON,[Q(Er,{class:"avatar","img-src":f.message.avatarUrl},null,8,["img-src"]),g("span",FN,q(c(e)("sb invites you to join the conference",{name:f.message.userName||f.message.userId})),1)]),g("span",LN,q(f.message.roomName),1),g("div",UN,[g("div",BN,[g("span",jN,q(c(e)("Host"))+": ",1),g("span",NN,q(f.message.roomOwner),1)]),v[0]||(v[0]=g("i",{class:"invitation-notification-room-text-split"},null,-1)),g("div",null,[g("span",PN,q(c(e)("Attendees"))+": ",1),g("span",VN,q(`${f.message.roomMemberCount} ${c(e)("people")}`),1)])])])]),v[1]||(v[1]=g("i",{class:"invitation-notification-bottom-split"},null,-1)),g("div",GN,[g("span",{class:"invitation-notification-bottom",onClick:l},q(f.cancelButtonText),1),Q(c(pt),{type:"primary",onClick:s},{default:ne(()=>[Q(c(Op),{class:"icon"}),g("span",HN,q(f.confirmButtonText),1)]),_:1})])],4)],2)),[[eo,t.value]])}}),YN=Je(zN,[["__scopeId","data-v-c66b4d37"]]);function QN(){let o=null,e=null,t=null,r=null;function i(n){document.getElementById(n.appendTo)?r=document.getElementById(n.appendTo):r=document.fullscreenElement||document.body,o||(e=document.createElement("div"),e.className="tui-room-notification",r==null||r.appendChild(e));const{appendTo:s,customClass:l,message:u,onConfirm:f,onCancel:v,confirmButtonText:b,cancelButtonText:y}=n,w=Q(YN,{appendTo:s,customClass:l,message:u,onConfirm:f,onCancel:v,confirmButtonText:b,cancelButtonText:y,close:a});e&&(Ei(w,e),o=w),t&&clearTimeout(t),t=setTimeout(a,n.duration||3e4)}function a(){e&&(Ei(null,e),r==null||r.removeChild(e),o=null,e=null),t&&(clearTimeout(t),t=null)}return{openInviteNotification:i}}const JN=QN(),KN={notification:{openInviteNotification:JN.openInviteNotification}};function ZN(o){o.registerNotificationProvider(KN)}var XN=Object.defineProperty,WN=(o,e,t)=>e in o?XN(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,Po=(o,e,t)=>WN(o,typeof e!="symbol"?e+"":e,t);const{t:Co}=qi.global,y4="[RoomService]",ro=No(),T3=class gr{constructor(){Po(this,"roomEngine",ro),Po(this,"t",Co),Po(this,"emitter",Ul()),Po(this,"componentManager",new fU(this)),Po(this,"configManager",new yU(this)),Po(this,"userManager",new wU(this)),Po(this,"mediaManager",new TU(this)),Po(this,"lifeCycleManager",new IU(this)),Po(this,"roomActionManager",new Jj(this)),Po(this,"waterMark",new Xj(this)),Po(this,"virtualBackground",new _j(this)),Po(this,"basicBeauty",new tN(this)),Po(this,"scheduleConferenceManager",new aN(this)),Po(this,"conferenceInvitationManager",new lN(this)),Po(this,"dataReportManager",new pN),Po(this,"errorHandler",new fN(this)),Po(this,"chatManager",new yN(this)),Po(this,"aiTask",new EN(this)),Po(this,"trackingManager",new DU),Po(this,"widgetsManager",new wN(this)),this.lifeCycleManager.start(),this.initEventCtx(),co.once("ready",()=>{this.bindRoomEngineEvents(),this.handleRoomEngineReady(),this.emit(We.SERVICE_READY)})}get basicStore(){return Bt()}get roomStore(){return ao()}get chatStore(){return Bl()}initEventCtx(){this.onError=this.onError.bind(this),this.onRoomDismissed=this.onRoomDismissed.bind(this),this.onUserNetworkQualityChanged=this.onUserNetworkQualityChanged.bind(this),this.onKickedOutOfRoom=this.onKickedOutOfRoom.bind(this),this.onSendMessageForUserDisableChanged=this.onSendMessageForUserDisableChanged.bind(this),this.onUserSigExpired=this.onUserSigExpired.bind(this),this.onKickedOffLine=this.onKickedOffLine.bind(this),this.onAllUserCameraDisableChanged=this.onAllUserCameraDisableChanged.bind(this),this.onAllUserMicrophoneDisableChanged=this.onAllUserMicrophoneDisableChanged.bind(this),this.onScreenShareForAllUserDisableChanged=this.onScreenShareForAllUserDisableChanged.bind(this),this.onUserInfoChanged=this.onUserInfoChanged.bind(this)}static getInstance(){return gr.instance||(gr.instance=new gr),gr.instance}static destroyInstance(){gr.instance&&(gr.instance.lifeCycleManager.stop(),gr.instance.unBindRoomEngineEvents(),gr.instance.waterMark.dispose(),gr.instance.virtualBackground.dispose(),gr.instance.basicBeauty.dispose(),gr.instance.scheduleConferenceManager.dispose(),gr.instance.conferenceInvitationManager.dispose(),gr.instance.mediaManager.dispose(),gr.instance.chatManager.dispose(),gr.instance=void 0)}useExtension(e){e._bind(this)}getRoomContainer(){return document.fullscreenElement||document.getElementById("roomContainer")||document.body}bindRoomEngineEvents(){var e,t,r,i,a,n,s,l,u,f,v;(e=ro.instance)==null||e.on(_e.onError,this.onError),(t=ro.instance)==null||t.on(_e.onRoomDismissed,this.onRoomDismissed),(r=ro.instance)==null||r.on(_e.onUserNetworkQualityChanged,this.onUserNetworkQualityChanged),(i=ro.instance)==null||i.on(_e.onKickedOutOfRoom,this.onKickedOutOfRoom),(a=ro.instance)==null||a.on(_e.onSendMessageForUserDisableChanged,this.onSendMessageForUserDisableChanged),(n=ro.instance)==null||n.on(_e.onUserSigExpired,this.onUserSigExpired),(s=ro.instance)==null||s.on(_e.onKickedOffLine,this.onKickedOffLine),(l=ro.instance)==null||l.on(_e.onAllUserCameraDisableChanged,this.onAllUserCameraDisableChanged),(u=ro.instance)==null||u.on(_e.onAllUserMicrophoneDisableChanged,this.onAllUserMicrophoneDisableChanged),(f=ro.instance)==null||f.on(_e.onScreenShareForAllUserDisableChanged,this.onScreenShareForAllUserDisableChanged),(v=ro.instance)==null||v.on(_e.onUserInfoChanged,this.onUserInfoChanged)}unBindRoomEngineEvents(){var e,t,r,i,a,n,s,l,u,f,v;(e=ro.instance)==null||e.off(_e.onError,this.onError),(t=ro.instance)==null||t.off(_e.onRoomDismissed,this.onRoomDismissed),(r=ro.instance)==null||r.off(_e.onUserNetworkQualityChanged,this.onUserNetworkQualityChanged),(i=ro.instance)==null||i.off(_e.onKickedOutOfRoom,this.onKickedOutOfRoom),(a=ro.instance)==null||a.off(_e.onSendMessageForUserDisableChanged,this.onSendMessageForUserDisableChanged),(n=ro.instance)==null||n.off(_e.onUserSigExpired,this.onUserSigExpired),(s=ro.instance)==null||s.off(_e.onKickedOffLine,this.onKickedOffLine),(l=ro.instance)==null||l.off(_e.onAllUserCameraDisableChanged,this.onAllUserCameraDisableChanged),(u=ro.instance)==null||u.off(_e.onAllUserMicrophoneDisableChanged,this.onAllUserMicrophoneDisableChanged),(f=ro.instance)==null||f.off(_e.onScreenShareForAllUserDisableChanged,this.onScreenShareForAllUserDisableChanged),(v=ro.instance)==null||v.off(_e.onUserInfoChanged,this.onUserInfoChanged)}onError(e){Jt.error("roomEngine.onError: ",e),this.errorHandler.handleError(e,"onError")}onRoomDismissed(e){const{roomId:t}=e;Jt.log(`${y4}onRoomDismissed:`,t),this.emit(We.ROOM_NOTICE_MESSAGE_BOX,{title:Co("Note"),message:Co("The host closed the room."),confirmButtonText:Co("Sure"),duration:5e3,callback:async()=>{this.emit(We.ROOM_DISMISS,{}),this.resetStore()}})}onUserNetworkQualityChanged(e){this.basicStore.setLocalQuality(e.userNetworkList)}async onKickedOutOfRoom(e){const{roomId:t,reason:r,message:i}=e;try{let a="";switch(r){case Gs.kKickedByAdmin:a=Co("kicked out of the room by the host");break;case Gs.kKickedByLoggedOnOtherDevice:a=Co("Kicked out of the room on other devices");break;case Gs.kKickedByServer:a=Co("kicked out of the room by serve");break;case Gs.kNetworkDisconnected:a=Co("Network disconnection timeout, exiting room");break;case Gs.kJoinRoomStatusInvalidDuringOffline:a=Co("You have been kicked out of a room or the room has been disbanded while you were offline");break;case Gs.kCountOfJoinedRoomsExceedLimit:a=Co("The number of joined rooms has exceeded the limit");break;default:a=Co("kicked out of the room")}this.emit(We.ROOM_NOTICE_MESSAGE_BOX,{title:Co("Note"),message:a,confirmButtonText:Co("Sure"),callback:async()=>{this.emit(We.KICKED_OUT,{roomId:t,reason:r,message:i}),this.resetStore()}})}catch(a){Jt.error(`${y4}onKickedOutOfRoom error:`,a)}}onSendMessageForUserDisableChanged(e){const{userId:t,isDisable:r}=e;if(t===this.roomStore.localUser.userId){const i=Co(r?"You have been banned from text chat":"You are allowed to text chat");this.emit(We.ROOM_NOTICE_MESSAGE,{code:-1,type:"warning",message:i,duration:Qt.NORMAL}),this.chatStore.setSendMessageDisableChanged(r)}this.roomStore.setMuteUserChat(t,r)}onUserSigExpired(){this.emit(We.ROOM_NOTICE_MESSAGE_BOX,{title:Co("Note"),message:Co("userSig has expired"),confirmButtonText:Co("Sure"),callback:()=>{this.emit(We.USER_SIG_EXPIRED,{}),this.resetStore()}})}onKickedOffLine(e){const{message:t}=e;this.emit(We.ROOM_NOTICE_MESSAGE_BOX,{title:Co("Note"),message:Co("The system has detected that your account has been kicked offline"),confirmButtonText:Co("Sure"),callback:async()=>{this.emit(We.KICKED_OFFLINE,{message:t})}})}async onAllUserCameraDisableChanged(e){const{isDisable:t}=e;this.handleVideoStateChange(t),this.roomStore.setDisableCameraForAllUserByAdmin(t)}async handleVideoStateChange(e){var t;const r=Co(e?"All videos disabled":"All videos enabled");this.emit(We.ROOM_NOTICE_MESSAGE,{type:"success",message:r,duration:Qt.NORMAL}),e&&this.roomStore.localUser.userRole===Gt.kGeneralUser&&await((t=ro.instance)==null?void 0:t.closeLocalCamera())}async onUserInfoChanged(e){var t;const{userId:r,nameCard:i}=e.userInfo;((t=this.roomStore.userInfoObj[r])==null?void 0:t.nameCard)!==i&&this.roomStore.updateUserInfo({userId:r,nameCard:i})}async onAllUserMicrophoneDisableChanged(e){const{isDisable:t}=e;this.handleAudioStateChange(t),this.roomStore.setDisableMicrophoneForAllUserByAdmin(t)}async handleAudioStateChange(e){var t;const r=Co(e?"All audios disabled":"All audios enabled");this.emit(We.ROOM_NOTICE_MESSAGE,{type:"success",message:r,duration:Qt.NORMAL}),e&&this.roomStore.localUser.userRole===Gt.kGeneralUser&&await((t=ro.instance)==null?void 0:t.muteLocalAudio())}async onScreenShareForAllUserDisableChanged(e){const{isDisable:t}=e;this.roomStore.setDisableScreenShareForAllUserByAdmin(t)}resetStore(){this.basicStore.reset(),this.chatStore.reset(),this.roomStore.reset()}storeInit(e){this.basicStore.setBasicInfo(e),this.userManager.setLocalUser(e)}async initRoomKit(e){ZN(this.widgetsManager),this.storeInit(e);const{sdkAppId:t,userId:r,userSig:i}=e;Up.login({SDKAppID:t,userID:r,userSig:i,useUploadPlugin:!0});const{chat:a}=Up.getContext();await co.login({sdkAppId:t,userId:r,userSig:i,tim:a}),this.emit(We.ROOM_LOGIN)}async start(e,t){return this.roomActionManager.start(e,t)}async join(e,t){return this.roomActionManager.join(e,t)}async createRoom(e){await this.roomActionManager.createRoom(e)}async enterRoom(e){await this.roomActionManager.enterRoom(e)}async leaveRoom(){await this.roomActionManager.leaveRoom()}async dismissRoom(){await this.roomActionManager.dismissRoom()}fetchRoomInfo(e){return this.roomActionManager.fetchRoomInfo(e)}async handleRoomEngineReady(){var e;const t=localStorage.getItem("tuiRoom-currentTheme");t&&this.basicStore.setDefaultTheme(t);const r=(e=ro.instance)==null?void 0:e.getTRTCCloud(),i=dt?Ro.TRTCVideoMirrorType.TRTCVideoMirrorType_Auto:this.basicStore.isLocalStreamMirror?Ro.TRTCVideoMirrorType.TRTCVideoMirrorType_Enable:Ro.TRTCVideoMirrorType.TRTCVideoMirrorType_Disable;await(r==null?void 0:r.setLocalRenderParams({mirrorType:i,rotation:Ro.TRTCVideoRotation.TRTCVideoRotation0,fillMode:Ro.TRTCVideoFillMode.TRTCVideoFillMode_Fill}))}logOut(){this.emit(We.USER_LOGOUT),this.resetStore()}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}emit(e,t){this.emitter.emit(e,t)}getComponentConfig(e){return this.componentManager.getComponentConfig(e)}setComponentConfig(e){return this.componentManager.setComponentConfig(e)}setTheme(e){return this.configManager.setTheme(e)}setLanguage(e){return this.configManager.setLanguage(e)}setSelfInfo(e){return this.userManager.setSelfInfo(e)}getDisplayName(e){return this.userManager.getDisplayName(e)}getMediaManager(){return this.mediaManager}};Po(T3,"instance");let qN=T3;const fe=qN.getInstance();var Bp={exports:{}};Bp.exports;(function(o,e){(function(t,r){o.exports=r()})(Ji,function(){function t(p,d){var m=Object.keys(p);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(p);d&&(k=k.filter(function(E){return Object.getOwnPropertyDescriptor(p,E).enumerable})),m.push.apply(m,k)}return m}function r(p){for(var d=1;d<arguments.length;d++){var m=arguments[d]!=null?arguments[d]:{};d%2?t(Object(m),!0).forEach(function(k){l(p,k,m[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(m)):t(Object(m)).forEach(function(k){Object.defineProperty(p,k,Object.getOwnPropertyDescriptor(m,k))})}return p}function i(p){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},i(p)}function a(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function n(p,d){for(var m=0;m<d.length;m++){var k=d[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(p,C(k.key),k)}}function s(p,d,m){return d&&n(p.prototype,d),Object.defineProperty(p,"prototype",{writable:!1}),p}function l(p,d,m){return(d=C(d))in p?Object.defineProperty(p,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[d]=m,p}function u(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),d&&v(p,d)}function f(p){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},f(p)}function v(p,d){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,k){return m.__proto__=k,m},v(p,d)}function b(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function y(p){var d=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var m,k=f(p);if(d){var E=f(this).constructor;m=Reflect.construct(k,arguments,E)}else m=k.apply(this,arguments);return function(O,G){if(G&&(typeof G=="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b(O)}(this,m)}}function w(){return w=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(p,d,m){var k=function(O,G){for(;!Object.prototype.hasOwnProperty.call(O,G)&&(O=f(O))!==null;);return O}(p,d);if(k){var E=Object.getOwnPropertyDescriptor(k,d);return E.get?E.get.call(arguments.length<3?p:m):E.value}},w.apply(this,arguments)}function C(p){var d=function(m,k){if(typeof m!="object"||m===null)return m;var E=m[Symbol.toPrimitive];if(E!==void 0){var O=E.call(m,k);if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(m)}(p,"string");return typeof d=="symbol"?d:d+""}var D=function(p){return!(!p||!p.Window)&&p instanceof p.Window},A=void 0,j=void 0;function M(p){A=p;var d=p.document.createTextNode("");d.ownerDocument!==p.document&&typeof p.wrap=="function"&&p.wrap(d)===d&&(p=p.wrap(p)),j=p}function U(p){return D(p)?p:(p.ownerDocument||p).defaultView||j.window}typeof window<"u"&&window&&M(window);var X=function(p){return!!p&&i(p)==="object"},P=function(p){return typeof p=="function"},S={window:function(p){return p===j||D(p)},docFrag:function(p){return X(p)&&p.nodeType===11},object:X,func:P,number:function(p){return typeof p=="number"},bool:function(p){return typeof p=="boolean"},string:function(p){return typeof p=="string"},element:function(p){if(!p||i(p)!=="object")return!1;var d=U(p)||j;return/object|function/.test(typeof Element>"u"?"undefined":i(Element))?p instanceof Element||p instanceof d.Element:p.nodeType===1&&typeof p.nodeName=="string"},plainObject:function(p){return X(p)&&!!p.constructor&&/function Object\b/.test(p.constructor.toString())},array:function(p){return X(p)&&p.length!==void 0&&P(p.splice)}};function R(p){var d=p.interaction;if(d.prepared.name==="drag"){var m=d.prepared.axis;m==="x"?(d.coords.cur.page.y=d.coords.start.page.y,d.coords.cur.client.y=d.coords.start.client.y,d.coords.velocity.client.y=0,d.coords.velocity.page.y=0):m==="y"&&(d.coords.cur.page.x=d.coords.start.page.x,d.coords.cur.client.x=d.coords.start.client.x,d.coords.velocity.client.x=0,d.coords.velocity.page.x=0)}}function F(p){var d=p.iEvent,m=p.interaction;if(m.prepared.name==="drag"){var k=m.prepared.axis;if(k==="x"||k==="y"){var E=k==="x"?"y":"x";d.page[E]=m.coords.start.page[E],d.client[E]=m.coords.start.client[E],d.delta[E]=0}}}var B={id:"actions/drag",install:function(p){var d=p.actions,m=p.Interactable,k=p.defaults;m.prototype.draggable=B.draggable,d.map.drag=B,d.methodDict.drag="draggable",k.actions.drag=B.defaults},listeners:{"interactions:before-action-move":R,"interactions:action-resume":R,"interactions:action-move":F,"auto-start:check":function(p){var d=p.interaction,m=p.interactable,k=p.buttons,E=m.options.drag;if(E&&E.enabled&&(!d.pointerIsDown||!/mouse|pointer/.test(d.pointerType)||k&m.options.drag.mouseButtons))return p.action={name:"drag",axis:E.lockAxis==="start"?E.startAxis:E.lockAxis},!1}},draggable:function(p){return S.object(p)?(this.options.drag.enabled=p.enabled!==!1,this.setPerAction("drag",p),this.setOnEvents("drag",p),/^(xy|x|y|start)$/.test(p.lockAxis)&&(this.options.drag.lockAxis=p.lockAxis),/^(xy|x|y)$/.test(p.startAxis)&&(this.options.drag.startAxis=p.startAxis),this):S.bool(p)?(this.options.drag.enabled=p,this):this.options.drag},beforeMove:R,move:F,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(p){return p.search("drag")===0}},Y=B,V={init:function(p){var d=p;V.document=d.document,V.DocumentFragment=d.DocumentFragment||T,V.SVGElement=d.SVGElement||T,V.SVGSVGElement=d.SVGSVGElement||T,V.SVGElementInstance=d.SVGElementInstance||T,V.Element=d.Element||T,V.HTMLElement=d.HTMLElement||V.Element,V.Event=d.Event,V.Touch=d.Touch||T,V.PointerEvent=d.PointerEvent||d.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function T(){}var W=V,N={init:function(p){var d=W.Element,m=p.navigator||{};N.supportsTouch="ontouchstart"in p||S.func(p.DocumentTouch)&&W.document instanceof p.DocumentTouch,N.supportsPointerEvent=m.pointerEnabled!==!1&&!!W.PointerEvent,N.isIOS=/iP(hone|od|ad)/.test(m.platform),N.isIOS7=/iP(hone|od|ad)/.test(m.platform)&&/OS 7[^\d]/.test(m.appVersion),N.isIe9=/MSIE 9/.test(m.userAgent),N.isOperaMobile=m.appName==="Opera"&&N.supportsTouch&&/Presto/.test(m.userAgent),N.prefixedMatchesSelector="matches"in d.prototype?"matches":"webkitMatchesSelector"in d.prototype?"webkitMatchesSelector":"mozMatchesSelector"in d.prototype?"mozMatchesSelector":"oMatchesSelector"in d.prototype?"oMatchesSelector":"msMatchesSelector",N.pEventTypes=N.supportsPointerEvent?W.PointerEvent===p.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,N.wheelEvent=W.document&&"onmousewheel"in W.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},H=N;function J(p,d){if(p.contains)return p.contains(d);for(;d;){if(d===p)return!0;d=d.parentNode}return!1}function $(p,d){for(;S.element(p);){if(he(p,d))return p;p=te(p)}return null}function te(p){var d=p.parentNode;if(S.docFrag(d)){for(;(d=d.host)&&S.docFrag(d););return d}return d}function he(p,d){return j!==A&&(d=d.replace(/\/deep\//g," ")),p[H.prefixedMatchesSelector](d)}var ue=function(p){return p.parentNode||p.host};function ee(p,d){for(var m,k=[],E=p;(m=ue(E))&&E!==d&&m!==E.ownerDocument;)k.unshift(E),E=m;return k}function K(p,d,m){for(;S.element(p);){if(he(p,d))return!0;if((p=te(p))===m)return he(p,d)}return!1}function se(p){return p.correspondingUseElement||p}function be(p){var d=p instanceof W.SVGElement?p.getBoundingClientRect():p.getClientRects()[0];return d&&{left:d.left,right:d.right,top:d.top,bottom:d.bottom,width:d.width||d.right-d.left,height:d.height||d.bottom-d.top}}function _(p){var d,m=be(p);if(!H.isIOS7&&m){var k={x:(d=(d=U(p))||j).scrollX||d.document.documentElement.scrollLeft,y:d.scrollY||d.document.documentElement.scrollTop};m.left+=k.x,m.right+=k.x,m.top+=k.y,m.bottom+=k.y}return m}function re(p){for(var d=[];p;)d.push(p),p=te(p);return d}function we(p){return!!S.string(p)&&(W.document.querySelector(p),!0)}function ce(p,d){for(var m in d)p[m]=d[m];return p}function Ae(p,d,m){return p==="parent"?te(m):p==="self"?d.getRect(m):$(m,p)}function He(p,d,m,k){var E=p;return S.string(E)?E=Ae(E,d,m):S.func(E)&&(E=E.apply(void 0,k)),S.element(E)&&(E=_(E)),E}function ft(p){return p&&{x:"x"in p?p.x:p.left,y:"y"in p?p.y:p.top}}function ae(p){return!p||"x"in p&&"y"in p||((p=ce({},p)).x=p.left||0,p.y=p.top||0,p.width=p.width||(p.right||0)-p.x,p.height=p.height||(p.bottom||0)-p.y),p}function ge(p,d,m){p.left&&(d.left+=m.x),p.right&&(d.right+=m.x),p.top&&(d.top+=m.y),p.bottom&&(d.bottom+=m.y),d.width=d.right-d.left,d.height=d.bottom-d.top}function Fe(p,d,m){var k=m&&p.options[m];return ft(He(k&&k.origin||p.options.origin,p,d,[p&&d]))||{x:0,y:0}}function xe(p,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(le){return!0},k=arguments.length>3?arguments[3]:void 0;if(k=k||{},S.string(p)&&p.search(" ")!==-1&&(p=Ue(p)),S.array(p))return p.forEach(function(le){return xe(le,d,m,k)}),k;if(S.object(p)&&(d=p,p=""),S.func(d)&&m(p))k[p]=k[p]||[],k[p].push(d);else if(S.array(d))for(var E=0,O=d;E<O.length;E++){var G=O[E];xe(p,G,m,k)}else if(S.object(d))for(var Z in d)xe(Ue(Z).map(function(le){return"".concat(p).concat(le)}),d[Z],m,k);return k}function Ue(p){return p.trim().split(/ +/)}var Oe=function(p,d){return Math.sqrt(p*p+d*d)},Pe=["webkit","moz"];function Ye(p,d){p.__set||(p.__set={});var m=function(E){if(Pe.some(function(O){return E.indexOf(O)===0}))return 1;typeof p[E]!="function"&&E!=="__set"&&Object.defineProperty(p,E,{get:function(){return E in p.__set?p.__set[E]:p.__set[E]=d[E]},set:function(O){p.__set[E]=O},configurable:!0})};for(var k in d)m(k);return p}function Se(p,d){p.page=p.page||{},p.page.x=d.page.x,p.page.y=d.page.y,p.client=p.client||{},p.client.x=d.client.x,p.client.y=d.client.y,p.timeStamp=d.timeStamp}function Ce(p){p.page.x=0,p.page.y=0,p.client.x=0,p.client.y=0}function je(p){return p instanceof W.Event||p instanceof W.Touch}function Me(p,d,m){return p=p||"page",(m=m||{}).x=d[p+"X"],m.y=d[p+"Y"],m}function ut(p,d){return d=d||{x:0,y:0},H.isOperaMobile&&je(p)?(Me("screen",p,d),d.x+=window.scrollX,d.y+=window.scrollY):Me("page",p,d),d}function xt(p){return S.number(p.pointerId)?p.pointerId:p.identifier}function Ot(p,d,m){var k=d.length>1?Ht(d):d[0];ut(k,p.page),function(E,O){O=O||{},H.isOperaMobile&&je(E)?Me("screen",E,O):Me("client",E,O)}(k,p.client),p.timeStamp=m}function zt(p){var d=[];return S.array(p)?(d[0]=p[0],d[1]=p[1]):p.type==="touchend"?p.touches.length===1?(d[0]=p.touches[0],d[1]=p.changedTouches[0]):p.touches.length===0&&(d[0]=p.changedTouches[0],d[1]=p.changedTouches[1]):(d[0]=p.touches[0],d[1]=p.touches[1]),d}function Ht(p){for(var d={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},m=0;m<p.length;m++){var k=p[m];for(var E in d)d[E]+=k[E]}for(var O in d)d[O]/=p.length;return d}function wo(p){if(!p.length)return null;var d=zt(p),m=Math.min(d[0].pageX,d[1].pageX),k=Math.min(d[0].pageY,d[1].pageY),E=Math.max(d[0].pageX,d[1].pageX),O=Math.max(d[0].pageY,d[1].pageY);return{x:m,y:k,left:m,top:k,right:E,bottom:O,width:E-m,height:O-k}}function po(p,d){var m=d+"X",k=d+"Y",E=zt(p),O=E[0][m]-E[1][m],G=E[0][k]-E[1][k];return Oe(O,G)}function to(p,d){var m=d+"X",k=d+"Y",E=zt(p),O=E[1][m]-E[0][m],G=E[1][k]-E[0][k];return 180*Math.atan2(G,O)/Math.PI}function oo(p){return S.string(p.pointerType)?p.pointerType:S.number(p.pointerType)?[void 0,void 0,"touch","pen","mouse"][p.pointerType]:/touch/.test(p.type||"")||p instanceof W.Touch?"touch":"mouse"}function kr(p){var d=S.func(p.composedPath)?p.composedPath():p.path;return[se(d?d[0]:p.target),se(p.currentTarget)]}var xr=function(){function p(d){a(this,p),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=d}return s(p,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),p}();Object.defineProperty(xr.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Eo=function(p,d){for(var m=0;m<d.length;m++){var k=d[m];p.push(k)}return p},Oo=function(p){return Eo([],p)},Ar=function(p,d){for(var m=0;m<p.length;m++)if(d(p[m],m,p))return m;return-1},sr=function(p,d){return p[Ar(p,d)]},Ho=function(p){u(m,p);var d=y(m);function m(k,E,O){var G;a(this,m),(G=d.call(this,E._interaction)).dropzone=void 0,G.dragEvent=void 0,G.relatedTarget=void 0,G.draggable=void 0,G.propagationStopped=!1,G.immediatePropagationStopped=!1;var Z=O==="dragleave"?k.prev:k.cur,le=Z.element,ke=Z.dropzone;return G.type=O,G.target=le,G.currentTarget=le,G.dropzone=ke,G.dragEvent=E,G.relatedTarget=E.target,G.draggable=E.interactable,G.timeStamp=E.timeStamp,G}return s(m,[{key:"reject",value:function(){var k=this,E=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&E.cur.dropzone===this.dropzone&&E.cur.element===this.target)if(E.prev.dropzone=this.dropzone,E.prev.element=this.target,E.rejected=!0,E.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var O=E.activeDrops,G=Ar(O,function(le){var ke=le.dropzone,pe=le.element;return ke===k.dropzone&&pe===k.target});E.activeDrops.splice(G,1);var Z=new m(E,this.dragEvent,"dropdeactivate");Z.dropzone=this.dropzone,Z.target=this.target,this.dropzone.fire(Z)}else this.dropzone.fire(new m(E,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),m}(xr);function Xr(p,d){for(var m=0,k=p.slice();m<k.length;m++){var E=k[m],O=E.dropzone,G=E.element;d.dropzone=O,d.target=G,O.fire(d),d.propagationStopped=d.immediatePropagationStopped=!1}}function Nr(p,d){for(var m=function(O,G){for(var Z=[],le=0,ke=O.interactables.list;le<ke.length;le++){var pe=ke[le];if(pe.options.drop.enabled){var Re=pe.options.drop.accept;if(!(S.element(Re)&&Re!==G||S.string(Re)&&!he(G,Re)||S.func(Re)&&!Re({dropzone:pe,draggableElement:G})))for(var Ge=0,qe=pe.getAllElements();Ge<qe.length;Ge++){var Xe=qe[Ge];Xe!==G&&Z.push({dropzone:pe,element:Xe,rect:pe.getRect(Xe)})}}}return Z}(p,d),k=0;k<m.length;k++){var E=m[k];E.rect=E.dropzone.getRect(E.element)}return m}function oa(p,d,m){for(var k=p.dropState,E=p.interactable,O=p.element,G=[],Z=0,le=k.activeDrops;Z<le.length;Z++){var ke=le[Z],pe=ke.dropzone,Re=ke.element,Ge=ke.rect,qe=pe.dropCheck(d,m,E,O,Re,Ge);G.push(qe?Re:null)}var Xe=function(ot){for(var yt,mt,It,jt=[],Wt=0;Wt<ot.length;Wt++){var Lt=ot[Wt],Vt=ot[yt];if(Lt&&Wt!==yt)if(Vt){var $o=ue(Lt),bo=ue(Vt);if($o!==Lt.ownerDocument)if(bo!==Lt.ownerDocument)if($o!==bo){jt=jt.length?jt:ee(Vt);var er=void 0;if(Vt instanceof W.HTMLElement&&Lt instanceof W.SVGElement&&!(Lt instanceof W.SVGSVGElement)){if(Lt===bo)continue;er=Lt.ownerSVGElement}else er=Lt;for(var Gr=ee(er,Vt.ownerDocument),yi=0;Gr[yi]&&Gr[yi]===jt[yi];)yi++;var Ms=[Gr[yi-1],Gr[yi],jt[yi]];if(Ms[0])for(var Fa=Ms[0].lastChild;Fa;){if(Fa===Ms[1]){yt=Wt,jt=Gr;break}if(Fa===Ms[2])break;Fa=Fa.previousSibling}}else It=Vt,(parseInt(U(mt=Lt).getComputedStyle(mt).zIndex,10)||0)>=(parseInt(U(It).getComputedStyle(It).zIndex,10)||0)&&(yt=Wt);else yt=Wt}else yt=Wt}return yt}(G);return k.activeDrops[Xe]||null}function fi(p,d,m){var k=p.dropState,E={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return m.type==="dragstart"&&(E.activate=new Ho(k,m,"dropactivate"),E.activate.target=null,E.activate.dropzone=null),m.type==="dragend"&&(E.deactivate=new Ho(k,m,"dropdeactivate"),E.deactivate.target=null,E.deactivate.dropzone=null),k.rejected||(k.cur.element!==k.prev.element&&(k.prev.dropzone&&(E.leave=new Ho(k,m,"dragleave"),m.dragLeave=E.leave.target=k.prev.element,m.prevDropzone=E.leave.dropzone=k.prev.dropzone),k.cur.dropzone&&(E.enter=new Ho(k,m,"dragenter"),m.dragEnter=k.cur.element,m.dropzone=k.cur.dropzone)),m.type==="dragend"&&k.cur.dropzone&&(E.drop=new Ho(k,m,"drop"),m.dropzone=k.cur.dropzone,m.relatedTarget=k.cur.element),m.type==="dragmove"&&k.cur.dropzone&&(E.move=new Ho(k,m,"dropmove"),m.dropzone=k.cur.dropzone)),E}function Wr(p,d){var m=p.dropState,k=m.activeDrops,E=m.cur,O=m.prev;d.leave&&O.dropzone.fire(d.leave),d.enter&&E.dropzone.fire(d.enter),d.move&&E.dropzone.fire(d.move),d.drop&&E.dropzone.fire(d.drop),d.deactivate&&Xr(k,d.deactivate),m.prev.dropzone=E.dropzone,m.prev.element=E.element}function Mi(p,d){var m=p.interaction,k=p.iEvent,E=p.event;if(k.type==="dragmove"||k.type==="dragend"){var O=m.dropState;d.dynamicDrop&&(O.activeDrops=Nr(d,m.element));var G=k,Z=oa(m,G,E);O.rejected=O.rejected&&!!Z&&Z.dropzone===O.cur.dropzone&&Z.element===O.cur.element,O.cur.dropzone=Z&&Z.dropzone,O.cur.element=Z&&Z.element,O.events=fi(m,0,G)}}var ss={id:"actions/drop",install:function(p){var d=p.actions,m=p.interactStatic,k=p.Interactable,E=p.defaults;p.usePlugin(Y),k.prototype.dropzone=function(O){return function(G,Z){if(S.object(Z)){if(G.options.drop.enabled=Z.enabled!==!1,Z.listeners){var le=xe(Z.listeners),ke=Object.keys(le).reduce(function(Re,Ge){return Re[/^(enter|leave)/.test(Ge)?"drag".concat(Ge):/^(activate|deactivate|move)/.test(Ge)?"drop".concat(Ge):Ge]=le[Ge],Re},{}),pe=G.options.drop.listeners;pe&&G.off(pe),G.on(ke),G.options.drop.listeners=ke}return S.func(Z.ondrop)&&G.on("drop",Z.ondrop),S.func(Z.ondropactivate)&&G.on("dropactivate",Z.ondropactivate),S.func(Z.ondropdeactivate)&&G.on("dropdeactivate",Z.ondropdeactivate),S.func(Z.ondragenter)&&G.on("dragenter",Z.ondragenter),S.func(Z.ondragleave)&&G.on("dragleave",Z.ondragleave),S.func(Z.ondropmove)&&G.on("dropmove",Z.ondropmove),/^(pointer|center)$/.test(Z.overlap)?G.options.drop.overlap=Z.overlap:S.number(Z.overlap)&&(G.options.drop.overlap=Math.max(Math.min(1,Z.overlap),0)),"accept"in Z&&(G.options.drop.accept=Z.accept),"checker"in Z&&(G.options.drop.checker=Z.checker),G}return S.bool(Z)?(G.options.drop.enabled=Z,G):G.options.drop}(this,O)},k.prototype.dropCheck=function(O,G,Z,le,ke,pe){return function(Re,Ge,qe,Xe,ot,yt,mt){var It=!1;if(!(mt=mt||Re.getRect(yt)))return!!Re.options.drop.checker&&Re.options.drop.checker(Ge,qe,It,Re,yt,Xe,ot);var jt=Re.options.drop.overlap;if(jt==="pointer"){var Wt=Fe(Xe,ot,"drag"),Lt=ut(Ge);Lt.x+=Wt.x,Lt.y+=Wt.y;var Vt=Lt.x>mt.left&&Lt.x<mt.right,$o=Lt.y>mt.top&&Lt.y<mt.bottom;It=Vt&&$o}var bo=Xe.getRect(ot);if(bo&&jt==="center"){var er=bo.left+bo.width/2,Gr=bo.top+bo.height/2;It=er>=mt.left&&er<=mt.right&&Gr>=mt.top&&Gr<=mt.bottom}return bo&&S.number(jt)&&(It=Math.max(0,Math.min(mt.right,bo.right)-Math.max(mt.left,bo.left))*Math.max(0,Math.min(mt.bottom,bo.bottom)-Math.max(mt.top,bo.top))/(bo.width*bo.height)>=jt),Re.options.drop.checker&&(It=Re.options.drop.checker(Ge,qe,It,Re,yt,Xe,ot)),It}(this,O,G,Z,le,ke,pe)},m.dynamicDrop=function(O){return S.bool(O)?(p.dynamicDrop=O,m):p.dynamicDrop},ce(d.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),d.methodDict.drop="dropzone",p.dynamicDrop=!1,E.actions.drop=ss.defaults},listeners:{"interactions:before-action-start":function(p){var d=p.interaction;d.prepared.name==="drag"&&(d.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(p,d){var m=p.interaction,k=(p.event,p.iEvent);if(m.prepared.name==="drag"){var E=m.dropState;E.activeDrops=[],E.events={},E.activeDrops=Nr(d,m.element),E.events=fi(m,0,k),E.events.activate&&(Xr(E.activeDrops,E.events.activate),d.fire("actions/drop:start",{interaction:m,dragEvent:k}))}},"interactions:action-move":Mi,"interactions:after-action-move":function(p,d){var m=p.interaction,k=p.iEvent;if(m.prepared.name==="drag"){var E=m.dropState;Wr(m,E.events),d.fire("actions/drop:move",{interaction:m,dragEvent:k}),E.events={}}},"interactions:action-end":function(p,d){if(p.interaction.prepared.name==="drag"){var m=p.interaction,k=p.iEvent;Mi(p,d),Wr(m,m.dropState.events),d.fire("actions/drop:end",{interaction:m,dragEvent:k})}},"interactions:stop":function(p){var d=p.interaction;if(d.prepared.name==="drag"){var m=d.dropState;m&&(m.activeDrops=null,m.events=null,m.cur.dropzone=null,m.cur.element=null,m.prev.dropzone=null,m.prev.element=null,m.rejected=!1)}}},getActiveDrops:Nr,getDrop:oa,getDropEvents:fi,fireDropEvents:Wr,filterEventType:function(p){return p.search("drag")===0||p.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Pr=ss;function Ta(p){var d=p.interaction,m=p.iEvent,k=p.phase;if(d.prepared.name==="gesture"){var E=d.pointers.map(function(ke){return ke.pointer}),O=k==="start",G=k==="end",Z=d.interactable.options.deltaSource;if(m.touches=[E[0],E[1]],O)m.distance=po(E,Z),m.box=wo(E),m.scale=1,m.ds=0,m.angle=to(E,Z),m.da=0,d.gesture.startDistance=m.distance,d.gesture.startAngle=m.angle;else if(G||d.pointers.length<2){var le=d.prevEvent;m.distance=le.distance,m.box=le.box,m.scale=le.scale,m.ds=0,m.angle=le.angle,m.da=0}else m.distance=po(E,Z),m.box=wo(E),m.scale=m.distance/d.gesture.startDistance,m.angle=to(E,Z),m.ds=m.scale-d.gesture.scale,m.da=m.angle-d.gesture.angle;d.gesture.distance=m.distance,d.gesture.angle=m.angle,S.number(m.scale)&&m.scale!==1/0&&!isNaN(m.scale)&&(d.gesture.scale=m.scale)}}var qr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(p){var d=p.actions,m=p.Interactable,k=p.defaults;m.prototype.gesturable=function(E){return S.object(E)?(this.options.gesture.enabled=E.enabled!==!1,this.setPerAction("gesture",E),this.setOnEvents("gesture",E),this):S.bool(E)?(this.options.gesture.enabled=E,this):this.options.gesture},d.map.gesture=qr,d.methodDict.gesture="gesturable",k.actions.gesture=qr.defaults},listeners:{"interactions:action-start":Ta,"interactions:action-move":Ta,"interactions:action-end":Ta,"interactions:new":function(p){p.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(p){if(!(p.interaction.pointers.length<2)){var d=p.interactable.options.gesture;if(d&&d.enabled)return p.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(p){return p.search("gesture")===0}},_r=qr;function hn(p,d,m,k,E,O,G){if(!d)return!1;if(d===!0){var Z=S.number(O.width)?O.width:O.right-O.left,le=S.number(O.height)?O.height:O.bottom-O.top;if(G=Math.min(G,Math.abs((p==="left"||p==="right"?Z:le)/2)),Z<0&&(p==="left"?p="right":p==="right"&&(p="left")),le<0&&(p==="top"?p="bottom":p==="bottom"&&(p="top")),p==="left"){var ke=Z>=0?O.left:O.right;return m.x<ke+G}if(p==="top"){var pe=le>=0?O.top:O.bottom;return m.y<pe+G}if(p==="right")return m.x>(Z>=0?O.right:O.left)-G;if(p==="bottom")return m.y>(le>=0?O.bottom:O.top)-G}return!!S.element(k)&&(S.element(d)?d===k:K(k,d,E))}function ra(p){var d=p.iEvent,m=p.interaction;if(m.prepared.name==="resize"&&m.resizeAxes){var k=d;m.interactable.options.resize.square?(m.resizeAxes==="y"?k.delta.x=k.delta.y:k.delta.y=k.delta.x,k.axes="xy"):(k.axes=m.resizeAxes,m.resizeAxes==="x"?k.delta.y=0:m.resizeAxes==="y"&&(k.delta.x=0))}}var lr,mi,cr={id:"actions/resize",before:["actions/drag"],install:function(p){var d=p.actions,m=p.browser,k=p.Interactable,E=p.defaults;cr.cursors=function(O){return O.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(m),cr.defaultMargin=m.supportsTouch||m.supportsPointerEvent?20:10,k.prototype.resizable=function(O){return function(G,Z,le){return S.object(Z)?(G.options.resize.enabled=Z.enabled!==!1,G.setPerAction("resize",Z),G.setOnEvents("resize",Z),S.string(Z.axis)&&/^x$|^y$|^xy$/.test(Z.axis)?G.options.resize.axis=Z.axis:Z.axis===null&&(G.options.resize.axis=le.defaults.actions.resize.axis),S.bool(Z.preserveAspectRatio)?G.options.resize.preserveAspectRatio=Z.preserveAspectRatio:S.bool(Z.square)&&(G.options.resize.square=Z.square),G):S.bool(Z)?(G.options.resize.enabled=Z,G):G.options.resize}(this,O,p)},d.map.resize=cr,d.methodDict.resize="resizable",E.actions.resize=cr.defaults},listeners:{"interactions:new":function(p){p.interaction.resizeAxes="xy"},"interactions:action-start":function(p){(function(d){var m=d.iEvent,k=d.interaction;if(k.prepared.name==="resize"&&k.prepared.edges){var E=m,O=k.rect;k._rects={start:ce({},O),corrected:ce({},O),previous:ce({},O),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},E.edges=k.prepared.edges,E.rect=k._rects.corrected,E.deltaRect=k._rects.delta}})(p),ra(p)},"interactions:action-move":function(p){(function(d){var m=d.iEvent,k=d.interaction;if(k.prepared.name==="resize"&&k.prepared.edges){var E=m,O=k.interactable.options.resize.invert,G=O==="reposition"||O==="negate",Z=k.rect,le=k._rects,ke=le.start,pe=le.corrected,Re=le.delta,Ge=le.previous;if(ce(Ge,pe),G){if(ce(pe,Z),O==="reposition"){if(pe.top>pe.bottom){var qe=pe.top;pe.top=pe.bottom,pe.bottom=qe}if(pe.left>pe.right){var Xe=pe.left;pe.left=pe.right,pe.right=Xe}}}else pe.top=Math.min(Z.top,ke.bottom),pe.bottom=Math.max(Z.bottom,ke.top),pe.left=Math.min(Z.left,ke.right),pe.right=Math.max(Z.right,ke.left);for(var ot in pe.width=pe.right-pe.left,pe.height=pe.bottom-pe.top,pe)Re[ot]=pe[ot]-Ge[ot];E.edges=k.prepared.edges,E.rect=pe,E.deltaRect=Re}})(p),ra(p)},"interactions:action-end":function(p){var d=p.iEvent,m=p.interaction;if(m.prepared.name==="resize"&&m.prepared.edges){var k=d;k.edges=m.prepared.edges,k.rect=m._rects.corrected,k.deltaRect=m._rects.delta}},"auto-start:check":function(p){var d=p.interaction,m=p.interactable,k=p.element,E=p.rect,O=p.buttons;if(E){var G=ce({},d.coords.cur.page),Z=m.options.resize;if(Z&&Z.enabled&&(!d.pointerIsDown||!/mouse|pointer/.test(d.pointerType)||O&Z.mouseButtons)){if(S.object(Z.edges)){var le={left:!1,right:!1,top:!1,bottom:!1};for(var ke in le)le[ke]=hn(ke,Z.edges[ke],G,d._latestPointer.eventTarget,k,E,Z.margin||cr.defaultMargin);le.left=le.left&&!le.right,le.top=le.top&&!le.bottom,(le.left||le.right||le.top||le.bottom)&&(p.action={name:"resize",edges:le})}else{var pe=Z.axis!=="y"&&G.x>E.right-cr.defaultMargin,Re=Z.axis!=="x"&&G.y>E.bottom-cr.defaultMargin;(pe||Re)&&(p.action={name:"resize",axes:(pe?"x":"")+(Re?"y":"")})}return!p.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(p){var d=p.edges,m=p.axis,k=p.name,E=cr.cursors,O=null;if(m)O=E[k+m];else if(d){for(var G="",Z=0,le=["top","bottom","left","right"];Z<le.length;Z++){var ke=le[Z];d[ke]&&(G+=ke)}O=E[G]}return O},filterEventType:function(p){return p.search("resize")===0},defaultMargin:null},gn=cr,Gl={id:"actions",install:function(p){p.usePlugin(_r),p.usePlugin(gn),p.usePlugin(Y),p.usePlugin(Pr)}},ia=0,Zo={request:function(p){return lr(p)},cancel:function(p){return mi(p)},init:function(p){if(lr=p.requestAnimationFrame,mi=p.cancelAnimationFrame,!lr)for(var d=["ms","moz","webkit","o"],m=0;m<d.length;m++){var k=d[m];lr=p["".concat(k,"RequestAnimationFrame")],mi=p["".concat(k,"CancelAnimationFrame")]||p["".concat(k,"CancelRequestAnimationFrame")]}lr=lr&&lr.bind(p),mi=mi&&mi.bind(p),lr||(lr=function(E){var O=Date.now(),G=Math.max(0,16-(O-ia)),Z=p.setTimeout(function(){E(O+G)},G);return ia=O+G,Z},mi=function(E){return clearTimeout(E)})}},Ft={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(p){Ft.isScrolling=!0,Zo.cancel(Ft.i),p.autoScroll=Ft,Ft.interaction=p,Ft.prevTime=Ft.now(),Ft.i=Zo.request(Ft.scroll)},stop:function(){Ft.isScrolling=!1,Ft.interaction&&(Ft.interaction.autoScroll=null),Zo.cancel(Ft.i)},scroll:function(){var p=Ft.interaction,d=p.interactable,m=p.element,k=p.prepared.name,E=d.options[k].autoScroll,O=Ma(E.container,d,m),G=Ft.now(),Z=(G-Ft.prevTime)/1e3,le=E.speed*Z;if(le>=1){var ke={x:Ft.x*le,y:Ft.y*le};if(ke.x||ke.y){var pe=fn(O);S.window(O)?O.scrollBy(ke.x,ke.y):O&&(O.scrollLeft+=ke.x,O.scrollTop+=ke.y);var Re=fn(O),Ge={x:Re.x-pe.x,y:Re.y-pe.y};(Ge.x||Ge.y)&&d.fire({type:"autoscroll",target:m,interactable:d,delta:Ge,interaction:p,container:O})}Ft.prevTime=G}Ft.isScrolling&&(Zo.cancel(Ft.i),Ft.i=Zo.request(Ft.scroll))},check:function(p,d){var m;return(m=p.options[d].autoScroll)==null?void 0:m.enabled},onInteractionMove:function(p){var d=p.interaction,m=p.pointer;if(d.interacting()&&Ft.check(d.interactable,d.prepared.name))if(d.simulation)Ft.x=Ft.y=0;else{var k,E,O,G,Z=d.interactable,le=d.element,ke=d.prepared.name,pe=Z.options[ke].autoScroll,Re=Ma(pe.container,Z,le);if(S.window(Re))G=m.clientX<Ft.margin,k=m.clientY<Ft.margin,E=m.clientX>Re.innerWidth-Ft.margin,O=m.clientY>Re.innerHeight-Ft.margin;else{var Ge=be(Re);G=m.clientX<Ge.left+Ft.margin,k=m.clientY<Ge.top+Ft.margin,E=m.clientX>Ge.right-Ft.margin,O=m.clientY>Ge.bottom-Ft.margin}Ft.x=E?1:G?-1:0,Ft.y=O?1:k?-1:0,Ft.isScrolling||(Ft.margin=pe.margin,Ft.speed=pe.speed,Ft.start(d))}}};function Ma(p,d,m){return(S.string(p)?Ae(p,d,m):p)||U(m)}function fn(p){return S.window(p)&&(p=window.document.body),{x:p.scrollLeft,y:p.scrollTop}}var ls={id:"auto-scroll",install:function(p){var d=p.defaults,m=p.actions;p.autoScroll=Ft,Ft.now=function(){return p.now()},m.phaselessTypes.autoscroll=!0,d.perAction.autoScroll=Ft.defaults},listeners:{"interactions:new":function(p){p.interaction.autoScroll=null},"interactions:destroy":function(p){p.interaction.autoScroll=null,Ft.stop(),Ft.interaction&&(Ft.interaction=null)},"interactions:stop":Ft.stop,"interactions:action-move":function(p){return Ft.onInteractionMove(p)}}},mn=ls;function Ri(p,d){var m=!1;return function(){return m||(j.console.warn(d),m=!0),p.apply(this,arguments)}}function vn(p,d){return p.name=d.name,p.axis=d.axis,p.edges=d.edges,p}function vi(p){return S.bool(p)?(this.options.styleCursor=p,this):p===null?(delete this.options.styleCursor,this):this.options.styleCursor}function cs(p){return S.func(p)?(this.options.actionChecker=p,this):p===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Hl={id:"auto-start/interactableMethods",install:function(p){var d=p.Interactable;d.prototype.getAction=function(m,k,E,O){var G=function(Z,le,ke,pe,Re){var Ge=Z.getRect(pe),qe=le.buttons||{0:1,1:4,3:8,4:16}[le.button],Xe={action:null,interactable:Z,interaction:ke,element:pe,rect:Ge,buttons:qe};return Re.fire("auto-start:check",Xe),Xe.action}(this,k,E,O,p);return this.options.actionChecker?this.options.actionChecker(m,k,G,this,O,E):G},d.prototype.ignoreFrom=Ri(function(m){return this._backCompatOption("ignoreFrom",m)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),d.prototype.allowFrom=Ri(function(m){return this._backCompatOption("allowFrom",m)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),d.prototype.actionChecker=cs,d.prototype.styleCursor=vi}};function Xo(p,d,m,k,E){return d.testIgnoreAllow(d.options[p.name],m,k)&&d.options[p.name].enabled&&us(d,m,p,E)?p:null}function aa(p,d,m,k,E,O,G){for(var Z=0,le=k.length;Z<le;Z++){var ke=k[Z],pe=E[Z],Re=ke.getAction(d,m,p,pe);if(Re){var Ge=Xo(Re,ke,pe,O,G);if(Ge)return{action:Ge,interactable:ke,element:pe}}}return{action:null,interactable:null,element:null}}function bn(p,d,m,k,E){var O=[],G=[],Z=k;function le(pe){O.push(pe),G.push(Z)}for(;S.element(Z);){O=[],G=[],E.interactables.forEachMatch(Z,le);var ke=aa(p,d,m,O,G,k,E);if(ke.action&&!ke.interactable.options[ke.action.name].manualStart)return ke;Z=te(Z)}return{action:null,interactable:null,element:null}}function Ru(p,d,m){var k=d.action,E=d.interactable,O=d.element;k=k||{name:null},p.interactable=E,p.element=O,vn(p.prepared,k),p.rect=E&&k.name?E.getRect(O):null,Yl(p,m),m.fire("autoStart:prepared",{interaction:p})}function us(p,d,m,k){var E=p.options,O=E[m.name].max,G=E[m.name].maxPerElement,Z=k.autoStart.maxInteractions,le=0,ke=0,pe=0;if(!(O&&G&&Z))return!1;for(var Re=0,Ge=k.interactions.list;Re<Ge.length;Re++){var qe=Ge[Re],Xe=qe.prepared.name;if(qe.interacting()&&(++le>=Z||qe.interactable===p&&((ke+=Xe===m.name?1:0)>=O||qe.element===d&&(pe++,Xe===m.name&&pe>=G))))return!1}return Z>0}function ds(p,d){return S.number(p)?(d.autoStart.maxInteractions=p,this):d.autoStart.maxInteractions}function zl(p,d,m){var k=m.autoStart.cursorElement;k&&k!==p&&(k.style.cursor=""),p.ownerDocument.documentElement.style.cursor=d,p.style.cursor=d,m.autoStart.cursorElement=d?p:null}function Yl(p,d){var m=p.interactable,k=p.element,E=p.prepared;if(p.pointerType==="mouse"&&m&&m.options.styleCursor){var O="";if(E.name){var G=m.options[E.name].cursorChecker;O=S.func(G)?G(E,m,k,p._interacting):d.actions.map[E.name].getCursor(E)}zl(p.element,O||"",d)}else d.autoStart.cursorElement&&zl(d.autoStart.cursorElement,"",d)}var Rh={id:"auto-start/base",before:["actions"],install:function(p){var d=p.interactStatic,m=p.defaults;p.usePlugin(Hl),m.base.actionChecker=null,m.base.styleCursor=!0,ce(m.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),d.maxInteractions=function(k){return ds(k,p)},p.autoStart={maxInteractions:1/0,withinInteractionLimit:us,cursorElement:null}},listeners:{"interactions:down":function(p,d){var m=p.interaction,k=p.pointer,E=p.event,O=p.eventTarget;m.interacting()||Ru(m,bn(m,k,E,O,d),d)},"interactions:move":function(p,d){(function(m,k){var E=m.interaction,O=m.pointer,G=m.event,Z=m.eventTarget;E.pointerType!=="mouse"||E.pointerIsDown||E.interacting()||Ru(E,bn(E,O,G,Z,k),k)})(p,d),function(m,k){var E=m.interaction;if(E.pointerIsDown&&!E.interacting()&&E.pointerWasMoved&&E.prepared.name){k.fire("autoStart:before-start",m);var O=E.interactable,G=E.prepared.name;G&&O&&(O.options[G].manualStart||!us(O,E.element,E.prepared,k)?E.stop():(E.start(E.prepared,O,E.element),Yl(E,k)))}}(p,d)},"interactions:stop":function(p,d){var m=p.interaction,k=m.interactable;k&&k.options.styleCursor&&zl(m.element,"",d)}},maxInteractions:ds,withinInteractionLimit:us,validateAction:Xo},Ql=Rh,Dh={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(p,d){var m=p.interaction,k=p.eventTarget,E=p.dx,O=p.dy;if(m.prepared.name==="drag"){var G=Math.abs(E),Z=Math.abs(O),le=m.interactable.options.drag,ke=le.startAxis,pe=G>Z?"x":G<Z?"y":"xy";if(m.prepared.axis=le.lockAxis==="start"?pe[0]:le.lockAxis,pe!=="xy"&&ke!=="xy"&&ke!==pe){m.prepared.name=null;for(var Re=k,Ge=function(Xe){if(Xe!==m.interactable){var ot=m.interactable.options.drag;if(!ot.manualStart&&Xe.testIgnoreAllow(ot,Re,k)){var yt=Xe.getAction(m.downPointer,m.downEvent,m,Re);if(yt&&yt.name==="drag"&&function(mt,It){if(!It)return!1;var jt=It.options.drag.startAxis;return mt==="xy"||jt==="xy"||jt===mt}(pe,Xe)&&Ql.validateAction(yt,Xe,Re,k,d))return Xe}}};S.element(Re);){var qe=d.interactables.forEachMatch(Re,Ge);if(qe){m.prepared.name="drag",m.interactable=qe,m.element=Re;break}Re=te(Re)}}}}}};function Di(p){var d=p.prepared&&p.prepared.name;if(!d)return null;var m=p.interactable.options;return m[d].hold||m[d].delay}var Jl={id:"auto-start/hold",install:function(p){var d=p.defaults;p.usePlugin(Ql),d.perAction.hold=0,d.perAction.delay=0},listeners:{"interactions:new":function(p){p.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(p){var d=p.interaction,m=Di(d);m>0&&(d.autoStartHoldTimer=setTimeout(function(){d.start(d.prepared,d.interactable,d.element)},m))},"interactions:move":function(p){var d=p.interaction,m=p.duplicate;d.autoStartHoldTimer&&d.pointerWasMoved&&!m&&(clearTimeout(d.autoStartHoldTimer),d.autoStartHoldTimer=null)},"autoStart:before-start":function(p){var d=p.interaction;Di(d)>0&&(d.prepared.name=null)}},getHoldDuration:Di},Oh=Jl,zo={id:"auto-start",install:function(p){p.usePlugin(Ql),p.usePlugin(Oh),p.usePlugin(Dh)}},Fh=function(p){return/^(always|never|auto)$/.test(p)?(this.options.preventDefault=p,this):S.bool(p)?(this.options.preventDefault=p?"always":"never",this):this.options.preventDefault};function Du(p){var d=p.interaction,m=p.event;d.interactable&&d.interactable.checkAndPreventDefault(m)}var Kl={id:"core/interactablePreventDefault",install:function(p){var d=p.Interactable;d.prototype.preventDefault=Fh,d.prototype.checkAndPreventDefault=function(m){return function(k,E,O){var G=k.options.preventDefault;if(G!=="never")if(G!=="always"){if(E.events.supportsPassive&&/^touch(start|move)$/.test(O.type)){var Z=U(O.target).document,le=E.getDocOptions(Z);if(!le||!le.events||le.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(O.type)||S.element(O.target)&&he(O.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||O.preventDefault()}else O.preventDefault()}(this,p,m)},p.interactions.docEvents.push({type:"dragstart",listener:function(m){for(var k=0,E=p.interactions.list;k<E.length;k++){var O=E[k];if(O.element&&(O.element===m.target||J(O.element,m.target)))return void O.interactable.checkAndPreventDefault(m)}}})},listeners:["down","move","up","cancel"].reduce(function(p,d){return p["interactions:".concat(d)]=Du,p},{})};function ps(p,d){if(d.phaselessTypes[p])return!0;for(var m in d.map)if(p.indexOf(m)===0&&p.substr(m.length)in d.phases)return!0;return!1}function Ra(p){var d={};for(var m in p){var k=p[m];S.plainObject(k)?d[m]=Ra(k):S.array(k)?d[m]=Oo(k):d[m]=k}return d}var Zl=function(){function p(d){a(this,p),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=d,this.result=hs(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return s(p,[{key:"start",value:function(d,m){var k,E,O=d.phase,G=this.interaction,Z=function(ke){var pe=ke.interactable.options[ke.prepared.name],Re=pe.modifiers;return Re&&Re.length?Re:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Ge){var qe=pe[Ge];return qe&&qe.enabled&&{options:qe,methods:qe._methods}}).filter(function(Ge){return!!Ge})}(G);this.prepareStates(Z),this.startEdges=ce({},G.edges),this.edges=ce({},this.startEdges),this.startOffset=(k=G.rect,E=m,k?{left:E.x-k.left,top:E.y-k.top,right:k.right-E.x,bottom:k.bottom-E.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var le=this.fillArg({phase:O,pageCoords:m,preEnd:!1});return this.result=hs(),this.startAll(le),this.result=this.setAll(le)}},{key:"fillArg",value:function(d){var m=this.interaction;return d.interaction=m,d.interactable=m.interactable,d.element=m.element,d.rect||(d.rect=m.rect),d.edges||(d.edges=this.startEdges),d.startOffset=this.startOffset,d}},{key:"startAll",value:function(d){for(var m=0,k=this.states;m<k.length;m++){var E=k[m];E.methods.start&&(d.state=E,E.methods.start(d))}}},{key:"setAll",value:function(d){var m=d.phase,k=d.preEnd,E=d.skipModifiers,O=d.rect,G=d.edges;d.coords=ce({},d.pageCoords),d.rect=ce({},O),d.edges=ce({},G);for(var Z=E?this.states.slice(E):this.states,le=hs(d.coords,d.rect),ke=0;ke<Z.length;ke++){var pe,Re=Z[ke],Ge=Re.options,qe=ce({},d.coords),Xe=null;(pe=Re.methods)!=null&&pe.set&&this.shouldDo(Ge,k,m)&&(d.state=Re,Xe=Re.methods.set(d),ge(d.edges,d.rect,{x:d.coords.x-qe.x,y:d.coords.y-qe.y})),le.eventProps.push(Xe)}ce(this.edges,d.edges),le.delta.x=d.coords.x-d.pageCoords.x,le.delta.y=d.coords.y-d.pageCoords.y,le.rectDelta.left=d.rect.left-O.left,le.rectDelta.right=d.rect.right-O.right,le.rectDelta.top=d.rect.top-O.top,le.rectDelta.bottom=d.rect.bottom-O.bottom;var ot=this.result.coords,yt=this.result.rect;if(ot&&yt){var mt=le.rect.left!==yt.left||le.rect.right!==yt.right||le.rect.top!==yt.top||le.rect.bottom!==yt.bottom;le.changed=mt||ot.x!==le.coords.x||ot.y!==le.coords.y}return le}},{key:"applyToInteraction",value:function(d){var m=this.interaction,k=d.phase,E=m.coords.cur,O=m.coords.start,G=this.result,Z=this.startDelta,le=G.delta;k==="start"&&ce(this.startDelta,G.delta);for(var ke=0,pe=[[O,Z],[E,le]];ke<pe.length;ke++){var Re=pe[ke],Ge=Re[0],qe=Re[1];Ge.page.x+=qe.x,Ge.page.y+=qe.y,Ge.client.x+=qe.x,Ge.client.y+=qe.y}var Xe=this.result.rectDelta,ot=d.rect||m.rect;ot.left+=Xe.left,ot.right+=Xe.right,ot.top+=Xe.top,ot.bottom+=Xe.bottom,ot.width=ot.right-ot.left,ot.height=ot.bottom-ot.top}},{key:"setAndApply",value:function(d){var m=this.interaction,k=d.phase,E=d.preEnd,O=d.skipModifiers,G=this.setAll(this.fillArg({preEnd:E,phase:k,pageCoords:d.modifiedCoords||m.coords.cur.page}));if(this.result=G,!G.changed&&(!O||O<this.states.length)&&m.interacting())return!1;if(d.modifiedCoords){var Z=m.coords.cur.page,le={x:d.modifiedCoords.x-Z.x,y:d.modifiedCoords.y-Z.y};G.coords.x+=le.x,G.coords.y+=le.y,G.delta.x+=le.x,G.delta.y+=le.y}this.applyToInteraction(d)}},{key:"beforeEnd",value:function(d){var m=d.interaction,k=d.event,E=this.states;if(E&&E.length){for(var O=!1,G=0;G<E.length;G++){var Z=E[G];d.state=Z;var le=Z.options,ke=Z.methods,pe=ke.beforeEnd&&ke.beforeEnd(d);if(pe)return this.endResult=pe,!1;O=O||!O&&this.shouldDo(le,!0,d.phase,!0)}O&&m.move({event:k,preEnd:!0})}}},{key:"stop",value:function(d){var m=d.interaction;if(this.states&&this.states.length){var k=ce({states:this.states,interactable:m.interactable,element:m.element,rect:null},d);this.fillArg(k);for(var E=0,O=this.states;E<O.length;E++){var G=O[E];k.state=G,G.methods.stop&&G.methods.stop(k)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(d){this.states=[];for(var m=0;m<d.length;m++){var k=d[m],E=k.options,O=k.methods,G=k.name;this.states.push({options:E,methods:O,index:m,name:G})}return this.states}},{key:"restoreInteractionCoords",value:function(d){var m=d.interaction,k=m.coords,E=m.rect,O=m.modification;if(O.result){for(var G=O.startDelta,Z=O.result,le=Z.delta,ke=Z.rectDelta,pe=0,Re=[[k.start,G],[k.cur,le]];pe<Re.length;pe++){var Ge=Re[pe],qe=Ge[0],Xe=Ge[1];qe.page.x-=Xe.x,qe.page.y-=Xe.y,qe.client.x-=Xe.x,qe.client.y-=Xe.y}E.left-=ke.left,E.right-=ke.right,E.top-=ke.top,E.bottom-=ke.bottom}}},{key:"shouldDo",value:function(d,m,k,E){return!(!d||d.enabled===!1||E&&!d.endOnly||d.endOnly&&!m||k==="start"&&!d.setStart)}},{key:"copyFrom",value:function(d){this.startOffset=d.startOffset,this.startDelta=d.startDelta,this.startEdges=d.startEdges,this.edges=d.edges,this.states=d.states.map(function(m){return Ra(m)}),this.result=hs(ce({},d.result.coords),ce({},d.result.rect))}},{key:"destroy",value:function(){for(var d in this)this[d]=null}}]),p}();function hs(p,d){return{rect:d,coords:p,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function bi(p,d){var m=p.defaults,k={start:p.start,set:p.set,beforeEnd:p.beforeEnd,stop:p.stop},E=function(O){var G=O||{};for(var Z in G.enabled=G.enabled!==!1,m)Z in G||(G[Z]=m[Z]);var le={options:G,methods:k,name:d,enable:function(){return G.enabled=!0,le},disable:function(){return G.enabled=!1,le}};return le};return d&&typeof d=="string"&&(E._defaults=m,E._methods=k),E}function yn(p){var d=p.iEvent,m=p.interaction.modification.result;m&&(d.modifiers=m.eventProps)}var Lh={id:"modifiers/base",before:["actions"],install:function(p){p.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(p){var d=p.interaction;d.modification=new Zl(d)},"interactions:before-action-start":function(p){var d=p.interaction,m=p.interaction.modification;m.start(p,d.coords.start.page),d.edges=m.edges,m.applyToInteraction(p)},"interactions:before-action-move":function(p){var d=p.interaction,m=d.modification,k=m.setAndApply(p);return d.edges=m.edges,k},"interactions:before-action-end":function(p){var d=p.interaction,m=d.modification,k=m.beforeEnd(p);return d.edges=m.startEdges,k},"interactions:action-start":yn,"interactions:action-move":yn,"interactions:action-end":yn,"interactions:after-action-start":function(p){return p.interaction.modification.restoreInteractionCoords(p)},"interactions:after-action-move":function(p){return p.interaction.modification.restoreInteractionCoords(p)},"interactions:stop":function(p){return p.interaction.modification.stop(p)}}},Xl=Lh,Wl={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},kn=function(p){u(m,p);var d=y(m);function m(k,E,O,G,Z,le,ke){var pe;a(this,m),(pe=d.call(this,k)).relatedTarget=null,pe.screenX=void 0,pe.screenY=void 0,pe.button=void 0,pe.buttons=void 0,pe.ctrlKey=void 0,pe.shiftKey=void 0,pe.altKey=void 0,pe.metaKey=void 0,pe.page=void 0,pe.client=void 0,pe.delta=void 0,pe.rect=void 0,pe.x0=void 0,pe.y0=void 0,pe.t0=void 0,pe.dt=void 0,pe.duration=void 0,pe.clientX0=void 0,pe.clientY0=void 0,pe.velocity=void 0,pe.speed=void 0,pe.swipe=void 0,pe.axes=void 0,pe.preEnd=void 0,Z=Z||k.element;var Re=k.interactable,Ge=(Re&&Re.options||Wl).deltaSource,qe=Fe(Re,Z,O),Xe=G==="start",ot=G==="end",yt=Xe?b(pe):k.prevEvent,mt=Xe?k.coords.start:ot?{page:yt.page,client:yt.client,timeStamp:k.coords.cur.timeStamp}:k.coords.cur;return pe.page=ce({},mt.page),pe.client=ce({},mt.client),pe.rect=ce({},k.rect),pe.timeStamp=mt.timeStamp,ot||(pe.page.x-=qe.x,pe.page.y-=qe.y,pe.client.x-=qe.x,pe.client.y-=qe.y),pe.ctrlKey=E.ctrlKey,pe.altKey=E.altKey,pe.shiftKey=E.shiftKey,pe.metaKey=E.metaKey,pe.button=E.button,pe.buttons=E.buttons,pe.target=Z,pe.currentTarget=Z,pe.preEnd=le,pe.type=ke||O+(G||""),pe.interactable=Re,pe.t0=Xe?k.pointers[k.pointers.length-1].downTime:yt.t0,pe.x0=k.coords.start.page.x-qe.x,pe.y0=k.coords.start.page.y-qe.y,pe.clientX0=k.coords.start.client.x-qe.x,pe.clientY0=k.coords.start.client.y-qe.y,pe.delta=Xe||ot?{x:0,y:0}:{x:pe[Ge].x-yt[Ge].x,y:pe[Ge].y-yt[Ge].y},pe.dt=k.coords.delta.timeStamp,pe.duration=pe.timeStamp-pe.t0,pe.velocity=ce({},k.coords.velocity[Ge]),pe.speed=Oe(pe.velocity.x,pe.velocity.y),pe.swipe=ot||G==="inertiastart"?pe.getSwipe():null,pe}return s(m,[{key:"getSwipe",value:function(){var k=this._interaction;if(k.prevEvent.speed<600||this.timeStamp-k.prevEvent.timeStamp>150)return null;var E=180*Math.atan2(k.prevEvent.velocityY,k.prevEvent.velocityX)/Math.PI;E<0&&(E+=360);var O=112.5<=E&&E<247.5,G=202.5<=E&&E<337.5;return{up:G,down:!G&&22.5<=E&&E<157.5,left:O,right:!O&&(292.5<=E||E<67.5),angle:E,speed:k.prevEvent.speed,velocity:{x:k.prevEvent.velocityX,y:k.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),m}(xr);Object.defineProperties(kn.prototype,{pageX:{get:function(){return this.page.x},set:function(p){this.page.x=p}},pageY:{get:function(){return this.page.y},set:function(p){this.page.y=p}},clientX:{get:function(){return this.client.x},set:function(p){this.client.x=p}},clientY:{get:function(){return this.client.y},set:function(p){this.client.y=p}},dx:{get:function(){return this.delta.x},set:function(p){this.delta.x=p}},dy:{get:function(){return this.delta.y},set:function(p){this.delta.y=p}},velocityX:{get:function(){return this.velocity.x},set:function(p){this.velocity.x=p}},velocityY:{get:function(){return this.velocity.y},set:function(p){this.velocity.y=p}}});var Uh=s(function p(d,m,k,E,O){a(this,p),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=d,this.pointer=m,this.event=k,this.downTime=E,this.downTarget=O}),gs=function(p){return p.interactable="",p.element="",p.prepared="",p.pointerIsDown="",p.pointerWasMoved="",p._proxy="",p}({}),Ou=function(p){return p.start="",p.move="",p.end="",p.stop="",p.interacting="",p}({}),Fu=0,Bh=function(){function p(d){var m=this,k=d.pointerType,E=d.scopeFire;a(this,p),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Ri(function(pe){this.move(pe)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Fu++,this._scopeFire=E,this.pointerType=k;var O=this;this._proxy={};var G=function(pe){Object.defineProperty(m._proxy,pe,{get:function(){return O[pe]}})};for(var Z in gs)G(Z);var le=function(pe){Object.defineProperty(m._proxy,pe,{value:function(){return O[pe].apply(O,arguments)}})};for(var ke in Ou)le(ke);this._scopeFire("interactions:new",{interaction:this})}return s(p,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(d,m,k){var E=this.updatePointer(d,m,k,!0),O=this.pointers[E];this._scopeFire("interactions:down",{pointer:d,event:m,eventTarget:k,pointerIndex:E,pointerInfo:O,type:"down",interaction:this})}},{key:"start",value:function(d,m,k){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(d.name==="gesture"?2:1)||!m.options[d.name].enabled)&&(vn(this.prepared,d),this.interactable=m,this.element=k,this.rect=m.getRect(k),this.edges=this.prepared.edges?ce({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(d,m,k){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(d,m,k,!1);var E,O,G=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(E=this.coords.cur.client.x-this.coords.start.client.x,O=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Oe(E,O)>this.pointerMoveTolerance);var Z,le,ke,pe=this.getPointerIndex(d),Re={pointer:d,pointerIndex:pe,pointerInfo:this.pointers[pe],event:m,type:"move",eventTarget:k,dx:E,dy:O,duplicate:G,interaction:this};G||(Z=this.coords.velocity,le=this.coords.delta,ke=Math.max(le.timeStamp/1e3,.001),Z.page.x=le.page.x/ke,Z.page.y=le.page.y/ke,Z.client.x=le.client.x/ke,Z.client.y=le.client.y/ke,Z.timeStamp=ke),this._scopeFire("interactions:move",Re),G||this.simulation||(this.interacting()&&(Re.type=null,this.move(Re)),this.pointerWasMoved&&Se(this.coords.prev,this.coords.cur))}},{key:"move",value:function(d){d&&d.event||Ce(this.coords.delta),(d=ce({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},d||{})).phase="move",this._doPhase(d)}},{key:"pointerUp",value:function(d,m,k,E){var O=this.getPointerIndex(d);O===-1&&(O=this.updatePointer(d,m,k,!1));var G=/cancel$/i.test(m.type)?"cancel":"up";this._scopeFire("interactions:".concat(G),{pointer:d,pointerIndex:O,pointerInfo:this.pointers[O],event:m,eventTarget:k,type:G,curEventTarget:E,interaction:this}),this.simulation||this.end(m),this.removePointer(d,m)}},{key:"documentBlur",value:function(d){this.end(d),this._scopeFire("interactions:blur",{event:d,type:"blur",interaction:this})}},{key:"end",value:function(d){var m;this._ending=!0,d=d||this._latestPointer.event,this.interacting()&&(m=this._doPhase({event:d,interaction:this,phase:"end"})),this._ending=!1,m===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(d){var m=xt(d);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Ar(this.pointers,function(k){return k.id===m})}},{key:"getPointerInfo",value:function(d){return this.pointers[this.getPointerIndex(d)]}},{key:"updatePointer",value:function(d,m,k,E){var O,G,Z,le=xt(d),ke=this.getPointerIndex(d),pe=this.pointers[ke];return E=E!==!1&&(E||/(down|start)$/i.test(m.type)),pe?pe.pointer=d:(pe=new Uh(le,d,m,null,null),ke=this.pointers.length,this.pointers.push(pe)),Ot(this.coords.cur,this.pointers.map(function(Re){return Re.pointer}),this._now()),O=this.coords.delta,G=this.coords.prev,Z=this.coords.cur,O.page.x=Z.page.x-G.page.x,O.page.y=Z.page.y-G.page.y,O.client.x=Z.client.x-G.client.x,O.client.y=Z.client.y-G.client.y,O.timeStamp=Z.timeStamp-G.timeStamp,E&&(this.pointerIsDown=!0,pe.downTime=this.coords.cur.timeStamp,pe.downTarget=k,Ye(this.downPointer,d),this.interacting()||(Se(this.coords.start,this.coords.cur),Se(this.coords.prev,this.coords.cur),this.downEvent=m,this.pointerWasMoved=!1)),this._updateLatestPointer(d,m,k),this._scopeFire("interactions:update-pointer",{pointer:d,event:m,eventTarget:k,down:E,pointerInfo:pe,pointerIndex:ke,interaction:this}),ke}},{key:"removePointer",value:function(d,m){var k=this.getPointerIndex(d);if(k!==-1){var E=this.pointers[k];this._scopeFire("interactions:remove-pointer",{pointer:d,event:m,eventTarget:null,pointerIndex:k,pointerInfo:E,interaction:this}),this.pointers.splice(k,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(d,m,k){this._latestPointer.pointer=d,this._latestPointer.event=m,this._latestPointer.eventTarget=k}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(d,m,k,E){return new kn(this,d,this.prepared.name,m,this.element,k,E)}},{key:"_fireEvent",value:function(d){var m;(m=this.interactable)==null||m.fire(d),(!this.prevEvent||d.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=d)}},{key:"_doPhase",value:function(d){var m=d.event,k=d.phase,E=d.preEnd,O=d.type,G=this.rect;if(G&&k==="move"&&(ge(this.edges,G,this.coords.delta[this.interactable.options.deltaSource]),G.width=G.right-G.left,G.height=G.bottom-G.top),this._scopeFire("interactions:before-action-".concat(k),d)===!1)return!1;var Z=d.iEvent=this._createPreparedEvent(m,k,E,O);return this._scopeFire("interactions:action-".concat(k),d),k==="start"&&(this.prevEvent=Z),this._fireEvent(Z),this._scopeFire("interactions:after-action-".concat(k),d),!0}},{key:"_now",value:function(){return Date.now()}}]),p}();function Lu(p){Uu(p.interaction)}function Uu(p){if(!function(m){return!(!m.offset.pending.x&&!m.offset.pending.y)}(p))return!1;var d=p.offset.pending;return ql(p.coords.cur,d),ql(p.coords.delta,d),ge(p.edges,p.rect,d),d.x=0,d.y=0,!0}function jh(p){var d=p.x,m=p.y;this.offset.pending.x+=d,this.offset.pending.y+=m,this.offset.total.x+=d,this.offset.total.y+=m}function ql(p,d){var m=p.page,k=p.client,E=d.x,O=d.y;m.x+=E,m.y+=O,k.x+=E,k.y+=O}Ou.offsetBy="";var Nh={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(p){p.Interaction.prototype.offsetBy=jh},listeners:{"interactions:new":function(p){p.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(p){return function(d){d.pointerIsDown&&(ql(d.coords.cur,d.offset.total),d.offset.pending.x=0,d.offset.pending.y=0)}(p.interaction)},"interactions:before-action-start":Lu,"interactions:before-action-move":Lu,"interactions:before-action-end":function(p){var d=p.interaction;if(Uu(d))return d.move({offset:!0}),d.end(),!1},"interactions:stop":function(p){var d=p.interaction;d.offset.total.x=0,d.offset.total.y=0,d.offset.pending.x=0,d.offset.pending.y=0}}},Bu=Nh,Ph=function(){function p(d){a(this,p),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=d}return s(p,[{key:"start",value:function(d){var m=this.interaction,k=xn(m);if(!k||!k.enabled)return!1;var E=m.coords.velocity.client,O=Oe(E.x,E.y),G=this.modification||(this.modification=new Zl(m));if(G.copyFrom(m.modification),this.t0=m._now(),this.allowResume=k.allowResume,this.v0=O,this.currentOffset={x:0,y:0},this.startCoords=m.coords.cur.page,this.modifierArg=G.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-m.coords.cur.timeStamp<50&&O>k.minSpeed&&O>k.endSpeed)this.startInertia();else{if(G.result=G.setAll(this.modifierArg),!G.result.changed)return!1;this.startSmoothEnd()}return m.modification.result.rect=null,m.offsetBy(this.targetOffset),m._doPhase({interaction:m,event:d,phase:"inertiastart"}),m.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),m.modification.result.rect=null,this.active=!0,m.simulation=this,!0}},{key:"startInertia",value:function(){var d=this,m=this.interaction.coords.velocity.client,k=xn(this.interaction),E=k.resistance,O=-Math.log(k.endSpeed/this.v0)/E;this.targetOffset={x:(m.x-O)/E,y:(m.y-O)/E},this.te=O,this.lambda_v0=E/this.v0,this.one_ve_v0=1-k.endSpeed/this.v0;var G=this.modification,Z=this.modifierArg;Z.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},G.result=G.setAll(Z),G.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+G.result.delta.x,y:this.targetOffset.y+G.result.delta.y}),this.onNextFrame(function(){return d.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var d=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return d.smoothEndTick()})}},{key:"onNextFrame",value:function(d){var m=this;this.timeout=Zo.request(function(){m.active&&d()})}},{key:"inertiaTick",value:function(){var d,m,k,E,O,G,Z,le=this,ke=this.interaction,pe=xn(ke).resistance,Re=(ke._now()-this.t0)/1e3;if(Re<this.te){var Ge,qe=1-(Math.exp(-pe*Re)-this.lambda_v0)/this.one_ve_v0;this.isModified?(d=0,m=0,k=this.targetOffset.x,E=this.targetOffset.y,O=this.modifiedOffset.x,G=this.modifiedOffset.y,Ge={x:_l(Z=qe,d,k,O),y:_l(Z,m,E,G)}):Ge={x:this.targetOffset.x*qe,y:this.targetOffset.y*qe};var Xe={x:Ge.x-this.currentOffset.x,y:Ge.y-this.currentOffset.y};this.currentOffset.x+=Xe.x,this.currentOffset.y+=Xe.y,ke.offsetBy(Xe),ke.move(),this.onNextFrame(function(){return le.inertiaTick()})}else ke.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var d=this,m=this.interaction,k=m._now()-this.t0,E=xn(m).smoothEndDuration;if(k<E){var O={x:ju(k,0,this.targetOffset.x,E),y:ju(k,0,this.targetOffset.y,E)},G={x:O.x-this.currentOffset.x,y:O.y-this.currentOffset.y};this.currentOffset.x+=G.x,this.currentOffset.y+=G.y,m.offsetBy(G),m.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return d.smoothEndTick()})}else m.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(d){var m=d.pointer,k=d.event,E=d.eventTarget,O=this.interaction;O.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),O.updatePointer(m,k,E,!0),O._doPhase({interaction:O,event:k,phase:"resume"}),Se(O.coords.prev,O.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Zo.cancel(this.timeout)}}]),p}();function xn(p){var d=p.interactable,m=p.prepared;return d&&d.options&&m.name&&d.options[m.name].inertia}var Vr={id:"inertia",before:["modifiers","actions"],install:function(p){var d=p.defaults;p.usePlugin(Bu),p.usePlugin(Xl),p.actions.phases.inertiastart=!0,p.actions.phases.resume=!0,d.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(p){var d=p.interaction;d.inertia=new Ph(d)},"interactions:before-action-end":function(p){var d=p.interaction,m=p.event;return(!d._interacting||d.simulation||!d.inertia.start(m))&&null},"interactions:down":function(p){var d=p.interaction,m=p.eventTarget,k=d.inertia;if(k.active)for(var E=m;S.element(E);){if(E===d.element){k.resume(p);break}E=te(E)}},"interactions:stop":function(p){var d=p.interaction.inertia;d.active&&d.stop()},"interactions:before-action-resume":function(p){var d=p.interaction.modification;d.stop(p),d.start(p,p.interaction.coords.cur.page),d.applyToInteraction(p)},"interactions:before-action-inertiastart":function(p){return p.interaction.modification.setAndApply(p)},"interactions:action-resume":yn,"interactions:action-inertiastart":yn,"interactions:after-action-inertiastart":function(p){return p.interaction.modification.restoreInteractionCoords(p)},"interactions:after-action-resume":function(p){return p.interaction.modification.restoreInteractionCoords(p)}}};function _l(p,d,m,k){var E=1-p;return E*E*d+2*E*p*m+p*p*k}function ju(p,d,m,k){return-m*(p/=k)*(p-2)+d}var Vh=Vr;function Nu(p,d){for(var m=0;m<d.length;m++){var k=d[m];if(p.immediatePropagationStopped)break;k(p)}}var ur=function(){function p(d){a(this,p),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=ce({},d||{})}return s(p,[{key:"fire",value:function(d){var m,k=this.global;(m=this.types[d.type])&&Nu(d,m),!d.propagationStopped&&k&&(m=k[d.type])&&Nu(d,m)}},{key:"on",value:function(d,m){var k=xe(d,m);for(d in k)this.types[d]=Eo(this.types[d]||[],k[d])}},{key:"off",value:function(d,m){var k=xe(d,m);for(d in k){var E=this.types[d];if(E&&E.length)for(var O=0,G=k[d];O<G.length;O++){var Z=G[O],le=E.indexOf(Z);le!==-1&&E.splice(le,1)}}}},{key:"getRect",value:function(d){return null}}]),p}(),Gh=function(){function p(d){a(this,p),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=d,Ye(this,d)}return s(p,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),p}();function wn(p){return S.object(p)?{capture:!!p.capture,passive:!!p.passive}:{capture:!!p,passive:!1}}function fs(p,d){return p===d||(typeof p=="boolean"?!!d.capture===p&&!d.passive:!!p.capture==!!d.capture&&!!p.passive==!!d.passive)}var ms={id:"events",install:function(p){var d,m=[],k={},E=[],O={add:G,remove:Z,addDelegate:function(pe,Re,Ge,qe,Xe){var ot=wn(Xe);if(!k[Ge]){k[Ge]=[];for(var yt=0;yt<E.length;yt++){var mt=E[yt];G(mt,Ge,le),G(mt,Ge,ke,!0)}}var It=k[Ge],jt=sr(It,function(Wt){return Wt.selector===pe&&Wt.context===Re});jt||(jt={selector:pe,context:Re,listeners:[]},It.push(jt)),jt.listeners.push({func:qe,options:ot})},removeDelegate:function(pe,Re,Ge,qe,Xe){var ot,yt=wn(Xe),mt=k[Ge],It=!1;if(mt)for(ot=mt.length-1;ot>=0;ot--){var jt=mt[ot];if(jt.selector===pe&&jt.context===Re){for(var Wt=jt.listeners,Lt=Wt.length-1;Lt>=0;Lt--){var Vt=Wt[Lt];if(Vt.func===qe&&fs(Vt.options,yt)){Wt.splice(Lt,1),Wt.length||(mt.splice(ot,1),Z(Re,Ge,le),Z(Re,Ge,ke,!0)),It=!0;break}}if(It)break}}},delegateListener:le,delegateUseCapture:ke,delegatedEvents:k,documents:E,targets:m,supportsOptions:!1,supportsPassive:!1};function G(pe,Re,Ge,qe){if(pe.addEventListener){var Xe=wn(qe),ot=sr(m,function(yt){return yt.eventTarget===pe});ot||(ot={eventTarget:pe,events:{}},m.push(ot)),ot.events[Re]||(ot.events[Re]=[]),sr(ot.events[Re],function(yt){return yt.func===Ge&&fs(yt.options,Xe)})||(pe.addEventListener(Re,Ge,O.supportsOptions?Xe:Xe.capture),ot.events[Re].push({func:Ge,options:Xe}))}}function Z(pe,Re,Ge,qe){if(pe.addEventListener&&pe.removeEventListener){var Xe=Ar(m,function($o){return $o.eventTarget===pe}),ot=m[Xe];if(ot&&ot.events)if(Re!=="all"){var yt=!1,mt=ot.events[Re];if(mt){if(Ge==="all"){for(var It=mt.length-1;It>=0;It--){var jt=mt[It];Z(pe,Re,jt.func,jt.options)}return}for(var Wt=wn(qe),Lt=0;Lt<mt.length;Lt++){var Vt=mt[Lt];if(Vt.func===Ge&&fs(Vt.options,Wt)){pe.removeEventListener(Re,Ge,O.supportsOptions?Wt:Wt.capture),mt.splice(Lt,1),mt.length===0&&(delete ot.events[Re],yt=!0);break}}}yt&&!Object.keys(ot.events).length&&m.splice(Xe,1)}else for(Re in ot.events)ot.events.hasOwnProperty(Re)&&Z(pe,Re,"all")}}function le(pe,Re){for(var Ge=wn(Re),qe=new Gh(pe),Xe=k[pe.type],ot=kr(pe)[0],yt=ot;S.element(yt);){for(var mt=0;mt<Xe.length;mt++){var It=Xe[mt],jt=It.selector,Wt=It.context;if(he(yt,jt)&&J(Wt,ot)&&J(Wt,yt)){var Lt=It.listeners;qe.currentTarget=yt;for(var Vt=0;Vt<Lt.length;Vt++){var $o=Lt[Vt];fs($o.options,Ge)&&$o.func(qe)}}}yt=te(yt)}}function ke(pe){return le(pe,!0)}return(d=p.document)==null||d.createElement("div").addEventListener("test",null,{get capture(){return O.supportsOptions=!0},get passive(){return O.supportsPassive=!0}}),p.events=O,O}},vs={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(p){for(var d=0,m=vs.methodOrder;d<m.length;d++){var k=m[d],E=vs[k](p);if(E)return E}return null},simulationResume:function(p){var d=p.pointerType,m=p.eventType,k=p.eventTarget,E=p.scope;if(!/down|start/i.test(m))return null;for(var O=0,G=E.interactions.list;O<G.length;O++){var Z=G[O],le=k;if(Z.simulation&&Z.simulation.allowResume&&Z.pointerType===d)for(;le;){if(le===Z.element)return Z;le=te(le)}}return null},mouseOrPen:function(p){var d,m=p.pointerId,k=p.pointerType,E=p.eventType,O=p.scope;if(k!=="mouse"&&k!=="pen")return null;for(var G=0,Z=O.interactions.list;G<Z.length;G++){var le=Z[G];if(le.pointerType===k){if(le.simulation&&!Pu(le,m))continue;if(le.interacting())return le;d||(d=le)}}if(d)return d;for(var ke=0,pe=O.interactions.list;ke<pe.length;ke++){var Re=pe[ke];if(!(Re.pointerType!==k||/down/i.test(E)&&Re.simulation))return Re}return null},hasPointer:function(p){for(var d=p.pointerId,m=0,k=p.scope.interactions.list;m<k.length;m++){var E=k[m];if(Pu(E,d))return E}return null},idle:function(p){for(var d=p.pointerType,m=0,k=p.scope.interactions.list;m<k.length;m++){var E=k[m];if(E.pointers.length===1){var O=E.interactable;if(O&&(!O.options.gesture||!O.options.gesture.enabled))continue}else if(E.pointers.length>=2)continue;if(!E.interacting()&&d===E.pointerType)return E}return null}};function Pu(p,d){return p.pointers.some(function(m){return m.id===d})}var $l=vs,ec=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function bs(p,d){return function(m){var k=d.interactions.list,E=oo(m),O=kr(m),G=O[0],Z=O[1],le=[];if(/^touch/.test(m.type)){d.prevTouchTime=d.now();for(var ke=0,pe=m.changedTouches;ke<pe.length;ke++){var Re=pe[ke],Ge={pointer:Re,pointerId:xt(Re),pointerType:E,eventType:m.type,eventTarget:G,curEventTarget:Z,scope:d},qe=ys(Ge);le.push([Ge.pointer,Ge.eventTarget,Ge.curEventTarget,qe])}}else{var Xe=!1;if(!H.supportsPointerEvent&&/mouse/.test(m.type)){for(var ot=0;ot<k.length&&!Xe;ot++)Xe=k[ot].pointerType!=="mouse"&&k[ot].pointerIsDown;Xe=Xe||d.now()-d.prevTouchTime<500||m.timeStamp===0}if(!Xe){var yt={pointer:m,pointerId:xt(m),pointerType:E,eventType:m.type,curEventTarget:Z,eventTarget:G,scope:d},mt=ys(yt);le.push([yt.pointer,yt.eventTarget,yt.curEventTarget,mt])}}for(var It=0;It<le.length;It++){var jt=le[It],Wt=jt[0],Lt=jt[1],Vt=jt[2];jt[3][p](Wt,m,Lt,Vt)}}}function ys(p){var d=p.pointerType,m=p.scope,k={interaction:$l.search(p),searchDetails:p};return m.fire("interactions:find",k),k.interaction||m.interactions.new({pointerType:d})}function Cn(p,d){var m=p.doc,k=p.scope,E=p.options,O=k.interactions.docEvents,G=k.events,Z=G[d];for(var le in k.browser.isIOS&&!E.events&&(E.events={passive:!1}),G.delegatedEvents)Z(m,le,G.delegateListener),Z(m,le,G.delegateUseCapture,!0);for(var ke=E&&E.events,pe=0;pe<O.length;pe++){var Re=O[pe];Z(m,Re.type,Re.listener,ke)}}var Hh={id:"core/interactions",install:function(p){for(var d={},m=0;m<ec.length;m++){var k=ec[m];d[k]=bs(k,p)}var E,O=H.pEventTypes;function G(){for(var Z=0,le=p.interactions.list;Z<le.length;Z++){var ke=le[Z];if(ke.pointerIsDown&&ke.pointerType==="touch"&&!ke._interacting)for(var pe=function(){var qe=Ge[Re];p.documents.some(function(Xe){return J(Xe.doc,qe.downTarget)})||ke.removePointer(qe.pointer,qe.event)},Re=0,Ge=ke.pointers;Re<Ge.length;Re++)pe()}}(E=W.PointerEvent?[{type:O.down,listener:G},{type:O.down,listener:d.pointerDown},{type:O.move,listener:d.pointerMove},{type:O.up,listener:d.pointerUp},{type:O.cancel,listener:d.pointerUp}]:[{type:"mousedown",listener:d.pointerDown},{type:"mousemove",listener:d.pointerMove},{type:"mouseup",listener:d.pointerUp},{type:"touchstart",listener:G},{type:"touchstart",listener:d.pointerDown},{type:"touchmove",listener:d.pointerMove},{type:"touchend",listener:d.pointerUp},{type:"touchcancel",listener:d.pointerUp}]).push({type:"blur",listener:function(Z){for(var le=0,ke=p.interactions.list;le<ke.length;le++)ke[le].documentBlur(Z)}}),p.prevTouchTime=0,p.Interaction=function(Z){u(ke,Z);var le=y(ke);function ke(){return a(this,ke),le.apply(this,arguments)}return s(ke,[{key:"pointerMoveTolerance",get:function(){return p.interactions.pointerMoveTolerance},set:function(pe){p.interactions.pointerMoveTolerance=pe}},{key:"_now",value:function(){return p.now()}}]),ke}(Bh),p.interactions={list:[],new:function(Z){Z.scopeFire=function(ke,pe){return p.fire(ke,pe)};var le=new p.Interaction(Z);return p.interactions.list.push(le),le},listeners:d,docEvents:E,pointerMoveTolerance:1},p.usePlugin(Kl)},listeners:{"scope:add-document":function(p){return Cn(p,"add")},"scope:remove-document":function(p){return Cn(p,"remove")},"interactable:unset":function(p,d){for(var m=p.interactable,k=d.interactions.list.length-1;k>=0;k--){var E=d.interactions.list[k];E.interactable===m&&(E.stop(),d.fire("interactions:destroy",{interaction:E}),E.destroy(),d.interactions.list.length>2&&d.interactions.list.splice(k,1))}}},onDocSignal:Cn,doOnInteractions:bs,methodNames:ec},zh=Hh,Tr=function(p){return p[p.On=0]="On",p[p.Off=1]="Off",p}(Tr||{}),tc=function(){function p(d,m,k,E){a(this,p),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new ur,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=m.actions,this.target=d,this._context=m.context||k,this._win=U(we(d)?this._context:d),this._doc=this._win.document,this._scopeEvents=E,this.set(m)}return s(p,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(d,m){return S.func(m.onstart)&&this.on("".concat(d,"start"),m.onstart),S.func(m.onmove)&&this.on("".concat(d,"move"),m.onmove),S.func(m.onend)&&this.on("".concat(d,"end"),m.onend),S.func(m.oninertiastart)&&this.on("".concat(d,"inertiastart"),m.oninertiastart),this}},{key:"updatePerActionListeners",value:function(d,m,k){var E,O=this,G=(E=this._actions.map[d])==null?void 0:E.filterEventType,Z=function(le){return(G==null||G(le))&&ps(le,O._actions)};(S.array(m)||S.object(m))&&this._onOff(Tr.Off,d,m,void 0,Z),(S.array(k)||S.object(k))&&this._onOff(Tr.On,d,k,void 0,Z)}},{key:"setPerAction",value:function(d,m){var k=this._defaults;for(var E in m){var O=E,G=this.options[d],Z=m[O];O==="listeners"&&this.updatePerActionListeners(d,G.listeners,Z),S.array(Z)?G[O]=Oo(Z):S.plainObject(Z)?(G[O]=ce(G[O]||{},Ra(Z)),S.object(k.perAction[O])&&"enabled"in k.perAction[O]&&(G[O].enabled=Z.enabled!==!1)):S.bool(Z)&&S.object(k.perAction[O])?G[O].enabled=Z:G[O]=Z}}},{key:"getRect",value:function(d){return d=d||(S.element(this.target)?this.target:null),S.string(this.target)&&(d=d||this._context.querySelector(this.target)),_(d)}},{key:"rectChecker",value:function(d){var m=this;return S.func(d)?(this.getRect=function(k){var E=ce({},d.apply(m,k));return"width"in E||(E.width=E.right-E.left,E.height=E.bottom-E.top),E},this):d===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(d,m){if(we(m)||S.object(m)){for(var k in this.options[d]=m,this._actions.map)this.options[k][d]=m;return this}return this.options[d]}},{key:"origin",value:function(d){return this._backCompatOption("origin",d)}},{key:"deltaSource",value:function(d){return d==="page"||d==="client"?(this.options.deltaSource=d,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var d=this.target;return S.string(d)?Array.from(this._context.querySelectorAll(d)):S.func(d)&&d.getAllElements?d.getAllElements():S.element(d)?[d]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(d){return this._context===d.ownerDocument||J(this._context,d)}},{key:"testIgnoreAllow",value:function(d,m,k){return!this.testIgnore(d.ignoreFrom,m,k)&&this.testAllow(d.allowFrom,m,k)}},{key:"testAllow",value:function(d,m,k){return!d||!!S.element(k)&&(S.string(d)?K(k,d,m):!!S.element(d)&&J(d,k))}},{key:"testIgnore",value:function(d,m,k){return!(!d||!S.element(k))&&(S.string(d)?K(k,d,m):!!S.element(d)&&J(d,k))}},{key:"fire",value:function(d){return this.events.fire(d),this}},{key:"_onOff",value:function(d,m,k,E,O){S.object(m)&&!S.array(m)&&(E=k,k=null);var G=xe(m,k,O);for(var Z in G){Z==="wheel"&&(Z=H.wheelEvent);for(var le=0,ke=G[Z];le<ke.length;le++){var pe=ke[le];ps(Z,this._actions)?this.events[d===Tr.On?"on":"off"](Z,pe):S.string(this.target)?this._scopeEvents[d===Tr.On?"addDelegate":"removeDelegate"](this.target,this._context,Z,pe,E):this._scopeEvents[d===Tr.On?"add":"remove"](this.target,Z,pe,E)}}return this}},{key:"on",value:function(d,m,k){return this._onOff(Tr.On,d,m,k)}},{key:"off",value:function(d,m,k){return this._onOff(Tr.Off,d,m,k)}},{key:"set",value:function(d){var m=this._defaults;for(var k in S.object(d)||(d={}),this.options=Ra(m.base),this._actions.methodDict){var E=k,O=this._actions.methodDict[E];this.options[E]={},this.setPerAction(E,ce(ce({},m.perAction),m.actions[E])),this[O](d[E])}for(var G in d)G!=="getRect"?S.func(this[G])&&this[G](d[G]):this.rectChecker(d.getRect);return this}},{key:"unset",value:function(){if(S.string(this.target))for(var d in this._scopeEvents.delegatedEvents)for(var m=this._scopeEvents.delegatedEvents[d],k=m.length-1;k>=0;k--){var E=m[k],O=E.selector,G=E.context,Z=E.listeners;O===this.target&&G===this._context&&m.splice(k,1);for(var le=Z.length-1;le>=0;le--)this._scopeEvents.removeDelegate(this.target,this._context,d,Z[le][0],Z[le][1])}else this._scopeEvents.remove(this.target,"all")}}]),p}(),oc=function(){function p(d){var m=this;a(this,p),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=d,d.addListeners({"interactable:unset":function(k){var E=k.interactable,O=E.target,G=S.string(O)?m.selectorMap[O]:O[m.scope.id],Z=Ar(G,function(le){return le===E});G.splice(Z,1)}})}return s(p,[{key:"new",value:function(d,m){m=ce(m||{},{actions:this.scope.actions});var k=new this.scope.Interactable(d,m,this.scope.document,this.scope.events);return this.scope.addDocument(k._doc),this.list.push(k),S.string(d)?(this.selectorMap[d]||(this.selectorMap[d]=[]),this.selectorMap[d].push(k)):(k.target[this.scope.id]||Object.defineProperty(d,this.scope.id,{value:[],configurable:!0}),d[this.scope.id].push(k)),this.scope.fire("interactable:new",{target:d,options:m,interactable:k,win:this.scope._win}),k}},{key:"getExisting",value:function(d,m){var k=m&&m.context||this.scope.document,E=S.string(d),O=E?this.selectorMap[d]:d[this.scope.id];if(O)return sr(O,function(G){return G._context===k&&(E||G.inContext(d))})}},{key:"forEachMatch",value:function(d,m){for(var k=0,E=this.list;k<E.length;k++){var O=E[k],G=void 0;if((S.string(O.target)?S.element(d)&&he(d,O.target):d===O.target)&&O.inContext(d)&&(G=m(O)),G!==void 0)return G}}}]),p}(),Yh=function(){function p(){var d=this;a(this,p),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=H,this.defaults=Ra(Wl),this.Eventable=ur,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(k){var E=function O(G,Z){var le=k.interactables.getExisting(G,Z);return le||((le=k.interactables.new(G,Z)).events.global=O.globalEvents),le};return E.getPointerAverage=Ht,E.getTouchBBox=wo,E.getTouchDistance=po,E.getTouchAngle=to,E.getElementRect=_,E.getElementClientRect=be,E.matchesSelector=he,E.closest=$,E.globalEvents={},E.version="1.10.27",E.scope=k,E.use=function(O,G){return this.scope.usePlugin(O,G),this},E.isSet=function(O,G){return!!this.scope.interactables.get(O,G&&G.context)},E.on=Ri(function(O,G,Z){if(S.string(O)&&O.search(" ")!==-1&&(O=O.trim().split(/ +/)),S.array(O)){for(var le=0,ke=O;le<ke.length;le++){var pe=ke[le];this.on(pe,G,Z)}return this}if(S.object(O)){for(var Re in O)this.on(Re,O[Re],G);return this}return ps(O,this.scope.actions)?this.globalEvents[O]?this.globalEvents[O].push(G):this.globalEvents[O]=[G]:this.scope.events.add(this.scope.document,O,G,{options:Z}),this},"The interact.on() method is being deprecated"),E.off=Ri(function(O,G,Z){if(S.string(O)&&O.search(" ")!==-1&&(O=O.trim().split(/ +/)),S.array(O)){for(var le=0,ke=O;le<ke.length;le++){var pe=ke[le];this.off(pe,G,Z)}return this}if(S.object(O)){for(var Re in O)this.off(Re,O[Re],G);return this}var Ge;return ps(O,this.scope.actions)?O in this.globalEvents&&(Ge=this.globalEvents[O].indexOf(G))!==-1&&this.globalEvents[O].splice(Ge,1):this.scope.events.remove(this.scope.document,O,G,Z),this},"The interact.off() method is being deprecated"),E.debug=function(){return this.scope},E.supportsTouch=function(){return H.supportsTouch},E.supportsPointerEvent=function(){return H.supportsPointerEvent},E.stop=function(){for(var O=0,G=this.scope.interactions.list;O<G.length;O++)G[O].stop();return this},E.pointerMoveTolerance=function(O){return S.number(O)?(this.scope.interactions.pointerMoveTolerance=O,this):this.scope.interactions.pointerMoveTolerance},E.addDocument=function(O,G){this.scope.addDocument(O,G)},E.removeDocument=function(O){this.scope.removeDocument(O)},E}(this),this.InteractEvent=kn,this.Interactable=void 0,this.interactables=new oc(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(k){return d.removeDocument(k.target)};var m=this;this.Interactable=function(k){u(O,k);var E=y(O);function O(){return a(this,O),E.apply(this,arguments)}return s(O,[{key:"_defaults",get:function(){return m.defaults}},{key:"set",value:function(G){return w(f(O.prototype),"set",this).call(this,G),m.fire("interactable:set",{options:G,interactable:this}),this}},{key:"unset",value:function(){w(f(O.prototype),"unset",this).call(this);var G=m.interactables.list.indexOf(this);G<0||(m.interactables.list.splice(G,1),m.fire("interactable:unset",{interactable:this}))}}]),O}(tc)}return s(p,[{key:"addListeners",value:function(d,m){this.listenerMaps.push({id:m,map:d})}},{key:"fire",value:function(d,m){for(var k=0,E=this.listenerMaps;k<E.length;k++){var O=E[k].map[d];if(O&&O(m,this,d)===!1)return!1}}},{key:"init",value:function(d){return this.isInitialized?this:function(m,k){return m.isInitialized=!0,S.window(k)&&M(k),W.init(k),H.init(k),Zo.init(k),m.window=k,m.document=k.document,m.usePlugin(zh),m.usePlugin(ms),m}(this,d)}},{key:"pluginIsInstalled",value:function(d){var m=d.id;return m?!!this._plugins.map[m]:this._plugins.list.indexOf(d)!==-1}},{key:"usePlugin",value:function(d,m){if(!this.isInitialized)return this;if(this.pluginIsInstalled(d))return this;if(d.id&&(this._plugins.map[d.id]=d),this._plugins.list.push(d),d.install&&d.install(this,m),d.listeners&&d.before){for(var k=0,E=this.listenerMaps.length,O=d.before.reduce(function(Z,le){return Z[le]=!0,Z[rc(le)]=!0,Z},{});k<E;k++){var G=this.listenerMaps[k].id;if(G&&(O[G]||O[rc(G)]))break}this.listenerMaps.splice(k,0,{id:d.id,map:d.listeners})}else d.listeners&&this.listenerMaps.push({id:d.id,map:d.listeners});return this}},{key:"addDocument",value:function(d,m){if(this.getDocIndex(d)!==-1)return!1;var k=U(d);m=m?ce({},m):{},this.documents.push({doc:d,options:m}),this.events.documents.push(d),d!==this.document&&this.events.add(k,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:d,window:k,scope:this,options:m})}},{key:"removeDocument",value:function(d){var m=this.getDocIndex(d),k=U(d),E=this.documents[m].options;this.events.remove(k,"unload",this.onWindowUnload),this.documents.splice(m,1),this.events.documents.splice(m,1),this.fire("scope:remove-document",{doc:d,window:k,scope:this,options:E})}},{key:"getDocIndex",value:function(d){for(var m=0;m<this.documents.length;m++)if(this.documents[m].doc===d)return m;return-1}},{key:"getDocOptions",value:function(d){var m=this.getDocIndex(d);return m===-1?null:this.documents[m].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),p}();function rc(p){return p&&p.replace(/\/.*$/,"")}var Vu=new Yh,Wo=Vu.interactStatic,ks=typeof globalThis<"u"?globalThis:window;Vu.init(ks);var Qh=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(p){var d=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(k){var E=k[0],O=k[1];return E in p||O in p}),m=function(k,E){for(var O=p.range,G=p.limits,Z=G===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:G,le=p.offset,ke=le===void 0?{x:0,y:0}:le,pe={range:O,grid:p,x:null,y:null},Re=0;Re<d.length;Re++){var Ge=d[Re],qe=Ge[0],Xe=Ge[1],ot=Math.round((k-ke.x)/p[qe]),yt=Math.round((E-ke.y)/p[Xe]);pe[qe]=Math.max(Z.left,Math.min(Z.right,ot*p[qe]+ke.x)),pe[Xe]=Math.max(Z.top,Math.min(Z.bottom,yt*p[Xe]+ke.y))}return pe};return m.grid=p,m.coordFields=d,m}}),Jh={id:"snappers",install:function(p){var d=p.interactStatic;d.snappers=ce(d.snappers||{},Qh),d.createSnapGrid=d.snappers.grid}},ic=Jh,Kh={start:function(p){var d=p.state,m=p.rect,k=p.edges,E=p.pageCoords,O=d.options,G=O.ratio,Z=O.enabled,le=d.options,ke=le.equalDelta,pe=le.modifiers;G==="preserve"&&(G=m.width/m.height),d.startCoords=ce({},E),d.startRect=ce({},m),d.ratio=G,d.equalDelta=ke;var Re=d.linkedEdges={top:k.top||k.left&&!k.bottom,left:k.left||k.top&&!k.right,bottom:k.bottom||k.right&&!k.top,right:k.right||k.bottom&&!k.left};if(d.xIsPrimaryAxis=!(!k.left&&!k.right),d.equalDelta){var Ge=(Re.left?1:-1)*(Re.top?1:-1);d.edgeSign={x:Ge,y:Ge}}else d.edgeSign={x:Re.left?-1:1,y:Re.top?-1:1};if(Z!==!1&&ce(k,Re),pe!=null&&pe.length){var qe=new Zl(p.interaction);qe.copyFrom(p.interaction.modification),qe.prepareStates(pe),d.subModification=qe,qe.startAll(r({},p))}},set:function(p){var d=p.state,m=p.rect,k=p.coords,E=d.linkedEdges,O=ce({},k),G=d.equalDelta?xs:Sn;if(ce(p.edges,E),G(d,d.xIsPrimaryAxis,k,m),!d.subModification)return null;var Z=ce({},m);ge(E,Z,{x:k.x-O.x,y:k.y-O.y});var le=d.subModification.setAll(r(r({},p),{},{rect:Z,edges:E,pageCoords:k,prevCoords:k,prevRect:Z})),ke=le.delta;return le.changed&&(G(d,Math.abs(ke.x)>Math.abs(ke.y),le.coords,le.rect),ce(k,le.coords)),le.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function xs(p,d,m){var k=p.startCoords,E=p.edgeSign;d?m.y=k.y+(m.x-k.x)*E.y:m.x=k.x+(m.y-k.y)*E.x}function Sn(p,d,m,k){var E=p.startRect,O=p.startCoords,G=p.ratio,Z=p.edgeSign;if(d){var le=k.width/G;m.y=O.y+(le-E.height)*Z.y}else{var ke=k.height*G;m.x=O.x+(ke-E.width)*Z.x}}var ws=bi(Kh,"aspectRatio"),Cs=function(){};Cs._defaults={};var Ss=Cs;function Oi(p,d,m){return S.func(p)?He(p,d.interactable,d.element,[m.x,m.y,d]):He(p,d.interactable,d.element)}var Is={start:function(p){var d=p.rect,m=p.startOffset,k=p.state,E=p.interaction,O=p.pageCoords,G=k.options,Z=G.elementRect,le=ce({left:0,top:0,right:0,bottom:0},G.offset||{});if(d&&Z){var ke=Oi(G.restriction,E,O);if(ke){var pe=ke.right-ke.left-d.width,Re=ke.bottom-ke.top-d.height;pe<0&&(le.left+=pe,le.right+=pe),Re<0&&(le.top+=Re,le.bottom+=Re)}le.left+=m.left-d.width*Z.left,le.top+=m.top-d.height*Z.top,le.right+=m.right-d.width*(1-Z.right),le.bottom+=m.bottom-d.height*(1-Z.bottom)}k.offset=le},set:function(p){var d=p.coords,m=p.interaction,k=p.state,E=k.options,O=k.offset,G=Oi(E.restriction,m,d);if(G){var Z=function(le){return!le||"left"in le&&"top"in le||((le=ce({},le)).left=le.x||0,le.top=le.y||0,le.right=le.right||le.left+le.width,le.bottom=le.bottom||le.top+le.height),le}(G);d.x=Math.max(Math.min(Z.right-O.right,d.x),Z.left+O.left),d.y=Math.max(Math.min(Z.bottom-O.bottom,d.y),Z.top+O.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Zh=bi(Is,"restrict"),ac={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Es={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function In(p,d){for(var m=0,k=["top","left","bottom","right"];m<k.length;m++){var E=k[m];E in p||(p[E]=d[E])}return p}var En={noInner:ac,noOuter:Es,start:function(p){var d,m=p.interaction,k=p.startOffset,E=p.state,O=E.options;O&&(d=ft(Oi(O.offset,m,m.coords.start.page))),d=d||{x:0,y:0},E.offset={top:d.y+k.top,left:d.x+k.left,bottom:d.y-k.bottom,right:d.x-k.right}},set:function(p){var d=p.coords,m=p.edges,k=p.interaction,E=p.state,O=E.offset,G=E.options;if(m){var Z=ce({},d),le=Oi(G.inner,k,Z)||{},ke=Oi(G.outer,k,Z)||{};In(le,ac),In(ke,Es),m.top?d.y=Math.min(Math.max(ke.top+O.top,Z.y),le.top+O.top):m.bottom&&(d.y=Math.max(Math.min(ke.bottom+O.bottom,Z.y),le.bottom+O.bottom)),m.left?d.x=Math.min(Math.max(ke.left+O.left,Z.x),le.left+O.left):m.right&&(d.x=Math.max(Math.min(ke.right+O.right,Z.x),le.right+O.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Gu=bi(En,"restrictEdges"),Xh=ce({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(p){}},Is.defaults),Wh=bi({start:Is.start,set:Is.set,defaults:Xh},"restrictRect"),nc={width:-1/0,height:-1/0},sc={width:1/0,height:1/0},qh=bi({start:function(p){return En.start(p)},set:function(p){var d=p.interaction,m=p.state,k=p.rect,E=p.edges,O=m.options;if(E){var G=ae(Oi(O.min,d,p.coords))||nc,Z=ae(Oi(O.max,d,p.coords))||sc;m.options={endOnly:O.endOnly,inner:ce({},En.noInner),outer:ce({},En.noOuter)},E.top?(m.options.inner.top=k.bottom-G.height,m.options.outer.top=k.bottom-Z.height):E.bottom&&(m.options.inner.bottom=k.top+G.height,m.options.outer.bottom=k.top+Z.height),E.left?(m.options.inner.left=k.right-G.width,m.options.outer.left=k.right-Z.width):E.right&&(m.options.inner.right=k.left+G.width,m.options.outer.right=k.left+Z.width),En.set(p),m.options=O}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),lc={start:function(p){var d,m=p.interaction,k=p.interactable,E=p.element,O=p.rect,G=p.state,Z=p.startOffset,le=G.options,ke=le.offsetWithOrigin?function(Ge){var qe=Ge.interaction.element,Xe=ft(He(Ge.state.options.origin,null,null,[qe])),ot=Xe||Fe(Ge.interactable,qe,Ge.interaction.prepared.name);return ot}(p):{x:0,y:0};if(le.offset==="startCoords")d={x:m.coords.start.page.x,y:m.coords.start.page.y};else{var pe=He(le.offset,k,E,[m]);(d=ft(pe)||{x:0,y:0}).x+=ke.x,d.y+=ke.y}var Re=le.relativePoints;G.offsets=O&&Re&&Re.length?Re.map(function(Ge,qe){return{index:qe,relativePoint:Ge,x:Z.left-O.width*Ge.x+d.x,y:Z.top-O.height*Ge.y+d.y}}):[{index:0,relativePoint:null,x:d.x,y:d.y}]},set:function(p){var d=p.interaction,m=p.coords,k=p.state,E=k.options,O=k.offsets,G=Fe(d.interactable,d.element,d.prepared.name),Z=ce({},m),le=[];E.offsetWithOrigin||(Z.x-=G.x,Z.y-=G.y);for(var ke=0,pe=O;ke<pe.length;ke++)for(var Re=pe[ke],Ge=Z.x-Re.x,qe=Z.y-Re.y,Xe=0,ot=E.targets.length;Xe<ot;Xe++){var yt=E.targets[Xe],mt=void 0;(mt=S.func(yt)?yt(Ge,qe,d._proxy,Re,Xe):yt)&&le.push({x:(S.number(mt.x)?mt.x:Ge)+Re.x,y:(S.number(mt.y)?mt.y:qe)+Re.y,range:S.number(mt.range)?mt.range:E.range,source:yt,index:Xe,offset:Re})}for(var It={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},jt=0;jt<le.length;jt++){var Wt=le[jt],Lt=Wt.range,Vt=Wt.x-Z.x,$o=Wt.y-Z.y,bo=Oe(Vt,$o),er=bo<=Lt;Lt===1/0&&It.inRange&&It.range!==1/0&&(er=!1),It.target&&!(er?It.inRange&&Lt!==1/0?bo/Lt<It.distance/It.range:Lt===1/0&&It.range!==1/0||bo<It.distance:!It.inRange&&bo<It.distance)||(It.target=Wt,It.distance=bo,It.range=Lt,It.inRange=er,It.delta.x=Vt,It.delta.y=$o)}return It.inRange&&(m.x=It.target.x,m.y=It.target.y),k.closest=It,It},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Hu=bi(lc,"snap"),Da={start:function(p){var d=p.state,m=p.edges,k=d.options;if(!m)return null;p.state={options:{targets:null,relativePoints:[{x:m.left?0:1,y:m.top?0:1}],offset:k.offset||"self",origin:{x:0,y:0},range:k.range}},d.targetFields=d.targetFields||[["width","height"],["x","y"]],lc.start(p),d.offsets=p.state.offsets,p.state=d},set:function(p){var d=p.interaction,m=p.state,k=p.coords,E=m.options,O=m.offsets,G={x:k.x-O[0].x,y:k.y-O[0].y};m.options=ce({},E),m.options.targets=[];for(var Z=0,le=E.targets||[];Z<le.length;Z++){var ke=le[Z],pe=void 0;if(pe=S.func(ke)?ke(G.x,G.y,d):ke){for(var Re=0,Ge=m.targetFields;Re<Ge.length;Re++){var qe=Ge[Re],Xe=qe[0],ot=qe[1];if(Xe in pe||ot in pe){pe.x=pe[Xe],pe.y=pe[ot];break}}m.options.targets.push(pe)}}var yt=lc.set(p);return m.options=E,yt},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},_h=bi(Da,"snapSize"),Mr={aspectRatio:ws,restrictEdges:Gu,restrict:Zh,restrictRect:Wh,restrictSize:qh,snapEdges:bi({start:function(p){var d=p.edges;return d?(p.state.targetFields=p.state.targetFields||[[d.left?"left":"right",d.top?"top":"bottom"]],Da.start(p)):null},set:Da.set,defaults:ce(Ra(Da.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Hu,snapSize:_h,spring:Ss,avoid:Ss,transform:Ss,rubberband:Ss},Oa={id:"modifiers",install:function(p){var d=p.interactStatic;for(var m in p.usePlugin(Xl),p.usePlugin(ic),d.modifiers=Mr,Mr){var k=Mr[m],E=k._defaults,O=k._methods;E._methods=O,p.defaults.perAction[m]=E}}},Fi=Oa,As=function(p){u(m,p);var d=y(m);function m(k,E,O,G,Z,le){var ke;if(a(this,m),Ye(b(ke=d.call(this,Z)),O),O!==E&&Ye(b(ke),E),ke.timeStamp=le,ke.originalEvent=O,ke.type=k,ke.pointerId=xt(E),ke.pointerType=oo(E),ke.target=G,ke.currentTarget=null,k==="tap"){var pe=Z.getPointerIndex(E);ke.dt=ke.timeStamp-Z.pointers[pe].downTime;var Re=ke.timeStamp-Z.tapTime;ke.double=!!Z.prevTap&&Z.prevTap.type!=="doubletap"&&Z.prevTap.target===ke.target&&Re<500}else k==="doubletap"&&(ke.dt=E.timeStamp-Z.tapTime,ke.double=!0);return ke}return s(m,[{key:"_subtractOrigin",value:function(k){var E=k.x,O=k.y;return this.pageX-=E,this.pageY-=O,this.clientX-=E,this.clientY-=O,this}},{key:"_addOrigin",value:function(k){var E=k.x,O=k.y;return this.pageX+=E,this.pageY+=O,this.clientX+=E,this.clientY+=O,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),m}(xr),An={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(p){p.pointerEvents=An,p.defaults.actions.pointerEvents=An.defaults,ce(p.actions.phaselessTypes,An.types)},listeners:{"interactions:new":function(p){var d=p.interaction;d.prevTap=null,d.tapTime=0},"interactions:update-pointer":function(p){var d=p.down,m=p.pointerInfo;!d&&m.hold||(m.hold={duration:1/0,timeout:null})},"interactions:move":function(p,d){var m=p.interaction,k=p.pointer,E=p.event,O=p.eventTarget;p.duplicate||m.pointerIsDown&&!m.pointerWasMoved||(m.pointerIsDown&&Mn(p),Li({interaction:m,pointer:k,event:E,eventTarget:O,type:"move"},d))},"interactions:down":function(p,d){(function(m,k){for(var E=m.interaction,O=m.pointer,G=m.event,Z=m.eventTarget,le=m.pointerIndex,ke=E.pointers[le].hold,pe=re(Z),Re={interaction:E,pointer:O,event:G,eventTarget:Z,type:"hold",targets:[],path:pe,node:null},Ge=0;Ge<pe.length;Ge++){var qe=pe[Ge];Re.node=qe,k.fire("pointerEvents:collect-targets",Re)}if(Re.targets.length){for(var Xe=1/0,ot=0,yt=Re.targets;ot<yt.length;ot++){var mt=yt[ot].eventable.options.holdDuration;mt<Xe&&(Xe=mt)}ke.duration=Xe,ke.timeout=setTimeout(function(){Li({interaction:E,eventTarget:Z,pointer:O,event:G,type:"hold"},k)},Xe)}})(p,d),Li(p,d)},"interactions:up":function(p,d){Mn(p),Li(p,d),function(m,k){var E=m.interaction,O=m.pointer,G=m.event,Z=m.eventTarget;E.pointerWasMoved||Li({interaction:E,eventTarget:Z,pointer:O,event:G,type:"tap"},k)}(p,d)},"interactions:cancel":function(p,d){Mn(p),Li(p,d)}},PointerEvent:As,fire:Li,collectEventTargets:Tn,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Li(p,d){var m=p.interaction,k=p.pointer,E=p.event,O=p.eventTarget,G=p.type,Z=p.targets,le=Z===void 0?Tn(p,d):Z,ke=new As(G,k,E,O,m,d.now());d.fire("pointerEvents:new",{pointerEvent:ke});for(var pe={interaction:m,pointer:k,event:E,eventTarget:O,targets:le,type:G,pointerEvent:ke},Re=0;Re<le.length;Re++){var Ge=le[Re];for(var qe in Ge.props||{})ke[qe]=Ge.props[qe];var Xe=Fe(Ge.eventable,Ge.node);if(ke._subtractOrigin(Xe),ke.eventable=Ge.eventable,ke.currentTarget=Ge.node,Ge.eventable.fire(ke),ke._addOrigin(Xe),ke.immediatePropagationStopped||ke.propagationStopped&&Re+1<le.length&&le[Re+1].node!==ke.currentTarget)break}if(d.fire("pointerEvents:fired",pe),G==="tap"){var ot=ke.double?Li({interaction:m,pointer:k,event:E,eventTarget:O,type:"doubletap"},d):ke;m.prevTap=ot,m.tapTime=ot.timeStamp}return ke}function Tn(p,d){var m=p.interaction,k=p.pointer,E=p.event,O=p.eventTarget,G=p.type,Z=m.getPointerIndex(k),le=m.pointers[Z];if(G==="tap"&&(m.pointerWasMoved||!le||le.downTarget!==O))return[];for(var ke=re(O),pe={interaction:m,pointer:k,event:E,eventTarget:O,type:G,path:ke,targets:[],node:null},Re=0;Re<ke.length;Re++){var Ge=ke[Re];pe.node=Ge,d.fire("pointerEvents:collect-targets",pe)}return G==="hold"&&(pe.targets=pe.targets.filter(function(qe){var Xe,ot;return qe.eventable.options.holdDuration===((Xe=m.pointers[Z])==null||(ot=Xe.hold)==null?void 0:ot.duration)})),pe.targets}function Mn(p){var d=p.interaction,m=p.pointerIndex,k=d.pointers[m].hold;k&&k.timeout&&(clearTimeout(k.timeout),k.timeout=null)}var $h=Object.freeze({__proto__:null,default:An});function eg(p){var d=p.interaction;d.holdIntervalHandle&&(clearInterval(d.holdIntervalHandle),d.holdIntervalHandle=null)}var tg={id:"pointer-events/holdRepeat",install:function(p){p.usePlugin(An);var d=p.pointerEvents;d.defaults.holdRepeatInterval=0,d.types.holdrepeat=p.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(p,d){return p["pointerEvents:".concat(d)]=eg,p},{"pointerEvents:new":function(p){var d=p.pointerEvent;d.type==="hold"&&(d.count=(d.count||0)+1)},"pointerEvents:fired":function(p,d){var m=p.interaction,k=p.pointerEvent,E=p.eventTarget,O=p.targets;if(k.type==="hold"&&O.length){var G=O[0].eventable.options.holdRepeatInterval;G<=0||(m.holdIntervalHandle=setTimeout(function(){d.pointerEvents.fire({interaction:m,eventTarget:E,type:"hold",pointer:k,event:k},d)},G))}}})},og=tg,zu={id:"pointer-events/interactableTargets",install:function(p){var d=p.Interactable;d.prototype.pointerEvents=function(k){return ce(this.events.options,k),this};var m=d.prototype._backCompatOption;d.prototype._backCompatOption=function(k,E){var O=m.call(this,k,E);return O===this&&(this.events.options[k]=E),O}},listeners:{"pointerEvents:collect-targets":function(p,d){var m=p.targets,k=p.node,E=p.type,O=p.eventTarget;d.interactables.forEachMatch(k,function(G){var Z=G.events,le=Z.options;Z.types[E]&&Z.types[E].length&&G.testIgnoreAllow(le,k,O)&&m.push({node:k,eventable:Z,props:{interactable:G}})})},"interactable:new":function(p){var d=p.interactable;d.events.getRect=function(m){return d.getRect(m)}},"interactable:set":function(p,d){var m=p.interactable,k=p.options;ce(m.events.options,d.pointerEvents.defaults),ce(m.events.options,k.pointerEvents||{})}}},Ts=zu,rg={id:"pointer-events",install:function(p){p.usePlugin($h),p.usePlugin(og),p.usePlugin(Ts)}},ig=rg,ag={id:"reflow",install:function(p){var d=p.Interactable;p.actions.phases.reflow=!0,d.prototype.reflow=function(m){return function(k,E,O){for(var G=k.getAllElements(),Z=O.window.Promise,le=Z?[]:null,ke=function(){var Re=G[pe],Ge=k.getRect(Re);if(!Ge)return 1;var qe,Xe=sr(O.interactions.list,function(mt){return mt.interacting()&&mt.interactable===k&&mt.element===Re&&mt.prepared.name===E.name});if(Xe)Xe.move(),le&&(qe=Xe._reflowPromise||new Z(function(mt){Xe._reflowResolve=mt}));else{var ot=ae(Ge),yt=function(mt){return{coords:mt,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:ot.x,y:ot.y},client:{x:ot.x,y:ot.y},timeStamp:O.now()});qe=function(mt,It,jt,Wt,Lt){var Vt=mt.interactions.new({pointerType:"reflow"}),$o={interaction:Vt,event:Lt,pointer:Lt,eventTarget:jt,phase:"reflow"};Vt.interactable=It,Vt.element=jt,Vt.prevEvent=Lt,Vt.updatePointer(Lt,Lt,jt,!0),Ce(Vt.coords.delta),vn(Vt.prepared,Wt),Vt._doPhase($o);var bo=mt.window,er=bo.Promise,Gr=er?new er(function(yi){Vt._reflowResolve=yi}):void 0;return Vt._reflowPromise=Gr,Vt.start(Wt,It,jt),Vt._interacting?(Vt.move($o),Vt.end(Lt)):(Vt.stop(),Vt._reflowResolve()),Vt.removePointer(Lt,Lt),Gr}(O,k,Re,E,yt)}le&&le.push(qe)},pe=0;pe<G.length&&!ke();pe++);return le&&Z.all(le).then(function(){return k})}(this,m,p)}},listeners:{"interactions:stop":function(p,d){var m=p.interaction;m.pointerType==="reflow"&&(m._reflowResolve&&m._reflowResolve(),function(k,E){k.splice(k.indexOf(E),1)}(d.interactions.list,m))}}},ng=ag;if(Wo.use(Kl),Wo.use(Bu),Wo.use(ig),Wo.use(Vh),Wo.use(Fi),Wo.use(zo),Wo.use(Gl),Wo.use(mn),Wo.use(ng),Wo.default=Wo,i(o)==="object"&&o)try{o.exports=Wo}catch{}return Wo.default=Wo,Wo})})(Bp,Bp.exports);var _N=Bp.exports;const $N=Qp(_N),eP=o=>{const r=window.innerWidth,i=window.innerHeight;$N(o).draggable({onstart:a=>{const{target:n}=a;n.style.margin="initial"},onmove:a=>{const{target:n}=a;let s=(parseFloat(n.getAttribute("data-x"))||0)+a.dx,l=(parseFloat(n.getAttribute("data-y"))||0)+a.dy;s=Math.min(r-n.offsetWidth+830-100,Math.max(-730,s)),l=Math.min(i-n.offsetHeight+630-100,Math.max(-530,l)),n.style.transform=`translate(${s}px, ${l}px)`,n.setAttribute("data-x",s),n.setAttribute("data-y",l)}}).resizable({edges:{top:!0,left:!0,bottom:!0,right:!0},listeners:{move(a){let{x:n,y:s}=a.target.dataset;n=(parseFloat(n)||0)+a.deltaRect.left,s=(parseFloat(s)||0)+a.deltaRect.top;const l=Math.max(830,a.rect.width),u=Math.max(630,a.rect.height);Object.assign(a.target.style,{width:`${l}px`,height:`${u}px`,transform:`translate(${n}px, ${s}px)`}),Object.assign(a.target.dataset,{x:n,y:s}),fe.emit(We.ROOM_CONTAINER_RESIZE)}}}).styleCursor(!0)},tP={zh:"zh-CN",en:"en-US"},oP=o=>{const e=tP[o];e&&fe.setLanguage(e)},[rP]=dh.split(".").map(Number),iP=rP,aP=o=>{var e;try{const t=(e=o==null?void 0:o.payload)==null?void 0:e.data;return t?JSON.parse(t):{}}catch(t){return console.warn("parseMessageData error:",t),{}}};var nP=Object.defineProperty,sP=(o,e,t)=>e in o?nP(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ji=(o,e,t)=>sP(o,typeof e!="symbol"?e+"":e,t);const lP="https://qcloudimg.tencent-cloud.cn/raw/6a075bead54faca9ca378f4d89c62fae.png",cP=()=>({roomId:String(Math.ceil(Math.random()*1e6)),roomMode:"FreeToSpeak",roomParam:{isOpenCamera:!0,isOpenMicrophone:!0}}),M3=class ca{constructor(){ji(this,"message",{}),ji(this,"messagePayload",{}),ji(this,"chatContext",{chat:{},SDKAppID:0,userID:"",userSig:""}),ji(this,"myProfile",{}),ji(this,"customMessages",{}),ji(this,"isInit",!1),ji(this,"chatExtensionSetting",{C2C:!0,GROUP:!0,customerService:!1,room:!1}),ji(this,"service"),ji(this,"language","zh"),ca.instance=this,this.initEventCtx()}setActiveMeetingMessage(e,t){this.message=e,this.messagePayload=t}static getInstance(){return ca.instance||(ca.instance=new ca),ca.instance}static destroyInstance(){ca.instance&&(ca.instance.reset(),ca.instance=void 0)}_bind(e){this.service=e,this.init()}init(){Do.registerExtension(gt.TUIChat.EXTENSION.INPUT_MORE.EXT_ID,this),Do.registerEvent(gt.TUILogin.EVENT.LOGIN_STATE_CHANGED,gt.TUILogin.EVENT_SUB_KEY.USER_LOGIN_SUCCESS,this),Do.registerEvent(gt.TUITranslate.EVENT.LANGUAGE_CHANGED,gt.TUITranslate.EVENT_SUB_KEY.CHANGE_SUCCESS,this)}reset(){Do.unregisterExtension(gt.TUIChat.EXTENSION.INPUT_MORE.EXT_ID,this),Do.unregisterEvent(gt.TUILogin.EVENT.LOGIN_STATE_CHANGED,gt.TUILogin.EVENT_SUB_KEY.USER_LOGIN_SUCCESS,this),Do.unregisterEvent(gt.TUITranslate.EVENT.LANGUAGE_CHANGED,gt.TUITranslate.EVENT_SUB_KEY.CHANGE_SUCCESS,this),this.unBindRoomServiceEvent(),this.unBindRoomEngineEvent(),this.isInit=!1}setHistoryMeetingMessageList(e,t){const{ID:r,messageData:i}=t;i.roomState!=="destroyed"&&(e==="add"?this.customMessages[r]=t.messageData:delete this.customMessages[r])}setChatExtension(e,t){this.chatExtensionSetting[e]=t}initEventCtx(){this.onRoomDestroy=this.onRoomDestroy.bind(this),this.onRemoteUserEnterRoom=this.onRemoteUserEnterRoom.bind(this),this.onRemoteUserLeaveRoom=this.onRemoteUserLeaveRoom.bind(this),this.onUserInfoChanged=this.onUserInfoChanged.bind(this)}bindRoomServiceEvent(){var e;(e=this.service)==null||e.on(We.ROOM_DISMISS,this.onRoomDestroy)}bindRoomEngineEvent(){var e,t,r;(e=ro.instance)==null||e.on(_e.onRemoteUserEnterRoom,this.onRemoteUserEnterRoom),(t=ro.instance)==null||t.on(_e.onRemoteUserLeaveRoom,this.onRemoteUserLeaveRoom),(r=ro.instance)==null||r.on(_e.onUserInfoChanged,this.onUserInfoChanged)}unBindRoomServiceEvent(){var e;(e=this.service)==null||e.off(We.ROOM_DISMISS,this.onRoomDestroy)}unBindRoomEngineEvent(){var e,t,r;(e=ro.instance)==null||e.off(_e.onRemoteUserEnterRoom,this.onRemoteUserEnterRoom),(t=ro.instance)==null||t.off(_e.onRemoteUserLeaveRoom,this.onRemoteUserLeaveRoom),(r=ro.instance)==null||r.off(_e.onUserInfoChanged,this.onUserInfoChanged)}onRemoteUserEnterRoom({userInfo:e}){var t;const{userID:r}=this.chatContext;if(((t=this.messagePayload)==null?void 0:t.owner)!==r)return;const{userList:i}=this.messagePayload,a=[...i,{faceUrl:e.avatarUrl,nickName:e.nameCard||e.userName,userId:e.userId}];this.modifyMessage(this.message.ID,{userList:a,memberCount:a.length})}onRemoteUserLeaveRoom({userInfo:e}){var t;const{userID:r}=this.chatContext;if(this.messagePayload.owner!==r)return;const{userList:i}=this.messagePayload,a=i.filter(n=>n.userId!==e.userId);this.modifyMessage((t=this.message)==null?void 0:t.ID,{userList:a,memberCount:a.length})}async onUserInfoChanged({userInfo:e}){const{userRole:t,userId:r}=e,{userID:i}=this.chatContext;if(t===Gt.kRoomOwner&&r===i){const a=await this.getUserProfile([r]),[n]=a.data,{userID:s,nick:l}=n;await this.modifyMessage(this.message.ID,{owner:s,ownerName:l})}}onRoomDestroy(){this.destroyRoom()}onGetExtension(e,t){var r;const i=t==null?void 0:t.chatType,a={weight:-1,text:((r=this.service)==null?void 0:r.t("quick conference"))||"快速会议",icon:"https://qcloudimg.tencent-cloud.cn/raw/148ab10dfe654076b41f0d0945bb82e8.png",data:{name:"quickRoom"},listener:{onClicked:n=>{this.quickRoom(n)}}};return i?this.chatExtensionSetting[i]?(this.mixinInit(i),a):[]:a}async mixinInit(e){var t;this.isInit||e!==gt.TUIChat.TYPE.ROOM&&(!dt&&eP("#roomContainer"),(t=co)==null||t.callExperimentalAPI(JSON.stringify({api:"setFramework",params:{component:"TIMRoomKit",language:`vue${iP}`}})),this.bindRoomEngineEvent(),this.bindRoomServiceEvent(),fe.basicStore.setScene("chat"),fe.componentManager.setComponentConfig({SwitchTheme:{visible:!1},Language:{visible:!1},InviteControl:{visible:!1},RoomLink:{visible:!1},UserInfo:{visible:!1}}),this.chatContext=Up.getContext(),this.myProfile=await this.getMyProfile(),this.roomInit(!0),this.isInit=!0)}setAnotherMessageRoomState(e){Object.keys(this.customMessages).forEach(t=>{const{roomState:r,isRoomCreateByMe:i,isInnerRoom:a}=this.customMessages[t];r!=="destroyed"&&i&&!a&&this.modifyMessage(t,{roomState:e}),r==="destroyed"&&this.setHistoryMeetingMessageList("delete",{ID:t,messageData:this.customMessages[t]})})}async quickRoom(e){var t,r,i,a,n;if(this.getIsMeetingInProgress()){(r=this.service)==null||r.emit(We.ROOM_NOTICE_MESSAGE_BOX,{code:-1,message:(t=this.service)==null?void 0:t.t("Currently in a meeting, please exit the current meeting before proceeding.")});return}try{this.setAnotherMessageRoomState("destroyed");const{conversationID:s,type:l}=e;this.roomInit();const{chat:u,userID:f}=this.chatContext,v=cP(),b=this.createCustomMessage({chat:u,userID:f,roomId:v.roomId,conversationID:s,conversationType:l,roomState:"creating"});this.updateMessageList(b),await((i=this.service)==null?void 0:i.start(v.roomId,{roomOptions:v})),this.message=b,this.messagePayload=this.parseMessageData(b),await this.sendMessage(b),await new Promise(y=>setTimeout(y,300)),await this.modifyMessage(b.ID,{messageId:b.ID,roomState:"created"})}catch(s){throw(n=this.service)==null||n.emit(We.ROOM_NOTICE_MESSAGE,{code:-1,type:"error",message:(a=this.service)==null?void 0:a.t("Failed to initiate meeting")}),s}}async destroyRoom(){await this.modifyMessage(this.message.ID,{roomState:"destroyed"})}async onNotifyEvent(e,t,r){if(e===gt.TUITranslate.EVENT.LANGUAGE_CHANGED&&t===gt.TUITranslate.EVENT_SUB_KEY.CHANGE_SUCCESS){const i=r==null?void 0:r.language;this.language=i,oP(i)}}async roomInit(e){var t;(t=this.service)==null||t.roomStore.reset();const{SDKAppID:r,userID:i,userSig:a}=this.chatContext,{nick:n="",avatar:s=lP}=this.myProfile;this.service&&this.service[e?"initRoomKit":"storeInit"]({sdkAppId:r,userId:i,userSig:a,userName:n,avatarUrl:s,theme:{isSupportSwitchTheme:!1}})}async enterRoom(e,t){var r,i,a;if(this.getIsMeetingInProgress()){(i=this.service)==null||i.emit(We.ROOM_NOTICE_MESSAGE_BOX,{code:-1,message:(r=this.service)==null?void 0:r.t("Currently in a meeting, please exit the current meeting before proceeding.")});return}this.message=t,this.messagePayload=this.parseMessageData(t);const n={isOpenCamera:!0,isOpenMicrophone:!0};this.roomInit();try{await((a=this.service)==null?void 0:a.join(e,{roomParam:n}))}catch(s){s.code===Vo.ERR_ROOM_ID_NOT_EXIST&&this.modifyMessage(this.message.ID,{roomState:"destroyed"})}this.setAnotherMessageRoomState("destroyed")}createCustomMessage(e){const{chat:t,userID:r,conversationID:i,conversationType:a,roomState:n,roomId:s}=e;return t.createCustomMessage({to:i.slice(a.length),conversationType:a,payload:this.generatePayloadForMessage({roomId:s,userID:r,conversationID:i,roomState:n})})}async sendMessage(e){const{chat:t}=this.chatContext;return await t.sendMessage(e)}updateMessageList(e){Do.callService({serviceName:gt.TUIChat.SERVICE.NAME,method:gt.TUIChat.SERVICE.METHOD.UPDATE_MESSAGE_LIST,params:{message:e}})}async modifyMessage(e,t){const{chat:r}=this.chatContext,i=await r.findMessage(e);let a=this.parseMessageData(i);return a={...a,...t},i.payload.data=JSON.stringify(a),await r.modifyMessage(i)}generatePayloadForMessage(e){const{roomId:t,userID:r,conversationID:i,roomState:a}=e,{nick:n="",avatar:s=""}=this.myProfile;return{data:JSON.stringify({version:1,businessID:"group_room_message",groupId:i,messageId:"",roomId:t,owner:r,ownerName:n,roomState:a,memberCount:1,userList:[{faceUrl:s,nickName:n,userId:r}]})}}parseMessageData(e){return aP(e)}async getMyProfile(){const{chat:e}=this.chatContext,t=await e.getMyProfile();return(t==null?void 0:t.data)||{}}getUserProfile(e){const{chat:t}=this.chatContext;return t.getUserProfile({userIDList:e})}getIsMeetingInProgress(){var e;return!!((e=this.service)!=null&&e.basicStore.roomId)}getOnGoingRoomId(){var e;return(e=this.service)==null?void 0:e.basicStore.roomId}};ji(M3,"instance");let uP=M3;const dP=uP.getInstance();fe.useExtension(dP);function k4(o,e){return{userId:o,hasAudioStream:!1,hasVideoStream:!1,streamType:e||bt.kCameraStream,isLoading:!1,playDomMap:new Map,timestamp:Date.now()}}function Nd(o){return{userId:o,userName:"",avatarUrl:"",nameCard:"",hasAudioStream:!1,hasVideoStream:!1,hasScreenStream:!1,isMessageDisabled:!1,userRole:Gt.kGeneralUser,onSeat:!1,isUserApplyingToAnchor:!1,isInvitingUserToAnchor:!1,isInRoom:!1,status:up.kNone,timestamp:Date.now()}}function Pd(o){return o===bt.kCameraStreamLow?bt.kCameraStream:o}const ao=rv("room",{state:()=>({userInfoObj:{},streamInfoObj:{},userVolumeObj:{},currentSpeakerInfo:{speakerUserId:"",remoteSpeakerUserId:""},masterUserId:"",isMicrophoneDisableForAllUser:!1,isCameraDisableForAllUser:!1,isScreenShareDisableForAllUser:!1,isSeatEnabled:void 0,seatMode:gl.kFreeToTake,maxMembersCount:5,maxSeatCount:20,password:"",roomName:"",isOnStateTabActive:!0,isLocalUserSharing:!1,isWhiteboardVisible:!1,isSharingScreen:!1,isAnnotationVisible:!1}),getters:{localUser(o){const e=Bt();return o.userInfoObj[e.userId]||Nd(e.userId)},localStream(o){const e=Bt();if(this.isFreeSpeakMode||this.localUser.onSeat)return o.streamInfoObj[`${e.userId}_${bt.kCameraStream}`]||k4(e.userId,bt.kCameraStream)},localScreenStream(o){const e=Bt();return o.streamInfoObj[`${e.userId}_${bt.kScreenStream}`]},isMaster(o){return this.localUser.userId===o.masterUserId},isAdmin(){return this.localUser.userRole===Gt.kAdministrator},isGeneralUser(){return this.localUser.userRole===Gt.kGeneralUser},isFreeSpeakMode(){return this.isSeatEnabled===!1},isSpeakAfterTakingSeatMode(){return!!this.isSeatEnabled&&this.seatMode===gl.kApplyToTake},isAnchor(){if(this.isFreeSpeakMode)return!0;if(this.isSpeakAfterTakingSeatMode)return this.localUser.onSeat},isAudience(){if(this.isFreeSpeakMode)return!1;if(this.isSpeakAfterTakingSeatMode)return!this.localUser.onSeat},streamList(){let o=[];return this.isFreeSpeakMode?o=Object.values(this.streamInfoObj):o=Object.values(this.streamInfoObj).filter(e=>this.userInfoObj[e.userId].onSeat),o.sort(fe.userManager.getStreamListSortComparator())},remoteStreamList(){const o=Bt();return this.streamList.filter(e=>e.userId!==o.userId)},cameraStreamList(){return this.streamList.filter(o=>o.streamType===bt.kCameraStream)},remoteScreenStream(){return this.remoteStreamList.find(o=>o.streamType===bt.kScreenStream&&o.hasVideoStream)},streamNumber(){return this.streamList.length},userList(){return[...Object.values(this.userInfoObj)].sort(fe.userManager.getUserListSortComparator())},userNumber(){return this.userList.filter(o=>o.isInRoom).length},remoteUserList(){const o=Bt();return[...Object.values(this.userInfoObj)].filter(e=>e.userId!==o.userId)},remoteEnteredUserList(){return this.remoteUserList.filter(o=>o.isInRoom)},remoteNotEnteredUserList(){return this.userList.filter(o=>!o.isInRoom)},remoteAnchorList(){return this.remoteUserList.filter(o=>o.onSeat)},generalUserScreenStreamList(){return this.remoteUserList.filter(o=>o.hasScreenStream&&o.userRole===Gt.kGeneralUser)},anchorUserList(){return this.userList.filter(o=>o.onSeat)},applyToAnchorList(){return this.remoteUserList.filter(o=>o.isUserApplyingToAnchor).sort((o,e)=>((o==null?void 0:o.applyToAnchorTimestamp)||0)-((e==null?void 0:e.applyToAnchorTimestamp)||0))||[]},defaultStreamType(){return Object.values(this.streamInfoObj).filter(o=>o.hasVideoStream).length>this.maxMembersCount?bt.kCameraStreamLow:bt.kCameraStream},getDisplayName(){return o=>{const e=this.userInfoObj[o];if(e){const{nameCard:t,userName:r,userId:i}=e;return t||r||i}return o}}},actions:{getUserName(o){var e,t;return((e=this.userInfoObj[o])==null?void 0:e.nameCard)||((t=this.userInfoObj[o])==null?void 0:t.userName)||o},getUserRole(o){var e;return(e=this.userInfoObj[o])==null?void 0:e.userRole},addUserInfo(o){const{userId:e}=o;if(e)if(this.userInfoObj[e])Object.assign(this.userInfoObj[e],o);else{const t=Object.assign(Nd(e),o);Xa(this.userInfoObj,e,t)}},addRemoteUser(o){const{userId:e}=o,t=Bt();if(!(!e||e===t.userId))if(this.userInfoObj[e])Object.assign(this.userInfoObj[e],o,{isInRoom:!0});else{const r=Object.assign(Nd(e),o,{isInRoom:!0});Xa(this.userInfoObj,e,r)}},updateUserInfo(o){o.userId&&Object.assign(this.userInfoObj[o.userId],o)},removeUserInfo(o){const e=Bt();!o||o===e.userId||this.userInfoObj[o]&&e0(this.userInfoObj,o)},addStreamInfo(o,e){const t=Pd(e);if(this.streamInfoObj[`${o}_${t}`])return;const r=k4(o,t);Xa(this.streamInfoObj,`${o}_${t}`,r)},updateStreamInfo(o){const{userId:e,streamType:t}=o,r=Pd(t);this.streamInfoObj[`${e}_${r}`]&&(t!==r&&Object.assign(o,{streamType:r}),Xa(this.streamInfoObj,`${e}_${r}`,Object.assign(this.streamInfoObj[`${e}_${r}`],o)))},removeStreamInfo(o,e){const t=Pd(e);this.streamInfoObj[`${o}_${t}`]&&e0(this.streamInfoObj,`${o}_${t}`)},getStreamInfo(o,e){const t=Pd(e);if(this.streamInfoObj[`${o}_${t}`])return this.streamInfoObj[`${o}_${t}`]},setAudioVolume(o){const e=Bt();o.forEach(t=>{let{userId:r}=t;const{volume:i}=t;r===""&&(r=e.userId),Xa(this.userVolumeObj,r,i)})},setCurrentSpeakerInfo(o){Object.assign(this.currentSpeakerInfo,o)},setRoomInfo(o){if(!o)return;const{roomOwner:e=this.masterUserId,isMicrophoneDisableForAllUser:t=this.isMicrophoneDisableForAllUser,isCameraDisableForAllUser:r=this.isCameraDisableForAllUser,isScreenShareDisableForAllUser:i=this.isScreenShareDisableForAllUser,isSeatEnabled:a=this.isSeatEnabled,seatMode:n=this.seatMode,maxSeatCount:s=this.maxSeatCount,password:l=this.password,roomName:u=this.roomName}=o;this.localUser.userId===e&&(this.localUser.userRole=Gt.kRoomOwner),this.masterUserId=e,this.isMicrophoneDisableForAllUser=t,this.isCameraDisableForAllUser=r,this.isScreenShareDisableForAllUser=i,this.isSeatEnabled=a,this.seatMode=n,this.maxSeatCount=s,this.password=l,this.roomName=u},setDisableMicrophoneForAllUserByAdmin(o){this.isMicrophoneDisableForAllUser=o},setDisableCameraForAllUserByAdmin(o){this.isCameraDisableForAllUser=o},setDisableScreenShareForAllUserByAdmin(o){this.isScreenShareDisableForAllUser=o},setMasterUserId(o){this.masterUserId=o},setMuteUserChat(o,e){const t=this.userInfoObj[o];t&&(t.isMessageDisabled=e)},setRemoteUserRole(o,e){const t=this.userInfoObj[o];t&&(t.userRole=e)},setRequestUserOpenMic(o){const{userId:e,isRequesting:t,requestId:r}=o,i=this.userInfoObj[e];i&&(i.isRequestingUserOpenMic=t,i.requestUserOpenMicRequestId=t?r:"")},setRequestUserOpenCamera(o){const{userId:e,isRequesting:t,requestId:r}=o,i=this.userInfoObj[e];i&&(i.isRequestingUserOpenCamera=t,i.requestUserOpenCameraRequestId=t?r:"")},addApplyToAnchorUser(o){const{userId:e,requestId:t,timestamp:r}=o,i=this.userInfoObj[e];i&&(i.isUserApplyingToAnchor=!0,i.applyToAnchorRequestId=t,i.applyToAnchorTimestamp=r)},removeApplyToAnchorUser(o){const e=Object.values(this.userInfoObj).find(t=>t.isUserApplyingToAnchor&&t.applyToAnchorRequestId===o);e&&(e.isUserApplyingToAnchor=!1,e.applyToAnchorRequestId="",e.applyToAnchorTimestamp=0)},addInviteToAnchorUser(o){const{userId:e,requestId:t}=o,r=this.userInfoObj[e];r&&(r.isInvitingUserToAnchor=!0,r.inviteToAnchorRequestId=t)},removeInviteToAnchorUser(o){const e=this.userInfoObj[o];e&&(e.isInvitingUserToAnchor=!1,e.inviteToAnchorRequestId="")},setOnStageTabStatus(o){this.isOnStateTabActive=o},updateInviteeList(o){o.forEach(e=>{if(this.userInfoObj[e.userId])Object.assign(this.userInfoObj[e.userId],e);else{const t=Object.assign(Nd(e.userId),e);Xa(this.userInfoObj,e.userId,t)}})},reset(){this.resetRoomData()},resetRoomData(){this.streamInfoObj={},this.userInfoObj={},this.userVolumeObj={},this.currentSpeakerInfo={speakerUserId:"",remoteSpeakerUserId:""},this.masterUserId="",this.isMicrophoneDisableForAllUser=!1,this.isCameraDisableForAllUser=!1,this.isScreenShareDisableForAllUser=!1,this.isSeatEnabled=void 0,this.seatMode=gl.kFreeToTake,this.isOnStateTabActive=!0,this.maxSeatCount=20,this.password="",this.roomName="",this.isLocalUserSharing=!1,this.isWhiteboardVisible=!1,this.isSharingScreen=!1,this.isAnnotationVisible=!1}}});function R3(){const{t:o}=wt();let e;(te=>{te[te.BasicDialog=0]="BasicDialog",te[te.TransferDialog=1]="TransferDialog"})(e||(e={}));const t=ie(0),r="[EndControl]",i=No(),a=ie(!1),n=Bt(),s=Bl();Jt.log(`${r} basicStore:`,n);const l=ao(),{localUser:u,remoteEnteredUserList:f,applyToAnchorList:v}=Rt(l),b=ye(()=>t.value===0?o("Leave room?"):o("Select a new host")),{isSidebarOpen:y,sidebarName:w}=Rt(n),C=ye(()=>y.value&&w.value==="transfer-leave"),D=ie(""),A=ie(!1),j=ie(""),M=ye(()=>f.value.filter(te=>{var he,ue;return((he=te.nameCard)==null?void 0:he.includes(j.value))||te.userId.includes(j.value)||((ue=te.userName)==null?void 0:ue.includes(j.value))})),U=ye(()=>M.value.length===0),X=ye(()=>f.value.length===1),P=ye(()=>f.value.length>0),S=ye(()=>l.isMaster&&f.value.length===0),R=ye(()=>l.isMaster?o("EndPC"):o("Leave")),F=ye(()=>l.isMaster?S.value?o('You are currently the host of the room, please choose the corresponding operation. If you choose "End Room", the current room will be disbanded and all members will be removed.'):o('You are currently the host of the room, please choose the corresponding operation. If you choose "End Room", the current room will be disbanded and all members will be removed. If you choose "Leave Room", the current room will not be disbanded, and your hosting privileges will be transferred to other members.'):o("Are you sure you want to leave this room?"));function B(){if(n.setSidebarOpenStatus&&w.value==="transfer-leave"){n.setSidebarOpenStatus(!1),n.setSidebarName("");return}n.setSidebarOpenStatus(!0),n.setSidebarName("transfer-leave")}function Y(te){D.value=te}function V(){a.value=!1,t.value=0}function T(){a.value||(a.value=!0)}function W(){V()}function N(){var te,he;u.value.hasAudioStream&&((te=i.instance)==null||te.closeLocalMicrophone()),u.value.hasVideoStream&&((he=i.instance)==null||he.closeLocalCamera())}async function H(){var te;if(!l.isSpeakAfterTakingSeatMode)return;v.value.length>0&&v.value.forEach(ue=>{ue.applyToAnchorRequestId&&l.removeApplyToAnchorUser(ue.applyToAnchorRequestId)});const he=await((te=i.instance)==null?void 0:te.getSeatApplicationList());if(he&&he.length>0)for(const ue of he){const{userId:ee,requestId:K,timestamp:se}=ue;l.addApplyToAnchorUser({userId:ee,requestId:K,timestamp:se})}}const J=async({userInfo:te})=>{var he,ue;const{userId:ee,userRole:K}=te,se=l.localUser.userId===ee,be=l.getUserRole(ee);if(be!==K)switch(l.updateUserInfo({userId:ee,userRole:K}),K){case Gt.kGeneralUser:se&&be===Gt.kAdministrator&&Mt({type:kt.WARNING,message:o("Your administrator status has been revoked")});break;case Gt.kAdministrator:se&&(Mt({type:kt.SUCCESS,message:o("You have become a administrator")}),l.isSpeakAfterTakingSeatMode&&H());break;case Gt.kRoomOwner:{l.setMasterUserId(ee),se&&(Mt({type:kt.SUCCESS,message:`${o("You are now a room owner")}`}),l.isSpeakAfterTakingSeatMode&&(l.isAnchor||await((he=i.instance)==null?void 0:he.takeSeat({seatIndex:-1,timeout:0})),H()),s.isMessageDisabled&&((ue=i.instance)==null||ue.disableSendingMessageByAdmin({userId:ee,isDisable:!1})));break}}};co.once("ready",()=>{var te;(te=i.instance)==null||te.on(_e.onUserInfoChanged,J)});const $=()=>{const{userRole:te}=fe.roomStore.localUser;(te===Gt.kRoomOwner||te===Gt.kAdministrator)&&H()};return fe.lifeCycleManager.on("mount",$),io(()=>{var te;(te=i.instance)==null||te.off(_e.onUserInfoChanged,J),fe.lifeCycleManager.off("mount",$)}),{t:o,basicStore:n,roomStore:l,roomEngine:i,localUser:u,stopMeeting:T,cancel:W,selectedUser:D,showEndButtonContent:R,DialogType:e,showEndDialogContent:F,logPrefix:r,title:b,currentDialogType:t,visible:a,closeMediaBeforeLeave:N,resetState:V,searchName:j,hasNoData:U,handleShowMemberControl:Y,filteredList:M,toggleMangeMemberSidebar:B,showTransfer:A,sidebarName:w,showSideBar:C,isMasterWithOneRemoteUser:X,isMasterWithRemoteUser:P,remoteEnteredUserList:f}}const pP={class:"popup-container"},hP={class:"popup-main-header"},gP={class:"icon-container"},fP={class:"sidebar-title"},mP={class:"popup-main-content"},vP={class:"popup-main-footer"},bP=me({__name:"PopUpH5",props:{title:{}},setup(o){const e=Bt();function t(){e.setSidebarOpenStatus(!1),e.setSidebarName("")}return(r,i)=>(x(),z("div",pP,[g("div",hP,[at((x(),z("span",gP,[Q(c(_0),{size:"10",class:"close-icon"})])),[[c(Xt),t]]),g("span",fP,q(r.title),1)]),g("div",mP,[qt(r.$slots,"sidebarContent",{},void 0,!0)]),g("div",vP,[qt(r.$slots,"sidebarFooter",{},void 0,!0)])]))}}),D3=Je(bP,[["__scopeId","data-v-e30852ce"]]),yP={class:"end-control-container"},kP={class:"end-button",tabindex:"1"},xP={class:"end-button-title"},wP={key:0,class:"end-main-content"},CP={class:"end-dialog-dismiss"},SP={key:0},IP={key:0,class:"end-dialog-header"},EP={key:0,class:"end-dialog-text"},AP={key:1},TP={key:1,class:"dialog-middle-content"},MP={key:2},RP={style:{height:"100%"}},DP={class:"transfer-list-container"},OP={class:"transfer-header"},FP={class:"search-container"},LP=["placeholder"],UP={class:"transfer-body"},BP=["onClick"],jP={class:"member-basic-info"},NP={class:"user-name"},PP={key:0,class:"member-has-no-data"},VP={class:"transfer-button"},GP=me({__name:"EndControlH5",setup(o){const{t:e,roomStore:t,roomEngine:r,stopMeeting:i,cancel:a,DialogType:n,logPrefix:s,currentDialogType:l,visible:u,resetState:f,toggleMangeMemberSidebar:v,searchName:b,hasNoData:y,handleShowMemberControl:w,filteredList:C,selectedUser:D,showSideBar:A,remoteEnteredUserList:j,isMasterWithOneRemoteUser:M,isMasterWithRemoteUser:U}=R3();function X(){i()}function P(){if(!t.isMaster||t.isMaster&&j.value.length===0){R();return}if(U.value){if(D.value=j.value[0].userId,M.value){F();return}l.value=n.TransferDialog,v(),f();return}}async function S(){try{Jt.log(`${s}dismissRoom: enter`),f(),await fe.dismissRoom()}catch(B){Jt.error(`${s}dismissRoom error:`,B)}}async function R(){try{f(),await fe.leaveRoom()}catch(B){Jt.error(`${s}leaveRoom error:`,B)}}async function F(){var B;if(D.value)try{const Y=D.value,V=await((B=r.instance)==null?void 0:B.changeUserRole({userId:Y,userRole:Gt.kRoomOwner}));Jt.log(`${s}transferAndLeave:`,V),f(),await fe.leaveRoom()}catch(Y){Jt.error(`${s}transferAndLeave error:`,Y)}}return(B,Y)=>(x(),z("div",null,[g("div",yP,[at((x(),z("div",kP,[Q(c(aF),{size:"20"}),g("span",xP,q(c(e)("EndH5")),1)])),[[c(Xt),X]])]),c(u)?(x(),z("div",wP,[g("div",CP,[c(l)===c(n).BasicDialog?(x(),z("div",SP,[c(t).isMaster?(x(),z("div",IP,[c(t).isMaster?(x(),z("span",EP,q(c(e)("If you do not want to end the meeting, please designate a new host before leaving the meeting.")),1)):(x(),z("span",AP,q(c(e)("Are you sure you want to leave this room?")),1))])):Ie("",!0)])):Ie("",!0),c(l)===c(n).BasicDialog?(x(),z("div",TP,[c(t).isMaster?(x(),z("span",{key:0,class:"end-button-dismiss",onClick:qo(S,["stop"])},q(c(e)("Dismiss")),1)):Ie("",!0),at((x(),z("span",{class:Ze(c(t).isMaster?"end-button-leave":"end-button-leave-single")},[et(q(c(e)("Leave")),1)],2)),[[c(Xt),P]]),g("span",{class:"end-button-cancel",onClick:Y[0]||(Y[0]=qo((...V)=>c(a)&&c(a)(...V),["stop"]))},q(c(e)("Cancel")),1)])):Ie("",!0),c(l)===c(n).TransferDialog?(x(),z("div",MP,[g("span",{class:"end-button-cancel",onClick:Y[1]||(Y[1]=qo((...V)=>c(a)&&c(a)(...V),["stop"]))},q(c(e)("Cancel")),1)])):Ie("",!0)])])):Ie("",!0),at(Q(D3,{title:c(e)("Appoint a new host"),class:"transfer-container"},{sidebarContent:ne(()=>[g("div",RP,[g("div",DP,[g("div",OP,[g("div",FP,[Q(c(ev),{size:"20"}),at(g("input",{"onUpdate:modelValue":Y[2]||(Y[2]=V=>Yt(b)?b.value=V:null),type:"text",class:"searching-input",placeholder:c(e)("Search for conference attendees"),enterkeyhint:"done"},null,8,LP),[[Wi,c(b)]])])]),g("div",UP,[(x(!0),z(st,null,St(c(C),V=>(x(),z("div",{key:V.userId,class:"transfer-list-content",onClick:T=>c(w)(V.userId)},[g("div",jP,[Q(Er,{class:"avatar-url","img-src":V.avatarUrl},null,8,["img-src"]),g("div",NP,q(c(fe).getDisplayName(V)),1),c(D)===V.userId?(x(),ve(c($O),{key:0,class:"correct"})):Ie("",!0)])],8,BP))),128)),c(y)?(x(),z("div",PP,q(c(e)("No relevant user found.")),1)):Ie("",!0)])])])]),sidebarFooter:ne(()=>[g("div",{class:"transfer-leave",onClick:F},[g("span",VP,q(c(e)("Transfer and leave")),1)])]),_:1},8,["title"]),[[eo,c(A)]])]))}}),HP=Je(GP,[["__scopeId","data-v-a2704fcc"]]),Vd=new Map,pi={mounted(o,e){const t=i=>{o.contains(i.target)||e.value&&typeof e.value=="function"&&e.value(i)};Vd.has(o)||Vd.set(o,[]),Vd.get(o).push(t),document.addEventListener("click",t),document.addEventListener("touchend",t)},unmounted(o){Vd.get(o).forEach(t=>{document.removeEventListener("click",t),document.addEventListener("touchend",t)})}},zP=me({__name:"SelectPC",props:{modelValue:{type:[String,Number,Boolean,Object]},disabled:{type:Boolean},theme:{},customSelectContentStyle:{type:[Boolean,null,String,Object,Array]}},emits:["update:modelValue","change"],setup(o,{emit:e}){const{nextZIndex:t}=jl(),r=o,i=e,a=ie(!1),n=ie(new Map),s=ye(()=>Array.from(n.value.values())),l=ie(""),u=ie(),f=ie(),v=ie("down");$e(()=>r.modelValue,U=>{n.value.get(U)&&(l.value=n.value.get(r.modelValue).label)},{immediate:!0}),$e(s,()=>{n.value.get(r.modelValue)&&(l.value=n.value.get(r.modelValue).label)});const b=ie({});function y(U){n.value.set(U.value,U)}function w(U){n.value.delete(U)}function C(U){a.value=!1,i("update:modelValue",U.value),i("change",U.value)}const D=ye(()=>r.modelValue);as("select",Br({selectedValue:D,optionObj:n,optionDataList:s,onOptionCreated:y,onOptionDestroyed:w,onOptionSelected:C}));function A(){r.disabled||(a.value?a.value=!1:(j(),b.value={zIndex:t()},a.value=!0,n.value.get(r.modelValue).ref.scrollIntoView({block:"center"})))}function j(){var U;const{top:X,bottom:P}=u.value.getBoundingClientRect()||{},S=fe.getRoomContainer(),R=S instanceof HTMLElement?S.offsetHeight-P:-1;let F=0;a.value?F=(U=f.value)==null?void 0:U.offsetHeight:(f.value.style="display:block;position:absolute;z-index:-1000",F=f.value.offsetHeight,f.value.style=""),R<X&&R<F&&(v.value="up")}function M(){a.value&&(a.value=!1)}return(U,X)=>at((x(),z("div",{ref_key:"selectContainerRef",ref:u,class:"select-container"},[g("div",{class:Ze(["select-content",{disabled:U.disabled}]),onClick:A},[U.$slots.customSelectContent?qt(U.$slots,"customSelectContent",{key:0},void 0,!0):(x(),z("span",{key:1,class:"select-text",style:uo(r.customSelectContentStyle)},q(l.value||D.value),5)),Q(c(fh),{size:"12",class:Ze(["arrow-icon",{reverse:a.value}])},null,8,["class"])],2),Q(ph,{name:"select-fade"},{default:ne(()=>[at(g("div",{ref_key:"selectDropDownRef",ref:f,style:uo(b.value),class:Ze(["select-dropdown-container",v.value])},[qt(U.$slots,"default",{},void 0,!0)],6),[[eo,a.value]])]),_:3})])),[[c(pi),M]])}}),YP=Je(zP,[["__scopeId","data-v-f799ad33"]]),QP={class:"mask"},JP={key:0,class:"container-close"},KP={key:1,class:"container-header"},ZP=me({__name:"ActionSheep",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},showClose:{type:Boolean,default:!0},showMask:{type:Boolean,default:!0},height:{type:String,default:""}},emits:["input","close"],setup(o,{emit:e}){const t=o,r=e,i=ie(!1);$e(()=>t.visible,n=>i.value=n,{immediate:!0}),$e(i,n=>{r("input",n)},{immediate:!0});const a=()=>{i.value=!i.value,i.value||r("close")};return(n,s)=>{const l=N0("TUIIcon");return x(),z("div",null,[at(g("div",QP,null,512),[[eo,i.value&&o.showMask],[c(Xt),a]]),at(g("div",{class:"container",style:uo({height:t.height})},[o.showClose?at((x(),z("div",JP,[Q(l,{icon:c(m6),size:"28"},null,8,["icon"])])),[[c(Xt),a]]):Ie("",!0),o.title?(x(),z("div",KP,q(o.title),1)):Ie("",!0),qt(n.$slots,"default",{},void 0,!0)],4),[[eo,i.value]])])}}}),jp=Je(ZP,[["__scopeId","data-v-9303b85d"]]),XP={class:"label"},WP={class:"custom-option-container"},qP={__name:"SelectH5",props:{value:{type:[String,Number,Date]}},emits:["change","input"],setup(o,{emit:e}){const t=o,r=e,i=ie(""),a=ie(),n=ie([]),s=ie(!1),l=async()=>{s.value=!s.value,await Io(),s.value&&(await Io(),await a.value.scrollIntoView({block:"center"}))},u=y=>{r("change",y),r("input",y)},f=y=>{const w=n.value.findIndex(D=>D.value===y),C=n.value[w];C&&C.label!==i.value&&(i.value=C.label,a.value=C.ref)},v=y=>{const w=n.value.findIndex(C=>C.value===y.value);if(w>=0){n.value[w]=y,f(t.value);return}n.value.push(y),f(t.value)},b=y=>{f(y),u(y),l()};return as("TSelect",{value:t.value,label:i,addOption:v,handleOptionClick:b}),$e(()=>t.value,(y,w)=>{y!==w&&f(y)},{immediate:!0}),(y,w)=>(x(),z("div",null,[g("div",uh({class:"custom-select",onChange:w[0]||(w[0]=C=>u(C.target.value)),onClick:l},y.$attrs),[g("span",XP,q(i.value||t.value),1),Q(c(fh),{size:"12"})],16),Q(jp,{visible:s.value,onInput:w[1]||(w[1]=C=>s.value=C)},{default:ne(()=>[g("div",WP,[qt(y.$slots,"default",{},void 0,!0)])]),_:3},8,["visible"])]))}},_P=Je(qP,[["__scopeId","data-v-dd236b6e"]]),hi=dt?_P:YP,$P=me({__name:"OptionPC",props:{label:{},value:{type:[String,Number,Boolean,Object]},customOptionContentStyle:{type:[Boolean,null,String,Object,Array]}},setup(o){const e=ie(null),t=o,r=Lr("select"),i=ye(()=>r&&r.selectedValue===t.value),a=ye(()=>({label:t.label,value:t.value,ref:e}));Kt(()=>{r==null||r.onOptionCreated(a.value)}),di(()=>{r==null||r.onOptionDestroyed(t.value)}),$e(()=>[t.value,t.label],(s,l)=>{JSON.stringify(s)!==JSON.stringify(l)&&(r==null||r.onOptionDestroyed(l),r==null||r.onOptionCreated(a.value))});function n(){r==null||r.onOptionSelected(a.value)}return(s,l)=>(x(),z("div",{ref_key:"optionRef",ref:e,class:Ze(["option-container",{active:i.value}]),onClick:n},[s.$slots.customOptionContent?qt(s.$slots,"customOptionContent",{key:0},void 0,!0):(x(),z("span",{key:1,style:uo(t.customOptionContentStyle),class:"option-content"},q(s.label||s.value),5))],2))}}),eV=Je($P,[["__scopeId","data-v-0777a593"]]),tV=["value","disabled"],oV=me({__name:"OptionH5",props:{label:{type:String,required:!0},value:{required:!0,type:[String,Number]},disabled:{type:Boolean,default:!1}},setup(o){const e=ie(),t=Lr("TSelect"),r=o,i=ye(()=>t&&t.label.value===r.label);$e(()=>r.label,n=>{t.addOption({label:r.label,value:r.value,ref:e})}),Kt(()=>{t.addOption({label:r.label,value:r.value,ref:e})});const a=()=>{r.disabled||t.handleOptionClick(r.value)};return(n,s)=>(x(),z("span",uh({class:["custom-option",i.value&&"active"],value:r.value,disabled:o.disabled,onClick:a,ref_key:"optionRef",ref:e},n.$attrs),q(r.label),17,tV))}}),rV=Je(oV,[["__scopeId","data-v-6eac7a5d"]]),gi=dt?rV:eV,iV={class:"end-control-container"},aV={key:0},nV={key:1},sV={key:0},lV={key:1},cV=me({__name:"EndControlPC",setup(o){const{t:e,roomStore:t,roomEngine:r,stopMeeting:i,cancel:a,selectedUser:n,DialogType:s,showEndDialogContent:l,logPrefix:u,title:f,showEndButtonContent:v,currentDialogType:b,visible:y,resetState:w,isMasterWithOneRemoteUser:C,isMasterWithRemoteUser:D,remoteEnteredUserList:A}=R3();function j(){i()}function M(){if(!t.isMaster||t.isMaster&&A.value.length===0){X();return}if(D.value){if(n.value=A.value[0].userId,C.value){P();return}b.value=s.TransferDialog}}async function U(){try{Jt.log(`${u}dismissRoom: enter`),w(),await fe.dismissRoom()}catch(S){Jt.error(`${u}dismissRoom error:`,S)}}async function X(){try{w(),await fe.leaveRoom()}catch(S){Jt.error(`${u}leaveRoom error:`,S)}}async function P(){var S;if(n.value)try{const R=n.value,F=await((S=r.instance)==null?void 0:S.changeUserRole({userId:R,userRole:Gt.kRoomOwner}));Jt.log(`${u}transferAndLeave:`,F),w(),await fe.leaveRoom()}catch(R){Jt.error(`${u}transferAndLeave error:`,R)}}return(S,R)=>(x(),z("div",iV,[Q(c(pt),{color:"red",size:"large",onClick:j},{default:ne(()=>[et(q(c(v)),1)]),_:1}),Q(c(jo),{modelValue:c(y),"onUpdate:modelValue":R[1]||(R[1]=F=>Yt(y)?y.value=F:null),title:c(f),modal:!0,width:"480px","before-close":c(a),"close-on-click-modal":!0,"append-to-room-container":!0},{footer:ne(()=>[c(b)===c(s).BasicDialog?(x(),z("div",sV,[c(t).isMaster?(x(),ve(c(pt),{key:0,onClick:U,type:"primary",style:{"min-width":"88px"}},{default:ne(()=>[et(q(c(e)("Dismiss")),1)]),_:1})):Ie("",!0),Q(c(pt),{onClick:M,type:"primary",style:{"min-width":"88px"}},{default:ne(()=>[et(q(c(e)("Leave")),1)]),_:1}),Q(c(pt),{onClick:c(a),style:{"min-width":"88px"}},{default:ne(()=>[et(q(c(e)("Cancel")),1)]),_:1},8,["onClick"])])):Ie("",!0),c(b)===c(s).TransferDialog?(x(),z("div",lV,[Q(c(pt),{onClick:P,type:"primary",style:{"min-width":"88px"}},{default:ne(()=>[et(q(c(e)("Transfer and leave")),1)]),_:1}),Q(c(pt),{onClick:c(a),style:{"min-width":"88px"}},{default:ne(()=>[et(q(c(e)("Cancel")),1)]),_:1},8,["onClick"])])):Ie("",!0)]),default:ne(()=>[c(b)===c(s).BasicDialog?(x(),z("div",aV,[g("span",null,q(c(l)),1)])):Ie("",!0),c(b)===c(s).TransferDialog?(x(),z("div",nV,[g("div",null,q(c(e)("New host")),1),g("div",null,[Q(c(hi),{modelValue:c(n),"onUpdate:modelValue":R[0]||(R[0]=F=>Yt(n)?n.value=F:null),teleported:!1,"popper-append-to-body":!1},{default:ne(()=>[(x(!0),z(st,null,St(c(A),F=>(x(),ve(c(gi),{key:F.userId,value:F.userId,label:F.nameCard||F.userName},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])])):Ie("",!0)]),_:1},8,["modelValue","title","before-close"])]))}}),O3=dt?HP:cV,uV={class:"camera-icon"},dV=me({__name:"SwitchCamera",setup(o){const{isFrontCamera:e,camera:t}=Aa();async function r(){t.switchCamera({isFrontCamera:!e.value})}return(i,a)=>(x(),z("div",uV,[at(Q(c(QO),{size:"20"},null,512),[[c(Xt),r]])]))}}),pV=Je(dV,[["__scopeId","data-v-8a66df16"]]),hV={class:"mirror-icon"},gV=me({__name:"SwitchMirror",setup(o){const{isLocalMirror:e,camera:t}=Aa();async function r(){await t.switchMirror({mirror:!e.value})}return(i,a)=>(x(),z("div",hV,[at(Q(c(bF),{"custom-style":{backgroundSize:"50%"}},null,512),[[c(Xt),r]])]))}}),fV=Je(gV,[["__scopeId","data-v-b7bb0784"]]),mV={class:"audio-route-icon"},vV=me({__name:"SwitchAudioRoute",setup(o){const{currentAudioRoute:e,speaker:t}=ns(),r=ye(()=>e.value===Pc.kAudioRouteSpeakerphone?UF:eF);async function i(){const a=e.value===Pc.kAudioRouteSpeakerphone?Pc.kAudioRouteEarpiece:Pc.kAudioRouteSpeakerphone;await t.setAudioRoute({route:a})}return(a,n)=>(x(),z("div",mV,[at(Q(c(Qe),{icon:r.value,size:"20"},null,8,["icon"]),[[c(Xt),i]])]))}}),bV=Je(vV,[["__scopeId","data-v-76295590"]]),dv=o=>new Promise(async(e,t)=>{if(!ho){const r=o.toString();try{await navigator.clipboard.writeText(`${o}`),e({code:0,data:o})}catch{try{yV(r),e({code:0,data:o})}catch(a){t({code:-1,err:a})}}return}uni.setClipboardData({data:o,success(){uni.getClipboardData({success(r){e({code:0,data:r})},fail(r){t({code:-1,err:r})}})},fail(r){t({code:-1,err:r})}})});function yV(o){try{const e=document.createElement("input");e.id="copy-input",e.readOnly=!0,e.style.position="absolute",e.style.left="-1000px",e.style.zIndex="-1000",document.body.appendChild(e),e.value=o,kV(e,0,o.length),document.execCommand("copy")&&document.execCommand("copy"),e.blur()}catch{}}function kV(o,e,t){if(o.createTextRange){const r=o.createTextRange();r.collapse(!0),r.moveStart("character",e),r.moveEnd("character",t-e),r.select()}else o.setSelectionRange(e,t),o.focus()}function pv(){const{t:o}=wt(),e=Bt(),t=fe.getComponentConfig("RoomLink"),r=ao(),{remoteEnteredUserList:i,roomName:a,isSeatEnabled:n,password:s}=Rt(r),{roomId:l,shareLink:u,isRoomLinkVisible:f,isSchemeLinkVisible:v,userId:b,userName:y,sidebarName:w}=Rt(e),{origin:C,pathname:D}=location||{},A=ie(!1),j=ie(!1),M=ye(()=>{if(u.value){const N=u.value.indexOf("?")!==-1?"&":"?";return`${u.value}${N}roomId=${l.value}`}return`${C}${D}#/home?roomId=${l.value}`}),U=ye(()=>`tuiroom://joinroom?roomId=${l.value}`),X=ye(()=>f.value?o("You can share the room number or link to invite more people to join the room."):o("You can share the room number to invite more people to join the room")),P=ye(()=>!!(s!=null&&s.value)),S=ie([{icon:qa(y6),text:"addMember",function:async()=>{R.value=await fe.scheduleConferenceManager.fetchFriendList(),A.value=!0}},{icon:qa(OF),text:"shareRoom",function:()=>{j.value=!0}}]),R=ie([]);async function F(N){try{await dv(N),Mt({message:o("Copied successfully"),type:kt.SUCCESS})}catch{Mt({message:o("Copied failure"),type:kt.ERROR})}}const B=ye(()=>[{title:"Room Name",content:a.value,isShowCopyIcon:!1,isVisible:!0},{title:"Room Type",content:`${o(V(!!n.value))}`,isShowCopyIcon:!1,isVisible:!0},{title:"Room ID",content:l.value,isShowCopyIcon:!0,isVisible:!0},{title:"Room Password",content:s==null?void 0:s.value,isShowCopyIcon:!0,isVisible:P.value},{title:"Room Link",content:es(l.value),isShowCopyIcon:!0,isVisible:f.value&&t.visible},{title:"Scheme",content:U.value,isShowCopyIcon:!0,isVisible:v.value}]),Y=ye(()=>B.value.filter(N=>N.isVisible));function V(N){return N?"On-stage Speaking Room":"Free Speech Room"}function T(){const N=[a.value,`${o("Room Type")}: ${o(V(!!n.value))}`,`${o("Room ID")}: ${l.value}`];P.value&&N.push(`${o("Room Password")}: ${s==null?void 0:s.value}`),f.value&&t.visible&&N.push(`${o("Room Link")}: ${es(l.value)}`),v.value&&N.push(`${o("Scheme")}: ${U.value}`);const H=N.join(`
